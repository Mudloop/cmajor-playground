var X=function(d,w,f,x){var P=arguments.length,$=P<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,f):x,W;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")$=Reflect.decorate(d,w,f,x);else for(var y=d.length-1;y>=0;y--)if(W=d[y])$=(P<3?W($):P>3?W(w,f,$):W(w,f))||$;return P>3&&$&&Object.defineProperty(w,f,$),$};var T=globalThis,b=T.ShadowRoot&&(T.ShadyCSS===void 0||T.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,L=Symbol(),c=new WeakMap;class N{constructor(d,w,f){if(this._$cssResult$=!0,f!==L)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=d,this.t=w}get styleSheet(){let d=this.o;const w=this.t;if(b&&d===void 0){const f=w!==void 0&&w.length===1;f&&(d=c.get(w)),d===void 0&&((this.o=d=new CSSStyleSheet).replaceSync(this.cssText),f&&c.set(w,d))}return d}toString(){return this.cssText}}var r=(d)=>new N(typeof d=="string"?d:d+"",void 0,L),E=(d,...w)=>{const f=d.length===1?d[0]:w.reduce((x,P,$)=>x+((W)=>{if(W._$cssResult$===!0)return W.cssText;if(typeof W=="number")return W;throw Error("Value passed to 'css' function must be a 'css' function result: "+W+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(P)+d[$+1],d[0]);return new N(f,d,L)},p=(d,w)=>{if(b)d.adoptedStyleSheets=w.map((f)=>f instanceof CSSStyleSheet?f:f.styleSheet);else for(let f of w){const x=document.createElement("style"),P=T.litNonce;P!==void 0&&x.setAttribute("nonce",P),x.textContent=f.cssText,d.appendChild(x)}},C=b?(d)=>d:(d)=>d instanceof CSSStyleSheet?((w)=>{let f="";for(let x of w.cssRules)f+=x.cssText;return r(f)})(d):d;var{is:Fd,defineProperty:Gd,getOwnPropertyDescriptor:Jd,getOwnPropertyNames:Od,getOwnPropertySymbols:Qd,getPrototypeOf:Vd}=Object,h=globalThis,e=h.trustedTypes,Xd=e?e.emptyScript:"",Yd=h.reactiveElementPolyfillSupport,o=(d,w)=>d,_={toAttribute(d,w){switch(w){case Boolean:d=d?Xd:null;break;case Object:case Array:d=d==null?d:JSON.stringify(d)}return d},fromAttribute(d,w){let f=d;switch(w){case Boolean:f=d!==null;break;case Number:f=d===null?null:Number(d);break;case Object:case Array:try{f=JSON.parse(d)}catch(x){f=null}}return f}},U=(d,w)=>!Fd(d,w),i={attribute:!0,type:String,converter:_,reflect:!1,hasChanged:U};Symbol.metadata??=Symbol("metadata"),h.litPropertyMetadata??=new WeakMap;class A extends HTMLElement{static addInitializer(d){this._$Ei(),(this.l??=[]).push(d)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(d,w=i){if(w.state&&(w.attribute=!1),this._$Ei(),this.elementProperties.set(d,w),!w.noAccessor){const f=Symbol(),x=this.getPropertyDescriptor(d,f,w);x!==void 0&&Gd(this.prototype,d,x)}}static getPropertyDescriptor(d,w,f){const{get:x,set:P}=Jd(this.prototype,d)??{get(){return this[w]},set($){this[w]=$}};return{get(){return x?.call(this)},set($){const W=x?.call(this);P.call(this,$),this.requestUpdate(d,W,f)},configurable:!0,enumerable:!0}}static getPropertyOptions(d){return this.elementProperties.get(d)??i}static _$Ei(){if(this.hasOwnProperty(o("elementProperties")))return;const d=Vd(this);d.finalize(),d.l!==void 0&&(this.l=[...d.l]),this.elementProperties=new Map(d.elementProperties)}static finalize(){if(this.hasOwnProperty(o("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(o("properties"))){const w=this.properties,f=[...Od(w),...Qd(w)];for(let x of f)this.createProperty(x,w[x])}const d=this[Symbol.metadata];if(d!==null){const w=litPropertyMetadata.get(d);if(w!==void 0)for(let[f,x]of w)this.elementProperties.set(f,x)}this._$Eh=new Map;for(let[w,f]of this.elementProperties){const x=this._$Eu(w,f);x!==void 0&&this._$Eh.set(x,w)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(d){const w=[];if(Array.isArray(d)){const f=new Set(d.flat(1/0).reverse());for(let x of f)w.unshift(C(x))}else d!==void 0&&w.push(C(d));return w}static _$Eu(d,w){const f=w.attribute;return f===!1?void 0:typeof f=="string"?f:typeof d=="string"?d.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((d)=>this.enableUpdating=d),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((d)=>d(this))}addController(d){(this._$EO??=new Set).add(d),this.renderRoot!==void 0&&this.isConnected&&d.hostConnected?.()}removeController(d){this._$EO?.delete(d)}_$E_(){const d=new Map,w=this.constructor.elementProperties;for(let f of w.keys())this.hasOwnProperty(f)&&(d.set(f,this[f]),delete this[f]);d.size>0&&(this._$Ep=d)}createRenderRoot(){const d=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return p(d,this.constructor.elementStyles),d}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((d)=>d.hostConnected?.())}enableUpdating(d){}disconnectedCallback(){this._$EO?.forEach((d)=>d.hostDisconnected?.())}attributeChangedCallback(d,w,f){this._$AK(d,f)}_$EC(d,w){const f=this.constructor.elementProperties.get(d),x=this.constructor._$Eu(d,f);if(x!==void 0&&f.reflect===!0){const P=(f.converter?.toAttribute!==void 0?f.converter:_).toAttribute(w,f.type);this._$Em=d,P==null?this.removeAttribute(x):this.setAttribute(x,P),this._$Em=null}}_$AK(d,w){const f=this.constructor,x=f._$Eh.get(d);if(x!==void 0&&this._$Em!==x){const P=f.getPropertyOptions(x),$=typeof P.converter=="function"?{fromAttribute:P.converter}:P.converter?.fromAttribute!==void 0?P.converter:_;this._$Em=x,this[x]=$.fromAttribute(w,P.type),this._$Em=null}}requestUpdate(d,w,f){if(d!==void 0){if(f??=this.constructor.getPropertyOptions(d),!(f.hasChanged??U)(this[d],w))return;this.P(d,w,f)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(d,w,f){this._$AL.has(d)||this._$AL.set(d,w),f.reflect===!0&&this._$Em!==d&&(this._$Ej??=new Set).add(d)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(w){Promise.reject(w)}const d=this.scheduleUpdate();return d!=null&&await d,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[x,P]of this._$Ep)this[x]=P;this._$Ep=void 0}const f=this.constructor.elementProperties;if(f.size>0)for(let[x,P]of f)P.wrapped!==!0||this._$AL.has(x)||this[x]===void 0||this.P(x,this[x],P)}let d=!1;const w=this._$AL;try{d=this.shouldUpdate(w),d?(this.willUpdate(w),this._$EO?.forEach((f)=>f.hostUpdate?.()),this.update(w)):this._$EU()}catch(f){throw d=!1,this._$EU(),f}d&&this._$AE(w)}willUpdate(d){}_$AE(d){this._$EO?.forEach((w)=>w.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(d)),this.updated(d)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(d){return!0}update(d){this._$Ej&&=this._$Ej.forEach((w)=>this._$EC(w,this[w])),this._$EU()}updated(d){}firstUpdated(d){}}A.elementStyles=[],A.shadowRootOptions={mode:"open"},A[o("elementProperties")]=new Map,A[o("finalized")]=new Map,Yd?.({ReactiveElement:A}),(h.reactiveElementVersions??=[]).push("2.0.4");function yd(d,w){if(!R(d)||!d.hasOwnProperty("raw"))throw Error("invalid template strings array");return s!==void 0?s.createHTML(w):w}function Y(d,w,f=d,x){if(w===Q)return w;let P=x!==void 0?f._$Co?.[x]:f._$Cl;const $=v(w)?void 0:w._$litDirective$;return P?.constructor!==$&&(P?._$AO?.(!1),$===void 0?P=void 0:(P=new $(d),P._$AT(d,f,x)),x!==void 0?(f._$Co??=[])[x]=P:f._$Cl=P),P!==void 0&&(w=Y(d,P._$AS(d,w.values),P,x)),w}var u=globalThis,m=u.trustedTypes,s=m?m.createPolicy("lit-html",{createHTML:(d)=>d}):void 0;var D=`lit\$${Math.random().toFixed(9).slice(2)}\$`,Pd="?"+D,Zd=`<${Pd}>`,O=document,q=()=>O.createComment(""),v=(d)=>d===null||typeof d!="object"&&typeof d!="function",R=Array.isArray,od=(d)=>R(d)||typeof d?.[Symbol.iterator]=="function";var k=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,t=/-->/g,dd=/>/g,G=RegExp(`>|[ \t\n\f\r](?:([^\\s"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|\$)`,"g"),wd=/'/g,fd=/"/g,Wd=/^(?:script|style|textarea|title)$/i,j=(d)=>(w,...f)=>({_$litType$:d,strings:w,values:f}),$d=j(1),Nd=j(2),Cd=j(3),Q=Symbol.for("lit-noChange"),a=Symbol.for("lit-nothing"),xd=new WeakMap,J=O.createTreeWalker(O,129),_d=(d,w)=>{const f=d.length-1,x=[];let P,$=w===2?"<svg>":w===3?"<math>":"",W=k;for(let y=0;y<f;y++){const K=d[y];let S,B,g=-1,l=0;for(;l<K.length&&(W.lastIndex=l,B=W.exec(K),B!==null);)l=W.lastIndex,W===k?B[1]==="!--"?W=t:B[1]!==void 0?W=dd:B[2]!==void 0?(Wd.test(B[2])&&(P=RegExp("</"+B[2],"g")),W=G):B[3]!==void 0&&(W=G):W===G?B[0]===">"?(W=P??k,g=-1):B[1]===void 0?g=-2:(g=W.lastIndex-B[2].length,S=B[1],W=B[3]===void 0?G:B[3]==='"'?fd:wd):W===fd||W===wd?W=G:W===t||W===dd?W=k:(W=G,P=void 0);const F=W===G&&d[y+1].startsWith("/>")?" ":"";$+=W===k?K+Zd:g>=0?(x.push(S),K.slice(0,g)+"$lit$"+K.slice(g)+D+F):K+D+(g===-2?y:F)}return[yd(d,$+(d[f]||"<?>")+(w===2?"</svg>":w===3?"</math>":"")),x]};class z{constructor({strings:d,_$litType$:w},f){let x;this.parts=[];let P=0,$=0;const W=d.length-1,y=this.parts,[K,S]=_d(d,w);if(this.el=z.createElement(K,f),J.currentNode=this.el.content,w===2||w===3){const B=this.el.content.firstChild;B.replaceWith(...B.childNodes)}for(;(x=J.nextNode())!==null&&y.length<W;){if(x.nodeType===1){if(x.hasAttributes())for(let B of x.getAttributeNames())if(B.endsWith("$lit$")){const g=S[$++],l=x.getAttribute(B).split(D),F=/([.?@])?(.*)/.exec(g);y.push({type:1,index:P,name:F[2],strings:l,ctor:F[1]==="."?Kd:F[1]==="?"?ad:F[1]==="@"?gd:I}),x.removeAttribute(B)}else B.startsWith(D)&&(y.push({type:6,index:P}),x.removeAttribute(B));if(Wd.test(x.tagName)){const B=x.textContent.split(D),g=B.length-1;if(g>0){x.textContent=m?m.emptyScript:"";for(let l=0;l<g;l++)x.append(B[l],q()),J.nextNode(),y.push({type:2,index:++P});x.append(B[g],q())}}}else if(x.nodeType===8)if(x.data===Pd)y.push({type:2,index:P});else{let B=-1;for(;(B=x.data.indexOf(D,B+1))!==-1;)y.push({type:7,index:P}),B+=D.length-1}P++}}static createElement(d,w){const f=O.createElement("template");return f.innerHTML=d,f}}class Bd{constructor(d,w){this._$AV=[],this._$AN=void 0,this._$AD=d,this._$AM=w}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(d){const{el:{content:w},parts:f}=this._$AD,x=(d?.creationScope??O).importNode(w,!0);J.currentNode=x;let P=J.nextNode(),$=0,W=0,y=f[0];for(;y!==void 0;){if($===y.index){let K;y.type===2?K=new H(P,P.nextSibling,this,d):y.type===1?K=new y.ctor(P,y.name,y.strings,this,d):y.type===6&&(K=new ld(P,this,d)),this._$AV.push(K),y=f[++W]}$!==y?.index&&(P=J.nextNode(),$++)}return J.currentNode=O,x}p(d){let w=0;for(let f of this._$AV)f!==void 0&&(f.strings!==void 0?(f._$AI(d,f,w),w+=f.strings.length-2):f._$AI(d[w])),w++}}class H{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(d,w,f,x){this.type=2,this._$AH=a,this._$AN=void 0,this._$AA=d,this._$AB=w,this._$AM=f,this.options=x,this._$Cv=x?.isConnected??!0}get parentNode(){let d=this._$AA.parentNode;const w=this._$AM;return w!==void 0&&d?.nodeType===11&&(d=w.parentNode),d}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(d,w=this){d=Y(this,d,w),v(d)?d===a||d==null||d===""?(this._$AH!==a&&this._$AR(),this._$AH=a):d!==this._$AH&&d!==Q&&this._(d):d._$litType$!==void 0?this.$(d):d.nodeType!==void 0?this.T(d):od(d)?this.k(d):this._(d)}O(d){return this._$AA.parentNode.insertBefore(d,this._$AB)}T(d){this._$AH!==d&&(this._$AR(),this._$AH=this.O(d))}_(d){this._$AH!==a&&v(this._$AH)?this._$AA.nextSibling.data=d:this.T(O.createTextNode(d)),this._$AH=d}$(d){const{values:w,_$litType$:f}=d,x=typeof f=="number"?this._$AC(d):(f.el===void 0&&(f.el=z.createElement(yd(f.h,f.h[0]),this.options)),f);if(this._$AH?._$AD===x)this._$AH.p(w);else{const P=new Bd(x,this),$=P.u(this.options);P.p(w),this.T($),this._$AH=P}}_$AC(d){let w=xd.get(d.strings);return w===void 0&&xd.set(d.strings,w=new z(d)),w}k(d){R(this._$AH)||(this._$AH=[],this._$AR());const w=this._$AH;let f,x=0;for(let P of d)x===w.length?w.push(f=new H(this.O(q()),this.O(q()),this,this.options)):f=w[x],f._$AI(P),x++;x<w.length&&(this._$AR(f&&f._$AB.nextSibling,x),w.length=x)}_$AR(d=this._$AA.nextSibling,w){for(this._$AP?.(!1,!0,w);d&&d!==this._$AB;){const f=d.nextSibling;d.remove(),d=f}}setConnected(d){this._$AM===void 0&&(this._$Cv=d,this._$AP?.(d))}}class I{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(d,w,f,x,P){this.type=1,this._$AH=a,this._$AN=void 0,this.element=d,this.name=w,this._$AM=x,this.options=P,f.length>2||f[0]!==""||f[1]!==""?(this._$AH=Array(f.length-1).fill(new String),this.strings=f):this._$AH=a}_$AI(d,w=this,f,x){const P=this.strings;let $=!1;if(P===void 0)d=Y(this,d,w,0),$=!v(d)||d!==this._$AH&&d!==Q,$&&(this._$AH=d);else{const W=d;let y,K;for(d=P[0],y=0;y<P.length-1;y++)K=Y(this,W[f+y],w,y),K===Q&&(K=this._$AH[y]),$||=!v(K)||K!==this._$AH[y],K===a?d=a:d!==a&&(d+=(K??"")+P[y+1]),this._$AH[y]=K}$&&!x&&this.j(d)}j(d){d===a?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,d??"")}}class Kd extends I{constructor(){super(...arguments),this.type=3}j(d){this.element[this.name]=d===a?void 0:d}}class ad extends I{constructor(){super(...arguments),this.type=4}j(d){this.element.toggleAttribute(this.name,!!d&&d!==a)}}class gd extends I{constructor(d,w,f,x,P){super(d,w,f,x,P),this.type=5}_$AI(d,w=this){if((d=Y(this,d,w,0)??a)===Q)return;const f=this._$AH,x=d===a&&f!==a||d.capture!==f.capture||d.once!==f.once||d.passive!==f.passive,P=d!==a&&(f===a||x);x&&this.element.removeEventListener(this.name,this,f),P&&this.element.addEventListener(this.name,this,d),this._$AH=d}handleEvent(d){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,d):this._$AH.handleEvent(d)}}class ld{constructor(d,w,f){this.element=d,this.type=6,this._$AN=void 0,this._$AM=w,this.options=f}get _$AU(){return this._$AM._$AU}_$AI(d){Y(this,d)}}var kd=u.litHtmlPolyfillSupport;kd?.(z,H),(u.litHtmlVersions??=[]).push("3.2.1");var Ad=(d,w,f)=>{const x=f?.renderBefore??w;let P=x._$litPart$;if(P===void 0){const $=f?.renderBefore??null;x._$litPart$=P=new H(w.insertBefore(q(),$),$,void 0,f??{})}return P._$AI(d),P};class V extends A{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const d=super.createRenderRoot();return this.renderOptions.renderBefore??=d.firstChild,d}update(d){const w=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(d),this._$Do=Ad(w,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Q}}V._$litElement$=!0,V.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:V});var qd=globalThis.litElementPolyfillSupport;qd?.({LitElement:V});(globalThis.litElementVersions??=[]).push("4.1.1");var Dd=(d)=>(w,f)=>{f!==void 0?f.addInitializer(()=>{customElements.define(d,w)}):customElements.define(d,w)};function Z(d){return(w,f)=>typeof f=="object"?zd(d,w,f):((x,P,$)=>{const W=P.hasOwnProperty($);return P.constructor.createProperty($,W?{...x,wrapped:!0}:x),W?Object.getOwnPropertyDescriptor(P,$):void 0})(d,w,f)}var vd={attribute:!0,type:String,converter:_,reflect:!1,hasChanged:U},zd=(d=vd,w,f)=>{const{kind:x,metadata:P}=f;let $=globalThis.litPropertyMetadata.get(P);if($===void 0&&globalThis.litPropertyMetadata.set(P,$=new Map),$.set(f.name,d),x==="accessor"){const{name:W}=f;return{set(y){const K=w.get.call(this);w.set.call(this,y),this.requestUpdate(W,K,d)},init(y){return y!==void 0&&this.P(W,void 0,d),y}}}if(x==="setter"){const{name:W}=f;return function(y){const K=this[W];w.call(this,y),this.requestUpdate(W,K,d)}}throw Error("Unsupported decorator location: "+x)};class n extends V{constructor(){super(...arguments);this.hideProjectPanel=!0;this.hideKeyboard=!1;this.previewMode=!1}static styles=E`
		:host {
			display: flex;
			flex-direction: column;
			width: 100%;
			height: 100%;
		}
		iframe {
			border: 0;
			
			flex: 1;
		}
		dialog:not([enlarged]) iframe {
			border-radius: 12px;
		}
		dialog:not([enlarged]) {
			position: relative;
		}
		dialog {
			margin: 0;
			padding: 0;
			background-color: transparent;
			border: none;
			outline: none !important;
			width: 100%;
			height: 100%;
			display: flex;
			max-width: 100%;
			max-height: 100%;
		}
	`;render=()=>$d`
		<dialog open>
			<iframe src="./?hide-project-panel=${this.hideProjectPanel}${this.demo?`&demo=${this.demo}`:""}&hide-keyboard=${this.hideKeyboard}&preview-mode=${this.previewMode}"></iframe>
		</dialog>
	`;firstUpdated(d){super.firstUpdated(d);const w=this.shadowRoot.querySelector("iframe"),f=this.shadowRoot.querySelector("dialog");w.contentWindow?.addEventListener("message",(x)=>{switch(x.data.type){case"enlarge":if(f.hasAttribute("enlarged"))return;f.close(),f.showModal(),f.setAttribute("enlarged",""),setTimeout(()=>{f.onclose=()=>{w.contentWindow?.postMessage({type:"shrunken"},"*"),f.onclose=null}},10),w.contentWindow?.postMessage({type:"enlarged"},"*");break;case"shrink":f.removeAttribute("enlarged"),f.close(),f.show();break}})}}X([Z({type:String})],n.prototype,"demo",void 0),X([Z({type:Boolean,attribute:"hide-project-panel"})],n.prototype,"hideProjectPanel",void 0),X([Z({type:Boolean,attribute:"hide-keyboard"})],n.prototype,"hideKeyboard",void 0),X([Z({type:Boolean,attribute:"preview-mode"})],n.prototype,"previewMode",void 0),n=X([Dd("cmaj-embedder")],n);export{n as CmajEmbedder};

//# debugId=67949215A747FA8564756E2164756E21
//# sourceMappingURL=embedder.js.map
