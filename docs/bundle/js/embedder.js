var p=function(d,w,f,x){var g=arguments.length,A=g<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,f):x,W;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")A=Reflect.decorate(d,w,f,x);else for(var G=d.length-1;G>=0;G--)if(W=d[G])A=(g<3?W(A):g>3?W(w,f,A):W(w,f))||A;return g>3&&A&&Object.defineProperty(w,f,A),A};var y=globalThis,v=y.ShadowRoot&&(y.ShadyCSS===void 0||y.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,M=Symbol(),n=new WeakMap;class N{constructor(d,w,f){if(this._$cssResult$=!0,f!==M)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=d,this.t=w}get styleSheet(){let d=this.o;const w=this.t;if(v&&d===void 0){const f=w!==void 0&&w.length===1;f&&(d=n.get(w)),d===void 0&&((this.o=d=new CSSStyleSheet).replaceSync(this.cssText),f&&n.set(w,d))}return d}toString(){return this.cssText}}var c=(d)=>new N(typeof d=="string"?d:d+"",void 0,M),L=(d,...w)=>{const f=d.length===1?d[0]:w.reduce((x,g,A)=>x+((W)=>{if(W._$cssResult$===!0)return W.cssText;if(typeof W=="number")return W;throw Error("Value passed to 'css' function must be a 'css' function result: "+W+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(g)+d[A+1],d[0]);return new N(f,d,M)},E=(d,w)=>{if(v)d.adoptedStyleSheets=w.map((f)=>f instanceof CSSStyleSheet?f:f.styleSheet);else for(let f of w){const x=document.createElement("style"),g=y.litNonce;g!==void 0&&x.setAttribute("nonce",g),x.textContent=f.cssText,d.appendChild(x)}},C=v?(d)=>d:(d)=>d instanceof CSSStyleSheet?((w)=>{let f="";for(let x of w.cssRules)f+=x.cssText;return c(f)})(d):d;var{is:Qd,defineProperty:Vd,getOwnPropertyDescriptor:Xd,getOwnPropertyNames:Yd,getOwnPropertySymbols:Bd,getPrototypeOf:Zd}=Object,b=globalThis,r=b.trustedTypes,ld=r?r.emptyScript:"",_d=b.reactiveElementPolyfillSupport,$=(d,w)=>d,a={toAttribute(d,w){switch(w){case Boolean:d=d?ld:null;break;case Object:case Array:d=d==null?d:JSON.stringify(d)}return d},fromAttribute(d,w){let f=d;switch(w){case Boolean:f=d!==null;break;case Number:f=d===null?null:Number(d);break;case Object:case Array:try{f=JSON.parse(d)}catch(x){f=null}}return f}},m=(d,w)=>!Qd(d,w),e={attribute:!0,type:String,converter:a,reflect:!1,hasChanged:m};Symbol.metadata??=Symbol("metadata"),b.litPropertyMetadata??=new WeakMap;class P extends HTMLElement{static addInitializer(d){this._$Ei(),(this.l??=[]).push(d)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(d,w=e){if(w.state&&(w.attribute=!1),this._$Ei(),this.elementProperties.set(d,w),!w.noAccessor){const f=Symbol(),x=this.getPropertyDescriptor(d,f,w);x!==void 0&&Vd(this.prototype,d,x)}}static getPropertyDescriptor(d,w,f){const{get:x,set:g}=Xd(this.prototype,d)??{get(){return this[w]},set(A){this[w]=A}};return{get(){return x?.call(this)},set(A){const W=x?.call(this);g.call(this,A),this.requestUpdate(d,W,f)},configurable:!0,enumerable:!0}}static getPropertyOptions(d){return this.elementProperties.get(d)??e}static _$Ei(){if(this.hasOwnProperty($("elementProperties")))return;const d=Zd(this);d.finalize(),d.l!==void 0&&(this.l=[...d.l]),this.elementProperties=new Map(d.elementProperties)}static finalize(){if(this.hasOwnProperty($("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty($("properties"))){const w=this.properties,f=[...Yd(w),...Bd(w)];for(let x of f)this.createProperty(x,w[x])}const d=this[Symbol.metadata];if(d!==null){const w=litPropertyMetadata.get(d);if(w!==void 0)for(let[f,x]of w)this.elementProperties.set(f,x)}this._$Eh=new Map;for(let[w,f]of this.elementProperties){const x=this._$Eu(w,f);x!==void 0&&this._$Eh.set(x,w)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(d){const w=[];if(Array.isArray(d)){const f=new Set(d.flat(1/0).reverse());for(let x of f)w.unshift(C(x))}else d!==void 0&&w.push(C(d));return w}static _$Eu(d,w){const f=w.attribute;return f===!1?void 0:typeof f=="string"?f:typeof d=="string"?d.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((d)=>this.enableUpdating=d),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((d)=>d(this))}addController(d){(this._$EO??=new Set).add(d),this.renderRoot!==void 0&&this.isConnected&&d.hostConnected?.()}removeController(d){this._$EO?.delete(d)}_$E_(){const d=new Map,w=this.constructor.elementProperties;for(let f of w.keys())this.hasOwnProperty(f)&&(d.set(f,this[f]),delete this[f]);d.size>0&&(this._$Ep=d)}createRenderRoot(){const d=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return E(d,this.constructor.elementStyles),d}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((d)=>d.hostConnected?.())}enableUpdating(d){}disconnectedCallback(){this._$EO?.forEach((d)=>d.hostDisconnected?.())}attributeChangedCallback(d,w,f){this._$AK(d,f)}_$EC(d,w){const f=this.constructor.elementProperties.get(d),x=this.constructor._$Eu(d,f);if(x!==void 0&&f.reflect===!0){const g=(f.converter?.toAttribute!==void 0?f.converter:a).toAttribute(w,f.type);this._$Em=d,g==null?this.removeAttribute(x):this.setAttribute(x,g),this._$Em=null}}_$AK(d,w){const f=this.constructor,x=f._$Eh.get(d);if(x!==void 0&&this._$Em!==x){const g=f.getPropertyOptions(x),A=typeof g.converter=="function"?{fromAttribute:g.converter}:g.converter?.fromAttribute!==void 0?g.converter:a;this._$Em=x,this[x]=A.fromAttribute(w,g.type),this._$Em=null}}requestUpdate(d,w,f){if(d!==void 0){if(f??=this.constructor.getPropertyOptions(d),!(f.hasChanged??m)(this[d],w))return;this.P(d,w,f)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(d,w,f){this._$AL.has(d)||this._$AL.set(d,w),f.reflect===!0&&this._$Em!==d&&(this._$Ej??=new Set).add(d)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(w){Promise.reject(w)}const d=this.scheduleUpdate();return d!=null&&await d,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[x,g]of this._$Ep)this[x]=g;this._$Ep=void 0}const f=this.constructor.elementProperties;if(f.size>0)for(let[x,g]of f)g.wrapped!==!0||this._$AL.has(x)||this[x]===void 0||this.P(x,this[x],g)}let d=!1;const w=this._$AL;try{d=this.shouldUpdate(w),d?(this.willUpdate(w),this._$EO?.forEach((f)=>f.hostUpdate?.()),this.update(w)):this._$EU()}catch(f){throw d=!1,this._$EU(),f}d&&this._$AE(w)}willUpdate(d){}_$AE(d){this._$EO?.forEach((w)=>w.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(d)),this.updated(d)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(d){return!0}update(d){this._$Ej&&=this._$Ej.forEach((w)=>this._$EC(w,this[w])),this._$EU()}updated(d){}firstUpdated(d){}}P.elementStyles=[],P.shadowRootOptions={mode:"open"},P[$("elementProperties")]=new Map,P[$("finalized")]=new Map,_d?.({ReactiveElement:P}),(b.reactiveElementVersions??=[]).push("2.0.4");function Ad(d,w){if(!R(d)||!d.hasOwnProperty("raw"))throw Error("invalid template strings array");return i!==void 0?i.createHTML(w):w}function _(d,w,f=d,x){if(w===Z)return w;let g=x!==void 0?f._$Co?.[x]:f._$Cl;const A=H(w)?void 0:w._$litDirective$;return g?.constructor!==A&&(g?._$AO?.(!1),A===void 0?g=void 0:(g=new A(d),g._$AT(d,f,x)),x!==void 0?(f._$Co??=[])[x]=g:f._$Cl=g),g!==void 0&&(w=_(d,g._$AS(d,w.values),g,x)),w}var h=globalThis,U=h.trustedTypes,i=U?U.createPolicy("lit-html",{createHTML:(d)=>d}):void 0;var Q=`lit\$${Math.random().toFixed(9).slice(2)}\$`,xd="?"+Q,$d=`<${xd}>`,B=document,z=()=>B.createComment(""),H=(d)=>d===null||typeof d!="object"&&typeof d!="function",R=Array.isArray,qd=(d)=>R(d)||typeof d?.[Symbol.iterator]=="function";var q=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,s=/-->/g,t=/>/g,X=RegExp(`>|[ \t\n\f\r](?:([^\\s"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|\$)`,"g"),dd=/'/g,wd=/"/g,gd=/^(?:script|style|textarea|title)$/i,u=(d)=>(w,...f)=>({_$litType$:d,strings:w,values:f}),Wd=u(1),Nd=u(2),Cd=u(3),Z=Symbol.for("lit-noChange"),J=Symbol.for("lit-nothing"),fd=new WeakMap,Y=B.createTreeWalker(B,129),zd=(d,w)=>{const f=d.length-1,x=[];let g,A=w===2?"<svg>":w===3?"<math>":"",W=q;for(let G=0;G<f;G++){const F=d[G];let S,D,K=-1,O=0;for(;O<F.length&&(W.lastIndex=O,D=W.exec(F),D!==null);)O=W.lastIndex,W===q?D[1]==="!--"?W=s:D[1]!==void 0?W=t:D[2]!==void 0?(gd.test(D[2])&&(g=RegExp("</"+D[2],"g")),W=X):D[3]!==void 0&&(W=X):W===X?D[0]===">"?(W=g??q,K=-1):D[1]===void 0?K=-2:(K=W.lastIndex-D[2].length,S=D[1],W=D[3]===void 0?X:D[3]==='"'?wd:dd):W===wd||W===dd?W=X:W===s||W===t?W=q:(W=X,g=void 0);const V=W===X&&d[G+1].startsWith("/>")?" ":"";A+=W===q?F+$d:K>=0?(x.push(S),F.slice(0,K)+"$lit$"+F.slice(K)+Q+V):F+Q+(K===-2?G:V)}return[Ad(d,A+(d[f]||"<?>")+(w===2?"</svg>":w===3?"</math>":"")),x]};class I{constructor({strings:d,_$litType$:w},f){let x;this.parts=[];let g=0,A=0;const W=d.length-1,G=this.parts,[F,S]=zd(d,w);if(this.el=I.createElement(F,f),Y.currentNode=this.el.content,w===2||w===3){const D=this.el.content.firstChild;D.replaceWith(...D.childNodes)}for(;(x=Y.nextNode())!==null&&G.length<W;){if(x.nodeType===1){if(x.hasAttributes())for(let D of x.getAttributeNames())if(D.endsWith("$lit$")){const K=S[A++],O=x.getAttribute(D).split(Q),V=/([.?@])?(.*)/.exec(K);G.push({type:1,index:g,name:V[2],strings:O,ctor:V[1]==="."?Dd:V[1]==="?"?Fd:V[1]==="@"?Jd:T}),x.removeAttribute(D)}else D.startsWith(Q)&&(G.push({type:6,index:g}),x.removeAttribute(D));if(gd.test(x.tagName)){const D=x.textContent.split(Q),K=D.length-1;if(K>0){x.textContent=U?U.emptyScript:"";for(let O=0;O<K;O++)x.append(D[O],z()),Y.nextNode(),G.push({type:2,index:++g});x.append(D[K],z())}}}else if(x.nodeType===8)if(x.data===xd)G.push({type:2,index:g});else{let D=-1;for(;(D=x.data.indexOf(Q,D+1))!==-1;)G.push({type:7,index:g}),D+=Q.length-1}g++}}static createElement(d,w){const f=B.createElement("template");return f.innerHTML=d,f}}class Gd{constructor(d,w){this._$AV=[],this._$AN=void 0,this._$AD=d,this._$AM=w}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(d){const{el:{content:w},parts:f}=this._$AD,x=(d?.creationScope??B).importNode(w,!0);Y.currentNode=x;let g=Y.nextNode(),A=0,W=0,G=f[0];for(;G!==void 0;){if(A===G.index){let F;G.type===2?F=new k(g,g.nextSibling,this,d):G.type===1?F=new G.ctor(g,G.name,G.strings,this,d):G.type===6&&(F=new Kd(g,this,d)),this._$AV.push(F),G=f[++W]}A!==G?.index&&(g=Y.nextNode(),A++)}return Y.currentNode=B,x}p(d){let w=0;for(let f of this._$AV)f!==void 0&&(f.strings!==void 0?(f._$AI(d,f,w),w+=f.strings.length-2):f._$AI(d[w])),w++}}class k{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(d,w,f,x){this.type=2,this._$AH=J,this._$AN=void 0,this._$AA=d,this._$AB=w,this._$AM=f,this.options=x,this._$Cv=x?.isConnected??!0}get parentNode(){let d=this._$AA.parentNode;const w=this._$AM;return w!==void 0&&d?.nodeType===11&&(d=w.parentNode),d}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(d,w=this){d=_(this,d,w),H(d)?d===J||d==null||d===""?(this._$AH!==J&&this._$AR(),this._$AH=J):d!==this._$AH&&d!==Z&&this._(d):d._$litType$!==void 0?this.$(d):d.nodeType!==void 0?this.T(d):qd(d)?this.k(d):this._(d)}O(d){return this._$AA.parentNode.insertBefore(d,this._$AB)}T(d){this._$AH!==d&&(this._$AR(),this._$AH=this.O(d))}_(d){this._$AH!==J&&H(this._$AH)?this._$AA.nextSibling.data=d:this.T(B.createTextNode(d)),this._$AH=d}$(d){const{values:w,_$litType$:f}=d,x=typeof f=="number"?this._$AC(d):(f.el===void 0&&(f.el=I.createElement(Ad(f.h,f.h[0]),this.options)),f);if(this._$AH?._$AD===x)this._$AH.p(w);else{const g=new Gd(x,this),A=g.u(this.options);g.p(w),this.T(A),this._$AH=g}}_$AC(d){let w=fd.get(d.strings);return w===void 0&&fd.set(d.strings,w=new I(d)),w}k(d){R(this._$AH)||(this._$AH=[],this._$AR());const w=this._$AH;let f,x=0;for(let g of d)x===w.length?w.push(f=new k(this.O(z()),this.O(z()),this,this.options)):f=w[x],f._$AI(g),x++;x<w.length&&(this._$AR(f&&f._$AB.nextSibling,x),w.length=x)}_$AR(d=this._$AA.nextSibling,w){for(this._$AP?.(!1,!0,w);d&&d!==this._$AB;){const f=d.nextSibling;d.remove(),d=f}}setConnected(d){this._$AM===void 0&&(this._$Cv=d,this._$AP?.(d))}}class T{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(d,w,f,x,g){this.type=1,this._$AH=J,this._$AN=void 0,this.element=d,this.name=w,this._$AM=x,this.options=g,f.length>2||f[0]!==""||f[1]!==""?(this._$AH=Array(f.length-1).fill(new String),this.strings=f):this._$AH=J}_$AI(d,w=this,f,x){const g=this.strings;let A=!1;if(g===void 0)d=_(this,d,w,0),A=!H(d)||d!==this._$AH&&d!==Z,A&&(this._$AH=d);else{const W=d;let G,F;for(d=g[0],G=0;G<g.length-1;G++)F=_(this,W[f+G],w,G),F===Z&&(F=this._$AH[G]),A||=!H(F)||F!==this._$AH[G],F===J?d=J:d!==J&&(d+=(F??"")+g[G+1]),this._$AH[G]=F}A&&!x&&this.j(d)}j(d){d===J?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,d??"")}}class Dd extends T{constructor(){super(...arguments),this.type=3}j(d){this.element[this.name]=d===J?void 0:d}}class Fd extends T{constructor(){super(...arguments),this.type=4}j(d){this.element.toggleAttribute(this.name,!!d&&d!==J)}}class Jd extends T{constructor(d,w,f,x,g){super(d,w,f,x,g),this.type=5}_$AI(d,w=this){if((d=_(this,d,w,0)??J)===Z)return;const f=this._$AH,x=d===J&&f!==J||d.capture!==f.capture||d.once!==f.once||d.passive!==f.passive,g=d!==J&&(f===J||x);x&&this.element.removeEventListener(this.name,this,f),g&&this.element.addEventListener(this.name,this,d),this._$AH=d}handleEvent(d){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,d):this._$AH.handleEvent(d)}}class Kd{constructor(d,w,f){this.element=d,this.type=6,this._$AN=void 0,this._$AM=w,this.options=f}get _$AU(){return this._$AM._$AU}_$AI(d){_(this,d)}}var Hd=h.litHtmlPolyfillSupport;Hd?.(I,k),(h.litHtmlVersions??=[]).push("3.2.1");var Od=(d,w,f)=>{const x=f?.renderBefore??w;let g=x._$litPart$;if(g===void 0){const A=f?.renderBefore??null;x._$litPart$=g=new k(w.insertBefore(z(),A),A,void 0,f??{})}return g._$AI(d),g};class l extends P{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const d=super.createRenderRoot();return this.renderOptions.renderBefore??=d.firstChild,d}update(d){const w=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(d),this._$Do=Od(w,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Z}}l._$litElement$=!0,l.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:l});var Id=globalThis.litElementPolyfillSupport;Id?.({LitElement:l});(globalThis.litElementVersions??=[]).push("4.1.1");var Pd=(d)=>(w,f)=>{f!==void 0?f.addInitializer(()=>{customElements.define(d,w)}):customElements.define(d,w)};class j extends l{static styles=L`
		:host {
			display: flex;
			flex-direction: column;
			width: 100%;
			height: 100%;
		}
		iframe {
			border: 0;
			
			flex: 1;
		}
		dialog:not([enlarged]) iframe {
			border-radius: 12px;
		}
		dialog:not([enlarged]) {
			position: relative;
		}
		dialog {
			margin: 0;
			padding: 0;
			background-color: transparent;
			border: none;
			outline: none !important;
			width: 100%;
			height: 100%;
			display: flex;
			max-width: 100%;
			max-height: 100%;
		}
	`;render=()=>Wd`
		<dialog open>
			<iframe src="/"></iframe>
		</dialog>
	`;firstUpdated(d){super.firstUpdated(d);const w=this.shadowRoot.querySelector("iframe"),f=this.shadowRoot.querySelector("dialog");w.contentWindow?.addEventListener("message",(x)=>{switch(console.log("Got request",x.data),x.data.type){case"enlarge":if(f.hasAttribute("enlarged"))return;f.close(),f.showModal(),f.setAttribute("enlarged",""),setTimeout(()=>{f.onclose=()=>{console.log("Closing dialog"),w.contentWindow?.postMessage({type:"shrunken"},"*"),f.onclose=null}},10),w.contentWindow?.postMessage({type:"enlarged"},"*");break;case"shrink":f.removeAttribute("enlarged"),f.close(),f.show();break}})}}j=p([Pd("cmaj-embedder")],j);export{j as CmajEmbedder};

//# debugId=C11A2B8CB601DC1564756E2164756E21
//# sourceMappingURL=embedder.js.map
