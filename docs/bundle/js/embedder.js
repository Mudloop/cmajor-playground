var p=function(d,w,f,x){var W=arguments.length,D=W<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,f):x,A;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")D=Reflect.decorate(d,w,f,x);else for(var F=d.length-1;F>=0;F--)if(A=d[F])D=(W<3?A(D):W>3?A(w,f,D):A(w,f))||D;return W>3&&D&&Object.defineProperty(w,f,D),D};var y=globalThis,v=y.ShadowRoot&&(y.ShadyCSS===void 0||y.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,L=Symbol(),n=new WeakMap;class N{constructor(d,w,f){if(this._$cssResult$=!0,f!==L)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=d,this.t=w}get styleSheet(){let d=this.o;const w=this.t;if(v&&d===void 0){const f=w!==void 0&&w.length===1;f&&(d=n.get(w)),d===void 0&&((this.o=d=new CSSStyleSheet).replaceSync(this.cssText),f&&n.set(w,d))}return d}toString(){return this.cssText}}var c=(d)=>new N(typeof d=="string"?d:d+"",void 0,L),E=(d,...w)=>{const f=d.length===1?d[0]:w.reduce((x,W,D)=>x+((A)=>{if(A._$cssResult$===!0)return A.cssText;if(typeof A=="number")return A;throw Error("Value passed to 'css' function must be a 'css' function result: "+A+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(W)+d[D+1],d[0]);return new N(f,d,L)},m=(d,w)=>{if(v)d.adoptedStyleSheets=w.map((f)=>f instanceof CSSStyleSheet?f:f.styleSheet);else for(let f of w){const x=document.createElement("style"),W=y.litNonce;W!==void 0&&x.setAttribute("nonce",W),x.textContent=f.cssText,d.appendChild(x)}},C=v?(d)=>d:(d)=>d instanceof CSSStyleSheet?((w)=>{let f="";for(let x of w.cssRules)f+=x.cssText;return c(f)})(d):d;var{is:Vd,defineProperty:Xd,getOwnPropertyDescriptor:Yd,getOwnPropertyNames:gd,getOwnPropertySymbols:Bd,getPrototypeOf:Zd}=Object,b=globalThis,r=b.trustedTypes,_d=r?r.emptyScript:"",$d=b.reactiveElementPolyfillSupport,l=(d,w)=>d,a={toAttribute(d,w){switch(w){case Boolean:d=d?_d:null;break;case Object:case Array:d=d==null?d:JSON.stringify(d)}return d},fromAttribute(d,w){let f=d;switch(w){case Boolean:f=d!==null;break;case Number:f=d===null?null:Number(d);break;case Object:case Array:try{f=JSON.parse(d)}catch(x){f=null}}return f}},o=(d,w)=>!Vd(d,w),e={attribute:!0,type:String,converter:a,reflect:!1,hasChanged:o};Symbol.metadata??=Symbol("metadata"),b.litPropertyMetadata??=new WeakMap;class Q extends HTMLElement{static addInitializer(d){this._$Ei(),(this.l??=[]).push(d)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(d,w=e){if(w.state&&(w.attribute=!1),this._$Ei(),this.elementProperties.set(d,w),!w.noAccessor){const f=Symbol(),x=this.getPropertyDescriptor(d,f,w);x!==void 0&&Xd(this.prototype,d,x)}}static getPropertyDescriptor(d,w,f){const{get:x,set:W}=Yd(this.prototype,d)??{get(){return this[w]},set(D){this[w]=D}};return{get(){return x?.call(this)},set(D){const A=x?.call(this);W.call(this,D),this.requestUpdate(d,A,f)},configurable:!0,enumerable:!0}}static getPropertyOptions(d){return this.elementProperties.get(d)??e}static _$Ei(){if(this.hasOwnProperty(l("elementProperties")))return;const d=Zd(this);d.finalize(),d.l!==void 0&&(this.l=[...d.l]),this.elementProperties=new Map(d.elementProperties)}static finalize(){if(this.hasOwnProperty(l("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(l("properties"))){const w=this.properties,f=[...gd(w),...Bd(w)];for(let x of f)this.createProperty(x,w[x])}const d=this[Symbol.metadata];if(d!==null){const w=litPropertyMetadata.get(d);if(w!==void 0)for(let[f,x]of w)this.elementProperties.set(f,x)}this._$Eh=new Map;for(let[w,f]of this.elementProperties){const x=this._$Eu(w,f);x!==void 0&&this._$Eh.set(x,w)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(d){const w=[];if(Array.isArray(d)){const f=new Set(d.flat(1/0).reverse());for(let x of f)w.unshift(C(x))}else d!==void 0&&w.push(C(d));return w}static _$Eu(d,w){const f=w.attribute;return f===!1?void 0:typeof f=="string"?f:typeof d=="string"?d.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((d)=>this.enableUpdating=d),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((d)=>d(this))}addController(d){(this._$EO??=new Set).add(d),this.renderRoot!==void 0&&this.isConnected&&d.hostConnected?.()}removeController(d){this._$EO?.delete(d)}_$E_(){const d=new Map,w=this.constructor.elementProperties;for(let f of w.keys())this.hasOwnProperty(f)&&(d.set(f,this[f]),delete this[f]);d.size>0&&(this._$Ep=d)}createRenderRoot(){const d=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return m(d,this.constructor.elementStyles),d}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((d)=>d.hostConnected?.())}enableUpdating(d){}disconnectedCallback(){this._$EO?.forEach((d)=>d.hostDisconnected?.())}attributeChangedCallback(d,w,f){this._$AK(d,f)}_$EC(d,w){const f=this.constructor.elementProperties.get(d),x=this.constructor._$Eu(d,f);if(x!==void 0&&f.reflect===!0){const W=(f.converter?.toAttribute!==void 0?f.converter:a).toAttribute(w,f.type);this._$Em=d,W==null?this.removeAttribute(x):this.setAttribute(x,W),this._$Em=null}}_$AK(d,w){const f=this.constructor,x=f._$Eh.get(d);if(x!==void 0&&this._$Em!==x){const W=f.getPropertyOptions(x),D=typeof W.converter=="function"?{fromAttribute:W.converter}:W.converter?.fromAttribute!==void 0?W.converter:a;this._$Em=x,this[x]=D.fromAttribute(w,W.type),this._$Em=null}}requestUpdate(d,w,f){if(d!==void 0){if(f??=this.constructor.getPropertyOptions(d),!(f.hasChanged??o)(this[d],w))return;this.P(d,w,f)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(d,w,f){this._$AL.has(d)||this._$AL.set(d,w),f.reflect===!0&&this._$Em!==d&&(this._$Ej??=new Set).add(d)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(w){Promise.reject(w)}const d=this.scheduleUpdate();return d!=null&&await d,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[x,W]of this._$Ep)this[x]=W;this._$Ep=void 0}const f=this.constructor.elementProperties;if(f.size>0)for(let[x,W]of f)W.wrapped!==!0||this._$AL.has(x)||this[x]===void 0||this.P(x,this[x],W)}let d=!1;const w=this._$AL;try{d=this.shouldUpdate(w),d?(this.willUpdate(w),this._$EO?.forEach((f)=>f.hostUpdate?.()),this.update(w)):this._$EU()}catch(f){throw d=!1,this._$EU(),f}d&&this._$AE(w)}willUpdate(d){}_$AE(d){this._$EO?.forEach((w)=>w.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(d)),this.updated(d)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(d){return!0}update(d){this._$Ej&&=this._$Ej.forEach((w)=>this._$EC(w,this[w])),this._$EU()}updated(d){}firstUpdated(d){}}Q.elementStyles=[],Q.shadowRootOptions={mode:"open"},Q[l("elementProperties")]=new Map,Q[l("finalized")]=new Map,$d?.({ReactiveElement:Q}),(b.reactiveElementVersions??=[]).push("2.0.4");function Dd(d,w){if(!R(d)||!d.hasOwnProperty("raw"))throw Error("invalid template strings array");return i!==void 0?i.createHTML(w):w}function $(d,w,f=d,x){if(w===Z)return w;let W=x!==void 0?f._$Co?.[x]:f._$Cl;const D=z(w)?void 0:w._$litDirective$;return W?.constructor!==D&&(W?._$AO?.(!1),D===void 0?W=void 0:(W=new D(d),W._$AT(d,f,x)),x!==void 0?(f._$Co??=[])[x]=W:f._$Cl=W),W!==void 0&&(w=$(d,W._$AS(d,w.values),W,x)),w}var h=globalThis,U=h.trustedTypes,i=U?U.createPolicy("lit-html",{createHTML:(d)=>d}):void 0;var V=`lit\$${Math.random().toFixed(9).slice(2)}\$`,xd="?"+V,ld=`<${xd}>`,B=document,q=()=>B.createComment(""),z=(d)=>d===null||typeof d!="object"&&typeof d!="function",R=Array.isArray,Hd=(d)=>R(d)||typeof d?.[Symbol.iterator]=="function";var H=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,s=/-->/g,t=/>/g,Y=RegExp(`>|[ \t\n\f\r](?:([^\\s"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|\$)`,"g"),dd=/'/g,wd=/"/g,Wd=/^(?:script|style|textarea|title)$/i,u=(d)=>(w,...f)=>({_$litType$:d,strings:w,values:f}),Ad=u(1),Nd=u(2),Cd=u(3),Z=Symbol.for("lit-noChange"),K=Symbol.for("lit-nothing"),fd=new WeakMap,g=B.createTreeWalker(B,129),qd=(d,w)=>{const f=d.length-1,x=[];let W,D=w===2?"<svg>":w===3?"<math>":"",A=H;for(let F=0;F<f;F++){const J=d[F];let S,G,O=-1,P=0;for(;P<J.length&&(A.lastIndex=P,G=A.exec(J),G!==null);)P=A.lastIndex,A===H?G[1]==="!--"?A=s:G[1]!==void 0?A=t:G[2]!==void 0?(Wd.test(G[2])&&(W=RegExp("</"+G[2],"g")),A=Y):G[3]!==void 0&&(A=Y):A===Y?G[0]===">"?(A=W??H,O=-1):G[1]===void 0?O=-2:(O=A.lastIndex-G[2].length,S=G[1],A=G[3]===void 0?Y:G[3]==='"'?wd:dd):A===wd||A===dd?A=Y:A===s||A===t?A=H:(A=Y,W=void 0);const X=A===Y&&d[F+1].startsWith("/>")?" ":"";D+=A===H?J+ld:O>=0?(x.push(S),J.slice(0,O)+"$lit$"+J.slice(O)+V+X):J+V+(O===-2?F:X)}return[Dd(d,D+(d[f]||"<?>")+(w===2?"</svg>":w===3?"</math>":"")),x]};class I{constructor({strings:d,_$litType$:w},f){let x;this.parts=[];let W=0,D=0;const A=d.length-1,F=this.parts,[J,S]=qd(d,w);if(this.el=I.createElement(J,f),g.currentNode=this.el.content,w===2||w===3){const G=this.el.content.firstChild;G.replaceWith(...G.childNodes)}for(;(x=g.nextNode())!==null&&F.length<A;){if(x.nodeType===1){if(x.hasAttributes())for(let G of x.getAttributeNames())if(G.endsWith("$lit$")){const O=S[D++],P=x.getAttribute(G).split(V),X=/([.?@])?(.*)/.exec(O);F.push({type:1,index:W,name:X[2],strings:P,ctor:X[1]==="."?Gd:X[1]==="?"?Jd:X[1]==="@"?Kd:T}),x.removeAttribute(G)}else G.startsWith(V)&&(F.push({type:6,index:W}),x.removeAttribute(G));if(Wd.test(x.tagName)){const G=x.textContent.split(V),O=G.length-1;if(O>0){x.textContent=U?U.emptyScript:"";for(let P=0;P<O;P++)x.append(G[P],q()),g.nextNode(),F.push({type:2,index:++W});x.append(G[O],q())}}}else if(x.nodeType===8)if(x.data===xd)F.push({type:2,index:W});else{let G=-1;for(;(G=x.data.indexOf(V,G+1))!==-1;)F.push({type:7,index:W}),G+=V.length-1}W++}}static createElement(d,w){const f=B.createElement("template");return f.innerHTML=d,f}}class Fd{constructor(d,w){this._$AV=[],this._$AN=void 0,this._$AD=d,this._$AM=w}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(d){const{el:{content:w},parts:f}=this._$AD,x=(d?.creationScope??B).importNode(w,!0);g.currentNode=x;let W=g.nextNode(),D=0,A=0,F=f[0];for(;F!==void 0;){if(D===F.index){let J;F.type===2?J=new k(W,W.nextSibling,this,d):F.type===1?J=new F.ctor(W,F.name,F.strings,this,d):F.type===6&&(J=new Od(W,this,d)),this._$AV.push(J),F=f[++A]}D!==F?.index&&(W=g.nextNode(),D++)}return g.currentNode=B,x}p(d){let w=0;for(let f of this._$AV)f!==void 0&&(f.strings!==void 0?(f._$AI(d,f,w),w+=f.strings.length-2):f._$AI(d[w])),w++}}class k{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(d,w,f,x){this.type=2,this._$AH=K,this._$AN=void 0,this._$AA=d,this._$AB=w,this._$AM=f,this.options=x,this._$Cv=x?.isConnected??!0}get parentNode(){let d=this._$AA.parentNode;const w=this._$AM;return w!==void 0&&d?.nodeType===11&&(d=w.parentNode),d}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(d,w=this){d=$(this,d,w),z(d)?d===K||d==null||d===""?(this._$AH!==K&&this._$AR(),this._$AH=K):d!==this._$AH&&d!==Z&&this._(d):d._$litType$!==void 0?this.$(d):d.nodeType!==void 0?this.T(d):Hd(d)?this.k(d):this._(d)}O(d){return this._$AA.parentNode.insertBefore(d,this._$AB)}T(d){this._$AH!==d&&(this._$AR(),this._$AH=this.O(d))}_(d){this._$AH!==K&&z(this._$AH)?this._$AA.nextSibling.data=d:this.T(B.createTextNode(d)),this._$AH=d}$(d){const{values:w,_$litType$:f}=d,x=typeof f=="number"?this._$AC(d):(f.el===void 0&&(f.el=I.createElement(Dd(f.h,f.h[0]),this.options)),f);if(this._$AH?._$AD===x)this._$AH.p(w);else{const W=new Fd(x,this),D=W.u(this.options);W.p(w),this.T(D),this._$AH=W}}_$AC(d){let w=fd.get(d.strings);return w===void 0&&fd.set(d.strings,w=new I(d)),w}k(d){R(this._$AH)||(this._$AH=[],this._$AR());const w=this._$AH;let f,x=0;for(let W of d)x===w.length?w.push(f=new k(this.O(q()),this.O(q()),this,this.options)):f=w[x],f._$AI(W),x++;x<w.length&&(this._$AR(f&&f._$AB.nextSibling,x),w.length=x)}_$AR(d=this._$AA.nextSibling,w){for(this._$AP?.(!1,!0,w);d&&d!==this._$AB;){const f=d.nextSibling;d.remove(),d=f}}setConnected(d){this._$AM===void 0&&(this._$Cv=d,this._$AP?.(d))}}class T{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(d,w,f,x,W){this.type=1,this._$AH=K,this._$AN=void 0,this.element=d,this.name=w,this._$AM=x,this.options=W,f.length>2||f[0]!==""||f[1]!==""?(this._$AH=Array(f.length-1).fill(new String),this.strings=f):this._$AH=K}_$AI(d,w=this,f,x){const W=this.strings;let D=!1;if(W===void 0)d=$(this,d,w,0),D=!z(d)||d!==this._$AH&&d!==Z,D&&(this._$AH=d);else{const A=d;let F,J;for(d=W[0],F=0;F<W.length-1;F++)J=$(this,A[f+F],w,F),J===Z&&(J=this._$AH[F]),D||=!z(J)||J!==this._$AH[F],J===K?d=K:d!==K&&(d+=(J??"")+W[F+1]),this._$AH[F]=J}D&&!x&&this.j(d)}j(d){d===K?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,d??"")}}class Gd extends T{constructor(){super(...arguments),this.type=3}j(d){this.element[this.name]=d===K?void 0:d}}class Jd extends T{constructor(){super(...arguments),this.type=4}j(d){this.element.toggleAttribute(this.name,!!d&&d!==K)}}class Kd extends T{constructor(d,w,f,x,W){super(d,w,f,x,W),this.type=5}_$AI(d,w=this){if((d=$(this,d,w,0)??K)===Z)return;const f=this._$AH,x=d===K&&f!==K||d.capture!==f.capture||d.once!==f.once||d.passive!==f.passive,W=d!==K&&(f===K||x);x&&this.element.removeEventListener(this.name,this,f),W&&this.element.addEventListener(this.name,this,d),this._$AH=d}handleEvent(d){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,d):this._$AH.handleEvent(d)}}class Od{constructor(d,w,f){this.element=d,this.type=6,this._$AN=void 0,this._$AM=w,this.options=f}get _$AU(){return this._$AM._$AU}_$AI(d){$(this,d)}}var zd=h.litHtmlPolyfillSupport;zd?.(I,k),(h.litHtmlVersions??=[]).push("3.2.1");var Pd=(d,w,f)=>{const x=f?.renderBefore??w;let W=x._$litPart$;if(W===void 0){const D=f?.renderBefore??null;x._$litPart$=W=new k(w.insertBefore(q(),D),D,void 0,f??{})}return W._$AI(d),W};class _ extends Q{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const d=super.createRenderRoot();return this.renderOptions.renderBefore??=d.firstChild,d}update(d){const w=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(d),this._$Do=Pd(w,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Z}}_._$litElement$=!0,_.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:_});var Id=globalThis.litElementPolyfillSupport;Id?.({LitElement:_});(globalThis.litElementVersions??=[]).push("4.1.1");var Qd=(d)=>(w,f)=>{f!==void 0?f.addInitializer(()=>{customElements.define(d,w)}):customElements.define(d,w)};class j extends _{static styles=E`
		:host {
			display: flex;
			flex-direction: column;
			width: 100%;
			height: 100%;
		}
		iframe {
			border: 0;
			
			flex: 1;
		}
		dialog:not([enlarged]) iframe {
			border-radius: 12px;
		}
		dialog:not([enlarged]) {
			position: relative;
		}
		dialog {
			margin: 0;
			padding: 0;
			background-color: transparent;
			border: none;
			outline: none !important;
			width: 100%;
			height: 100%;
			display: flex;
			max-width: 100%;
			max-height: 100%;
		}
	`;render=()=>Ad`
		<dialog open>
			<iframe src="./?project-panel=false&demo=HelloWorld"></iframe>
		</dialog>
	`;firstUpdated(d){super.firstUpdated(d);const w=this.shadowRoot.querySelector("iframe"),f=this.shadowRoot.querySelector("dialog");w.contentWindow?.addEventListener("message",(x)=>{switch(x.data.type){case"enlarge":if(f.hasAttribute("enlarged"))return;f.close(),f.showModal(),f.setAttribute("enlarged",""),setTimeout(()=>{f.onclose=()=>{w.contentWindow?.postMessage({type:"shrunken"},"*"),f.onclose=null}},10),w.contentWindow?.postMessage({type:"enlarged"},"*");break;case"shrink":f.removeAttribute("enlarged"),f.close(),f.show();break}})}}j=p([Qd("cmaj-embedder")],j);export{j as CmajEmbedder};

//# debugId=43B51A9E97B5D02564756E2164756E21
//# sourceMappingURL=embedder.js.map
