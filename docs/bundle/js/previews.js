var NB=Object.create;var{getPrototypeOf:RB,defineProperty:S6,getOwnPropertyNames:BE,getOwnPropertyDescriptor:SB}=Object,aE=Object.prototype.hasOwnProperty;var sE=(A,t,j)=>{j=A!=null?NB(RB(A)):{};const k=t||!A||!A.__esModule?S6(j,"default",{value:A,enumerable:!0}):j;for(let e of BE(A))if(!aE.call(k,e))S6(k,e,{get:()=>A[e],enumerable:!0});return k},qE=new WeakMap,FE=(A)=>{var t=qE.get(A),j;if(t)return t;if(t=S6({},"__esModule",{value:!0}),A&&typeof A==="object"||typeof A==="function")BE(A).map((k)=>!aE.call(t,k)&&S6(t,k,{get:()=>A[k],enumerable:!(j=SB(A,k))||j.enumerable}));return qE.set(A,t),t},AA=(A,t)=>()=>(t||A((t={exports:{}}).exports,t),t.exports);var L7=(A,t)=>{for(var j in t)S6(A,j,{get:t[j],enumerable:!0,configurable:!0,set:(k)=>t[j]=()=>k})};var T7=function(A,t,j,k){var e=arguments.length,E=e<3?t:k===null?k=Object.getOwnPropertyDescriptor(t,j):k,r;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")E=Reflect.decorate(A,t,j,k);else for(var G=A.length-1;G>=0;G--)if(r=A[G])E=(e<3?r(E):e>3?r(t,j,E):r(t,j))||E;return e>3&&E&&Object.defineProperty(t,j,E),E};var XB=(A,t)=>()=>(A&&(t=A(A=0)),t);var $E=AA((ak,vE)=>{/*!
 * natural-sort.js
 * ===============
 * Sorting with support for numbers, dates, unicode and more.
 *
 * http://github.com/studio-b12/natural-sort
 * MIT License, Â© Studio B12 GmbH 2014
 *
 */var VB=function A(t){if(!t)t={};return function(j,k){var e=0,E=t.direction=="desc"?-1:1,r=-E,G=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,B=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,$=/^0/,d=function f(g){var P=""+g;return t.caseSensitive?P:P.toLowerCase()},h=d(j).replace(s,"")||"",x=d(k).replace(s,"")||"",o=h.replace(G,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),F=x.replace(G,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0");if(!h&&!x)return e;if(!h&&x)return E;if(h&&!x)return r;var i=parseInt(h.match(a))||o.length!=1&&h.match(B)&&Date.parse(h),n=parseInt(x.match(a))||i&&x.match(B)&&Date.parse(x)||null,m,v;if(n){if(i<n)return r;else if(i>n)return E}for(var c=0,p=Math.max(o.length,F.length);c<p;c++){if(m=!(o[c]||"").match($)&&parseFloat(o[c])||o[c]||0,v=!(F[c]||"").match($)&&parseFloat(F[c])||F[c]||0,isNaN(m)!==isNaN(v))return isNaN(m)?E:r;else if(typeof m!==typeof v)m+="",v+="";if(m<v)return r;if(m>v)return E}return e}};(function(A,t){if(typeof ak==="object")vE.exports=t();else A.naturalSort=t()})(ak,function(){return VB})});var $k={};L7($k,{default:()=>DE});var ZB,U7,YB,Aa,ja,ta,ka=(A,t)=>()=>(A&&(t=A(A=0)),t),aA=(A,t)=>()=>(t||A((t={exports:{}}).exports,t),t.exports),fE=(A,t)=>{for(var j in t)U7(A,j,{get:t[j],enumerable:!0})},C7=(A,t,j,k)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of Aa(t))!ta.call(A,e)&&e!==j&&U7(A,e,{get:()=>t[e],enumerable:!(k=YB(t,e))||k.enumerable});return A},HE=(A,t,j)=>(C7(A,t,"default"),j&&C7(j,t,"default")),z7=(A,t,j)=>(j=A!=null?ZB(ja(A)):{},C7(t||!A||!A.__esModule?U7(j,"default",{value:A,enumerable:!0}):j,A)),Xj=(A)=>C7(U7({},"__esModule",{value:!0}),A),ea,Ea,pj,gA,sj,Fk,TA,V7,xE,nj,gE,Cj,zj,Uj,Ga,o6,nk,ik,ok,la,uk,ra,qa,_E,J7,OE,Ba,Fj,KE,ME,vk,aa,bE,sa,yE,wE,DE;var mk=XB(()=>{ZB=Object.create,U7=Object.defineProperty,YB=Object.getOwnPropertyDescriptor,Aa=Object.getOwnPropertyNames,ja=Object.getPrototypeOf,ta=Object.prototype.hasOwnProperty,ea=aA((A)=>{A.byteLength=s,A.toByteArray=a,A.fromByteArray=h;var t=[],j=[],k=typeof Uint8Array<"u"?Uint8Array:Array,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(E=0,r=e.length;E<r;++E)t[E]=e[E],j[e.charCodeAt(E)]=E;var E,r;j["-".charCodeAt(0)]=62,j["_".charCodeAt(0)]=63;function G(x){var o=x.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var F=x.indexOf("=");F===-1&&(F=o);var i=F===o?0:4-F%4;return[F,i]}function s(x){var o=G(x),F=o[0],i=o[1];return(F+i)*3/4-i}function B(x,o,F){return(o+F)*3/4-F}function a(x){var o,F=G(x),i=F[0],n=F[1],m=new k(B(x,i,n)),v=0,c=n>0?i-4:i,p;for(p=0;p<c;p+=4)o=j[x.charCodeAt(p)]<<18|j[x.charCodeAt(p+1)]<<12|j[x.charCodeAt(p+2)]<<6|j[x.charCodeAt(p+3)],m[v++]=o>>16&255,m[v++]=o>>8&255,m[v++]=o&255;return n===2&&(o=j[x.charCodeAt(p)]<<2|j[x.charCodeAt(p+1)]>>4,m[v++]=o&255),n===1&&(o=j[x.charCodeAt(p)]<<10|j[x.charCodeAt(p+1)]<<4|j[x.charCodeAt(p+2)]>>2,m[v++]=o>>8&255,m[v++]=o&255),m}function $(x){return t[x>>18&63]+t[x>>12&63]+t[x>>6&63]+t[x&63]}function d(x,o,F){for(var i,n=[],m=o;m<F;m+=3)i=(x[m]<<16&16711680)+(x[m+1]<<8&65280)+(x[m+2]&255),n.push($(i));return n.join("")}function h(x){for(var o,F=x.length,i=F%3,n=[],m=16383,v=0,c=F-i;v<c;v+=m)n.push(d(x,v,v+m>c?c:v+m));return i===1?(o=x[F-1],n.push(t[o>>2]+t[o<<4&63]+"==")):i===2&&(o=(x[F-2]<<8)+x[F-1],n.push(t[o>>10]+t[o>>4&63]+t[o<<2&63]+"=")),n.join("")}}),Ea=aA((A)=>{A.read=function(t,j,k,e,E){var r,G,s=E*8-e-1,B=(1<<s)-1,a=B>>1,$=-7,d=k?E-1:0,h=k?-1:1,x=t[j+d];for(d+=h,r=x&(1<<-$)-1,x>>=-$,$+=s;$>0;r=r*256+t[j+d],d+=h,$-=8);for(G=r&(1<<-$)-1,r>>=-$,$+=e;$>0;G=G*256+t[j+d],d+=h,$-=8);if(r===0)r=1-a;else{if(r===B)return G?NaN:(x?-1:1)*(1/0);G=G+Math.pow(2,e),r=r-a}return(x?-1:1)*G*Math.pow(2,r-e)},A.write=function(t,j,k,e,E,r){var G,s,B,a=r*8-E-1,$=(1<<a)-1,d=$>>1,h=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=e?0:r-1,o=e?1:-1,F=j<0||j===0&&1/j<0?1:0;for(j=Math.abs(j),isNaN(j)||j===1/0?(s=isNaN(j)?1:0,G=$):(G=Math.floor(Math.log(j)/Math.LN2),j*(B=Math.pow(2,-G))<1&&(G--,B*=2),G+d>=1?j+=h/B:j+=h*Math.pow(2,1-d),j*B>=2&&(G++,B/=2),G+d>=$?(s=0,G=$):G+d>=1?(s=(j*B-1)*Math.pow(2,E),G=G+d):(s=j*Math.pow(2,d-1)*Math.pow(2,E),G=0));E>=8;t[k+x]=s&255,x+=o,s/=256,E-=8);for(G=G<<E|s,a+=E;a>0;t[k+x]=G&255,x+=o,G/=256,a-=8);t[k+x-o]|=F*128}}),pj=aA((A)=>{var t=ea(),j=Ea(),k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;A.Buffer=G,A.SlowBuffer=n,A.INSPECT_MAX_BYTES=50;var e=2147483647;A.kMaxLength=e,G.TYPED_ARRAY_SUPPORT=E(),!G.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{let l=new Uint8Array(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,Uint8Array.prototype),Object.setPrototypeOf(l,q),l.foo()===42}catch{return!1}}Object.defineProperty(G.prototype,"parent",{enumerable:!0,get:function(){if(G.isBuffer(this))return this.buffer}}),Object.defineProperty(G.prototype,"offset",{enumerable:!0,get:function(){if(G.isBuffer(this))return this.byteOffset}});function r(l){if(l>e)throw new RangeError('The value "'+l+'" is invalid for option "size"');let q=new Uint8Array(l);return Object.setPrototypeOf(q,G.prototype),q}function G(l,q,u){if(typeof l=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return $(l)}return s(l,q,u)}G.poolSize=8192;function s(l,q,u){if(typeof l=="string")return d(l,q);if(ArrayBuffer.isView(l))return x(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(FA(l,ArrayBuffer)||l&&FA(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(FA(l,SharedArrayBuffer)||l&&FA(l.buffer,SharedArrayBuffer)))return o(l,q,u);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let _=l.valueOf&&l.valueOf();if(_!=null&&_!==l)return G.from(_,q,u);let b=F(l);if(b)return b;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return G.from(l[Symbol.toPrimitive]("string"),q,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}G.from=function(l,q,u){return s(l,q,u)},Object.setPrototypeOf(G.prototype,Uint8Array.prototype),Object.setPrototypeOf(G,Uint8Array);function B(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function a(l,q,u){return B(l),l<=0?r(l):q!==void 0?typeof u=="string"?r(l).fill(q,u):r(l).fill(q):r(l)}G.alloc=function(l,q,u){return a(l,q,u)};function $(l){return B(l),r(l<0?0:i(l)|0)}G.allocUnsafe=function(l){return $(l)},G.allocUnsafeSlow=function(l){return $(l)};function d(l,q){if((typeof q!="string"||q==="")&&(q="utf8"),!G.isEncoding(q))throw new TypeError("Unknown encoding: "+q);let u=m(l,q)|0,_=r(u),b=_.write(l,q);return b!==u&&(_=_.slice(0,b)),_}function h(l){let q=l.length<0?0:i(l.length)|0,u=r(q);for(let _=0;_<q;_+=1)u[_]=l[_]&255;return u}function x(l){if(FA(l,Uint8Array)){let q=new Uint8Array(l);return o(q.buffer,q.byteOffset,q.byteLength)}return h(l)}function o(l,q,u){if(q<0||l.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<q+(u||0))throw new RangeError('"length" is outside of buffer bounds');let _;return q===void 0&&u===void 0?_=new Uint8Array(l):u===void 0?_=new Uint8Array(l,q):_=new Uint8Array(l,q,u),Object.setPrototypeOf(_,G.prototype),_}function F(l){if(G.isBuffer(l)){let q=i(l.length)|0,u=r(q);return u.length===0||l.copy(u,0,0,q),u}if(l.length!==void 0)return typeof l.length!="number"||LA(l.length)?r(0):h(l);if(l.type==="Buffer"&&Array.isArray(l.data))return h(l.data)}function i(l){if(l>=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return l|0}function n(l){return+l!=l&&(l=0),G.alloc(+l)}G.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==G.prototype},G.compare=function(l,q){if(FA(l,Uint8Array)&&(l=G.from(l,l.offset,l.byteLength)),FA(q,Uint8Array)&&(q=G.from(q,q.offset,q.byteLength)),!G.isBuffer(l)||!G.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===q)return 0;let u=l.length,_=q.length;for(let b=0,z=Math.min(u,_);b<z;++b)if(l[b]!==q[b]){u=l[b],_=q[b];break}return u<_?-1:_<u?1:0},G.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},G.concat=function(l,q){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return G.alloc(0);let u;if(q===void 0)for(q=0,u=0;u<l.length;++u)q+=l[u].length;let _=G.allocUnsafe(q),b=0;for(u=0;u<l.length;++u){let z=l[u];if(FA(z,Uint8Array))b+z.length>_.length?(G.isBuffer(z)||(z=G.from(z)),z.copy(_,b)):Uint8Array.prototype.set.call(_,z,b);else if(G.isBuffer(z))z.copy(_,b);else throw new TypeError('"list" argument must be an Array of Buffers');b+=z.length}return _};function m(l,q){if(G.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||FA(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);let u=l.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&u===0)return 0;let b=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return U(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return BA(l).length;default:if(b)return _?-1:U(l).length;q=(""+q).toLowerCase(),b=!0}}G.byteLength=m;function v(l,q,u){let _=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,q>>>=0,u<=q))return"";for(l||(l="utf8");;)switch(l){case"hex":return C(this,q,u);case"utf8":case"utf-8":return w(this,q,u);case"ascii":return N(this,q,u);case"latin1":case"binary":return S(this,q,u);case"base64":return K(this,q,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,q,u);default:if(_)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),_=!0}}G.prototype._isBuffer=!0;function c(l,q,u){let _=l[q];l[q]=l[u],l[u]=_}G.prototype.swap16=function(){let l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let q=0;q<l;q+=2)c(this,q,q+1);return this},G.prototype.swap32=function(){let l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let q=0;q<l;q+=4)c(this,q,q+3),c(this,q+1,q+2);return this},G.prototype.swap64=function(){let l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let q=0;q<l;q+=8)c(this,q,q+7),c(this,q+1,q+6),c(this,q+2,q+5),c(this,q+3,q+4);return this},G.prototype.toString=function(){let l=this.length;return l===0?"":arguments.length===0?w(this,0,l):v.apply(this,arguments)},G.prototype.toLocaleString=G.prototype.toString,G.prototype.equals=function(l){if(!G.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:G.compare(this,l)===0},G.prototype.inspect=function(){let l="",q=A.INSPECT_MAX_BYTES;return l=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(l+=" ... "),"<Buffer "+l+">"},k&&(G.prototype[k]=G.prototype.inspect),G.prototype.compare=function(l,q,u,_,b){if(FA(l,Uint8Array)&&(l=G.from(l,l.offset,l.byteLength)),!G.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(q===void 0&&(q=0),u===void 0&&(u=l?l.length:0),_===void 0&&(_=0),b===void 0&&(b=this.length),q<0||u>l.length||_<0||b>this.length)throw new RangeError("out of range index");if(_>=b&&q>=u)return 0;if(_>=b)return-1;if(q>=u)return 1;if(q>>>=0,u>>>=0,_>>>=0,b>>>=0,this===l)return 0;let z=b-_,J=u-q,qA=Math.min(z,J),fA=this.slice(_,b),uA=l.slice(q,u);for(let nA=0;nA<qA;++nA)if(fA[nA]!==uA[nA]){z=fA[nA],J=uA[nA];break}return z<J?-1:J<z?1:0};function p(l,q,u,_,b){if(l.length===0)return-1;if(typeof u=="string"?(_=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,LA(u)&&(u=b?0:l.length-1),u<0&&(u=l.length+u),u>=l.length){if(b)return-1;u=l.length-1}else if(u<0)if(b)u=0;else return-1;if(typeof q=="string"&&(q=G.from(q,_)),G.isBuffer(q))return q.length===0?-1:f(l,q,u,_,b);if(typeof q=="number")return q=q&255,typeof Uint8Array.prototype.indexOf=="function"?b?Uint8Array.prototype.indexOf.call(l,q,u):Uint8Array.prototype.lastIndexOf.call(l,q,u):f(l,[q],u,_,b);throw new TypeError("val must be string, number or Buffer")}function f(l,q,u,_,b){let z=1,J=l.length,qA=q.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(l.length<2||q.length<2)return-1;z=2,J/=2,qA/=2,u/=2}function fA(nA,dA){return z===1?nA[dA]:nA.readUInt16BE(dA*z)}let uA;if(b){let nA=-1;for(uA=u;uA<J;uA++)if(fA(l,uA)===fA(q,nA===-1?0:uA-nA)){if(nA===-1&&(nA=uA),uA-nA+1===qA)return nA*z}else nA!==-1&&(uA-=uA-nA),nA=-1}else for(u+qA>J&&(u=J-qA),uA=u;uA>=0;uA--){let nA=!0;for(let dA=0;dA<qA;dA++)if(fA(l,uA+dA)!==fA(q,dA)){nA=!1;break}if(nA)return uA}return-1}G.prototype.includes=function(l,q,u){return this.indexOf(l,q,u)!==-1},G.prototype.indexOf=function(l,q,u){return p(this,l,q,u,!0)},G.prototype.lastIndexOf=function(l,q,u){return p(this,l,q,u,!1)};function g(l,q,u,_){u=Number(u)||0;let b=l.length-u;_?(_=Number(_),_>b&&(_=b)):_=b;let z=q.length;_>z/2&&(_=z/2);let J;for(J=0;J<_;++J){let qA=parseInt(q.substr(J*2,2),16);if(LA(qA))return J;l[u+J]=qA}return J}function P(l,q,u,_){return lA(U(q,l.length-u),l,u,_)}function T(l,q,u,_){return lA(W(q),l,u,_)}function O(l,q,u,_){return lA(BA(q),l,u,_)}function I(l,q,u,_){return lA(Y(q,l.length-u),l,u,_)}G.prototype.write=function(l,q,u,_){if(q===void 0)_="utf8",u=this.length,q=0;else if(u===void 0&&typeof q=="string")_=q,u=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(u)?(u=u>>>0,_===void 0&&(_="utf8")):(_=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let b=this.length-q;if((u===void 0||u>b)&&(u=b),l.length>0&&(u<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");let z=!1;for(;;)switch(_){case"hex":return g(this,l,q,u);case"utf8":case"utf-8":return P(this,l,q,u);case"ascii":case"latin1":case"binary":return T(this,l,q,u);case"base64":return O(this,l,q,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,l,q,u);default:if(z)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),z=!0}},G.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(l,q,u){return q===0&&u===l.length?t.fromByteArray(l):t.fromByteArray(l.slice(q,u))}function w(l,q,u){u=Math.min(l.length,u);let _=[],b=q;for(;b<u;){let z=l[b],J=null,qA=z>239?4:z>223?3:z>191?2:1;if(b+qA<=u){let fA,uA,nA,dA;switch(qA){case 1:z<128&&(J=z);break;case 2:fA=l[b+1],(fA&192)===128&&(dA=(z&31)<<6|fA&63,dA>127&&(J=dA));break;case 3:fA=l[b+1],uA=l[b+2],(fA&192)===128&&(uA&192)===128&&(dA=(z&15)<<12|(fA&63)<<6|uA&63,dA>2047&&(dA<55296||dA>57343)&&(J=dA));break;case 4:fA=l[b+1],uA=l[b+2],nA=l[b+3],(fA&192)===128&&(uA&192)===128&&(nA&192)===128&&(dA=(z&15)<<18|(fA&63)<<12|(uA&63)<<6|nA&63,dA>65535&&dA<1114112&&(J=dA))}}J===null?(J=65533,qA=1):J>65535&&(J-=65536,_.push(J>>>10&1023|55296),J=56320|J&1023),_.push(J),b+=qA}return y(_)}var H=4096;function y(l){let q=l.length;if(q<=H)return String.fromCharCode.apply(String,l);let u="",_=0;for(;_<q;)u+=String.fromCharCode.apply(String,l.slice(_,_+=H));return u}function N(l,q,u){let _="";u=Math.min(l.length,u);for(let b=q;b<u;++b)_+=String.fromCharCode(l[b]&127);return _}function S(l,q,u){let _="";u=Math.min(l.length,u);for(let b=q;b<u;++b)_+=String.fromCharCode(l[b]);return _}function C(l,q,u){let _=l.length;(!q||q<0)&&(q=0),(!u||u<0||u>_)&&(u=_);let b="";for(let z=q;z<u;++z)b+=Bj[l[z]];return b}function R(l,q,u){let _=l.slice(q,u),b="";for(let z=0;z<_.length-1;z+=2)b+=String.fromCharCode(_[z]+_[z+1]*256);return b}G.prototype.slice=function(l,q){let u=this.length;l=~~l,q=q===void 0?u:~~q,l<0?(l+=u,l<0&&(l=0)):l>u&&(l=u),q<0?(q+=u,q<0&&(q=0)):q>u&&(q=u),q<l&&(q=l);let _=this.subarray(l,q);return Object.setPrototypeOf(_,G.prototype),_};function X(l,q,u){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+q>u)throw new RangeError("Trying to access beyond buffer length")}G.prototype.readUintLE=G.prototype.readUIntLE=function(l,q,u){l=l>>>0,q=q>>>0,u||X(l,q,this.length);let _=this[l],b=1,z=0;for(;++z<q&&(b*=256);)_+=this[l+z]*b;return _},G.prototype.readUintBE=G.prototype.readUIntBE=function(l,q,u){l=l>>>0,q=q>>>0,u||X(l,q,this.length);let _=this[l+--q],b=1;for(;q>0&&(b*=256);)_+=this[l+--q]*b;return _},G.prototype.readUint8=G.prototype.readUInt8=function(l,q){return l=l>>>0,q||X(l,1,this.length),this[l]},G.prototype.readUint16LE=G.prototype.readUInt16LE=function(l,q){return l=l>>>0,q||X(l,2,this.length),this[l]|this[l+1]<<8},G.prototype.readUint16BE=G.prototype.readUInt16BE=function(l,q){return l=l>>>0,q||X(l,2,this.length),this[l]<<8|this[l+1]},G.prototype.readUint32LE=G.prototype.readUInt32LE=function(l,q){return l=l>>>0,q||X(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},G.prototype.readUint32BE=G.prototype.readUInt32BE=function(l,q){return l=l>>>0,q||X(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},G.prototype.readBigUInt64LE=mA(function(l){l=l>>>0,$A(l,"offset");let q=this[l],u=this[l+7];(q===void 0||u===void 0)&&V(l,this.length-8);let _=q+this[++l]*256+this[++l]*65536+this[++l]*16777216,b=this[++l]+this[++l]*256+this[++l]*65536+u*16777216;return BigInt(_)+(BigInt(b)<<BigInt(32))}),G.prototype.readBigUInt64BE=mA(function(l){l=l>>>0,$A(l,"offset");let q=this[l],u=this[l+7];(q===void 0||u===void 0)&&V(l,this.length-8);let _=q*16777216+this[++l]*65536+this[++l]*256+this[++l],b=this[++l]*16777216+this[++l]*65536+this[++l]*256+u;return(BigInt(_)<<BigInt(32))+BigInt(b)}),G.prototype.readIntLE=function(l,q,u){l=l>>>0,q=q>>>0,u||X(l,q,this.length);let _=this[l],b=1,z=0;for(;++z<q&&(b*=256);)_+=this[l+z]*b;return b*=128,_>=b&&(_-=Math.pow(2,8*q)),_},G.prototype.readIntBE=function(l,q,u){l=l>>>0,q=q>>>0,u||X(l,q,this.length);let _=q,b=1,z=this[l+--_];for(;_>0&&(b*=256);)z+=this[l+--_]*b;return b*=128,z>=b&&(z-=Math.pow(2,8*q)),z},G.prototype.readInt8=function(l,q){return l=l>>>0,q||X(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},G.prototype.readInt16LE=function(l,q){l=l>>>0,q||X(l,2,this.length);let u=this[l]|this[l+1]<<8;return u&32768?u|4294901760:u},G.prototype.readInt16BE=function(l,q){l=l>>>0,q||X(l,2,this.length);let u=this[l+1]|this[l]<<8;return u&32768?u|4294901760:u},G.prototype.readInt32LE=function(l,q){return l=l>>>0,q||X(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},G.prototype.readInt32BE=function(l,q){return l=l>>>0,q||X(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},G.prototype.readBigInt64LE=mA(function(l){l=l>>>0,$A(l,"offset");let q=this[l],u=this[l+7];(q===void 0||u===void 0)&&V(l,this.length-8);let _=this[l+4]+this[l+5]*256+this[l+6]*65536+(u<<24);return(BigInt(_)<<BigInt(32))+BigInt(q+this[++l]*256+this[++l]*65536+this[++l]*16777216)}),G.prototype.readBigInt64BE=mA(function(l){l=l>>>0,$A(l,"offset");let q=this[l],u=this[l+7];(q===void 0||u===void 0)&&V(l,this.length-8);let _=(q<<24)+this[++l]*65536+this[++l]*256+this[++l];return(BigInt(_)<<BigInt(32))+BigInt(this[++l]*16777216+this[++l]*65536+this[++l]*256+u)}),G.prototype.readFloatLE=function(l,q){return l=l>>>0,q||X(l,4,this.length),j.read(this,l,!0,23,4)},G.prototype.readFloatBE=function(l,q){return l=l>>>0,q||X(l,4,this.length),j.read(this,l,!1,23,4)},G.prototype.readDoubleLE=function(l,q){return l=l>>>0,q||X(l,8,this.length),j.read(this,l,!0,52,8)},G.prototype.readDoubleBE=function(l,q){return l=l>>>0,q||X(l,8,this.length),j.read(this,l,!1,52,8)};function L(l,q,u,_,b,z){if(!G.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>b||q<z)throw new RangeError('"value" argument is out of bounds');if(u+_>l.length)throw new RangeError("Index out of range")}G.prototype.writeUintLE=G.prototype.writeUIntLE=function(l,q,u,_){if(l=+l,q=q>>>0,u=u>>>0,!_){let J=Math.pow(2,8*u)-1;L(this,l,q,u,J,0)}let b=1,z=0;for(this[q]=l&255;++z<u&&(b*=256);)this[q+z]=l/b&255;return q+u},G.prototype.writeUintBE=G.prototype.writeUIntBE=function(l,q,u,_){if(l=+l,q=q>>>0,u=u>>>0,!_){let J=Math.pow(2,8*u)-1;L(this,l,q,u,J,0)}let b=u-1,z=1;for(this[q+b]=l&255;--b>=0&&(z*=256);)this[q+b]=l/z&255;return q+u},G.prototype.writeUint8=G.prototype.writeUInt8=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,1,255,0),this[q]=l&255,q+1},G.prototype.writeUint16LE=G.prototype.writeUInt16LE=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,2,65535,0),this[q]=l&255,this[q+1]=l>>>8,q+2},G.prototype.writeUint16BE=G.prototype.writeUInt16BE=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,2,65535,0),this[q]=l>>>8,this[q+1]=l&255,q+2},G.prototype.writeUint32LE=G.prototype.writeUInt32LE=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,4,4294967295,0),this[q+3]=l>>>24,this[q+2]=l>>>16,this[q+1]=l>>>8,this[q]=l&255,q+4},G.prototype.writeUint32BE=G.prototype.writeUInt32BE=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,4,4294967295,0),this[q]=l>>>24,this[q+1]=l>>>16,this[q+2]=l>>>8,this[q+3]=l&255,q+4};function Q(l,q,u,_,b){tA(q,_,b,l,u,7);let z=Number(q&BigInt(4294967295));l[u++]=z,z=z>>8,l[u++]=z,z=z>>8,l[u++]=z,z=z>>8,l[u++]=z;let J=Number(q>>BigInt(32)&BigInt(4294967295));return l[u++]=J,J=J>>8,l[u++]=J,J=J>>8,l[u++]=J,J=J>>8,l[u++]=J,u}function Z(l,q,u,_,b){tA(q,_,b,l,u,7);let z=Number(q&BigInt(4294967295));l[u+7]=z,z=z>>8,l[u+6]=z,z=z>>8,l[u+5]=z,z=z>>8,l[u+4]=z;let J=Number(q>>BigInt(32)&BigInt(4294967295));return l[u+3]=J,J=J>>8,l[u+2]=J,J=J>>8,l[u+1]=J,J=J>>8,l[u]=J,u+8}G.prototype.writeBigUInt64LE=mA(function(l,q=0){return Q(this,l,q,BigInt(0),BigInt("0xffffffffffffffff"))}),G.prototype.writeBigUInt64BE=mA(function(l,q=0){return Z(this,l,q,BigInt(0),BigInt("0xffffffffffffffff"))}),G.prototype.writeIntLE=function(l,q,u,_){if(l=+l,q=q>>>0,!_){let qA=Math.pow(2,8*u-1);L(this,l,q,u,qA-1,-qA)}let b=0,z=1,J=0;for(this[q]=l&255;++b<u&&(z*=256);)l<0&&J===0&&this[q+b-1]!==0&&(J=1),this[q+b]=(l/z>>0)-J&255;return q+u},G.prototype.writeIntBE=function(l,q,u,_){if(l=+l,q=q>>>0,!_){let qA=Math.pow(2,8*u-1);L(this,l,q,u,qA-1,-qA)}let b=u-1,z=1,J=0;for(this[q+b]=l&255;--b>=0&&(z*=256);)l<0&&J===0&&this[q+b+1]!==0&&(J=1),this[q+b]=(l/z>>0)-J&255;return q+u},G.prototype.writeInt8=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,1,127,-128),l<0&&(l=255+l+1),this[q]=l&255,q+1},G.prototype.writeInt16LE=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,2,32767,-32768),this[q]=l&255,this[q+1]=l>>>8,q+2},G.prototype.writeInt16BE=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,2,32767,-32768),this[q]=l>>>8,this[q+1]=l&255,q+2},G.prototype.writeInt32LE=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,4,2147483647,-2147483648),this[q]=l&255,this[q+1]=l>>>8,this[q+2]=l>>>16,this[q+3]=l>>>24,q+4},G.prototype.writeInt32BE=function(l,q,u){return l=+l,q=q>>>0,u||L(this,l,q,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[q]=l>>>24,this[q+1]=l>>>16,this[q+2]=l>>>8,this[q+3]=l&255,q+4},G.prototype.writeBigInt64LE=mA(function(l,q=0){return Q(this,l,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),G.prototype.writeBigInt64BE=mA(function(l,q=0){return Z(this,l,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function kA(l,q,u,_,b,z){if(u+_>l.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function eA(l,q,u,_,b){return q=+q,u=u>>>0,b||kA(l,q,u,4,340282346638528860000000000000000000000,-340282346638528860000000000000000000000),j.write(l,q,u,_,23,4),u+4}G.prototype.writeFloatLE=function(l,q,u){return eA(this,l,q,!0,u)},G.prototype.writeFloatBE=function(l,q,u){return eA(this,l,q,!1,u)};function jA(l,q,u,_,b){return q=+q,u=u>>>0,b||kA(l,q,u,8,179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,-179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000),j.write(l,q,u,_,52,8),u+8}G.prototype.writeDoubleLE=function(l,q,u){return jA(this,l,q,!0,u)},G.prototype.writeDoubleBE=function(l,q,u){return jA(this,l,q,!1,u)},G.prototype.copy=function(l,q,u,_){if(!G.isBuffer(l))throw new TypeError("argument should be a Buffer");if(u||(u=0),!_&&_!==0&&(_=this.length),q>=l.length&&(q=l.length),q||(q=0),_>0&&_<u&&(_=u),_===u||l.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),l.length-q<_-u&&(_=l.length-q+u);let b=_-u;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(q,u,_):Uint8Array.prototype.set.call(l,this.subarray(u,_),q),b},G.prototype.fill=function(l,q,u,_){if(typeof l=="string"){if(typeof q=="string"?(_=q,q=0,u=this.length):typeof u=="string"&&(_=u,u=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!G.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(l.length===1){let z=l.charCodeAt(0);(_==="utf8"&&z<128||_==="latin1")&&(l=z)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(q<0||this.length<q||this.length<u)throw new RangeError("Out of range index");if(u<=q)return this;q=q>>>0,u=u===void 0?this.length:u>>>0,l||(l=0);let b;if(typeof l=="number")for(b=q;b<u;++b)this[b]=l;else{let z=G.isBuffer(l)?l:G.from(l,_),J=z.length;if(J===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(b=0;b<u-q;++b)this[b+q]=z[b%J]}return this};var GA={};function EA(l,q,u){GA[l]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(_){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}EA("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),EA("ERR_INVALID_ARG_TYPE",function(l,q){return`The "${l}" argument must be of type number. Received type ${typeof q}`},TypeError),EA("ERR_OUT_OF_RANGE",function(l,q,u){let _=`The value of "${l}" is out of range.`,b=u;return Number.isInteger(u)&&Math.abs(u)>4294967296?b=iA(String(u)):typeof u=="bigint"&&(b=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(b=iA(b)),b+="n"),_+=` It must be ${q}. Received ${b}`,_},RangeError);function iA(l){let q="",u=l.length,_=l[0]==="-"?1:0;for(;u>=_+4;u-=3)q=`_${l.slice(u-3,u)}${q}`;return`${l.slice(0,u)}${q}`}function oA(l,q,u){$A(q,"offset"),(l[q]===void 0||l[q+u]===void 0)&&V(q,l.length-(u+1))}function tA(l,q,u,_,b,z){if(l>u||l<q){let J=typeof q=="bigint"?"n":"",qA;throw z>3?q===0||q===BigInt(0)?qA=`>= 0${J} and < 2${J} ** ${(z+1)*8}${J}`:qA=`>= -(2${J} ** ${(z+1)*8-1}${J}) and < 2 ** ${(z+1)*8-1}${J}`:qA=`>= ${q}${J} and <= ${u}${J}`,new GA.ERR_OUT_OF_RANGE("value",qA,l)}oA(_,b,z)}function $A(l,q){if(typeof l!="number")throw new GA.ERR_INVALID_ARG_TYPE(q,"number",l)}function V(l,q,u){throw Math.floor(l)!==l?($A(l,u),new GA.ERR_OUT_OF_RANGE(u||"offset","an integer",l)):q<0?new GA.ERR_BUFFER_OUT_OF_BOUNDS:new GA.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${q}`,l)}var M=/[^+/0-9A-Za-z-_]/g;function D(l){if(l=l.split("=")[0],l=l.trim().replace(M,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function U(l,q){q=q||1/0;let u,_=l.length,b=null,z=[];for(let J=0;J<_;++J){if(u=l.charCodeAt(J),u>55295&&u<57344){if(!b){if(u>56319){(q-=3)>-1&&z.push(239,191,189);continue}else if(J+1===_){(q-=3)>-1&&z.push(239,191,189);continue}b=u;continue}if(u<56320){(q-=3)>-1&&z.push(239,191,189),b=u;continue}u=(b-55296<<10|u-56320)+65536}else b&&(q-=3)>-1&&z.push(239,191,189);if(b=null,u<128){if((q-=1)<0)break;z.push(u)}else if(u<2048){if((q-=2)<0)break;z.push(u>>6|192,u&63|128)}else if(u<65536){if((q-=3)<0)break;z.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((q-=4)<0)break;z.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return z}function W(l){let q=[];for(let u=0;u<l.length;++u)q.push(l.charCodeAt(u)&255);return q}function Y(l,q){let u,_,b,z=[];for(let J=0;J<l.length&&!((q-=2)<0);++J)u=l.charCodeAt(J),_=u>>8,b=u%256,z.push(b),z.push(_);return z}function BA(l){return t.toByteArray(D(l))}function lA(l,q,u,_){let b;for(b=0;b<_&&!(b+u>=q.length||b>=l.length);++b)q[b+u]=l[b];return b}function FA(l,q){return l instanceof q||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===q.name}function LA(l){return l!==l}var Bj=function(){let l="0123456789abcdef",q=new Array(256);for(let u=0;u<16;++u){let _=u*16;for(let b=0;b<16;++b)q[_+b]=l[u]+l[b]}return q}();function mA(l){return typeof BigInt>"u"?P7:l}function P7(){throw new Error("BigInt not supported")}}),gA=aA((A,t)=>{t.exports={ArrayIsArray(j){return Array.isArray(j)},ArrayPrototypeIncludes(j,k){return j.includes(k)},ArrayPrototypeIndexOf(j,k){return j.indexOf(k)},ArrayPrototypeJoin(j,k){return j.join(k)},ArrayPrototypeMap(j,k){return j.map(k)},ArrayPrototypePop(j,k){return j.pop(k)},ArrayPrototypePush(j,k){return j.push(k)},ArrayPrototypeSlice(j,k,e){return j.slice(k,e)},Error,FunctionPrototypeCall(j,k,...e){return j.call(k,...e)},FunctionPrototypeSymbolHasInstance(j,k){return Function.prototype[Symbol.hasInstance].call(j,k)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(j,k){return Object.defineProperties(j,k)},ObjectDefineProperty(j,k,e){return Object.defineProperty(j,k,e)},ObjectGetOwnPropertyDescriptor(j,k){return Object.getOwnPropertyDescriptor(j,k)},ObjectKeys(j){return Object.keys(j)},ObjectSetPrototypeOf(j,k){return Object.setPrototypeOf(j,k)},Promise,PromisePrototypeCatch(j,k){return j.catch(k)},PromisePrototypeThen(j,k,e){return j.then(k,e)},PromiseReject(j){return Promise.reject(j)},ReflectApply:Reflect.apply,RegExpPrototypeTest(j,k){return j.test(k)},SafeSet:Set,String,StringPrototypeSlice(j,k,e){return j.slice(k,e)},StringPrototypeToLowerCase(j){return j.toLowerCase()},StringPrototypeToUpperCase(j){return j.toUpperCase()},StringPrototypeTrim(j){return j.trim()},Symbol,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(j,k,e){return j.set(k,e)},Uint8Array}}),sj=aA((A,t)=>{var j=pj(),k=Object.getPrototypeOf(async function(){}).constructor,e=globalThis.Blob||j.Blob,E=typeof e<"u"?function(G){return G instanceof e}:function(G){return!1},r=class extends Error{constructor(G){if(!Array.isArray(G))throw new TypeError(`Expected input to be an Array, got ${typeof G}`);let s="";for(let B=0;B<G.length;B++)s+=`    ${G[B].stack}
`;super(s),this.name="AggregateError",this.errors=G}};t.exports={AggregateError:r,kEmptyObject:Object.freeze({}),once(G){let s=!1;return function(...B){s||(s=!0,G.apply(this,B))}},createDeferredPromise:function(){let G,s;return{promise:new Promise((B,a)=>{G=B,s=a}),resolve:G,reject:s}},promisify(G){return new Promise((s,B)=>{G((a,...$)=>a?B(a):s(...$))})},debuglog(){return function(){}},format(G,...s){return G.replace(/%([sdifj])/g,function(...[B,a]){let $=s.shift();return a==="f"?$.toFixed(6):a==="j"?JSON.stringify($):a==="s"&&typeof $=="object"?`${$.constructor!==Object?$.constructor.name:""} {}`.trim():$.toString()})},inspect(G){switch(typeof G){case"string":if(G.includes("'"))if(G.includes('"')){if(!G.includes("`")&&!G.includes("${"))return`\`${G}\``}else return`"${G}"`;return`'${G}'`;case"number":return isNaN(G)?"NaN":Object.is(G,-0)?String(G):G;case"bigint":return`${String(G)}n`;case"boolean":case"undefined":return String(G);case"object":return"{}"}},types:{isAsyncFunction(G){return G instanceof k},isArrayBufferView(G){return ArrayBuffer.isView(G)}},isBlob:E},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Fk=aA((A,t)=>{var{AbortController:j,AbortSignal:k}=typeof self<"u"?self:typeof window<"u"?window:void 0;t.exports=j,t.exports.AbortSignal=k,t.exports.default=j}),TA=aA((A,t)=>{var{format:j,inspect:k,AggregateError:e}=sj(),E=globalThis.AggregateError||e,r=Symbol("kIsNodeError"),G=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,B="__node_internal_",a={};function $(n,m){if(!n)throw new a.ERR_INTERNAL_ASSERTION(m)}function d(n){let m="",v=n.length,c=n[0]==="-"?1:0;for(;v>=c+4;v-=3)m=`_${n.slice(v-3,v)}${m}`;return`${n.slice(0,v)}${m}`}function h(n,m,v){if(typeof m=="function")return $(m.length<=v.length,`Code: ${n}; The provided arguments length (${v.length}) does not match the required ones (${m.length}).`),m(...v);let c=(m.match(/%[dfijoOs]/g)||[]).length;return $(c===v.length,`Code: ${n}; The provided arguments length (${v.length}) does not match the required ones (${c}).`),v.length===0?m:j(m,...v)}function x(n,m,v){v||(v=Error);class c extends v{constructor(...p){super(h(n,m,p))}toString(){return`${this.name} [${n}]: ${this.message}`}}Object.defineProperties(c.prototype,{name:{value:v.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${n}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),c.prototype.code=n,c.prototype[r]=!0,a[n]=c}function o(n){let m=B+n.name;return Object.defineProperty(n,"name",{value:m}),n}function F(n,m){if(n&&m&&n!==m){if(Array.isArray(m.errors))return m.errors.push(n),m;let v=new E([m,n],m.message);return v.code=m.code,v}return n||m}var i=class extends Error{constructor(n="The operation was aborted",m=void 0){if(m!==void 0&&typeof m!="object")throw new a.ERR_INVALID_ARG_TYPE("options","Object",m);super(n,m),this.code="ABORT_ERR",this.name="AbortError"}};x("ERR_ASSERTION","%s",Error),x("ERR_INVALID_ARG_TYPE",(n,m,v)=>{$(typeof n=="string","'name' must be a string"),Array.isArray(m)||(m=[m]);let c="The ";n.endsWith(" argument")?c+=`${n} `:c+=`"${n}" ${n.includes(".")?"property":"argument"} `,c+="must be ";let p=[],f=[],g=[];for(let T of m)$(typeof T=="string","All expected entries have to be of type string"),G.includes(T)?p.push(T.toLowerCase()):s.test(T)?f.push(T):($(T!=="object",'The value "object" should be written as "Object"'),g.push(T));if(f.length>0){let T=p.indexOf("object");T!==-1&&(p.splice(p,T,1),f.push("Object"))}if(p.length>0){switch(p.length){case 1:c+=`of type ${p[0]}`;break;case 2:c+=`one of type ${p[0]} or ${p[1]}`;break;default:{let T=p.pop();c+=`one of type ${p.join(", ")}, or ${T}`}}(f.length>0||g.length>0)&&(c+=" or ")}if(f.length>0){switch(f.length){case 1:c+=`an instance of ${f[0]}`;break;case 2:c+=`an instance of ${f[0]} or ${f[1]}`;break;default:{let T=f.pop();c+=`an instance of ${f.join(", ")}, or ${T}`}}g.length>0&&(c+=" or ")}switch(g.length){case 0:break;case 1:g[0].toLowerCase()!==g[0]&&(c+="an "),c+=`${g[0]}`;break;case 2:c+=`one of ${g[0]} or ${g[1]}`;break;default:{let T=g.pop();c+=`one of ${g.join(", ")}, or ${T}`}}if(v==null)c+=`. Received ${v}`;else if(typeof v=="function"&&v.name)c+=`. Received function ${v.name}`;else if(typeof v=="object"){var P;(P=v.constructor)!==null&&P!==void 0&&P.name?c+=`. Received an instance of ${v.constructor.name}`:c+=`. Received ${k(v,{depth:-1})}`}else{let T=k(v,{colors:!1});T.length>25&&(T=`${T.slice(0,25)}...`),c+=`. Received type ${typeof v} (${T})`}return c},TypeError),x("ERR_INVALID_ARG_VALUE",(n,m,v="is invalid")=>{let c=k(m);return c.length>128&&(c=c.slice(0,128)+"..."),`The ${n.includes(".")?"property":"argument"} '${n}' ${v}. Received ${c}`},TypeError),x("ERR_INVALID_RETURN_VALUE",(n,m,v)=>{var c;let p=v!=null&&(c=v.constructor)!==null&&c!==void 0&&c.name?`instance of ${v.constructor.name}`:`type ${typeof v}`;return`Expected ${n} to be returned from the "${m}" function but got ${p}.`},TypeError),x("ERR_MISSING_ARGS",(...n)=>{$(n.length>0,"At least one arg needs to be specified");let m,v=n.length;switch(n=(Array.isArray(n)?n:[n]).map((c)=>`"${c}"`).join(" or "),v){case 1:m+=`The ${n[0]} argument`;break;case 2:m+=`The ${n[0]} and ${n[1]} arguments`;break;default:{let c=n.pop();m+=`The ${n.join(", ")}, and ${c} arguments`}break}return`${m} must be specified`},TypeError),x("ERR_OUT_OF_RANGE",(n,m,v)=>{$(m,'Missing "range" argument');let c;return Number.isInteger(v)&&Math.abs(v)>4294967296?c=d(String(v)):typeof v=="bigint"?(c=String(v),(v>2n**32n||v<-(2n**32n))&&(c=d(c)),c+="n"):c=k(v),`The value of "${n}" is out of range. It must be ${m}. Received ${c}`},RangeError),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),x("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),x("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),x("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),x("ERR_STREAM_WRITE_AFTER_END","write after end",Error),x("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:i,aggregateTwoErrors:o(F),hideStackFrames:o,codes:a}}),V7=aA((A,t)=>{var{ArrayIsArray:j,ArrayPrototypeIncludes:k,ArrayPrototypeJoin:e,ArrayPrototypeMap:E,NumberIsInteger:r,NumberIsNaN:G,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:B,NumberParseInt:a,ObjectPrototypeHasOwnProperty:$,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:x,StringPrototypeTrim:o}=gA(),{hideStackFrames:F,codes:{ERR_SOCKET_BAD_PORT:i,ERR_INVALID_ARG_TYPE:n,ERR_INVALID_ARG_VALUE:m,ERR_OUT_OF_RANGE:v,ERR_UNKNOWN_SIGNAL:c}}=TA(),{normalizeEncoding:p}=sj(),{isAsyncFunction:f,isArrayBufferView:g}=sj().types,P={};function T(V){return V===(V|0)}function O(V){return V===V>>>0}var I=/^[0-7]+$/,K="must be a 32-bit unsigned integer or an octal string";function w(V,M,D){if(typeof V>"u"&&(V=D),typeof V=="string"){if(d(I,V)===null)throw new m(M,V,K);V=a(V,8)}return N(V,M),V}var H=F((V,M,D=B,U=s)=>{if(typeof V!="number")throw new n(M,"number",V);if(!r(V))throw new v(M,"an integer",V);if(V<D||V>U)throw new v(M,`>= ${D} && <= ${U}`,V)}),y=F((V,M,D=-2147483648,U=2147483647)=>{if(typeof V!="number")throw new n(M,"number",V);if(!r(V))throw new v(M,"an integer",V);if(V<D||V>U)throw new v(M,`>= ${D} && <= ${U}`,V)}),N=F((V,M,D=!1)=>{if(typeof V!="number")throw new n(M,"number",V);if(!r(V))throw new v(M,"an integer",V);let U=D?1:0,W=4294967295;if(V<U||V>W)throw new v(M,`>= ${U} && <= ${W}`,V)});function S(V,M){if(typeof V!="string")throw new n(M,"string",V)}function C(V,M,D=void 0,U){if(typeof V!="number")throw new n(M,"number",V);if(D!=null&&V<D||U!=null&&V>U||(D!=null||U!=null)&&G(V))throw new v(M,`${D!=null?`>= ${D}`:""}${D!=null&&U!=null?" && ":""}${U!=null?`<= ${U}`:""}`,V)}var R=F((V,M,D)=>{if(!k(D,V)){let U=e(E(D,(Y)=>typeof Y=="string"?`'${Y}'`:h(Y)),", "),W="must be one of: "+U;throw new m(M,V,W)}});function X(V,M){if(typeof V!="boolean")throw new n(M,"boolean",V)}function L(V,M,D){return V==null||!$(V,M)?D:V[M]}var Q=F((V,M,D=null)=>{let U=L(D,"allowArray",!1),W=L(D,"allowFunction",!1);if(!L(D,"nullable",!1)&&V===null||!U&&j(V)||typeof V!="object"&&(!W||typeof V!="function"))throw new n(M,"Object",V)}),Z=F((V,M,D=0)=>{if(!j(V))throw new n(M,"Array",V);if(V.length<D){let U=`must be longer than ${D}`;throw new m(M,V,U)}});function kA(V,M="signal"){if(S(V,M),P[V]===void 0)throw P[x(V)]!==void 0?new c(V+" (signals must use all capital letters)"):new c(V)}var eA=F((V,M="buffer")=>{if(!g(V))throw new n(M,["Buffer","TypedArray","DataView"],V)});function jA(V,M){let D=p(M),U=V.length;if(D==="hex"&&U%2!==0)throw new m("encoding",M,`is invalid for data of length ${U}`)}function GA(V,M="Port",D=!0){if(typeof V!="number"&&typeof V!="string"||typeof V=="string"&&o(V).length===0||+V!==+V>>>0||V>65535||V===0&&!D)throw new i(M,V,D);return V|0}var EA=F((V,M)=>{if(V!==void 0&&(V===null||typeof V!="object"||!("aborted"in V)))throw new n(M,"AbortSignal",V)}),iA=F((V,M)=>{if(typeof V!="function")throw new n(M,"Function",V)}),oA=F((V,M)=>{if(typeof V!="function"||f(V))throw new n(M,"Function",V)}),tA=F((V,M)=>{if(V!==void 0)throw new n(M,"undefined",V)});function $A(V,M,D){if(!k(D,V))throw new n(M,`('${e(D,"|")}')`,V)}t.exports={isInt32:T,isUint32:O,parseFileMode:w,validateArray:Z,validateBoolean:X,validateBuffer:eA,validateEncoding:jA,validateFunction:iA,validateInt32:y,validateInteger:H,validateNumber:C,validateObject:Q,validateOneOf:R,validatePlainFunction:oA,validatePort:GA,validateSignalName:kA,validateString:S,validateUint32:N,validateUndefined:tA,validateUnion:$A,validateAbortSignal:EA}}),xE=aA((A,t)=>{var j=t.exports={},k,e;function E(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?k=setTimeout:k=E}catch{k=E}try{typeof clearTimeout=="function"?e=clearTimeout:e=r}catch{e=r}})();function G(i){if(k===setTimeout)return setTimeout(i,0);if((k===E||!k)&&setTimeout)return k=setTimeout,setTimeout(i,0);try{return k(i,0)}catch{try{return k.call(null,i,0)}catch{return k.call(this,i,0)}}}function s(i){if(e===clearTimeout)return clearTimeout(i);if((e===r||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(i);try{return e(i)}catch{try{return e.call(null,i)}catch{return e.call(this,i)}}}var B=[],a=!1,$,d=-1;function h(){!a||!$||(a=!1,$.length?B=$.concat(B):d=-1,B.length&&x())}function x(){if(!a){var i=G(h);a=!0;for(var n=B.length;n;){for($=B,B=[];++d<n;)$&&$[d].run();d=-1,n=B.length}$=null,a=!1,s(i)}}j.nextTick=function(i){var n=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)n[m-1]=arguments[m];B.push(new o(i,n)),B.length===1&&!a&&G(x)};function o(i,n){this.fun=i,this.array=n}o.prototype.run=function(){this.fun.apply(null,this.array)},j.title="browser",j.browser=!0,j.env={},j.argv=[],j.version="",j.versions={};function F(){}j.on=F,j.addListener=F,j.once=F,j.off=F,j.removeListener=F,j.removeAllListeners=F,j.emit=F,j.prependListener=F,j.prependOnceListener=F,j.listeners=function(i){return[]},j.binding=function(i){throw new Error("process.binding is not supported")},j.cwd=function(){return"/"},j.chdir=function(i){throw new Error("process.chdir is not supported")},j.umask=function(){return 0}}),nj={};fE(nj,{default:()=>gE});Cj=ka(()=>{HE(nj,z7(xE())),gE=z7(xE())}),zj=aA((A,t)=>{var{Symbol:j,SymbolAsyncIterator:k,SymbolIterator:e}=gA(),E=j("kDestroyed"),r=j("kIsErrored"),G=j("kIsReadable"),s=j("kIsDisturbed");function B(H,y=!1){var N;return!!(H&&typeof H.pipe=="function"&&typeof H.on=="function"&&(!y||typeof H.pause=="function"&&typeof H.resume=="function")&&(!H._writableState||((N=H._readableState)===null||N===void 0?void 0:N.readable)!==!1)&&(!H._writableState||H._readableState))}function a(H){var y;return!!(H&&typeof H.write=="function"&&typeof H.on=="function"&&(!H._readableState||((y=H._writableState)===null||y===void 0?void 0:y.writable)!==!1))}function $(H){return!!(H&&typeof H.pipe=="function"&&H._readableState&&typeof H.on=="function"&&typeof H.write=="function")}function d(H){return H&&(H._readableState||H._writableState||typeof H.write=="function"&&typeof H.on=="function"||typeof H.pipe=="function"&&typeof H.on=="function")}function h(H,y){return H==null?!1:y===!0?typeof H[k]=="function":y===!1?typeof H[e]=="function":typeof H[k]=="function"||typeof H[e]=="function"}function x(H){if(!d(H))return null;let{_writableState:y,_readableState:N}=H,S=y||N;return!!(H.destroyed||H[E]||S!=null&&S.destroyed)}function o(H){if(!a(H))return null;if(H.writableEnded===!0)return!0;let y=H._writableState;return y!=null&&y.errored?!1:typeof y?.ended!="boolean"?null:y.ended}function F(H,y){if(!a(H))return null;if(H.writableFinished===!0)return!0;let N=H._writableState;return N!=null&&N.errored?!1:typeof N?.finished!="boolean"?null:!!(N.finished||y===!1&&N.ended===!0&&N.length===0)}function i(H){if(!B(H))return null;if(H.readableEnded===!0)return!0;let y=H._readableState;return!y||y.errored?!1:typeof y?.ended!="boolean"?null:y.ended}function n(H,y){if(!B(H))return null;let N=H._readableState;return N!=null&&N.errored?!1:typeof N?.endEmitted!="boolean"?null:!!(N.endEmitted||y===!1&&N.ended===!0&&N.length===0)}function m(H){return H&&H[G]!=null?H[G]:typeof H?.readable!="boolean"?null:x(H)?!1:B(H)&&H.readable&&!n(H)}function v(H){return typeof H?.writable!="boolean"?null:x(H)?!1:a(H)&&H.writable&&!o(H)}function c(H,y){return d(H)?x(H)?!0:!(y?.readable!==!1&&m(H)||y?.writable!==!1&&v(H)):null}function p(H){var y,N;return d(H)?H.writableErrored?H.writableErrored:(y=(N=H._writableState)===null||N===void 0?void 0:N.errored)!==null&&y!==void 0?y:null:null}function f(H){var y,N;return d(H)?H.readableErrored?H.readableErrored:(y=(N=H._readableState)===null||N===void 0?void 0:N.errored)!==null&&y!==void 0?y:null:null}function g(H){if(!d(H))return null;if(typeof H.closed=="boolean")return H.closed;let{_writableState:y,_readableState:N}=H;return typeof y?.closed=="boolean"||typeof N?.closed=="boolean"?y?.closed||N?.closed:typeof H._closed=="boolean"&&P(H)?H._closed:null}function P(H){return typeof H._closed=="boolean"&&typeof H._defaultKeepAlive=="boolean"&&typeof H._removedConnection=="boolean"&&typeof H._removedContLen=="boolean"}function T(H){return typeof H._sent100=="boolean"&&P(H)}function O(H){var y;return typeof H._consuming=="boolean"&&typeof H._dumped=="boolean"&&((y=H.req)===null||y===void 0?void 0:y.upgradeOrConnect)===void 0}function I(H){if(!d(H))return null;let{_writableState:y,_readableState:N}=H,S=y||N;return!S&&T(H)||!!(S&&S.autoDestroy&&S.emitClose&&S.closed===!1)}function K(H){var y;return!!(H&&((y=H[s])!==null&&y!==void 0?y:H.readableDidRead||H.readableAborted))}function w(H){var y,N,S,C,R,X,L,Q,Z,kA;return!!(H&&((y=(N=(S=(C=(R=(X=H[r])!==null&&X!==void 0?X:H.readableErrored)!==null&&R!==void 0?R:H.writableErrored)!==null&&C!==void 0?C:(L=H._readableState)===null||L===void 0?void 0:L.errorEmitted)!==null&&S!==void 0?S:(Q=H._writableState)===null||Q===void 0?void 0:Q.errorEmitted)!==null&&N!==void 0?N:(Z=H._readableState)===null||Z===void 0?void 0:Z.errored)!==null&&y!==void 0?y:(kA=H._writableState)===null||kA===void 0?void 0:kA.errored))}t.exports={kDestroyed:E,isDisturbed:K,kIsDisturbed:s,isErrored:w,kIsErrored:r,isReadable:m,kIsReadable:G,isClosed:g,isDestroyed:x,isDuplexNodeStream:$,isFinished:c,isIterable:h,isReadableNodeStream:B,isReadableEnded:i,isReadableFinished:n,isReadableErrored:f,isNodeStream:d,isWritable:v,isWritableNodeStream:a,isWritableEnded:o,isWritableFinished:F,isWritableErrored:p,isServerRequest:O,isServerResponse:T,willEmitClose:I}}),Uj=aA((A,t)=>{var j=(Cj(),Xj(nj)),{AbortError:k,codes:e}=TA(),{ERR_INVALID_ARG_TYPE:E,ERR_STREAM_PREMATURE_CLOSE:r}=e,{kEmptyObject:G,once:s}=sj(),{validateAbortSignal:B,validateFunction:a,validateObject:$}=V7(),{Promise:d}=gA(),{isClosed:h,isReadable:x,isReadableNodeStream:o,isReadableFinished:F,isReadableErrored:i,isWritable:n,isWritableNodeStream:m,isWritableFinished:v,isWritableErrored:c,isNodeStream:p,willEmitClose:f}=zj();function g(I){return I.setHeader&&typeof I.abort=="function"}var P=()=>{};function T(I,K,w){var H,y;arguments.length===2?(w=K,K=G):K==null?K=G:$(K,"options"),a(w,"callback"),B(K.signal,"options.signal"),w=s(w);let N=(H=K.readable)!==null&&H!==void 0?H:o(I),S=(y=K.writable)!==null&&y!==void 0?y:m(I);if(!p(I))throw new E("stream","Stream",I);let{_writableState:C,_readableState:R}=I,X=()=>{I.writable||Z()},L=f(I)&&o(I)===N&&m(I)===S,Q=v(I,!1),Z=()=>{Q=!0,I.destroyed&&(L=!1),!(L&&(!I.readable||N))&&(!N||kA)&&w.call(I)},kA=F(I,!1),eA=()=>{kA=!0,I.destroyed&&(L=!1),!(L&&(!I.writable||S))&&(!S||Q)&&w.call(I)},jA=(tA)=>{w.call(I,tA)},GA=h(I),EA=()=>{GA=!0;let tA=c(I)||i(I);if(tA&&typeof tA!="boolean")return w.call(I,tA);if(N&&!kA&&o(I,!0)&&!F(I,!1))return w.call(I,new r);if(S&&!Q&&!v(I,!1))return w.call(I,new r);w.call(I)},iA=()=>{I.req.on("finish",Z)};g(I)?(I.on("complete",Z),L||I.on("abort",EA),I.req?iA():I.on("request",iA)):S&&!C&&(I.on("end",X),I.on("close",X)),!L&&typeof I.aborted=="boolean"&&I.on("aborted",EA),I.on("end",eA),I.on("finish",Z),K.error!==!1&&I.on("error",jA),I.on("close",EA),GA?j.nextTick(EA):C!=null&&C.errorEmitted||R!=null&&R.errorEmitted?L||j.nextTick(EA):(!N&&(!L||x(I))&&(Q||n(I)===!1)||!S&&(!L||n(I))&&(kA||x(I)===!1)||R&&I.req&&I.aborted)&&j.nextTick(EA);let oA=()=>{w=P,I.removeListener("aborted",EA),I.removeListener("complete",Z),I.removeListener("abort",EA),I.removeListener("request",iA),I.req&&I.req.removeListener("finish",Z),I.removeListener("end",X),I.removeListener("close",X),I.removeListener("finish",Z),I.removeListener("end",eA),I.removeListener("error",jA),I.removeListener("close",EA)};if(K.signal&&!GA){let tA=()=>{let $A=w;oA(),$A.call(I,new k(void 0,{cause:K.signal.reason}))};if(K.signal.aborted)j.nextTick(tA);else{let $A=w;w=s((...V)=>{K.signal.removeEventListener("abort",tA),$A.apply(I,V)}),K.signal.addEventListener("abort",tA)}}return oA}function O(I,K){return new d((w,H)=>{T(I,K,(y)=>{y?H(y):w()})})}t.exports=T,t.exports.finished=O}),Ga=aA((A,t)=>{var j=globalThis.AbortController||Fk().AbortController,{codes:{ERR_INVALID_ARG_TYPE:k,ERR_MISSING_ARGS:e,ERR_OUT_OF_RANGE:E},AbortError:r}=TA(),{validateAbortSignal:G,validateInteger:s,validateObject:B}=V7(),a=gA().Symbol("kWeak"),{finished:$}=Uj(),{ArrayPrototypePush:d,MathFloor:h,Number:x,NumberIsNaN:o,Promise:F,PromiseReject:i,PromisePrototypeThen:n,Symbol:m}=gA(),v=m("kEmpty"),c=m("kEof");function p(R,X){if(typeof R!="function")throw new k("fn",["Function","AsyncFunction"],R);X!=null&&B(X,"options"),X?.signal!=null&&G(X.signal,"options.signal");let L=1;return X?.concurrency!=null&&(L=h(X.concurrency)),s(L,"concurrency",1),async function*(){var Q,Z;let kA=new j,eA=this,jA=[],GA=kA.signal,EA={signal:GA},iA=()=>kA.abort();X!=null&&(Q=X.signal)!==null&&Q!==void 0&&Q.aborted&&iA(),X==null||(Z=X.signal)===null||Z===void 0||Z.addEventListener("abort",iA);let oA,tA,$A=!1;function V(){$A=!0}async function M(){try{for await(let W of eA){var D;if($A)return;if(GA.aborted)throw new r;try{W=R(W,EA)}catch(Y){W=i(Y)}W!==v&&(typeof((D=W)===null||D===void 0?void 0:D.catch)=="function"&&W.catch(V),jA.push(W),oA&&(oA(),oA=null),!$A&&jA.length&&jA.length>=L&&await new F((Y)=>{tA=Y}))}jA.push(c)}catch(W){let Y=i(W);n(Y,void 0,V),jA.push(Y)}finally{var U;$A=!0,oA&&(oA(),oA=null),X==null||(U=X.signal)===null||U===void 0||U.removeEventListener("abort",iA)}}M();try{for(;;){for(;jA.length>0;){let D=await jA[0];if(D===c)return;if(GA.aborted)throw new r;D!==v&&(yield D),jA.shift(),tA&&(tA(),tA=null)}await new F((D)=>{oA=D})}}finally{kA.abort(),$A=!0,tA&&(tA(),tA=null)}}.call(this)}function f(R=void 0){return R!=null&&B(R,"options"),R?.signal!=null&&G(R.signal,"options.signal"),async function*(){let X=0;for await(let Q of this){var L;if(R!=null&&(L=R.signal)!==null&&L!==void 0&&L.aborted)throw new r({cause:R.signal.reason});yield[X++,Q]}}.call(this)}async function g(R,X=void 0){for await(let L of I.call(this,R,X))return!0;return!1}async function P(R,X=void 0){if(typeof R!="function")throw new k("fn",["Function","AsyncFunction"],R);return!await g.call(this,async(...L)=>!await R(...L),X)}async function T(R,X){for await(let L of I.call(this,R,X))return L}async function O(R,X){if(typeof R!="function")throw new k("fn",["Function","AsyncFunction"],R);async function L(Q,Z){return await R(Q,Z),v}for await(let Q of p.call(this,L,X));}function I(R,X){if(typeof R!="function")throw new k("fn",["Function","AsyncFunction"],R);async function L(Q,Z){return await R(Q,Z)?Q:v}return p.call(this,L,X)}var K=class extends e{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function w(R,X,L){var Q;if(typeof R!="function")throw new k("reducer",["Function","AsyncFunction"],R);L!=null&&B(L,"options"),L?.signal!=null&&G(L.signal,"options.signal");let Z=arguments.length>1;if(L!=null&&(Q=L.signal)!==null&&Q!==void 0&&Q.aborted){let EA=new r(void 0,{cause:L.signal.reason});throw this.once("error",()=>{}),await $(this.destroy(EA)),EA}let kA=new j,eA=kA.signal;if(L!=null&&L.signal){let EA={once:!0,[a]:this};L.signal.addEventListener("abort",()=>kA.abort(),EA)}let jA=!1;try{for await(let EA of this){var GA;if(jA=!0,L!=null&&(GA=L.signal)!==null&&GA!==void 0&&GA.aborted)throw new r;Z?X=await R(X,EA,{signal:eA}):(X=EA,Z=!0)}if(!jA&&!Z)throw new K}finally{kA.abort()}return X}async function H(R){R!=null&&B(R,"options"),R?.signal!=null&&G(R.signal,"options.signal");let X=[];for await(let Q of this){var L;if(R!=null&&(L=R.signal)!==null&&L!==void 0&&L.aborted)throw new r(void 0,{cause:R.signal.reason});d(X,Q)}return X}function y(R,X){let L=p.call(this,R,X);return async function*(){for await(let Q of L)yield*Q}.call(this)}function N(R){if(R=x(R),o(R))return 0;if(R<0)throw new E("number",">= 0",R);return R}function S(R,X=void 0){return X!=null&&B(X,"options"),X?.signal!=null&&G(X.signal,"options.signal"),R=N(R),async function*(){var L;if(X!=null&&(L=X.signal)!==null&&L!==void 0&&L.aborted)throw new r;for await(let Z of this){var Q;if(X!=null&&(Q=X.signal)!==null&&Q!==void 0&&Q.aborted)throw new r;R--<=0&&(yield Z)}}.call(this)}function C(R,X=void 0){return X!=null&&B(X,"options"),X?.signal!=null&&G(X.signal,"options.signal"),R=N(R),async function*(){var L;if(X!=null&&(L=X.signal)!==null&&L!==void 0&&L.aborted)throw new r;for await(let Z of this){var Q;if(X!=null&&(Q=X.signal)!==null&&Q!==void 0&&Q.aborted)throw new r;if(R-- >0)yield Z;else return}}.call(this)}t.exports.streamReturningOperators={asIndexedPairs:f,drop:S,filter:I,flatMap:y,map:p,take:C},t.exports.promiseReturningOperators={every:P,forEach:O,reduce:w,toArray:H,some:g,find:T}}),o6=aA((A,t)=>{var j=(Cj(),Xj(nj)),{aggregateTwoErrors:k,codes:{ERR_MULTIPLE_CALLBACK:e},AbortError:E}=TA(),{Symbol:r}=gA(),{kDestroyed:G,isDestroyed:s,isFinished:B,isServerRequest:a}=zj(),$=r("kDestroy"),d=r("kConstruct");function h(I,K,w){I&&(I.stack,K&&!K.errored&&(K.errored=I),w&&!w.errored&&(w.errored=I))}function x(I,K){let w=this._readableState,H=this._writableState,y=H||w;return H&&H.destroyed||w&&w.destroyed?(typeof K=="function"&&K(),this):(h(I,H,w),H&&(H.destroyed=!0),w&&(w.destroyed=!0),y.constructed?o(this,I,K):this.once($,function(N){o(this,k(N,I),K)}),this)}function o(I,K,w){let H=!1;function y(N){if(H)return;H=!0;let{_readableState:S,_writableState:C}=I;h(N,C,S),C&&(C.closed=!0),S&&(S.closed=!0),typeof w=="function"&&w(N),N?j.nextTick(F,I,N):j.nextTick(i,I)}try{I._destroy(K||null,y)}catch(N){y(N)}}function F(I,K){n(I,K),i(I)}function i(I){let{_readableState:K,_writableState:w}=I;w&&(w.closeEmitted=!0),K&&(K.closeEmitted=!0),(w&&w.emitClose||K&&K.emitClose)&&I.emit("close")}function n(I,K){let{_readableState:w,_writableState:H}=I;H&&H.errorEmitted||w&&w.errorEmitted||(H&&(H.errorEmitted=!0),w&&(w.errorEmitted=!0),I.emit("error",K))}function m(){let I=this._readableState,K=this._writableState;I&&(I.constructed=!0,I.closed=!1,I.closeEmitted=!1,I.destroyed=!1,I.errored=null,I.errorEmitted=!1,I.reading=!1,I.ended=I.readable===!1,I.endEmitted=I.readable===!1),K&&(K.constructed=!0,K.destroyed=!1,K.closed=!1,K.closeEmitted=!1,K.errored=null,K.errorEmitted=!1,K.finalCalled=!1,K.prefinished=!1,K.ended=K.writable===!1,K.ending=K.writable===!1,K.finished=K.writable===!1)}function v(I,K,w){let{_readableState:H,_writableState:y}=I;if(y&&y.destroyed||H&&H.destroyed)return this;H&&H.autoDestroy||y&&y.autoDestroy?I.destroy(K):K&&(K.stack,y&&!y.errored&&(y.errored=K),H&&!H.errored&&(H.errored=K),w?j.nextTick(n,I,K):n(I,K))}function c(I,K){if(typeof I._construct!="function")return;let{_readableState:w,_writableState:H}=I;w&&(w.constructed=!1),H&&(H.constructed=!1),I.once(d,K),!(I.listenerCount(d)>1)&&j.nextTick(p,I)}function p(I){let K=!1;function w(H){if(K){v(I,H??new e);return}K=!0;let{_readableState:y,_writableState:N}=I,S=N||y;y&&(y.constructed=!0),N&&(N.constructed=!0),S.destroyed?I.emit($,H):H?v(I,H,!0):j.nextTick(f,I)}try{I._construct(w)}catch(H){w(H)}}function f(I){I.emit(d)}function g(I){return I&&I.setHeader&&typeof I.abort=="function"}function P(I){I.emit("close")}function T(I,K){I.emit("error",K),j.nextTick(P,I)}function O(I,K){!I||s(I)||(!K&&!B(I)&&(K=new E),a(I)?(I.socket=null,I.destroy(K)):g(I)?I.abort():g(I.req)?I.req.abort():typeof I.destroy=="function"?I.destroy(K):typeof I.close=="function"?I.close():K?j.nextTick(T,I,K):j.nextTick(P,I),I.destroyed||(I[G]=!0))}t.exports={construct:c,destroyer:O,destroy:x,undestroy:m,errorOrDestroy:v}}),nk=aA((A,t)=>{var j=typeof Reflect=="object"?Reflect:null,k=j&&typeof j.apply=="function"?j.apply:function(p,f,g){return Function.prototype.apply.call(p,f,g)},e;j&&typeof j.ownKeys=="function"?e=j.ownKeys:Object.getOwnPropertySymbols?e=function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:e=function(p){return Object.getOwnPropertyNames(p)};function E(p){console&&console.warn&&console.warn(p)}var r=Number.isNaN||function(p){return p!==p};function G(){G.init.call(this)}t.exports=G,t.exports.once=m,G.EventEmitter=G,G.prototype._events=void 0,G.prototype._eventsCount=0,G.prototype._maxListeners=void 0;var s=10;function B(p){if(typeof p!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof p)}Object.defineProperty(G,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(p){if(typeof p!="number"||p<0||r(p))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+p+".");s=p}}),G.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},G.prototype.setMaxListeners=function(p){if(typeof p!="number"||p<0||r(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this};function a(p){return p._maxListeners===void 0?G.defaultMaxListeners:p._maxListeners}G.prototype.getMaxListeners=function(){return a(this)},G.prototype.emit=function(p){for(var f=[],g=1;g<arguments.length;g++)f.push(arguments[g]);var P=p==="error",T=this._events;if(T!==void 0)P=P&&T.error===void 0;else if(!P)return!1;if(P){var O;if(f.length>0&&(O=f[0]),O instanceof Error)throw O;var I=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw I.context=O,I}var K=T[p];if(K===void 0)return!1;if(typeof K=="function")k(K,this,f);else for(var w=K.length,H=F(K,w),g=0;g<w;++g)k(H[g],this,f);return!0};function $(p,f,g,P){var T,O,I;if(B(g),O=p._events,O===void 0?(O=p._events=Object.create(null),p._eventsCount=0):(O.newListener!==void 0&&(p.emit("newListener",f,g.listener?g.listener:g),O=p._events),I=O[f]),I===void 0)I=O[f]=g,++p._eventsCount;else if(typeof I=="function"?I=O[f]=P?[g,I]:[I,g]:P?I.unshift(g):I.push(g),T=a(p),T>0&&I.length>T&&!I.warned){I.warned=!0;var K=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");K.name="MaxListenersExceededWarning",K.emitter=p,K.type=f,K.count=I.length,E(K)}return p}G.prototype.addListener=function(p,f){return $(this,p,f,!1)},G.prototype.on=G.prototype.addListener,G.prototype.prependListener=function(p,f){return $(this,p,f,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(p,f,g){var P={fired:!1,wrapFn:void 0,target:p,type:f,listener:g},T=d.bind(P);return T.listener=g,P.wrapFn=T,T}G.prototype.once=function(p,f){return B(f),this.on(p,h(this,p,f)),this},G.prototype.prependOnceListener=function(p,f){return B(f),this.prependListener(p,h(this,p,f)),this},G.prototype.removeListener=function(p,f){var g,P,T,O,I;if(B(f),P=this._events,P===void 0)return this;if(g=P[p],g===void 0)return this;if(g===f||g.listener===f)--this._eventsCount===0?this._events=Object.create(null):(delete P[p],P.removeListener&&this.emit("removeListener",p,g.listener||f));else if(typeof g!="function"){for(T=-1,O=g.length-1;O>=0;O--)if(g[O]===f||g[O].listener===f){I=g[O].listener,T=O;break}if(T<0)return this;T===0?g.shift():i(g,T),g.length===1&&(P[p]=g[0]),P.removeListener!==void 0&&this.emit("removeListener",p,I||f)}return this},G.prototype.off=G.prototype.removeListener,G.prototype.removeAllListeners=function(p){var f,g,P;if(g=this._events,g===void 0)return this;if(g.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):g[p]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete g[p]),this;if(arguments.length===0){var T=Object.keys(g),O;for(P=0;P<T.length;++P)O=T[P],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(f=g[p],typeof f=="function")this.removeListener(p,f);else if(f!==void 0)for(P=f.length-1;P>=0;P--)this.removeListener(p,f[P]);return this};function x(p,f,g){var P=p._events;if(P===void 0)return[];var T=P[f];return T===void 0?[]:typeof T=="function"?g?[T.listener||T]:[T]:g?n(T):F(T,T.length)}G.prototype.listeners=function(p){return x(this,p,!0)},G.prototype.rawListeners=function(p){return x(this,p,!1)},G.listenerCount=function(p,f){return typeof p.listenerCount=="function"?p.listenerCount(f):o.call(p,f)},G.prototype.listenerCount=o;function o(p){var f=this._events;if(f!==void 0){var g=f[p];if(typeof g=="function")return 1;if(g!==void 0)return g.length}return 0}G.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};function F(p,f){for(var g=new Array(f),P=0;P<f;++P)g[P]=p[P];return g}function i(p,f){for(;f+1<p.length;f++)p[f]=p[f+1];p.pop()}function n(p){for(var f=new Array(p.length),g=0;g<f.length;++g)f[g]=p[g].listener||p[g];return f}function m(p,f){return new Promise(function(g,P){function T(I){p.removeListener(f,O),P(I)}function O(){typeof p.removeListener=="function"&&p.removeListener("error",T),g([].slice.call(arguments))}c(p,f,O,{once:!0}),f!=="error"&&v(p,T,{once:!0})})}function v(p,f,g){typeof p.on=="function"&&c(p,"error",f,g)}function c(p,f,g,P){if(typeof p.on=="function")P.once?p.once(f,g):p.on(f,g);else if(typeof p.addEventListener=="function")p.addEventListener(f,function T(O){P.once&&p.removeEventListener(f,T),g(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof p)}}),ik=aA((A,t)=>{var{ArrayIsArray:j,ObjectSetPrototypeOf:k}=gA(),{EventEmitter:e}=nk();function E(G){e.call(this,G)}k(E.prototype,e.prototype),k(E,e),E.prototype.pipe=function(G,s){let B=this;function a(i){G.writable&&G.write(i)===!1&&B.pause&&B.pause()}B.on("data",a);function $(){B.readable&&B.resume&&B.resume()}G.on("drain",$),!G._isStdio&&(!s||s.end!==!1)&&(B.on("end",h),B.on("close",x));let d=!1;function h(){d||(d=!0,G.end())}function x(){d||(d=!0,typeof G.destroy=="function"&&G.destroy())}function o(i){F(),e.listenerCount(this,"error")===0&&this.emit("error",i)}r(B,"error",o),r(G,"error",o);function F(){B.removeListener("data",a),G.removeListener("drain",$),B.removeListener("end",h),B.removeListener("close",x),B.removeListener("error",o),G.removeListener("error",o),B.removeListener("end",F),B.removeListener("close",F),G.removeListener("close",F)}return B.on("end",F),B.on("close",F),G.on("close",F),G.emit("pipe",B),G};function r(G,s,B){if(typeof G.prependListener=="function")return G.prependListener(s,B);!G._events||!G._events[s]?G.on(s,B):j(G._events[s])?G._events[s].unshift(B):G._events[s]=[B,G._events[s]]}t.exports={Stream:E,prependListener:r}}),ok=aA((A,t)=>{var{AbortError:j,codes:k}=TA(),e=Uj(),{ERR_INVALID_ARG_TYPE:E}=k,r=(s,B)=>{if(typeof s!="object"||!("aborted"in s))throw new E(B,"AbortSignal",s)};function G(s){return!!(s&&typeof s.pipe=="function")}t.exports.addAbortSignal=function(s,B){if(r(s,"signal"),!G(B))throw new E("stream","stream.Stream",B);return t.exports.addAbortSignalNoValidate(s,B)},t.exports.addAbortSignalNoValidate=function(s,B){if(typeof s!="object"||!("aborted"in s))return B;let a=()=>{B.destroy(new j(void 0,{cause:s.reason}))};return s.aborted?a():(s.addEventListener("abort",a),e(B,()=>s.removeEventListener("abort",a))),B}}),la=aA((A,t)=>{var{StringPrototypeSlice:j,SymbolIterator:k,TypedArrayPrototypeSet:e,Uint8Array:E}=gA(),{Buffer:r}=pj(),{inspect:G}=sj();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){let B={data:s,next:null};this.length>0?this.tail.next=B:this.head=B,this.tail=B,++this.length}unshift(s){let B={data:s,next:this.head};this.length===0&&(this.tail=B),this.head=B,++this.length}shift(){if(this.length===0)return;let s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let B=this.head,a=""+B.data;for(;(B=B.next)!==null;)a+=s+B.data;return a}concat(s){if(this.length===0)return r.alloc(0);let B=r.allocUnsafe(s>>>0),a=this.head,$=0;for(;a;)e(B,a.data,$),$+=a.data.length,a=a.next;return B}consume(s,B){let a=this.head.data;if(s<a.length){let $=a.slice(0,s);return this.head.data=a.slice(s),$}return s===a.length?this.shift():B?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[k](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let B="",a=this.head,$=0;do{let d=a.data;if(s>d.length)B+=d,s-=d.length;else{s===d.length?(B+=d,++$,a.next?this.head=a.next:this.head=this.tail=null):(B+=j(d,0,s),this.head=a,a.data=j(d,s));break}++$}while((a=a.next)!==null);return this.length-=$,B}_getBuffer(s){let B=r.allocUnsafe(s),a=s,$=this.head,d=0;do{let h=$.data;if(s>h.length)e(B,h,a-s),s-=h.length;else{s===h.length?(e(B,h,a-s),++d,$.next?this.head=$.next:this.head=this.tail=null):(e(B,new E(h.buffer,h.byteOffset,s),a-s),this.head=$,$.data=h.slice(s));break}++d}while(($=$.next)!==null);return this.length-=d,B}[Symbol.for("nodejs.util.inspect.custom")](s,B){return G(this,{...B,depth:0,customInspect:!1})}}}),uk=aA((A,t)=>{var{MathFloor:j,NumberIsInteger:k}=gA(),{ERR_INVALID_ARG_VALUE:e}=TA().codes;function E(s,B,a){return s.highWaterMark!=null?s.highWaterMark:B?s[a]:null}function r(s){return s?16:16384}function G(s,B,a,$){let d=E(B,$,a);if(d!=null){if(!k(d)||d<0){let h=$?`options.${a}`:"options.highWaterMark";throw new e(h,d)}return j(d)}return r(s.objectMode)}t.exports={getHighWaterMark:G,getDefaultHighWaterMark:r}}),ra=aA((A,t)=>{var j=pj(),k=j.Buffer;function e(r,G){for(var s in r)G[s]=r[s]}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?t.exports=j:(e(j,A),A.Buffer=E);function E(r,G,s){return k(r,G,s)}E.prototype=Object.create(k.prototype),e(k,E),E.from=function(r,G,s){if(typeof r=="number")throw new TypeError("Argument must not be a number");return k(r,G,s)},E.alloc=function(r,G,s){if(typeof r!="number")throw new TypeError("Argument must be a number");var B=k(r);return G!==void 0?typeof s=="string"?B.fill(G,s):B.fill(G):B.fill(0),B},E.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return k(r)},E.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return j.SlowBuffer(r)}}),qa=aA((A)=>{var t=ra().Buffer,j=t.isEncoding||function(n){switch(n=""+n,n&&n.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function k(n){if(!n)return"utf8";for(var m;;)switch(n){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return n;default:if(m)return;n=(""+n).toLowerCase(),m=!0}}function e(n){var m=k(n);if(typeof m!="string"&&(t.isEncoding===j||!j(n)))throw new Error("Unknown encoding: "+n);return m||n}A.StringDecoder=E;function E(n){this.encoding=e(n);var m;switch(this.encoding){case"utf16le":this.text=d,this.end=h,m=4;break;case"utf8":this.fillLast=B,m=4;break;case"base64":this.text=x,this.end=o,m=3;break;default:this.write=F,this.end=i;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(m)}E.prototype.write=function(n){if(n.length===0)return"";var m,v;if(this.lastNeed){if(m=this.fillLast(n),m===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<n.length?m?m+this.text(n,v):this.text(n,v):m||""},E.prototype.end=$,E.prototype.text=a,E.prototype.fillLast=function(n){if(this.lastNeed<=n.length)return n.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);n.copy(this.lastChar,this.lastTotal-this.lastNeed,0,n.length),this.lastNeed-=n.length};function r(n){return n<=127?0:n>>5===6?2:n>>4===14?3:n>>3===30?4:n>>6===2?-1:-2}function G(n,m,v){var c=m.length-1;if(c<v)return 0;var p=r(m[c]);return p>=0?(p>0&&(n.lastNeed=p-1),p):--c<v||p===-2?0:(p=r(m[c]),p>=0?(p>0&&(n.lastNeed=p-2),p):--c<v||p===-2?0:(p=r(m[c]),p>=0?(p>0&&(p===2?p=0:n.lastNeed=p-3),p):0))}function s(n,m,v){if((m[0]&192)!==128)return n.lastNeed=0,"\uFFFD";if(n.lastNeed>1&&m.length>1){if((m[1]&192)!==128)return n.lastNeed=1,"\uFFFD";if(n.lastNeed>2&&m.length>2&&(m[2]&192)!==128)return n.lastNeed=2,"\uFFFD"}}function B(n){var m=this.lastTotal-this.lastNeed,v=s(this,n,m);if(v!==void 0)return v;if(this.lastNeed<=n.length)return n.copy(this.lastChar,m,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);n.copy(this.lastChar,m,0,n.length),this.lastNeed-=n.length}function a(n,m){var v=G(this,n,m);if(!this.lastNeed)return n.toString("utf8",m);this.lastTotal=v;var c=n.length-(v-this.lastNeed);return n.copy(this.lastChar,0,c),n.toString("utf8",m,c)}function $(n){var m=n&&n.length?this.write(n):"";return this.lastNeed?m+"\uFFFD":m}function d(n,m){if((n.length-m)%2===0){var v=n.toString("utf16le",m);if(v){var c=v.charCodeAt(v.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=n[n.length-2],this.lastChar[1]=n[n.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=n[n.length-1],n.toString("utf16le",m,n.length-1)}function h(n){var m=n&&n.length?this.write(n):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return m+this.lastChar.toString("utf16le",0,v)}return m}function x(n,m){var v=(n.length-m)%3;return v===0?n.toString("base64",m):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=n[n.length-1]:(this.lastChar[0]=n[n.length-2],this.lastChar[1]=n[n.length-1]),n.toString("base64",m,n.length-v))}function o(n){var m=n&&n.length?this.write(n):"";return this.lastNeed?m+this.lastChar.toString("base64",0,3-this.lastNeed):m}function F(n){return n.toString(this.encoding)}function i(n){return n&&n.length?this.write(n):""}}),_E=aA((A,t)=>{var j=(Cj(),Xj(nj)),{PromisePrototypeThen:k,SymbolAsyncIterator:e,SymbolIterator:E}=gA(),{Buffer:r}=pj(),{ERR_INVALID_ARG_TYPE:G,ERR_STREAM_NULL_VALUES:s}=TA().codes;function B(a,$,d){let h;if(typeof $=="string"||$ instanceof r)return new a({objectMode:!0,...d,read(){this.push($),this.push(null)}});let x;if($&&$[e])x=!0,h=$[e]();else if($&&$[E])x=!1,h=$[E]();else throw new G("iterable",["Iterable"],$);let o=new a({objectMode:!0,highWaterMark:1,...d}),F=!1;o._read=function(){F||(F=!0,n())},o._destroy=function(m,v){k(i(m),()=>j.nextTick(v,m),(c)=>j.nextTick(v,c||m))};async function i(m){let v=m!=null,c=typeof h.throw=="function";if(v&&c){let{value:p,done:f}=await h.throw(m);if(await p,f)return}if(typeof h.return=="function"){let{value:p}=await h.return();await p}}async function n(){for(;;){try{let{value:m,done:v}=x?await h.next():h.next();if(v)o.push(null);else{let c=m&&typeof m.then=="function"?await m:m;if(c===null)throw F=!1,new s;if(o.push(c))continue;F=!1}}catch(m){o.destroy(m)}break}}return o}t.exports=B}),J7=aA((A,t)=>{var j=(Cj(),Xj(nj)),{ArrayPrototypeIndexOf:k,NumberIsInteger:e,NumberIsNaN:E,NumberParseInt:r,ObjectDefineProperties:G,ObjectKeys:s,ObjectSetPrototypeOf:B,Promise:a,SafeSet:$,SymbolAsyncIterator:d,Symbol:h}=gA();t.exports=L,L.ReadableState=X;var{EventEmitter:x}=nk(),{Stream:o,prependListener:F}=ik(),{Buffer:i}=pj(),{addAbortSignal:n}=ok(),m=Uj(),v=sj().debuglog("stream",(l)=>{v=l}),c=la(),p=o6(),{getHighWaterMark:f,getDefaultHighWaterMark:g}=uk(),{aggregateTwoErrors:P,codes:{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:I,ERR_STREAM_PUSH_AFTER_EOF:K,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:w}}=TA(),{validateObject:H}=V7(),y=h("kPaused"),{StringDecoder:N}=qa(),S=_E();B(L.prototype,o.prototype),B(L,o);var C=()=>{},{errorOrDestroy:R}=p;function X(l,q,u){typeof u!="boolean"&&(u=q instanceof Fj()),this.objectMode=!!(l&&l.objectMode),u&&(this.objectMode=this.objectMode||!!(l&&l.readableObjectMode)),this.highWaterMark=l?f(this,l,"readableHighWaterMark",u):g(!1),this.buffer=new c,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[y]=null,this.errorEmitted=!1,this.emitClose=!l||l.emitClose!==!1,this.autoDestroy=!l||l.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=l&&l.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,l&&l.encoding&&(this.decoder=new N(l.encoding),this.encoding=l.encoding)}function L(l){if(!(this instanceof L))return new L(l);let q=this instanceof Fj();this._readableState=new X(l,this,q),l&&(typeof l.read=="function"&&(this._read=l.read),typeof l.destroy=="function"&&(this._destroy=l.destroy),typeof l.construct=="function"&&(this._construct=l.construct),l.signal&&!q&&n(l.signal,this)),o.call(this,l),p.construct(this,()=>{this._readableState.needReadable&&oA(this,this._readableState)})}L.prototype.destroy=p.destroy,L.prototype._undestroy=p.undestroy,L.prototype._destroy=function(l,q){q(l)},L.prototype[x.captureRejectionSymbol]=function(l){this.destroy(l)},L.prototype.push=function(l,q){return Q(this,l,q,!1)},L.prototype.unshift=function(l,q){return Q(this,l,q,!0)};function Q(l,q,u,_){v("readableAddChunk",q);let b=l._readableState,z;if(b.objectMode||(typeof q=="string"?(u=u||b.defaultEncoding,b.encoding!==u&&(_&&b.encoding?q=i.from(q,u).toString(b.encoding):(q=i.from(q,u),u=""))):q instanceof i?u="":o._isUint8Array(q)?(q=o._uint8ArrayToBuffer(q),u=""):q!=null&&(z=new T("chunk",["string","Buffer","Uint8Array"],q))),z)R(l,z);else if(q===null)b.reading=!1,GA(l,b);else if(b.objectMode||q&&q.length>0)if(_)if(b.endEmitted)R(l,new w);else{if(b.destroyed||b.errored)return!1;Z(l,b,q,!0)}else if(b.ended)R(l,new K);else{if(b.destroyed||b.errored)return!1;b.reading=!1,b.decoder&&!u?(q=b.decoder.write(q),b.objectMode||q.length!==0?Z(l,b,q,!1):oA(l,b)):Z(l,b,q,!1)}else _||(b.reading=!1,oA(l,b));return!b.ended&&(b.length<b.highWaterMark||b.length===0)}function Z(l,q,u,_){q.flowing&&q.length===0&&!q.sync&&l.listenerCount("data")>0?(q.multiAwaitDrain?q.awaitDrainWriters.clear():q.awaitDrainWriters=null,q.dataEmitted=!0,l.emit("data",u)):(q.length+=q.objectMode?1:u.length,_?q.buffer.unshift(u):q.buffer.push(u),q.needReadable&&EA(l)),oA(l,q)}L.prototype.isPaused=function(){let l=this._readableState;return l[y]===!0||l.flowing===!1},L.prototype.setEncoding=function(l){let q=new N(l);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;let u=this._readableState.buffer,_="";for(let b of u)_+=q.write(b);return u.clear(),_!==""&&u.push(_),this._readableState.length=_.length,this};var kA=1073741824;function eA(l){if(l>kA)throw new I("size","<= 1GiB",l);return l--,l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,l++,l}function jA(l,q){return l<=0||q.length===0&&q.ended?0:q.objectMode?1:E(l)?q.flowing&&q.length?q.buffer.first().length:q.length:l<=q.length?l:q.ended?q.length:0}L.prototype.read=function(l){v("read",l),l===void 0?l=NaN:e(l)||(l=r(l,10));let q=this._readableState,u=l;if(l>q.highWaterMark&&(q.highWaterMark=eA(l)),l!==0&&(q.emittedReadable=!1),l===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended))return v("read: emitReadable",q.length,q.ended),q.length===0&&q.ended?FA(this):EA(this),null;if(l=jA(l,q),l===0&&q.ended)return q.length===0&&FA(this),null;let _=q.needReadable;if(v("need readable",_),(q.length===0||q.length-l<q.highWaterMark)&&(_=!0,v("length less than watermark",_)),q.ended||q.reading||q.destroyed||q.errored||!q.constructed)_=!1,v("reading, ended or constructing",_);else if(_){v("do read"),q.reading=!0,q.sync=!0,q.length===0&&(q.needReadable=!0);try{this._read(q.highWaterMark)}catch(z){R(this,z)}q.sync=!1,q.reading||(l=jA(u,q))}let b;return l>0?b=lA(l,q):b=null,b===null?(q.needReadable=q.length<=q.highWaterMark,l=0):(q.length-=l,q.multiAwaitDrain?q.awaitDrainWriters.clear():q.awaitDrainWriters=null),q.length===0&&(q.ended||(q.needReadable=!0),u!==l&&q.ended&&FA(this)),b!==null&&!q.errorEmitted&&!q.closeEmitted&&(q.dataEmitted=!0,this.emit("data",b)),b};function GA(l,q){if(v("onEofChunk"),!q.ended){if(q.decoder){let u=q.decoder.end();u&&u.length&&(q.buffer.push(u),q.length+=q.objectMode?1:u.length)}q.ended=!0,q.sync?EA(l):(q.needReadable=!1,q.emittedReadable=!0,iA(l))}}function EA(l){let q=l._readableState;v("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(v("emitReadable",q.flowing),q.emittedReadable=!0,j.nextTick(iA,l))}function iA(l){let q=l._readableState;v("emitReadable_",q.destroyed,q.length,q.ended),!q.destroyed&&!q.errored&&(q.length||q.ended)&&(l.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,W(l)}function oA(l,q){!q.readingMore&&q.constructed&&(q.readingMore=!0,j.nextTick(tA,l,q))}function tA(l,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0);){let u=q.length;if(v("maybeReadMore read 0"),l.read(0),u===q.length)break}q.readingMore=!1}L.prototype._read=function(l){throw new O("_read()")},L.prototype.pipe=function(l,q){let u=this,_=this._readableState;_.pipes.length===1&&(_.multiAwaitDrain||(_.multiAwaitDrain=!0,_.awaitDrainWriters=new $(_.awaitDrainWriters?[_.awaitDrainWriters]:[]))),_.pipes.push(l),v("pipe count=%d opts=%j",_.pipes.length,q);let b=(!q||q.end!==!1)&&l!==j.stdout&&l!==j.stderr?J:R6;_.endEmitted?j.nextTick(b):u.once("end",b),l.on("unpipe",z);function z(Rj,aj){v("onunpipe"),Rj===u&&aj&&aj.hasUnpiped===!1&&(aj.hasUnpiped=!0,uA())}function J(){v("onend"),l.end()}let qA,fA=!1;function uA(){v("cleanup"),l.removeListener("close",Gk),l.removeListener("finish",lk),qA&&l.removeListener("drain",qA),l.removeListener("error",Ek),l.removeListener("unpipe",z),u.removeListener("end",J),u.removeListener("end",R6),u.removeListener("data",dA),fA=!0,qA&&_.awaitDrainWriters&&(!l._writableState||l._writableState.needDrain)&&qA()}function nA(){fA||(_.pipes.length===1&&_.pipes[0]===l?(v("false write response, pause",0),_.awaitDrainWriters=l,_.multiAwaitDrain=!1):_.pipes.length>1&&_.pipes.includes(l)&&(v("false write response, pause",_.awaitDrainWriters.size),_.awaitDrainWriters.add(l)),u.pause()),qA||(qA=$A(u,l),l.on("drain",qA))}u.on("data",dA);function dA(Rj){v("ondata");let aj=l.write(Rj);v("dest.write",aj),aj===!1&&nA()}function Ek(Rj){if(v("onerror",Rj),R6(),l.removeListener("error",Ek),l.listenerCount("error")===0){let aj=l._writableState||l._readableState;aj&&!aj.errorEmitted?R(l,Rj):l.emit("error",Rj)}}F(l,"error",Ek);function Gk(){l.removeListener("finish",lk),R6()}l.once("close",Gk);function lk(){v("onfinish"),l.removeListener("close",Gk),R6()}l.once("finish",lk);function R6(){v("unpipe"),u.unpipe(l)}return l.emit("pipe",u),l.writableNeedDrain===!0?_.flowing&&nA():_.flowing||(v("pipe resume"),u.resume()),l};function $A(l,q){return function(){let u=l._readableState;u.awaitDrainWriters===q?(v("pipeOnDrain",1),u.awaitDrainWriters=null):u.multiAwaitDrain&&(v("pipeOnDrain",u.awaitDrainWriters.size),u.awaitDrainWriters.delete(q)),(!u.awaitDrainWriters||u.awaitDrainWriters.size===0)&&l.listenerCount("data")&&l.resume()}}L.prototype.unpipe=function(l){let q=this._readableState,u={hasUnpiped:!1};if(q.pipes.length===0)return this;if(!l){let b=q.pipes;q.pipes=[],this.pause();for(let z=0;z<b.length;z++)b[z].emit("unpipe",this,{hasUnpiped:!1});return this}let _=k(q.pipes,l);return _===-1?this:(q.pipes.splice(_,1),q.pipes.length===0&&this.pause(),l.emit("unpipe",this,u),this)},L.prototype.on=function(l,q){let u=o.prototype.on.call(this,l,q),_=this._readableState;return l==="data"?(_.readableListening=this.listenerCount("readable")>0,_.flowing!==!1&&this.resume()):l==="readable"&&!_.endEmitted&&!_.readableListening&&(_.readableListening=_.needReadable=!0,_.flowing=!1,_.emittedReadable=!1,v("on readable",_.length,_.reading),_.length?EA(this):_.reading||j.nextTick(M,this)),u},L.prototype.addListener=L.prototype.on,L.prototype.removeListener=function(l,q){let u=o.prototype.removeListener.call(this,l,q);return l==="readable"&&j.nextTick(V,this),u},L.prototype.off=L.prototype.removeListener,L.prototype.removeAllListeners=function(l){let q=o.prototype.removeAllListeners.apply(this,arguments);return(l==="readable"||l===void 0)&&j.nextTick(V,this),q};function V(l){let q=l._readableState;q.readableListening=l.listenerCount("readable")>0,q.resumeScheduled&&q[y]===!1?q.flowing=!0:l.listenerCount("data")>0?l.resume():q.readableListening||(q.flowing=null)}function M(l){v("readable nexttick read 0"),l.read(0)}L.prototype.resume=function(){let l=this._readableState;return l.flowing||(v("resume"),l.flowing=!l.readableListening,D(this,l)),l[y]=!1,this};function D(l,q){q.resumeScheduled||(q.resumeScheduled=!0,j.nextTick(U,l,q))}function U(l,q){v("resume",q.reading),q.reading||l.read(0),q.resumeScheduled=!1,l.emit("resume"),W(l),q.flowing&&!q.reading&&l.read(0)}L.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[y]=!0,this};function W(l){let q=l._readableState;for(v("flow",q.flowing);q.flowing&&l.read()!==null;);}L.prototype.wrap=function(l){let q=!1;l.on("data",(_)=>{!this.push(_)&&l.pause&&(q=!0,l.pause())}),l.on("end",()=>{this.push(null)}),l.on("error",(_)=>{R(this,_)}),l.on("close",()=>{this.destroy()}),l.on("destroy",()=>{this.destroy()}),this._read=()=>{q&&l.resume&&(q=!1,l.resume())};let u=s(l);for(let _=1;_<u.length;_++){let b=u[_];this[b]===void 0&&typeof l[b]=="function"&&(this[b]=l[b].bind(l))}return this},L.prototype[d]=function(){return Y(this)},L.prototype.iterator=function(l){return l!==void 0&&H(l,"options"),Y(this,l)};function Y(l,q){typeof l.read!="function"&&(l=L.wrap(l,{objectMode:!0}));let u=BA(l,q);return u.stream=l,u}async function*BA(l,q){let u=C;function _(J){this===l?(u(),u=C):u=J}l.on("readable",_);let b,z=m(l,{writable:!1},(J)=>{b=J?P(b,J):null,u(),u=C});try{for(;;){let J=l.destroyed?null:l.read();if(J!==null)yield J;else{if(b)throw b;if(b===null)return;await new a(_)}}}catch(J){throw b=P(b,J),b}finally{(b||q?.destroyOnReturn!==!1)&&(b===void 0||l._readableState.autoDestroy)?p.destroyer(l,null):(l.off("readable",_),z())}}G(L.prototype,{readable:{__proto__:null,get(){let l=this._readableState;return!!l&&l.readable!==!1&&!l.destroyed&&!l.errorEmitted&&!l.endEmitted},set(l){this._readableState&&(this._readableState.readable=!!l)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(l){this._readableState&&(this._readableState.flowing=l)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(l){!this._readableState||(this._readableState.destroyed=l)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),G(X.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[y]!==!1},set(l){this[y]=!!l}}}),L._fromList=lA;function lA(l,q){if(q.length===0)return null;let u;return q.objectMode?u=q.buffer.shift():!l||l>=q.length?(q.decoder?u=q.buffer.join(""):q.buffer.length===1?u=q.buffer.first():u=q.buffer.concat(q.length),q.buffer.clear()):u=q.buffer.consume(l,q.decoder),u}function FA(l){let q=l._readableState;v("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,j.nextTick(LA,q,l))}function LA(l,q){if(v("endReadableNT",l.endEmitted,l.length),!l.errored&&!l.closeEmitted&&!l.endEmitted&&l.length===0){if(l.endEmitted=!0,q.emit("end"),q.writable&&q.allowHalfOpen===!1)j.nextTick(Bj,q);else if(l.autoDestroy){let u=q._writableState;(!u||u.autoDestroy&&(u.finished||u.writable===!1))&&q.destroy()}}}function Bj(l){l.writable&&!l.writableEnded&&!l.destroyed&&l.end()}L.from=function(l,q){return S(L,l,q)};var mA;function P7(){return mA===void 0&&(mA={}),mA}L.fromWeb=function(l,q){return P7().newStreamReadableFromReadableStream(l,q)},L.toWeb=function(l,q){return P7().newReadableStreamFromStreamReadable(l,q)},L.wrap=function(l,q){var u,_;return new L({objectMode:(u=(_=l.readableObjectMode)!==null&&_!==void 0?_:l.objectMode)!==null&&u!==void 0?u:!0,...q,destroy(b,z){p.destroyer(l,b),z(b)}}).wrap(l)}}),OE=aA((A,t)=>{var j=(Cj(),Xj(nj)),{ArrayPrototypeSlice:k,Error:e,FunctionPrototypeSymbolHasInstance:E,ObjectDefineProperty:r,ObjectDefineProperties:G,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:B,Symbol:a,SymbolHasInstance:$}=gA();t.exports=N,N.WritableState=H;var{EventEmitter:d}=nk(),h=ik().Stream,{Buffer:x}=pj(),o=o6(),{addAbortSignal:F}=ok(),{getHighWaterMark:i,getDefaultHighWaterMark:n}=uk(),{ERR_INVALID_ARG_TYPE:m,ERR_METHOD_NOT_IMPLEMENTED:v,ERR_MULTIPLE_CALLBACK:c,ERR_STREAM_CANNOT_PIPE:p,ERR_STREAM_DESTROYED:f,ERR_STREAM_ALREADY_FINISHED:g,ERR_STREAM_NULL_VALUES:P,ERR_STREAM_WRITE_AFTER_END:T,ERR_UNKNOWN_ENCODING:O}=TA().codes,{errorOrDestroy:I}=o;s(N.prototype,h.prototype),s(N,h);function K(){}var w=a("kOnFinished");function H(M,D,U){typeof U!="boolean"&&(U=D instanceof Fj()),this.objectMode=!!(M&&M.objectMode),U&&(this.objectMode=this.objectMode||!!(M&&M.writableObjectMode)),this.highWaterMark=M?i(this,M,"writableHighWaterMark",U):n(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let W=!!(M&&M.decodeStrings===!1);this.decodeStrings=!W,this.defaultEncoding=M&&M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=L.bind(void 0,D),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,y(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!M||M.emitClose!==!1,this.autoDestroy=!M||M.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[w]=[]}function y(M){M.buffered=[],M.bufferedIndex=0,M.allBuffers=!0,M.allNoop=!0}H.prototype.getBuffer=function(){return k(this.buffered,this.bufferedIndex)},r(H.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function N(M){let D=this instanceof Fj();if(!D&&!E(N,this))return new N(M);this._writableState=new H(M,this,D),M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final),typeof M.construct=="function"&&(this._construct=M.construct),M.signal&&F(M.signal,this)),h.call(this,M),o.construct(this,()=>{let U=this._writableState;U.writing||eA(this,U),iA(this,U)})}r(N,$,{__proto__:null,value:function(M){return E(this,M)?!0:this!==N?!1:M&&M._writableState instanceof H}}),N.prototype.pipe=function(){I(this,new p)};function S(M,D,U,W){let Y=M._writableState;if(typeof U=="function")W=U,U=Y.defaultEncoding;else{if(!U)U=Y.defaultEncoding;else if(U!=="buffer"&&!x.isEncoding(U))throw new O(U);typeof W!="function"&&(W=K)}if(D===null)throw new P;if(!Y.objectMode)if(typeof D=="string")Y.decodeStrings!==!1&&(D=x.from(D,U),U="buffer");else if(D instanceof x)U="buffer";else if(h._isUint8Array(D))D=h._uint8ArrayToBuffer(D),U="buffer";else throw new m("chunk",["string","Buffer","Uint8Array"],D);let BA;return Y.ending?BA=new T:Y.destroyed&&(BA=new f("write")),BA?(j.nextTick(W,BA),I(M,BA,!0),BA):(Y.pendingcb++,C(M,Y,D,U,W))}N.prototype.write=function(M,D,U){return S(this,M,D,U)===!0},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){let M=this._writableState;M.corked&&(M.corked--,M.writing||eA(this,M))},N.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=B(M)),!x.isEncoding(M))throw new O(M);return this._writableState.defaultEncoding=M,this};function C(M,D,U,W,Y){let BA=D.objectMode?1:U.length;D.length+=BA;let lA=D.length<D.highWaterMark;return lA||(D.needDrain=!0),D.writing||D.corked||D.errored||!D.constructed?(D.buffered.push({chunk:U,encoding:W,callback:Y}),D.allBuffers&&W!=="buffer"&&(D.allBuffers=!1),D.allNoop&&Y!==K&&(D.allNoop=!1)):(D.writelen=BA,D.writecb=Y,D.writing=!0,D.sync=!0,M._write(U,W,D.onwrite),D.sync=!1),lA&&!D.errored&&!D.destroyed}function R(M,D,U,W,Y,BA,lA){D.writelen=W,D.writecb=lA,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new f("write")):U?M._writev(Y,D.onwrite):M._write(Y,BA,D.onwrite),D.sync=!1}function X(M,D,U,W){--D.pendingcb,W(U),kA(D),I(M,U)}function L(M,D){let U=M._writableState,W=U.sync,Y=U.writecb;if(typeof Y!="function"){I(M,new c);return}U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0,D?(D.stack,U.errored||(U.errored=D),M._readableState&&!M._readableState.errored&&(M._readableState.errored=D),W?j.nextTick(X,M,U,D,Y):X(M,U,D,Y)):(U.buffered.length>U.bufferedIndex&&eA(M,U),W?U.afterWriteTickInfo!==null&&U.afterWriteTickInfo.cb===Y?U.afterWriteTickInfo.count++:(U.afterWriteTickInfo={count:1,cb:Y,stream:M,state:U},j.nextTick(Q,U.afterWriteTickInfo)):Z(M,U,1,Y))}function Q({stream:M,state:D,count:U,cb:W}){return D.afterWriteTickInfo=null,Z(M,D,U,W)}function Z(M,D,U,W){for(!D.ending&&!M.destroyed&&D.length===0&&D.needDrain&&(D.needDrain=!1,M.emit("drain"));U-- >0;)D.pendingcb--,W();D.destroyed&&kA(D),iA(M,D)}function kA(M){if(M.writing)return;for(let Y=M.bufferedIndex;Y<M.buffered.length;++Y){var D;let{chunk:BA,callback:lA}=M.buffered[Y],FA=M.objectMode?1:BA.length;M.length-=FA,lA((D=M.errored)!==null&&D!==void 0?D:new f("write"))}let U=M[w].splice(0);for(let Y=0;Y<U.length;Y++){var W;U[Y]((W=M.errored)!==null&&W!==void 0?W:new f("end"))}y(M)}function eA(M,D){if(D.corked||D.bufferProcessing||D.destroyed||!D.constructed)return;let{buffered:U,bufferedIndex:W,objectMode:Y}=D,BA=U.length-W;if(!BA)return;let lA=W;if(D.bufferProcessing=!0,BA>1&&M._writev){D.pendingcb-=BA-1;let FA=D.allNoop?K:(Bj)=>{for(let mA=lA;mA<U.length;++mA)U[mA].callback(Bj)},LA=D.allNoop&&lA===0?U:k(U,lA);LA.allBuffers=D.allBuffers,R(M,D,!0,D.length,LA,"",FA),y(D)}else{do{let{chunk:FA,encoding:LA,callback:Bj}=U[lA];U[lA++]=null;let mA=Y?1:FA.length;R(M,D,!1,mA,FA,LA,Bj)}while(lA<U.length&&!D.writing);lA===U.length?y(D):lA>256?(U.splice(0,lA),D.bufferedIndex=0):D.bufferedIndex=lA}D.bufferProcessing=!1}N.prototype._write=function(M,D,U){if(this._writev)this._writev([{chunk:M,encoding:D}],U);else throw new v("_write()")},N.prototype._writev=null,N.prototype.end=function(M,D,U){let W=this._writableState;typeof M=="function"?(U=M,M=null,D=null):typeof D=="function"&&(U=D,D=null);let Y;if(M!=null){let BA=S(this,M,D);BA instanceof e&&(Y=BA)}return W.corked&&(W.corked=1,this.uncork()),Y||(!W.errored&&!W.ending?(W.ending=!0,iA(this,W,!0),W.ended=!0):W.finished?Y=new g("end"):W.destroyed&&(Y=new f("end"))),typeof U=="function"&&(Y||W.finished?j.nextTick(U,Y):W[w].push(U)),this};function jA(M){return M.ending&&!M.destroyed&&M.constructed&&M.length===0&&!M.errored&&M.buffered.length===0&&!M.finished&&!M.writing&&!M.errorEmitted&&!M.closeEmitted}function GA(M,D){let U=!1;function W(Y){if(U){I(M,Y??c());return}if(U=!0,D.pendingcb--,Y){let BA=D[w].splice(0);for(let lA=0;lA<BA.length;lA++)BA[lA](Y);I(M,Y,D.sync)}else jA(D)&&(D.prefinished=!0,M.emit("prefinish"),D.pendingcb++,j.nextTick(oA,M,D))}D.sync=!0,D.pendingcb++;try{M._final(W)}catch(Y){W(Y)}D.sync=!1}function EA(M,D){!D.prefinished&&!D.finalCalled&&(typeof M._final=="function"&&!D.destroyed?(D.finalCalled=!0,GA(M,D)):(D.prefinished=!0,M.emit("prefinish")))}function iA(M,D,U){jA(D)&&(EA(M,D),D.pendingcb===0&&(U?(D.pendingcb++,j.nextTick((W,Y)=>{jA(Y)?oA(W,Y):Y.pendingcb--},M,D)):jA(D)&&(D.pendingcb++,oA(M,D))))}function oA(M,D){D.pendingcb--,D.finished=!0;let U=D[w].splice(0);for(let W=0;W<U.length;W++)U[W]();if(M.emit("finish"),D.autoDestroy){let W=M._readableState;(!W||W.autoDestroy&&(W.endEmitted||W.readable===!1))&&M.destroy()}}G(N.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(M){this._writableState&&(this._writableState.destroyed=M)}},writable:{__proto__:null,get(){let M=this._writableState;return!!M&&M.writable!==!1&&!M.destroyed&&!M.errored&&!M.ending&&!M.ended},set(M){this._writableState&&(this._writableState.writable=!!M)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let M=this._writableState;return M?!M.destroyed&&!M.ending&&M.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var tA=o.destroy;N.prototype.destroy=function(M,D){let U=this._writableState;return!U.destroyed&&(U.bufferedIndex<U.buffered.length||U[w].length)&&j.nextTick(kA,U),tA.call(this,M,D),this},N.prototype._undestroy=o.undestroy,N.prototype._destroy=function(M,D){D(M)},N.prototype[d.captureRejectionSymbol]=function(M){this.destroy(M)};var $A;function V(){return $A===void 0&&($A={}),$A}N.fromWeb=function(M,D){return V().newStreamWritableFromWritableStream(M,D)},N.toWeb=function(M){return V().newWritableStreamFromStreamWritable(M)}}),Ba=aA((A,t)=>{var j=(Cj(),Xj(nj)),k=pj(),{isReadable:e,isWritable:E,isIterable:r,isNodeStream:G,isReadableNodeStream:s,isWritableNodeStream:B,isDuplexNodeStream:a}=zj(),$=Uj(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:x}}=TA(),{destroyer:o}=o6(),F=Fj(),i=J7(),{createDeferredPromise:n}=sj(),m=_E(),v=globalThis.Blob||k.Blob,c=typeof v<"u"?function(O){return O instanceof v}:function(O){return!1},p=globalThis.AbortController||Fk().AbortController,{FunctionPrototypeCall:f}=gA(),g=class extends F{constructor(O){super(O),O?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),O?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};t.exports=function O(I,K){if(a(I))return I;if(s(I))return T({readable:I});if(B(I))return T({writable:I});if(G(I))return T({writable:!1,readable:!1});if(typeof I=="function"){let{value:H,write:y,final:N,destroy:S}=P(I);if(r(H))return m(g,H,{objectMode:!0,write:y,final:N,destroy:S});let C=H?.then;if(typeof C=="function"){let R,X=f(C,H,(L)=>{if(L!=null)throw new x("nully","body",L)},(L)=>{o(R,L)});return R=new g({objectMode:!0,readable:!1,write:y,final(L){N(async()=>{try{await X,j.nextTick(L,null)}catch(Q){j.nextTick(L,Q)}})},destroy:S})}throw new x("Iterable, AsyncIterable or AsyncFunction",K,H)}if(c(I))return O(I.arrayBuffer());if(r(I))return m(g,I,{objectMode:!0,writable:!1});if(typeof I?.writable=="object"||typeof I?.readable=="object"){let H=I!=null&&I.readable?s(I?.readable)?I?.readable:O(I.readable):void 0,y=I!=null&&I.writable?B(I?.writable)?I?.writable:O(I.writable):void 0;return T({readable:H,writable:y})}let w=I?.then;if(typeof w=="function"){let H;return f(w,I,(y)=>{y!=null&&H.push(y),H.push(null)},(y)=>{o(H,y)}),H=new g({objectMode:!0,writable:!1,read(){}})}throw new h(K,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],I)};function P(O){let{promise:I,resolve:K}=n(),w=new p,H=w.signal;return{value:O(async function*(){for(;;){let y=I;I=null;let{chunk:N,done:S,cb:C}=await y;if(j.nextTick(C),S)return;if(H.aborted)throw new d(void 0,{cause:H.reason});({promise:I,resolve:K}=n()),yield N}}(),{signal:H}),write(y,N,S){let C=K;K=null,C({chunk:y,done:!1,cb:S})},final(y){let N=K;K=null,N({done:!0,cb:y})},destroy(y,N){w.abort(),N(y)}}}function T(O){let I=O.readable&&typeof O.readable.read!="function"?i.wrap(O.readable):O.readable,K=O.writable,w=!!e(I),H=!!E(K),y,N,S,C,R;function X(L){let Q=C;C=null,Q?Q(L):L?R.destroy(L):!w&&!H&&R.destroy()}return R=new g({readableObjectMode:!!(I!=null&&I.readableObjectMode),writableObjectMode:!!(K!=null&&K.writableObjectMode),readable:w,writable:H}),H&&($(K,(L)=>{H=!1,L&&o(I,L),X(L)}),R._write=function(L,Q,Z){K.write(L,Q)?Z():y=Z},R._final=function(L){K.end(),N=L},K.on("drain",function(){if(y){let L=y;y=null,L()}}),K.on("finish",function(){if(N){let L=N;N=null,L()}})),w&&($(I,(L)=>{w=!1,L&&o(I,L),X(L)}),I.on("readable",function(){if(S){let L=S;S=null,L()}}),I.on("end",function(){R.push(null)}),R._read=function(){for(;;){let L=I.read();if(L===null){S=R._read;return}if(!R.push(L))return}}),R._destroy=function(L,Q){!L&&C!==null&&(L=new d),S=null,y=null,N=null,C===null?Q(L):(C=Q,o(K,L),o(I,L))},R}}),Fj=aA((A,t)=>{var{ObjectDefineProperties:j,ObjectGetOwnPropertyDescriptor:k,ObjectKeys:e,ObjectSetPrototypeOf:E}=gA();t.exports=s;var r=J7(),G=OE();E(s.prototype,r.prototype),E(s,r);{let d=e(G.prototype);for(let h=0;h<d.length;h++){let x=d[h];s.prototype[x]||(s.prototype[x]=G.prototype[x])}}function s(d){if(!(this instanceof s))return new s(d);r.call(this,d),G.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}j(s.prototype,{writable:{__proto__:null,...k(G.prototype,"writable")},writableHighWaterMark:{__proto__:null,...k(G.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...k(G.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...k(G.prototype,"writableBuffer")},writableLength:{__proto__:null,...k(G.prototype,"writableLength")},writableFinished:{__proto__:null,...k(G.prototype,"writableFinished")},writableCorked:{__proto__:null,...k(G.prototype,"writableCorked")},writableEnded:{__proto__:null,...k(G.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...k(G.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});var B;function a(){return B===void 0&&(B={}),B}s.fromWeb=function(d,h){return a().newStreamDuplexFromReadableWritablePair(d,h)},s.toWeb=function(d){return a().newReadableWritablePairFromDuplex(d)};var $;s.from=function(d){return $||($=Ba()),$(d,"body")}}),KE=aA((A,t)=>{var{ObjectSetPrototypeOf:j,Symbol:k}=gA();t.exports=s;var{ERR_METHOD_NOT_IMPLEMENTED:e}=TA().codes,E=Fj(),{getHighWaterMark:r}=uk();j(s.prototype,E.prototype),j(s,E);var G=k("kCallback");function s($){if(!(this instanceof s))return new s($);let d=$?r(this,$,"readableHighWaterMark",!0):null;d===0&&($={...$,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:$.writableHighWaterMark||0}),E.call(this,$),this._readableState.sync=!1,this[G]=null,$&&(typeof $.transform=="function"&&(this._transform=$.transform),typeof $.flush=="function"&&(this._flush=$.flush)),this.on("prefinish",a)}function B($){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){$?$(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),$&&$()}):(this.push(null),$&&$())}function a(){this._final!==B&&B.call(this)}s.prototype._final=B,s.prototype._transform=function($,d,h){throw new e("_transform()")},s.prototype._write=function($,d,h){let x=this._readableState,o=this._writableState,F=x.length;this._transform($,d,(i,n)=>{if(i){h(i);return}n!=null&&this.push(n),o.ended||F===x.length||x.length<x.highWaterMark?h():this[G]=h})},s.prototype._read=function(){if(this[G]){let $=this[G];this[G]=null,$()}}}),ME=aA((A,t)=>{var{ObjectSetPrototypeOf:j}=gA();t.exports=e;var k=KE();j(e.prototype,k.prototype),j(e,k);function e(E){if(!(this instanceof e))return new e(E);k.call(this,E)}e.prototype._transform=function(E,r,G){G(null,E)}}),vk=aA((A,t)=>{var j=(Cj(),Xj(nj)),{ArrayIsArray:k,Promise:e,SymbolAsyncIterator:E}=gA(),r=Uj(),{once:G}=sj(),s=o6(),B=Fj(),{aggregateTwoErrors:a,codes:{ERR_INVALID_ARG_TYPE:$,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:x,ERR_STREAM_PREMATURE_CLOSE:o},AbortError:F}=TA(),{validateFunction:i,validateAbortSignal:n}=V7(),{isIterable:m,isReadable:v,isReadableNodeStream:c,isNodeStream:p}=zj(),f=globalThis.AbortController||Fk().AbortController,g,P;function T(S,C,R){let X=!1;S.on("close",()=>{X=!0});let L=r(S,{readable:C,writable:R},(Q)=>{X=!Q});return{destroy:(Q)=>{X||(X=!0,s.destroyer(S,Q||new x("pipe")))},cleanup:L}}function O(S){return i(S[S.length-1],"streams[stream.length - 1]"),S.pop()}function I(S){if(m(S))return S;if(c(S))return K(S);throw new $("val",["Readable","Iterable","AsyncIterable"],S)}async function*K(S){P||(P=J7()),yield*P.prototype[E].call(S)}async function w(S,C,R,{end:X}){let L,Q=null,Z=(jA)=>{if(jA&&(L=jA),Q){let GA=Q;Q=null,GA()}},kA=()=>new e((jA,GA)=>{L?GA(L):Q=()=>{L?GA(L):jA()}});C.on("drain",Z);let eA=r(C,{readable:!1},Z);try{C.writableNeedDrain&&await kA();for await(let jA of S)C.write(jA)||await kA();X&&C.end(),await kA(),R()}catch(jA){R(L!==jA?a(L,jA):jA)}finally{eA(),C.off("drain",Z)}}function H(...S){return y(S,G(O(S)))}function y(S,C,R){if(S.length===1&&k(S[0])&&(S=S[0]),S.length<2)throw new h("streams");let X=new f,L=X.signal,Q=R?.signal,Z=[];n(Q,"options.signal");function kA(){oA(new F)}Q?.addEventListener("abort",kA);let eA,jA,GA=[],EA=0;function iA(M){oA(M,--EA===0)}function oA(M,D){if(M&&(!eA||eA.code==="ERR_STREAM_PREMATURE_CLOSE")&&(eA=M),!(!eA&&!D)){for(;GA.length;)GA.shift()(eA);Q?.removeEventListener("abort",kA),X.abort(),D&&(eA||Z.forEach((U)=>U()),j.nextTick(C,eA,jA))}}let tA;for(let M=0;M<S.length;M++){let D=S[M],U=M<S.length-1,W=M>0,Y=U||R?.end!==!1,BA=M===S.length-1;if(p(D)){let lA=function(FA){FA&&FA.name!=="AbortError"&&FA.code!=="ERR_STREAM_PREMATURE_CLOSE"&&iA(FA)};var $A=lA;if(Y){let{destroy:FA,cleanup:LA}=T(D,U,W);GA.push(FA),v(D)&&BA&&Z.push(LA)}D.on("error",lA),v(D)&&BA&&Z.push(()=>{D.removeListener("error",lA)})}if(M===0)if(typeof D=="function"){if(tA=D({signal:L}),!m(tA))throw new d("Iterable, AsyncIterable or Stream","source",tA)}else m(D)||c(D)?tA=D:tA=B.from(D);else if(typeof D=="function")if(tA=I(tA),tA=D(tA,{signal:L}),U){if(!m(tA,!0))throw new d("AsyncIterable",`transform[${M-1}]`,tA)}else{var V;g||(g=ME());let lA=new g({objectMode:!0}),FA=(V=tA)===null||V===void 0?void 0:V.then;if(typeof FA=="function")EA++,FA.call(tA,(mA)=>{jA=mA,mA!=null&&lA.write(mA),Y&&lA.end(),j.nextTick(iA)},(mA)=>{lA.destroy(mA),j.nextTick(iA,mA)});else if(m(tA,!0))EA++,w(tA,lA,iA,{end:Y});else throw new d("AsyncIterable or Promise","destination",tA);tA=lA;let{destroy:LA,cleanup:Bj}=T(tA,!1,!0);GA.push(LA),BA&&Z.push(Bj)}else if(p(D)){if(c(tA)){EA+=2;let lA=N(tA,D,iA,{end:Y});v(D)&&BA&&Z.push(lA)}else if(m(tA))EA++,w(tA,D,iA,{end:Y});else throw new $("val",["Readable","Iterable","AsyncIterable"],tA);tA=D}else tA=B.from(D)}return(L!=null&&L.aborted||Q!=null&&Q.aborted)&&j.nextTick(kA),tA}function N(S,C,R,{end:X}){let L=!1;return C.on("close",()=>{L||R(new o)}),S.pipe(C,{end:X}),X?S.once("end",()=>{L=!0,C.end()}):R(),r(S,{readable:!0,writable:!1},(Q)=>{let Z=S._readableState;Q&&Q.code==="ERR_STREAM_PREMATURE_CLOSE"&&Z&&Z.ended&&!Z.errored&&!Z.errorEmitted?S.once("end",R).once("error",R):R(Q)}),r(C,{readable:!1,writable:!0},R)}t.exports={pipelineImpl:y,pipeline:H}}),aa=aA((A,t)=>{var{pipeline:j}=vk(),k=Fj(),{destroyer:e}=o6(),{isNodeStream:E,isReadable:r,isWritable:G}=zj(),{AbortError:s,codes:{ERR_INVALID_ARG_VALUE:B,ERR_MISSING_ARGS:a}}=TA();t.exports=function(...$){if($.length===0)throw new a("streams");if($.length===1)return k.from($[0]);let d=[...$];if(typeof $[0]=="function"&&($[0]=k.from($[0])),typeof $[$.length-1]=="function"){let f=$.length-1;$[f]=k.from($[f])}for(let f=0;f<$.length;++f)if(E($[f])){if(f<$.length-1&&!r($[f]))throw new B(`streams[${f}]`,d[f],"must be readable");if(f>0&&!G($[f]))throw new B(`streams[${f}]`,d[f],"must be writable")}let h,x,o,F,i;function n(f){let g=F;F=null,g?g(f):f?i.destroy(f):!p&&!c&&i.destroy()}let m=$[0],v=j($,n),c=!!G(m),p=!!r(v);return i=new k({writableObjectMode:!!(m!=null&&m.writableObjectMode),readableObjectMode:!!(v!=null&&v.writableObjectMode),writable:c,readable:p}),c&&(i._write=function(f,g,P){m.write(f,g)?P():h=P},i._final=function(f){m.end(),x=f},m.on("drain",function(){if(h){let f=h;h=null,f()}}),v.on("finish",function(){if(x){let f=x;x=null,f()}})),p&&(v.on("readable",function(){if(o){let f=o;o=null,f()}}),v.on("end",function(){i.push(null)}),i._read=function(){for(;;){let f=v.read();if(f===null){o=i._read;return}if(!i.push(f))return}}),i._destroy=function(f,g){!f&&F!==null&&(f=new s),o=null,h=null,x=null,F===null?g(f):(F=g,e(v,f))},i}}),bE=aA((A,t)=>{var{ArrayPrototypePop:j,Promise:k}=gA(),{isIterable:e,isNodeStream:E}=zj(),{pipelineImpl:r}=vk(),{finished:G}=Uj();function s(...B){return new k((a,$)=>{let d,h,x=B[B.length-1];if(x&&typeof x=="object"&&!E(x)&&!e(x)){let o=j(B);d=o.signal,h=o.end}r(B,(o,F)=>{o?$(o):a(F)},{signal:d,end:h})})}t.exports={finished:G,pipeline:s}}),sa=aA((A,t)=>{var{Buffer:j}=pj(),{ObjectDefineProperty:k,ObjectKeys:e,ReflectApply:E}=gA(),{promisify:{custom:r}}=sj(),{streamReturningOperators:G,promiseReturningOperators:s}=Ga(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:B}}=TA(),a=aa(),{pipeline:$}=vk(),{destroyer:d}=o6(),h=Uj(),x=bE(),o=zj(),F=t.exports=ik().Stream;F.isDisturbed=o.isDisturbed,F.isErrored=o.isErrored,F.isReadable=o.isReadable,F.Readable=J7();for(let m of e(G)){let v=function(...p){if(new.target)throw B();return F.Readable.from(E(c,this,p))};i=v;let c=G[m];k(v,"name",{__proto__:null,value:c.name}),k(v,"length",{__proto__:null,value:c.length}),k(F.Readable.prototype,m,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}var i;for(let m of e(s)){let v=function(...p){if(new.target)throw B();return E(c,this,p)};i=v;let c=s[m];k(v,"name",{__proto__:null,value:c.name}),k(v,"length",{__proto__:null,value:c.length}),k(F.Readable.prototype,m,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}var i;F.Writable=OE(),F.Duplex=Fj(),F.Transform=KE(),F.PassThrough=ME(),F.pipeline=$;var{addAbortSignal:n}=ok();F.addAbortSignal=n,F.finished=h,F.destroy=d,F.compose=a,k(F,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return x}}),k($,r,{__proto__:null,enumerable:!0,get(){return x.pipeline}}),k(h,r,{__proto__:null,enumerable:!0,get(){return x.finished}}),F.Stream=F,F._isUint8Array=function(m){return m instanceof Uint8Array},F._uint8ArrayToBuffer=function(m){return j.from(m.buffer,m.byteOffset,m.byteLength)}}),yE=aA((A,t)=>{var j=sa(),k=bE(),e=j.Readable.destroy;t.exports=j.Readable,t.exports._uint8ArrayToBuffer=j._uint8ArrayToBuffer,t.exports._isUint8Array=j._isUint8Array,t.exports.isDisturbed=j.isDisturbed,t.exports.isErrored=j.isErrored,t.exports.isReadable=j.isReadable,t.exports.Readable=j.Readable,t.exports.Writable=j.Writable,t.exports.Duplex=j.Duplex,t.exports.Transform=j.Transform,t.exports.PassThrough=j.PassThrough,t.exports.addAbortSignal=j.addAbortSignal,t.exports.finished=j.finished,t.exports.destroy=j.destroy,t.exports.destroy=e,t.exports.pipeline=j.pipeline,t.exports.compose=j.compose,Object.defineProperty(j,"promises",{configurable:!0,enumerable:!0,get(){return k}}),t.exports.Stream=j.Stream,t.exports.default=t.exports}),wE={};fE(wE,{default:()=>DE});HE(wE,z7(yE()));DE=z7(yE());/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 *//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */});var ij=AA((na)=>{na.base64=!0;na.array=!0;na.string=!0;na.arraybuffer=typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined";na.nodebuffer=typeof Buffer!=="undefined";na.uint8array=typeof Uint8Array!=="undefined";if(typeof ArrayBuffer==="undefined")na.blob=!1;else{dk=new ArrayBuffer(0);try{na.blob=new Blob([dk],{type:"application/zip"}).size===0}catch(A){try{PE=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,pk=new PE,pk.append(dk),na.blob=pk.getBlob("application/zip").size===0}catch(t){na.blob=!1}}}var dk,PE,pk;try{na.nodestream=!!(mk(),FE($k)).Readable}catch(A){na.nodestream=!1}});var hk=AA((pa)=>{var ca=pA(),da=ij(),tj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";pa.encode=function(A){var t=[],j,k,e,E,r,G,s,B=0,a=A.length,$=a,d=ca.getTypeOf(A)!=="string";while(B<A.length){if($=a-B,!d)j=A.charCodeAt(B++),k=B<a?A.charCodeAt(B++):0,e=B<a?A.charCodeAt(B++):0;else j=A[B++],k=B<a?A[B++]:0,e=B<a?A[B++]:0;E=j>>2,r=(j&3)<<4|k>>4,G=$>1?(k&15)<<2|e>>6:64,s=$>2?e&63:64,t.push(tj.charAt(E)+tj.charAt(r)+tj.charAt(G)+tj.charAt(s))}return t.join("")};pa.decode=function(A){var t,j,k,e,E,r,G,s=0,B=0,a="data:";if(A.substr(0,a.length)===a)throw new Error("Invalid base64 input, it looks like a data url.");A=A.replace(/[^A-Za-z0-9+/=]/g,"");var $=A.length*3/4;if(A.charAt(A.length-1)===tj.charAt(64))$--;if(A.charAt(A.length-2)===tj.charAt(64))$--;if($%1!==0)throw new Error("Invalid base64 input, bad content length.");var d;if(da.uint8array)d=new Uint8Array($|0);else d=new Array($|0);while(s<A.length){if(e=tj.indexOf(A.charAt(s++)),E=tj.indexOf(A.charAt(s++)),r=tj.indexOf(A.charAt(s++)),G=tj.indexOf(A.charAt(s++)),t=e<<2|E>>4,j=(E&15)<<4|r>>2,k=(r&3)<<6|G,d[B++]=t,r!==64)d[B++]=j;if(G!==64)d[B++]=k}return d}});var C6=AA((cv,LE)=>{LE.exports={isNode:typeof Buffer!=="undefined",newBufferFrom:function(A,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(A,t);else{if(typeof A==="number")throw new Error("The \"data\" argument must not be a number");return new Buffer(A,t)}},allocBuffer:function(A){if(Buffer.alloc)return Buffer.alloc(A);else{var t=new Buffer(A);return t.fill(0),t}},isBuffer:function(A){return Buffer.isBuffer(A)},isStream:function(A){return A&&typeof A.on==="function"&&typeof A.pause==="function"&&typeof A.resume==="function"}}});var SE=AA((dv,RE)=>{function Q7(){Hk=!0;var A,t,j=U6.length;while(j){t=U6,U6=[],A=-1;while(++A<j)t[A]();j=U6.length}Hk=!1}function xa(A){if(U6.push(A)===1&&!Hk)z6()}var TE=global.MutationObserver||global.WebKitMutationObserver,z6;if(TE)Ik=0,NE=new TE(Q7),xk=global.document.createTextNode(""),NE.observe(xk,{characterData:!0}),z6=function(){xk.data=Ik=++Ik%2};else if(!global.setImmediate&&typeof global.MessageChannel!=="undefined")fk=new global.MessageChannel,fk.port1.onmessage=Q7,z6=function(){fk.port2.postMessage(0)};else if("document"in global&&"onreadystatechange"in global.document.createElement("script"))z6=function(){var A=global.document.createElement("script");A.onreadystatechange=function(){Q7(),A.onreadystatechange=null,A.parentNode.removeChild(A),A=null},global.document.documentElement.appendChild(A)};else z6=function(){setTimeout(Q7,0)};var Ik,NE,xk,fk,Hk,U6=[];RE.exports=xa});var JE=AA((pv,VE)=>{function u6(){}function hj(A){if(typeof A!=="function")throw new TypeError("resolver must be a function");if(this.state=CE,this.queue=[],this.outcome=void 0,A!==u6)zE(this,A)}function V6(A,t,j){if(this.promise=A,typeof t==="function")this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled;if(typeof j==="function")this.onRejected=j,this.callRejected=this.otherCallRejected}function _k(A,t,j){fa(function(){var k;try{k=t(j)}catch(e){return bA.reject(A,e)}if(k===A)bA.reject(A,new TypeError("Cannot resolve promise with itself"));else bA.resolve(A,k)})}function Ha(A){var t=A&&A.then;if(A&&(typeof A==="object"||typeof A==="function")&&typeof t==="function")return function j(){t.apply(A,arguments)}}function zE(A,t){var j=!1;function k(G){if(j)return;j=!0,bA.reject(A,G)}function e(G){if(j)return;j=!0,bA.resolve(A,G)}function E(){t(e,k)}var r=UE(E);if(r.status==="error")k(r.value)}function UE(A,t){var j={};try{j.value=A(t),j.status="success"}catch(k){j.status="error",j.value=k}return j}function ga(A){if(A instanceof this)return A;return bA.resolve(new this(u6),A)}function _a(A){var t=new this(u6);return bA.reject(t,A)}function Oa(A){var t=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=A.length,k=!1;if(!j)return this.resolve([]);var e=new Array(j),E=0,r=-1,G=new this(u6);while(++r<j)s(A[r],r);return G;function s(B,a){t.resolve(B).then($,function(d){if(!k)k=!0,bA.reject(G,d)});function $(d){if(e[a]=d,++E===j&&!k)k=!0,bA.resolve(G,e)}}}function Ka(A){var t=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=A.length,k=!1;if(!j)return this.resolve([]);var e=-1,E=new this(u6);while(++e<j)r(A[e]);return E;function r(G){t.resolve(G).then(function(s){if(!k)k=!0,bA.resolve(E,s)},function(s){if(!k)k=!0,bA.reject(E,s)})}}var fa=SE(),bA={},XE=["REJECTED"],gk=["FULFILLED"],CE=["PENDING"];VE.exports=hj;hj.prototype.finally=function(A){if(typeof A!=="function")return this;var t=this.constructor;return this.then(j,k);function j(e){function E(){return e}return t.resolve(A()).then(E)}function k(e){function E(){throw e}return t.resolve(A()).then(E)}};hj.prototype.catch=function(A){return this.then(null,A)};hj.prototype.then=function(A,t){if(typeof A!=="function"&&this.state===gk||typeof t!=="function"&&this.state===XE)return this;var j=new this.constructor(u6);if(this.state!==CE){var k=this.state===gk?A:t;_k(j,k,this.outcome)}else this.queue.push(new V6(j,A,t));return j};V6.prototype.callFulfilled=function(A){bA.resolve(this.promise,A)};V6.prototype.otherCallFulfilled=function(A){_k(this.promise,this.onFulfilled,A)};V6.prototype.callRejected=function(A){bA.reject(this.promise,A)};V6.prototype.otherCallRejected=function(A){_k(this.promise,this.onRejected,A)};bA.resolve=function(A,t){var j=UE(Ha,t);if(j.status==="error")return bA.reject(A,j.value);var k=j.value;if(k)zE(A,k);else{A.state=gk,A.outcome=t;var e=-1,E=A.queue.length;while(++e<E)A.queue[e].callFulfilled(t)}return A};bA.reject=function(A,t){A.state=XE,A.outcome=t;var j=-1,k=A.queue.length;while(++j<k)A.queue[j].callRejected(t);return A};hj.resolve=ga;hj.reject=_a;hj.all=Oa;hj.race=Ka});var v6=AA((hv,QE)=>{var Ok=null;if(typeof Promise!=="undefined")Ok=Promise;else Ok=JE();QE.exports={Promise:Ok}});var ZE=AA((WE)=>{(function(A,t){if(A.setImmediate)return;var j=1,k={},e=!1,E=A.document,r;function G(n){if(typeof n!=="function")n=new Function(""+n);var m=new Array(arguments.length-1);for(var v=0;v<m.length;v++)m[v]=arguments[v+1];var c={callback:n,args:m};return k[j]=c,r(j),j++}function s(n){delete k[n]}function B(n){var{callback:m,args:v}=n;switch(v.length){case 0:m();break;case 1:m(v[0]);break;case 2:m(v[0],v[1]);break;case 3:m(v[0],v[1],v[2]);break;default:m.apply(t,v);break}}function a(n){if(e)setTimeout(a,0,n);else{var m=k[n];if(m){e=!0;try{B(m)}finally{s(n),e=!1}}}}function $(){r=function(n){process.nextTick(function(){a(n)})}}function d(){if(A.postMessage&&!A.importScripts){var n=!0,m=A.onmessage;return A.onmessage=function(){n=!1},A.postMessage("","*"),A.onmessage=m,n}}function h(){var n="setImmediate$"+Math.random()+"$",m=function(v){if(v.source===A&&typeof v.data==="string"&&v.data.indexOf(n)===0)a(+v.data.slice(n.length))};if(A.addEventListener)A.addEventListener("message",m,!1);else A.attachEvent("onmessage",m);r=function(v){A.postMessage(n+v,"*")}}function x(){var n=new MessageChannel;n.port1.onmessage=function(m){var v=m.data;a(v)},r=function(m){n.port2.postMessage(m)}}function o(){var n=E.documentElement;r=function(m){var v=E.createElement("script");v.onreadystatechange=function(){a(m),v.onreadystatechange=null,n.removeChild(v),v=null},n.appendChild(v)}}function F(){r=function(n){setTimeout(a,0,n)}}var i=Object.getPrototypeOf&&Object.getPrototypeOf(A);if(i=i&&i.setTimeout?i:A,{}.toString.call(A.process)==="[object process]")$();else if(d())h();else if(A.MessageChannel)x();else if(E&&"onreadystatechange"in E.createElement("script"))o();else F();i.setImmediate=G,i.clearImmediate=s})(typeof self==="undefined"?typeof global==="undefined"?WE:global:self)});var pA=AA((ya)=>{function ba(A){var t=null;if(Ij.uint8array)t=new Uint8Array(A.length);else t=new Array(A.length);return Z7(A,t)}function J6(A){return A}function Z7(A,t){for(var j=0;j<A.length;++j)t[j]=A.charCodeAt(j)&255;return t}function Q6(A){var t=65536,j=ya.getTypeOf(A),k=!0;if(j==="uint8array")k=W7.applyCanBeUsed.uint8array;else if(j==="nodebuffer")k=W7.applyCanBeUsed.nodebuffer;if(k)while(t>1)try{return W7.stringifyByChunk(A,j,t)}catch(e){t=Math.floor(t/2)}return W7.stringifyByChar(A)}function Y7(A,t){for(var j=0;j<A.length;j++)t[j]=A[j];return t}var Ij=ij(),Ma=hk(),$6=C6(),Kk=v6();ZE();ya.newBlob=function(A,t){ya.checkSupport("blob");try{return new Blob([A],{type:t})}catch(e){try{var j=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,k=new j;return k.append(A),k.getBlob(t)}catch(E){throw new Error("Bug : can't construct the Blob.")}}};var W7={stringifyByChunk:function(A,t,j){var k=[],e=0,E=A.length;if(E<=j)return String.fromCharCode.apply(null,A);while(e<E){if(t==="array"||t==="nodebuffer")k.push(String.fromCharCode.apply(null,A.slice(e,Math.min(e+j,E))));else k.push(String.fromCharCode.apply(null,A.subarray(e,Math.min(e+j,E))));e+=j}return k.join("")},stringifyByChar:function(A){var t="";for(var j=0;j<A.length;j++)t+=String.fromCharCode(A[j]);return t},applyCanBeUsed:{uint8array:function(){try{return Ij.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(A){return!1}}(),nodebuffer:function(){try{return Ij.nodebuffer&&String.fromCharCode.apply(null,$6.allocBuffer(1)).length===1}catch(A){return!1}}()}};ya.applyFromCharCode=Q6;var xj={};xj.string={string:J6,array:function(A){return Z7(A,new Array(A.length))},arraybuffer:function(A){return xj.string.uint8array(A).buffer},uint8array:function(A){return Z7(A,new Uint8Array(A.length))},nodebuffer:function(A){return Z7(A,$6.allocBuffer(A.length))}};xj.array={string:Q6,array:J6,arraybuffer:function(A){return new Uint8Array(A).buffer},uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return $6.newBufferFrom(A)}};xj.arraybuffer={string:function(A){return Q6(new Uint8Array(A))},array:function(A){return Y7(new Uint8Array(A),new Array(A.byteLength))},arraybuffer:J6,uint8array:function(A){return new Uint8Array(A)},nodebuffer:function(A){return $6.newBufferFrom(new Uint8Array(A))}};xj.uint8array={string:Q6,array:function(A){return Y7(A,new Array(A.length))},arraybuffer:function(A){return A.buffer},uint8array:J6,nodebuffer:function(A){return $6.newBufferFrom(A)}};xj.nodebuffer={string:Q6,array:function(A){return Y7(A,new Array(A.length))},arraybuffer:function(A){return xj.nodebuffer.uint8array(A).buffer},uint8array:function(A){return Y7(A,new Uint8Array(A.length))},nodebuffer:J6};ya.transformTo=function(A,t){if(!t)t="";if(!A)return t;ya.checkSupport(A);var j=ya.getTypeOf(t),k=xj[j][A](t);return k};ya.resolve=function(A){var t=A.split("/"),j=[];for(var k=0;k<t.length;k++){var e=t[k];if(e==="."||e===""&&k!==0&&k!==t.length-1)continue;else if(e==="..")j.pop();else j.push(e)}return j.join("/")};ya.getTypeOf=function(A){if(typeof A==="string")return"string";if(Object.prototype.toString.call(A)==="[object Array]")return"array";if(Ij.nodebuffer&&$6.isBuffer(A))return"nodebuffer";if(Ij.uint8array&&A instanceof Uint8Array)return"uint8array";if(Ij.arraybuffer&&A instanceof ArrayBuffer)return"arraybuffer"};ya.checkSupport=function(A){var t=Ij[A.toLowerCase()];if(!t)throw new Error(A+" is not supported by this platform")};ya.MAX_VALUE_16BITS=65535;ya.MAX_VALUE_32BITS=-1;ya.pretty=function(A){var t="",j,k;for(k=0;k<(A||"").length;k++)j=A.charCodeAt(k),t+="\\x"+(j<16?"0":"")+j.toString(16).toUpperCase();return t};ya.delay=function(A,t,j){setImmediate(function(){A.apply(j||null,t||[])})};ya.inherits=function(A,t){var j=function(){};j.prototype=t.prototype,A.prototype=new j};ya.extend=function(){var A={},t,j;for(t=0;t<arguments.length;t++)for(j in arguments[t])if(Object.prototype.hasOwnProperty.call(arguments[t],j)&&typeof A[j]==="undefined")A[j]=arguments[t][j];return A};ya.prepareContent=function(A,t,j,k,e){var E=Kk.Promise.resolve(t).then(function(r){var G=Ij.blob&&(r instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(r))!==-1);if(G&&typeof FileReader!=="undefined")return new Kk.Promise(function(s,B){var a=new FileReader;a.onload=function($){s($.target.result)},a.onerror=function($){B($.target.error)},a.readAsArrayBuffer(r)});else return r});return E.then(function(r){var G=ya.getTypeOf(r);if(!G)return Kk.Promise.reject(new Error("Can't read the data of '"+A+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"));if(G==="arraybuffer")r=ya.transformTo("uint8array",r);else if(G==="string"){if(e)r=Ma.decode(r);else if(j){if(k!==!0)r=ba(r)}}return r})}});var SA=AA((fv,tG)=>{function jG(A){this.name=A||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}jG.prototype={push:function(A){this.emit("data",A)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(A){this.emit("error",A)}return!0},error:function(A){if(this.isFinished)return!1;if(this.isPaused)this.generatedError=A;else{if(this.isFinished=!0,this.emit("error",A),this.previous)this.previous.error(A);this.cleanUp()}return!0},on:function(A,t){return this._listeners[A].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(A,t){if(this._listeners[A])for(var j=0;j<this._listeners[A].length;j++)this._listeners[A][j].call(this,t)},pipe:function(A){return A.registerPrevious(this)},registerPrevious:function(A){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=A.streamInfo,this.mergeStreamInfo(),this.previous=A;var t=this;return A.on("data",function(j){t.processChunk(j)}),A.on("end",function(){t.end()}),A.on("error",function(j){t.error(j)}),this},pause:function(){if(this.isPaused||this.isFinished)return!1;if(this.isPaused=!0,this.previous)this.previous.pause();return!0},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var A=!1;if(this.generatedError)this.error(this.generatedError),A=!0;if(this.previous)this.previous.resume();return!A},flush:function(){},processChunk:function(A){this.push(A)},withStreamInfo:function(A,t){return this.extraStreamInfo[A]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var A in this.extraStreamInfo){if(!Object.prototype.hasOwnProperty.call(this.extraStreamInfo,A))continue;this.streamInfo[A]=this.extraStreamInfo[A]}},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");if(this.isLocked=!0,this.previous)this.previous.lock()},toString:function(){var A="Worker "+this.name;if(this.previous)return this.previous+" -> "+A;else return A}};tG.exports=jG});var c6=AA((Qa)=>{function jt(){At.call(this,"utf-8 decode"),this.leftOver=null}function bk(){At.call(this,"utf-8 encode")}var m6=pA(),Vj=ij(),za=C6(),At=SA(),W6=new Array(256);for(oj=0;oj<256;oj++)W6[oj]=oj>=252?6:oj>=248?5:oj>=240?4:oj>=224?3:oj>=192?2:1;var oj;W6[254]=W6[254]=1;var Ua=function(A){var t,j,k,e,E,r=A.length,G=0;for(e=0;e<r;e++){if(j=A.charCodeAt(e),(j&64512)===55296&&e+1<r){if(k=A.charCodeAt(e+1),(k&64512)===56320)j=65536+(j-55296<<10)+(k-56320),e++}G+=j<128?1:j<2048?2:j<65536?3:4}if(Vj.uint8array)t=new Uint8Array(G);else t=new Array(G);for(E=0,e=0;E<G;e++){if(j=A.charCodeAt(e),(j&64512)===55296&&e+1<r){if(k=A.charCodeAt(e+1),(k&64512)===56320)j=65536+(j-55296<<10)+(k-56320),e++}if(j<128)t[E++]=j;else if(j<2048)t[E++]=192|j>>>6,t[E++]=128|j&63;else if(j<65536)t[E++]=224|j>>>12,t[E++]=128|j>>>6&63,t[E++]=128|j&63;else t[E++]=240|j>>>18,t[E++]=128|j>>>12&63,t[E++]=128|j>>>6&63,t[E++]=128|j&63}return t},Va=function(A,t){var j;if(t=t||A.length,t>A.length)t=A.length;j=t-1;while(j>=0&&(A[j]&192)===128)j--;if(j<0)return t;if(j===0)return t;return j+W6[A[j]]>t?j:t},Ja=function(A){var t,j,k,e,E=A.length,r=new Array(E*2);for(j=0,t=0;t<E;){if(k=A[t++],k<128){r[j++]=k;continue}if(e=W6[k],e>4){r[j++]=65533,t+=e-1;continue}k&=e===2?31:e===3?15:7;while(e>1&&t<E)k=k<<6|A[t++]&63,e--;if(e>1){r[j++]=65533;continue}if(k<65536)r[j++]=k;else k-=65536,r[j++]=55296|k>>10&1023,r[j++]=56320|k&1023}if(r.length!==j)if(r.subarray)r=r.subarray(0,j);else r.length=j;return m6.applyFromCharCode(r)};Qa.utf8encode=function A(t){if(Vj.nodebuffer)return za.newBufferFrom(t,"utf-8");return Ua(t)};Qa.utf8decode=function A(t){if(Vj.nodebuffer)return m6.transformTo("nodebuffer",t).toString("utf-8");return t=m6.transformTo(Vj.uint8array?"uint8array":"array",t),Ja(t)};m6.inherits(jt,At);jt.prototype.processChunk=function(A){var t=m6.transformTo(Vj.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(Vj.uint8array){var j=t;t=new Uint8Array(j.length+this.leftOver.length),t.set(this.leftOver,0),t.set(j,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var k=Va(t),e=t;if(k!==t.length)if(Vj.uint8array)e=t.subarray(0,k),this.leftOver=t.subarray(k,t.length);else e=t.slice(0,k),this.leftOver=t.slice(k,t.length);this.push({data:Qa.utf8decode(e),meta:A.meta})};jt.prototype.flush=function(){if(this.leftOver&&this.leftOver.length)this.push({data:Qa.utf8decode(this.leftOver),meta:{}}),this.leftOver=null};Qa.Utf8DecodeWorker=jt;m6.inherits(bk,At);bk.prototype.processChunk=function(A){this.push({data:Qa.utf8encode(A.data),meta:A.meta})};Qa.Utf8EncodeWorker=bk});var lG=AA((gv,GG)=>{function wk(A){eG.call(this,"ConvertWorker to "+A),this.destType=A}var eG=SA(),EG=pA();EG.inherits(wk,eG);wk.prototype.processChunk=function(A){this.push({data:EG.transformTo(this.destType,A.data),meta:A.meta})};GG.exports=wk});var BG=AA((_v,qG)=>{function Dk(A,t,j){rG.call(this,t),this._helper=A;var k=this;A.on("data",function(e,E){if(!k.push(e))k._helper.pause();if(j)j(E)}).on("error",function(e){k.emit("error",e)}).on("end",function(){k.push(null)})}var rG=(mk(),FE($k)).Readable,Ya=pA();Ya.inherits(Dk,rG);Dk.prototype._read=function(){this._helper.resume()};qG.exports=Dk});var Pk=AA((Ov,FG)=>{function Es(A,t,j){switch(A){case"blob":return Jj.newBlob(Jj.transformTo("arraybuffer",t),j);case"base64":return ts.encode(t);default:return Jj.transformTo(A,t)}}function Gs(A,t){var j,k=0,e=null,E=0;for(j=0;j<t.length;j++)E+=t[j].length;switch(A){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":e=new Uint8Array(E);for(j=0;j<t.length;j++)e.set(t[j],k),k+=t[j].length;return e;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+A+"'")}}function ls(A,t){return new es.Promise(function(j,k){var e=[],E=A._internalType,r=A._outputType,G=A._mimeType;A.on("data",function(s,B){if(e.push(s),t)t(B)}).on("error",function(s){e=[],k(s)}).on("end",function(){try{var s=Es(r,Gs(E,e),G);j(s)}catch(B){k(B)}e=[]}).resume()})}function sG(A,t,j){var k=t;switch(t){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string";break}try{this._internalType=k,this._outputType=t,this._mimeType=j,Jj.checkSupport(k),this._worker=A.pipe(new As(k)),A.lock()}catch(e){this._worker=new js("error"),this._worker.error(e)}}var Jj=pA(),As=lG(),js=SA(),ts=hk(),ks=ij(),es=v6(),aG=null;if(ks.nodestream)try{aG=BG()}catch(A){}sG.prototype={accumulate:function(A){return ls(this,A)},on:function(A,t){var j=this;if(A==="data")this._worker.on(A,function(k){t.call(j,k.data,k.meta)});else this._worker.on(A,function(){Jj.delay(t,arguments,j)});return this},resume:function(){return Jj.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(A){if(Jj.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new aG(this,{objectMode:this._outputType!=="nodebuffer"},A)}};FG.exports=sG});var Lk=AA((rs)=>{rs.base64=!1;rs.binary=!1;rs.dir=!1;rs.createFolders=!0;rs.date=null;rs.compression=null;rs.compressionOptions=null;rs.comment=null;rs.unixPermissions=null;rs.dosPermissions=null});var Tk=AA((Mv,nG)=>{function d6(A){kt.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,A.then(function(j){if(t.dataIsReady=!0,t.data=j,t.max=j&&j.length||0,t.type=tt.getTypeOf(j),!t.isPaused)t._tickAndRepeat()},function(j){t.error(j)})}var tt=pA(),kt=SA(),$s=16384;tt.inherits(d6,kt);d6.prototype.cleanUp=function(){kt.prototype.cleanUp.call(this),this.data=null};d6.prototype.resume=function(){if(!kt.prototype.resume.call(this))return!1;if(!this._tickScheduled&&this.dataIsReady)this._tickScheduled=!0,tt.delay(this._tickAndRepeat,[],this);return!0};d6.prototype._tickAndRepeat=function(){if(this._tickScheduled=!1,this.isPaused||this.isFinished)return;if(this._tick(),!this.isFinished)tt.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0};d6.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var A=$s,t=null,j=Math.min(this.max,this.index+A);if(this.index>=this.max)return this.end();else{switch(this.type){case"string":t=this.data.substring(this.index,j);break;case"uint8array":t=this.data.subarray(this.index,j);break;case"array":case"nodebuffer":t=this.data.slice(this.index,j);break}return this.index=j,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})}};nG.exports=d6});var et=AA((bv,oG)=>{function cs(){var A,t=[];for(var j=0;j<256;j++){A=j;for(var k=0;k<8;k++)A=A&1?3988292384^A>>>1:A>>>1;t[j]=A}return t}function ds(A,t,j,k){var e=iG,E=k+j;A=A^-1;for(var r=k;r<E;r++)A=A>>>8^e[(A^t[r])&255];return A^-1}function ps(A,t,j,k){var e=iG,E=k+j;A=A^-1;for(var r=k;r<E;r++)A=A>>>8^e[(A^t.charCodeAt(r))&255];return A^-1}var ms=pA(),iG=cs();oG.exports=function A(t,j){if(typeof t==="undefined"||!t.length)return 0;var k=ms.getTypeOf(t)!=="string";if(k)return ds(j|0,t,t.length,0);else return ps(j|0,t,t.length,0)}});var Rk=AA((yv,vG)=>{function Nk(){uG.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var uG=SA(),hs=et(),Is=pA();Is.inherits(Nk,uG);Nk.prototype.processChunk=function(A){this.streamInfo.crc32=hs(A.data,this.streamInfo.crc32||0),this.push(A)};vG.exports=Nk});var mG=AA((wv,$G)=>{function Xk(A){Sk.call(this,"DataLengthProbe for "+A),this.propName=A,this.withStreamInfo(A,0)}var xs=pA(),Sk=SA();xs.inherits(Xk,Sk);Xk.prototype.processChunk=function(A){if(A){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+A.data.length}Sk.prototype.processChunk.call(this,A)};$G.exports=Xk});var Et=AA((Dv,pG)=>{function zk(A,t,j,k,e){this.compressedSize=A,this.uncompressedSize=t,this.crc32=j,this.compression=k,this.compressedContent=e}var cG=v6(),dG=Tk(),fs=Rk(),Ck=mG();zk.prototype={getContentWorker:function(){var A=new dG(cG.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Ck("data_length")),t=this;return A.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),A},getCompressedWorker:function(){return new dG(cG.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};zk.createWorkerFrom=function(A,t,j){return A.pipe(new fs).pipe(new Ck("uncompressedSize")).pipe(t.compressWorker(j)).pipe(new Ck("compressedSize")).withStreamInfo("compression",t)};pG.exports=zk});var fG=AA((Pv,xG)=>{var Hs=Pk(),gs=Tk(),Uk=c6(),Vk=Et(),hG=SA(),Jk=function(A,t,j){this.name=A,this.dir=j.dir,this.date=j.date,this.comment=j.comment,this.unixPermissions=j.unixPermissions,this.dosPermissions=j.dosPermissions,this._data=t,this._dataBinary=j.binary,this.options={compression:j.compression,compressionOptions:j.compressionOptions}};Jk.prototype={internalStream:function(A){var t=null,j="string";try{if(!A)throw new Error("No output type specified.");j=A.toLowerCase();var k=j==="string"||j==="text";if(j==="binarystring"||j==="text")j="string";t=this._decompressWorker();var e=!this._dataBinary;if(e&&!k)t=t.pipe(new Uk.Utf8EncodeWorker);if(!e&&k)t=t.pipe(new Uk.Utf8DecodeWorker)}catch(E){t=new hG("error"),t.error(E)}return new Hs(t,j,"")},async:function(A,t){return this.internalStream(A).accumulate(t)},nodeStream:function(A,t){return this.internalStream(A||"nodebuffer").toNodejsStream(t)},_compressWorker:function(A,t){if(this._data instanceof Vk&&this._data.compression.magic===A.magic)return this._data.getCompressedWorker();else{var j=this._decompressWorker();if(!this._dataBinary)j=j.pipe(new Uk.Utf8EncodeWorker);return Vk.createWorkerFrom(j,A,t)}},_decompressWorker:function(){if(this._data instanceof Vk)return this._data.getContentWorker();else if(this._data instanceof hG)return this._data;else return new gs(this._data)}};var IG=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_s=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(Gt=0;Gt<IG.length;Gt++)Jk.prototype[IG[Gt]]=_s;var Gt;xG.exports=Jk});var uj=AA((Qk)=>{function ys(A,t){return Object.prototype.hasOwnProperty.call(A,t)}var bs=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";Qk.assign=function(A){var t=Array.prototype.slice.call(arguments,1);while(t.length){var j=t.shift();if(!j)continue;if(typeof j!=="object")throw new TypeError(j+"must be non-object");for(var k in j)if(ys(j,k))A[k]=j[k]}return A};Qk.shrinkBuf=function(A,t){if(A.length===t)return A;if(A.subarray)return A.subarray(0,t);return A.length=t,A};var ws={arraySet:function(A,t,j,k,e){if(t.subarray&&A.subarray){A.set(t.subarray(j,j+k),e);return}for(var E=0;E<k;E++)A[e+E]=t[j+E]},flattenChunks:function(A){var t,j,k,e,E,r;k=0;for(t=0,j=A.length;t<j;t++)k+=A[t].length;r=new Uint8Array(k),e=0;for(t=0,j=A.length;t<j;t++)E=A[t],r.set(E,e),e+=E.length;return r}},Ds={arraySet:function(A,t,j,k,e){for(var E=0;E<k;E++)A[e+E]=t[j+E]},flattenChunks:function(A){return[].concat.apply([],A)}};Qk.setTyped=function(A){if(A)Qk.Buf8=Uint8Array,Qk.Buf16=Uint16Array,Qk.Buf32=Int32Array,Qk.assign(Qk,ws);else Qk.Buf8=Array,Qk.Buf16=Array,Qk.Buf32=Array,Qk.assign(Qk,Ds)};Qk.setTyped(bs)});var WG=AA((GF)=>{function h6(A){var t=A.length;while(--t>=0)A[t]=0}function Yk(A,t,j,k,e){this.static_tree=A,this.extra_bits=t,this.extra_base=j,this.elems=k,this.max_length=e,this.has_stree=A&&A.length}function Ae(A,t){this.dyn_tree=A,this.max_code=0,this.stat_desc=t}function CG(A){return A<256?A7[A]:A7[256+(A>>>7)]}function t7(A,t){A.pending_buf[A.pending++]=t&255,A.pending_buf[A.pending++]=t>>>8&255}function NA(A,t,j){if(A.bi_valid>Zk-j)A.bi_buf|=t<<A.bi_valid&65535,t7(A,A.bi_buf),A.bi_buf=t>>Zk-A.bi_valid,A.bi_valid+=j-Zk;else A.bi_buf|=t<<A.bi_valid&65535,A.bi_valid+=j}function kj(A,t,j){NA(A,j[t*2],j[t*2+1])}function zG(A,t){var j=0;do j|=A&1,A>>>=1,j<<=1;while(--t>0);return j>>>1}function Js(A){if(A.bi_valid===16)t7(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0;else if(A.bi_valid>=8)A.pending_buf[A.pending++]=A.bi_buf&255,A.bi_buf>>=8,A.bi_valid-=8}function Qs(A,t){var{dyn_tree:j,max_code:k}=t,e=t.stat_desc.static_tree,E=t.stat_desc.has_stree,r=t.stat_desc.extra_bits,G=t.stat_desc.extra_base,s=t.stat_desc.max_length,B,a,$,d,h,x,o=0;for(d=0;d<=Qj;d++)A.bl_count[d]=0;j[A.heap[A.heap_max]*2+1]=0;for(B=A.heap_max+1;B<DG;B++){if(a=A.heap[B],d=j[j[a*2+1]*2+1]+1,d>s)d=s,o++;if(j[a*2+1]=d,a>k)continue;if(A.bl_count[d]++,h=0,a>=G)h=r[a-G];if(x=j[a*2],A.opt_len+=x*(d+h),E)A.static_len+=x*(e[a*2+1]+h)}if(o===0)return;do{d=s-1;while(A.bl_count[d]===0)d--;A.bl_count[d]--,A.bl_count[d+1]+=2,A.bl_count[s]--,o-=2}while(o>0);for(d=s;d!==0;d--){a=A.bl_count[d];while(a!==0){if($=A.heap[--B],$>k)continue;if(j[$*2+1]!==d)A.opt_len+=(d-j[$*2+1])*j[$*2],j[$*2+1]=d;a--}}}function UG(A,t,j){var k=new Array(Qj+1),e=0,E,r;for(E=1;E<=Qj;E++)k[E]=e=e+j[E-1]<<1;for(r=0;r<=t;r++){var G=A[r*2+1];if(G===0)continue;A[r*2]=zG(k[G]++,G)}}function Ws(){var A,t,j,k,e,E=new Array(Qj+1);j=0;for(k=0;k<ee-1;k++){le[k]=j;for(A=0;A<1<<te[k];A++)j7[j++]=k}j7[j-1]=k,e=0;for(k=0;k<16;k++){rt[k]=e;for(A=0;A<1<<lt[k];A++)A7[e++]=k}e>>=7;for(;k<p6;k++){rt[k]=e<<7;for(A=0;A<1<<lt[k]-7;A++)A7[256+e++]=k}for(t=0;t<=Qj;t++)E[t]=0;A=0;while(A<=143)vj[A*2+1]=8,A++,E[8]++;while(A<=255)vj[A*2+1]=9,A++,E[9]++;while(A<=279)vj[A*2+1]=7,A++,E[7]++;while(A<=287)vj[A*2+1]=8,A++,E[8]++;UG(vj,Y6+1,E);for(A=0;A<p6;A++)Z6[A*2+1]=5,Z6[A*2]=zG(A,5);RG=new Yk(vj,te,k7+1,Y6,Qj),SG=new Yk(Z6,lt,0,p6,Qj),XG=new Yk(new Array(0),Us,0,Ee,zs)}function VG(A){var t;for(t=0;t<Y6;t++)A.dyn_ltree[t*2]=0;for(t=0;t<p6;t++)A.dyn_dtree[t*2]=0;for(t=0;t<Ee;t++)A.bl_tree[t*2]=0;A.dyn_ltree[Ge*2]=1,A.opt_len=A.static_len=0,A.last_lit=A.matches=0}function JG(A){if(A.bi_valid>8)t7(A,A.bi_buf);else if(A.bi_valid>0)A.pending_buf[A.pending++]=A.bi_buf;A.bi_buf=0,A.bi_valid=0}function Zs(A,t,j,k){if(JG(A),k)t7(A,j),t7(A,~j);Ls.arraySet(A.pending_buf,A.window,t,j,A.pending),A.pending+=j}function OG(A,t,j,k){var e=t*2,E=j*2;return A[e]<A[E]||A[e]===A[E]&&k[t]<=k[j]}function je(A,t,j){var k=A.heap[j],e=j<<1;while(e<=A.heap_len){if(e<A.heap_len&&OG(t,A.heap[e+1],A.heap[e],A.depth))e++;if(OG(t,k,A.heap[e],A.depth))break;A.heap[j]=A.heap[e],j=e,e<<=1}A.heap[j]=k}function KG(A,t,j){var k,e,E=0,r,G;if(A.last_lit!==0)do if(k=A.pending_buf[A.d_buf+E*2]<<8|A.pending_buf[A.d_buf+E*2+1],e=A.pending_buf[A.l_buf+E],E++,k===0)kj(A,e,t);else{if(r=j7[e],kj(A,r+k7+1,t),G=te[r],G!==0)e-=le[r],NA(A,e,G);if(k--,r=CG(k),kj(A,r,j),G=lt[r],G!==0)k-=rt[r],NA(A,k,G)}while(E<A.last_lit);kj(A,Ge,t)}function ke(A,t){var j=t.dyn_tree,k=t.stat_desc.static_tree,e=t.stat_desc.has_stree,E=t.stat_desc.elems,r,G,s=-1,B;A.heap_len=0,A.heap_max=DG;for(r=0;r<E;r++)if(j[r*2]!==0)A.heap[++A.heap_len]=s=r,A.depth[r]=0;else j[r*2+1]=0;while(A.heap_len<2)if(B=A.heap[++A.heap_len]=s<2?++s:0,j[B*2]=1,A.depth[B]=0,A.opt_len--,e)A.static_len-=k[B*2+1];t.max_code=s;for(r=A.heap_len>>1;r>=1;r--)je(A,j,r);B=E;do r=A.heap[1],A.heap[1]=A.heap[A.heap_len--],je(A,j,1),G=A.heap[1],A.heap[--A.heap_max]=r,A.heap[--A.heap_max]=G,j[B*2]=j[r*2]+j[G*2],A.depth[B]=(A.depth[r]>=A.depth[G]?A.depth[r]:A.depth[G])+1,j[r*2+1]=j[G*2+1]=B,A.heap[1]=B++,je(A,j,1);while(A.heap_len>=2);A.heap[--A.heap_max]=A.heap[1],Qs(A,t),UG(j,s,A.bl_count)}function MG(A,t,j){var k,e=-1,E,r=t[1],G=0,s=7,B=4;if(r===0)s=138,B=3;t[(j+1)*2+1]=65535;for(k=0;k<=j;k++){if(E=r,r=t[(k+1)*2+1],++G<s&&E===r)continue;else if(G<B)A.bl_tree[E*2]+=G;else if(E!==0){if(E!==e)A.bl_tree[E*2]++;A.bl_tree[PG*2]++}else if(G<=10)A.bl_tree[LG*2]++;else A.bl_tree[TG*2]++;if(G=0,e=E,r===0)s=138,B=3;else if(E===r)s=6,B=3;else s=7,B=4}}function bG(A,t,j){var k,e=-1,E,r=t[1],G=0,s=7,B=4;if(r===0)s=138,B=3;for(k=0;k<=j;k++){if(E=r,r=t[(k+1)*2+1],++G<s&&E===r)continue;else if(G<B)do kj(A,E,A.bl_tree);while(--G!==0);else if(E!==0){if(E!==e)kj(A,E,A.bl_tree),G--;kj(A,PG,A.bl_tree),NA(A,G-3,2)}else if(G<=10)kj(A,LG,A.bl_tree),NA(A,G-3,3);else kj(A,TG,A.bl_tree),NA(A,G-11,7);if(G=0,e=E,r===0)s=138,B=3;else if(E===r)s=6,B=3;else s=7,B=4}}function Ys(A){var t;MG(A,A.dyn_ltree,A.l_desc.max_code),MG(A,A.dyn_dtree,A.d_desc.max_code),ke(A,A.bl_desc);for(t=Ee-1;t>=3;t--)if(A.bl_tree[NG[t]*2+1]!==0)break;return A.opt_len+=3*(t+1)+5+5+4,t}function AF(A,t,j,k){var e;NA(A,t-257,5),NA(A,j-1,5),NA(A,k-4,4);for(e=0;e<k;e++)NA(A,A.bl_tree[NG[e]*2+1],3);bG(A,A.dyn_ltree,t-1),bG(A,A.dyn_dtree,j-1)}function jF(A){var t=4093624447,j;for(j=0;j<=31;j++,t>>>=1)if(t&1&&A.dyn_ltree[j*2]!==0)return gG;if(A.dyn_ltree[18]!==0||A.dyn_ltree[20]!==0||A.dyn_ltree[26]!==0)return _G;for(j=32;j<k7;j++)if(A.dyn_ltree[j*2]!==0)return _G;return gG}function tF(A){if(!yG)Ws(),yG=!0;A.l_desc=new Ae(A.dyn_ltree,RG),A.d_desc=new Ae(A.dyn_dtree,SG),A.bl_desc=new Ae(A.bl_tree,XG),A.bi_buf=0,A.bi_valid=0,VG(A)}function QG(A,t,j,k){NA(A,(Rs<<1)+(k?1:0),3),Zs(A,t,j,!0)}function kF(A){NA(A,wG<<1,3),kj(A,Ge,vj),Js(A)}function eF(A,t,j,k){var e,E,r=0;if(A.level>0){if(A.strm.data_type===Ns)A.strm.data_type=jF(A);if(ke(A,A.l_desc),ke(A,A.d_desc),r=Ys(A),e=A.opt_len+3+7>>>3,E=A.static_len+3+7>>>3,E<=e)e=E}else e=E=j+5;if(j+4<=e&&t!==-1)QG(A,t,j,k);else if(A.strategy===Ts||E===e)NA(A,(wG<<1)+(k?1:0),3),KG(A,vj,Z6);else NA(A,(Ss<<1)+(k?1:0),3),AF(A,A.l_desc.max_code+1,A.d_desc.max_code+1,r+1),KG(A,A.dyn_ltree,A.dyn_dtree);if(VG(A),k)JG(A)}function EF(A,t,j){if(A.pending_buf[A.d_buf+A.last_lit*2]=t>>>8&255,A.pending_buf[A.d_buf+A.last_lit*2+1]=t&255,A.pending_buf[A.l_buf+A.last_lit]=j&255,A.last_lit++,t===0)A.dyn_ltree[j*2]++;else A.matches++,t--,A.dyn_ltree[(j7[j]+k7+1)*2]++,A.dyn_dtree[CG(t)*2]++;return A.last_lit===A.lit_bufsize-1}var Ls=uj(),Ts=4,gG=0,_G=1,Ns=2,Rs=0,wG=1,Ss=2,Xs=3,Cs=258,ee=29,k7=256,Y6=k7+1+ee,p6=30,Ee=19,DG=2*Y6+1,Qj=15,Zk=16,zs=7,Ge=256,PG=16,LG=17,TG=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],lt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Us=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],NG=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Vs=512,vj=new Array((Y6+2)*2);h6(vj);var Z6=new Array(p6*2);h6(Z6);var A7=new Array(Vs);h6(A7);var j7=new Array(Cs-Xs+1);h6(j7);var le=new Array(ee);h6(le);var rt=new Array(p6);h6(rt);var RG,SG,XG,yG=!1;GF._tr_init=tF;GF._tr_stored_block=QG;GF._tr_flush_block=eF;GF._tr_tally=EF;GF._tr_align=kF});var re=AA((Nv,ZG)=>{function sF(A,t,j,k){var e=A&65535|0,E=A>>>16&65535|0,r=0;while(j!==0){r=j>2000?2000:j,j-=r;do e=e+t[k++]|0,E=E+e|0;while(--r);e%=65521,E%=65521}return e|E<<16|0}ZG.exports=sF});var qe=AA((Rv,YG)=>{function FF(){var A,t=[];for(var j=0;j<256;j++){A=j;for(var k=0;k<8;k++)A=A&1?3988292384^A>>>1:A>>>1;t[j]=A}return t}function iF(A,t,j,k){var e=nF,E=k+j;A^=-1;for(var r=k;r<E;r++)A=A>>>8^e[(A^t[r])&255];return A^-1}var nF=FF();YG.exports=iF});var qt=AA((Sv,Al)=>{Al.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var ql=AA((VF)=>{function Oj(A,t){return A.msg=oF[t],t}function kl(A){return(A<<1)-(A>4?9:0)}function gj(A){var t=A.length;while(--t>=0)A[t]=0}function Hj(A){var t=A.state,j=t.pending;if(j>A.avail_out)j=A.avail_out;if(j===0)return;if(yA.arraySet(A.output,t.pending_buf,t.pending_out,j,A.next_out),A.next_out+=j,t.pending_out+=j,A.total_out+=j,A.avail_out-=j,t.pending-=j,t.pending===0)t.pending_out=0}function MA(A,t){zA._tr_flush_block(A,A.block_start>=0?A.block_start:-1,A.strstart-A.block_start,t),A.block_start=A.strstart,Hj(A.strm)}function sA(A,t){A.pending_buf[A.pending++]=t}function e7(A,t){A.pending_buf[A.pending++]=t>>>8&255,A.pending_buf[A.pending++]=t&255}function DF(A,t,j,k){var e=A.avail_in;if(e>k)e=k;if(e===0)return 0;if(A.avail_in-=e,yA.arraySet(t,A.input,A.next_in,e,j),A.state.wrap===1)A.adler=el(A.adler,t,e,j);else if(A.state.wrap===2)A.adler=fj(A.adler,t,e,j);return A.next_in+=e,A.total_in+=e,e}function El(A,t){var{max_chain_length:j,strstart:k}=A,e,E,r=A.prev_length,G=A.nice_match,s=A.strstart>A.w_size-WA?A.strstart-(A.w_size-WA):0,B=A.window,a=A.w_mask,$=A.prev,d=A.strstart+_j,h=B[k+r-1],x=B[k+r];if(A.prev_length>=A.good_match)j>>=2;if(G>A.lookahead)G=A.lookahead;do{if(e=t,B[e+r]!==x||B[e+r-1]!==h||B[e]!==B[k]||B[++e]!==B[k+1])continue;k+=2,e++;do;while(B[++k]===B[++e]&&B[++k]===B[++e]&&B[++k]===B[++e]&&B[++k]===B[++e]&&B[++k]===B[++e]&&B[++k]===B[++e]&&B[++k]===B[++e]&&B[++k]===B[++e]&&k<d);if(E=_j-(d-k),k=d-_j,E>r){if(A.match_start=t,r=E,E>=G)break;h=B[k+r-1],x=B[k+r]}}while((t=$[t&a])>s&&--j!==0);if(r<=A.lookahead)return r;return A.lookahead}function Yj(A){var t=A.w_size,j,k,e,E,r;do{if(E=A.window_size-A.lookahead-A.strstart,A.strstart>=t+(t-WA)){yA.arraySet(A.window,A.window,t,t,0),A.match_start-=t,A.strstart-=t,A.block_start-=t,k=A.hash_size,j=k;do e=A.head[--j],A.head[j]=e>=t?e-t:0;while(--k);k=t,j=k;do e=A.prev[--j],A.prev[j]=e>=t?e-t:0;while(--k);E+=t}if(A.strm.avail_in===0)break;if(k=DF(A.strm,A.window,A.strstart+A.lookahead,E),A.lookahead+=k,A.lookahead+A.insert>=rA){r=A.strstart-A.insert,A.ins_h=A.window[r],A.ins_h=(A.ins_h<<A.hash_shift^A.window[r+1])&A.hash_mask;while(A.insert)if(A.ins_h=(A.ins_h<<A.hash_shift^A.window[r+rA-1])&A.hash_mask,A.prev[r&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=r,r++,A.insert--,A.lookahead+A.insert<rA)break}}while(A.lookahead<WA&&A.strm.avail_in!==0)}function PF(A,t){var j=65535;if(j>A.pending_buf_size-5)j=A.pending_buf_size-5;for(;;){if(A.lookahead<=1){if(Yj(A),A.lookahead===0&&t===A6)return _A;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var k=A.block_start+j;if(A.strstart===0||A.strstart>=k){if(A.lookahead=A.strstart-k,A.strstart=k,MA(A,!1),A.strm.avail_out===0)return _A}if(A.strstart-A.block_start>=A.w_size-WA){if(MA(A,!1),A.strm.avail_out===0)return _A}}if(A.insert=0,t===Kj){if(MA(A,!0),A.strm.avail_out===0)return Zj;return f6}if(A.strstart>A.block_start){if(MA(A,!1),A.strm.avail_out===0)return _A}return _A}function ae(A,t){var j,k;for(;;){if(A.lookahead<WA){if(Yj(A),A.lookahead<WA&&t===A6)return _A;if(A.lookahead===0)break}if(j=0,A.lookahead>=rA)A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+rA-1])&A.hash_mask,j=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart;if(j!==0&&A.strstart-j<=A.w_size-WA)A.match_length=El(A,j);if(A.match_length>=rA)if(k=zA._tr_tally(A,A.strstart-A.match_start,A.match_length-rA),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=rA){A.match_length--;do A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+rA-1])&A.hash_mask,j=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart;while(--A.match_length!==0);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else k=zA._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(k){if(MA(A,!1),A.strm.avail_out===0)return _A}}if(A.insert=A.strstart<rA-1?A.strstart:rA-1,t===Kj){if(MA(A,!0),A.strm.avail_out===0)return Zj;return f6}if(A.last_lit){if(MA(A,!1),A.strm.avail_out===0)return _A}return G7}function I6(A,t){var j,k,e;for(;;){if(A.lookahead<WA){if(Yj(A),A.lookahead<WA&&t===A6)return _A;if(A.lookahead===0)break}if(j=0,A.lookahead>=rA)A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+rA-1])&A.hash_mask,j=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart;if(A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=rA-1,j!==0&&A.prev_length<A.max_lazy_match&&A.strstart-j<=A.w_size-WA){if(A.match_length=El(A,j),A.match_length<=5&&(A.strategy===cF||A.match_length===rA&&A.strstart-A.match_start>4096))A.match_length=rA-1}if(A.prev_length>=rA&&A.match_length<=A.prev_length){e=A.strstart+A.lookahead-rA,k=zA._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-rA),A.lookahead-=A.prev_length-1,A.prev_length-=2;do if(++A.strstart<=e)A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+rA-1])&A.hash_mask,j=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart;while(--A.prev_length!==0);if(A.match_available=0,A.match_length=rA-1,A.strstart++,k){if(MA(A,!1),A.strm.avail_out===0)return _A}}else if(A.match_available){if(k=zA._tr_tally(A,0,A.window[A.strstart-1]),k)MA(A,!1);if(A.strstart++,A.lookahead--,A.strm.avail_out===0)return _A}else A.match_available=1,A.strstart++,A.lookahead--}if(A.match_available)k=zA._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0;if(A.insert=A.strstart<rA-1?A.strstart:rA-1,t===Kj){if(MA(A,!0),A.strm.avail_out===0)return Zj;return f6}if(A.last_lit){if(MA(A,!1),A.strm.avail_out===0)return _A}return G7}function LF(A,t){var j,k,e,E,r=A.window;for(;;){if(A.lookahead<=_j){if(Yj(A),A.lookahead<=_j&&t===A6)return _A;if(A.lookahead===0)break}if(A.match_length=0,A.lookahead>=rA&&A.strstart>0){if(e=A.strstart-1,k=r[e],k===r[++e]&&k===r[++e]&&k===r[++e]){E=A.strstart+_j;do;while(k===r[++e]&&k===r[++e]&&k===r[++e]&&k===r[++e]&&k===r[++e]&&k===r[++e]&&k===r[++e]&&k===r[++e]&&e<E);if(A.match_length=_j-(E-e),A.match_length>A.lookahead)A.match_length=A.lookahead}}if(A.match_length>=rA)j=zA._tr_tally(A,1,A.match_length-rA),A.lookahead-=A.match_length,A.strstart+=A.match_length,A.match_length=0;else j=zA._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(j){if(MA(A,!1),A.strm.avail_out===0)return _A}}if(A.insert=0,t===Kj){if(MA(A,!0),A.strm.avail_out===0)return Zj;return f6}if(A.last_lit){if(MA(A,!1),A.strm.avail_out===0)return _A}return G7}function TF(A,t){var j;for(;;){if(A.lookahead===0){if(Yj(A),A.lookahead===0){if(t===A6)return _A;break}}if(A.match_length=0,j=zA._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++,j){if(MA(A,!1),A.strm.avail_out===0)return _A}}if(A.insert=0,t===Kj){if(MA(A,!0),A.strm.avail_out===0)return Zj;return f6}if(A.last_lit){if(MA(A,!1),A.strm.avail_out===0)return _A}return G7}function ej(A,t,j,k,e){this.good_length=A,this.max_lazy=t,this.nice_length=j,this.max_chain=k,this.func=e}function NF(A){A.window_size=2*A.w_size,gj(A.head),A.max_lazy_match=x6[A.level].max_lazy,A.good_match=x6[A.level].good_length,A.nice_match=x6[A.level].nice_length,A.max_chain_length=x6[A.level].max_chain,A.strstart=0,A.block_start=0,A.lookahead=0,A.insert=0,A.match_length=A.prev_length=rA-1,A.match_available=0,A.ins_h=0}function RF(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new yA.Buf16(MF*2),this.dyn_dtree=new yA.Buf16((2*OF+1)*2),this.bl_tree=new yA.Buf16((2*KF+1)*2),gj(this.dyn_ltree),gj(this.dyn_dtree),gj(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new yA.Buf16(bF+1),this.heap=new yA.Buf16(2*se+1),gj(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new yA.Buf16(2*se+1),gj(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Gl(A){var t;if(!A||!A.state)return Oj(A,UA);if(A.total_in=A.total_out=0,A.data_type=IF,t=A.state,t.pending=0,t.pending_out=0,t.wrap<0)t.wrap=-t.wrap;return t.status=t.wrap?it:Wj,A.adler=t.wrap===2?0:1,t.last_flush=A6,zA._tr_init(t),Ej}function ll(A){var t=Gl(A);if(t===Ej)NF(A.state);return t}function SF(A,t){if(!A||!A.state)return UA;if(A.state.wrap!==2)return UA;return A.state.gzhead=t,Ej}function rl(A,t,j,k,e,E){if(!A)return UA;var r=1;if(t===mF)t=6;if(k<0)r=0,k=-k;else if(k>15)r=2,k-=16;if(e<1||e>xF||j!==nt||k<8||k>15||t<0||t>9||E<0||E>pF)return Oj(A,UA);if(k===8)k=9;var G=new RF;return A.state=G,G.strm=A,G.wrap=r,G.gzhead=null,G.w_bits=k,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=e+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+rA-1)/rA),G.window=new yA.Buf8(G.w_size*2),G.head=new yA.Buf16(G.hash_size),G.prev=new yA.Buf16(G.w_size),G.lit_bufsize=1<<e+6,G.pending_buf_size=G.lit_bufsize*4,G.pending_buf=new yA.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=t,G.strategy=E,G.method=j,ll(A)}function XF(A,t){return rl(A,t,nt,fF,HF,hF)}function CF(A,t){var j,k,e,E;if(!A||!A.state||t>jl||t<0)return A?Oj(A,UA):UA;if(k=A.state,!A.output||!A.input&&A.avail_in!==0||k.status===E7&&t!==Kj)return Oj(A,A.avail_out===0?Be:UA);if(k.strm=A,j=k.last_flush,k.last_flush=t,k.status===it)if(k.wrap===2)if(A.adler=0,sA(k,31),sA(k,139),sA(k,8),!k.gzhead)sA(k,0),sA(k,0),sA(k,0),sA(k,0),sA(k,0),sA(k,k.level===9?2:k.strategy>=Bt||k.level<2?4:0),sA(k,wF),k.status=Wj;else{if(sA(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(!k.gzhead.extra?0:4)+(!k.gzhead.name?0:8)+(!k.gzhead.comment?0:16)),sA(k,k.gzhead.time&255),sA(k,k.gzhead.time>>8&255),sA(k,k.gzhead.time>>16&255),sA(k,k.gzhead.time>>24&255),sA(k,k.level===9?2:k.strategy>=Bt||k.level<2?4:0),sA(k,k.gzhead.os&255),k.gzhead.extra&&k.gzhead.extra.length)sA(k,k.gzhead.extra.length&255),sA(k,k.gzhead.extra.length>>8&255);if(k.gzhead.hcrc)A.adler=fj(A.adler,k.pending_buf,k.pending,0);k.gzindex=0,k.status=Fe}else{var r=nt+(k.w_bits-8<<4)<<8,G=-1;if(k.strategy>=Bt||k.level<2)G=0;else if(k.level<6)G=1;else if(k.level===6)G=2;else G=3;if(r|=G<<6,k.strstart!==0)r|=yF;if(r+=31-r%31,k.status=Wj,e7(k,r),k.strstart!==0)e7(k,A.adler>>>16),e7(k,A.adler&65535);A.adler=1}if(k.status===Fe)if(k.gzhead.extra){e=k.pending;while(k.gzindex<(k.gzhead.extra.length&65535)){if(k.pending===k.pending_buf_size){if(k.gzhead.hcrc&&k.pending>e)A.adler=fj(A.adler,k.pending_buf,k.pending-e,e);if(Hj(A),e=k.pending,k.pending===k.pending_buf_size)break}sA(k,k.gzhead.extra[k.gzindex]&255),k.gzindex++}if(k.gzhead.hcrc&&k.pending>e)A.adler=fj(A.adler,k.pending_buf,k.pending-e,e);if(k.gzindex===k.gzhead.extra.length)k.gzindex=0,k.status=at}else k.status=at;if(k.status===at)if(k.gzhead.name){e=k.pending;do{if(k.pending===k.pending_buf_size){if(k.gzhead.hcrc&&k.pending>e)A.adler=fj(A.adler,k.pending_buf,k.pending-e,e);if(Hj(A),e=k.pending,k.pending===k.pending_buf_size){E=1;break}}if(k.gzindex<k.gzhead.name.length)E=k.gzhead.name.charCodeAt(k.gzindex++)&255;else E=0;sA(k,E)}while(E!==0);if(k.gzhead.hcrc&&k.pending>e)A.adler=fj(A.adler,k.pending_buf,k.pending-e,e);if(E===0)k.gzindex=0,k.status=st}else k.status=st;if(k.status===st)if(k.gzhead.comment){e=k.pending;do{if(k.pending===k.pending_buf_size){if(k.gzhead.hcrc&&k.pending>e)A.adler=fj(A.adler,k.pending_buf,k.pending-e,e);if(Hj(A),e=k.pending,k.pending===k.pending_buf_size){E=1;break}}if(k.gzindex<k.gzhead.comment.length)E=k.gzhead.comment.charCodeAt(k.gzindex++)&255;else E=0;sA(k,E)}while(E!==0);if(k.gzhead.hcrc&&k.pending>e)A.adler=fj(A.adler,k.pending_buf,k.pending-e,e);if(E===0)k.status=Ft}else k.status=Ft;if(k.status===Ft)if(k.gzhead.hcrc){if(k.pending+2>k.pending_buf_size)Hj(A);if(k.pending+2<=k.pending_buf_size)sA(k,A.adler&255),sA(k,A.adler>>8&255),A.adler=0,k.status=Wj}else k.status=Wj;if(k.pending!==0){if(Hj(A),A.avail_out===0)return k.last_flush=-1,Ej}else if(A.avail_in===0&&kl(t)<=kl(j)&&t!==Kj)return Oj(A,Be);if(k.status===E7&&A.avail_in!==0)return Oj(A,Be);if(A.avail_in!==0||k.lookahead!==0||t!==A6&&k.status!==E7){var s=k.strategy===Bt?TF(k,t):k.strategy===dF?LF(k,t):x6[k.level].func(k,t);if(s===Zj||s===f6)k.status=E7;if(s===_A||s===Zj){if(A.avail_out===0)k.last_flush=-1;return Ej}if(s===G7){if(t===uF)zA._tr_align(k);else if(t!==jl){if(zA._tr_stored_block(k,0,0,!1),t===vF){if(gj(k.head),k.lookahead===0)k.strstart=0,k.block_start=0,k.insert=0}}if(Hj(A),A.avail_out===0)return k.last_flush=-1,Ej}}if(t!==Kj)return Ej;if(k.wrap<=0)return tl;if(k.wrap===2)sA(k,A.adler&255),sA(k,A.adler>>8&255),sA(k,A.adler>>16&255),sA(k,A.adler>>24&255),sA(k,A.total_in&255),sA(k,A.total_in>>8&255),sA(k,A.total_in>>16&255),sA(k,A.total_in>>24&255);else e7(k,A.adler>>>16),e7(k,A.adler&65535);if(Hj(A),k.wrap>0)k.wrap=-k.wrap;return k.pending!==0?Ej:tl}function zF(A){var t;if(!A||!A.state)return UA;if(t=A.state.status,t!==it&&t!==Fe&&t!==at&&t!==st&&t!==Ft&&t!==Wj&&t!==E7)return Oj(A,UA);return A.state=null,t===Wj?Oj(A,$F):Ej}function UF(A,t){var j=t.length,k,e,E,r,G,s,B,a;if(!A||!A.state)return UA;if(k=A.state,r=k.wrap,r===2||r===1&&k.status!==it||k.lookahead)return UA;if(r===1)A.adler=el(A.adler,t,j,0);if(k.wrap=0,j>=k.w_size){if(r===0)gj(k.head),k.strstart=0,k.block_start=0,k.insert=0;a=new yA.Buf8(k.w_size),yA.arraySet(a,t,j-k.w_size,k.w_size,0),t=a,j=k.w_size}G=A.avail_in,s=A.next_in,B=A.input,A.avail_in=j,A.next_in=0,A.input=t,Yj(k);while(k.lookahead>=rA){e=k.strstart,E=k.lookahead-(rA-1);do k.ins_h=(k.ins_h<<k.hash_shift^k.window[e+rA-1])&k.hash_mask,k.prev[e&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=e,e++;while(--E);k.strstart=e,k.lookahead=rA-1,Yj(k)}return k.strstart+=k.lookahead,k.block_start=k.strstart,k.insert=k.lookahead,k.lookahead=0,k.match_length=k.prev_length=rA-1,k.match_available=0,A.next_in=s,A.input=B,A.avail_in=G,k.wrap=r,Ej}var yA=uj(),zA=WG(),el=re(),fj=qe(),oF=qt(),A6=0,uF=1,vF=3,Kj=4,jl=5,Ej=0,tl=1,UA=-2,$F=-3,Be=-5,mF=-1,cF=1,Bt=2,dF=3,pF=4,hF=0,IF=2,nt=8,xF=9,fF=15,HF=8,gF=29,_F=256,se=_F+1+gF,OF=30,KF=19,MF=2*se+1,bF=15,rA=3,_j=258,WA=_j+rA+1,yF=32,it=42,Fe=69,at=73,st=91,Ft=103,Wj=113,E7=666,_A=1,G7=2,Zj=3,f6=4,wF=3,x6;x6=[new ej(0,0,0,0,PF),new ej(4,4,8,4,ae),new ej(4,5,16,8,ae),new ej(4,6,32,32,ae),new ej(4,4,16,16,I6),new ej(8,16,32,32,I6),new ej(8,16,128,128,I6),new ej(8,32,128,256,I6),new ej(32,128,258,1024,I6),new ej(32,258,258,4096,I6)];VF.deflateInit=XF;VF.deflateInit2=rl;VF.deflateReset=ll;VF.deflateResetKeep=Gl;VF.deflateSetHeader=SF;VF.deflate=CF;VF.deflateEnd=zF;VF.deflateSetDictionary=UF;VF.deflateInfo="pako deflate (from Nodeca project)"});var ne=AA((en)=>{function sl(A,t){if(t<65534){if(A.subarray&&al||!A.subarray&&Bl)return String.fromCharCode.apply(null,ot.shrinkBuf(A,t))}var j="";for(var k=0;k<t;k++)j+=String.fromCharCode(A[k]);return j}var ot=uj(),Bl=!0,al=!0;try{String.fromCharCode.apply(null,[0])}catch(A){Bl=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(A){al=!1}var l7=new ot.Buf8(256);for($j=0;$j<256;$j++)l7[$j]=$j>=252?6:$j>=248?5:$j>=240?4:$j>=224?3:$j>=192?2:1;var $j;l7[254]=l7[254]=1;en.string2buf=function(A){var t,j,k,e,E,r=A.length,G=0;for(e=0;e<r;e++){if(j=A.charCodeAt(e),(j&64512)===55296&&e+1<r){if(k=A.charCodeAt(e+1),(k&64512)===56320)j=65536+(j-55296<<10)+(k-56320),e++}G+=j<128?1:j<2048?2:j<65536?3:4}t=new ot.Buf8(G);for(E=0,e=0;E<G;e++){if(j=A.charCodeAt(e),(j&64512)===55296&&e+1<r){if(k=A.charCodeAt(e+1),(k&64512)===56320)j=65536+(j-55296<<10)+(k-56320),e++}if(j<128)t[E++]=j;else if(j<2048)t[E++]=192|j>>>6,t[E++]=128|j&63;else if(j<65536)t[E++]=224|j>>>12,t[E++]=128|j>>>6&63,t[E++]=128|j&63;else t[E++]=240|j>>>18,t[E++]=128|j>>>12&63,t[E++]=128|j>>>6&63,t[E++]=128|j&63}return t};en.buf2binstring=function(A){return sl(A,A.length)};en.binstring2buf=function(A){var t=new ot.Buf8(A.length);for(var j=0,k=t.length;j<k;j++)t[j]=A.charCodeAt(j);return t};en.buf2string=function(A,t){var j,k,e,E,r=t||A.length,G=new Array(r*2);for(k=0,j=0;j<r;){if(e=A[j++],e<128){G[k++]=e;continue}if(E=l7[e],E>4){G[k++]=65533,j+=E-1;continue}e&=E===2?31:E===3?15:7;while(E>1&&j<r)e=e<<6|A[j++]&63,E--;if(E>1){G[k++]=65533;continue}if(e<65536)G[k++]=e;else e-=65536,G[k++]=55296|e>>10&1023,G[k++]=56320|e&1023}return sl(G,k)};en.utf8border=function(A,t){var j;if(t=t||A.length,t>A.length)t=A.length;j=t-1;while(j>=0&&(A[j]&192)===128)j--;if(j<0)return t;if(j===0)return t;return j+l7[A[j]]>t?j:t}});var ie=AA((zv,Fl)=>{function Bn(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Fl.exports=Bn});var ul=AA(($n)=>{function j6(A){if(!(this instanceof j6))return new j6(A);this.options=q7.assign({level:Fn,method:on,chunkSize:16384,windowBits:15,memLevel:8,strategy:nn,to:""},A||{});var t=this.options;if(t.raw&&t.windowBits>0)t.windowBits=-t.windowBits;else if(t.gzip&&t.windowBits>0&&t.windowBits<16)t.windowBits+=16;this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new an,this.strm.avail_out=0;var j=r7.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(j!==H6)throw new Error(ve[j]);if(t.header)r7.deflateSetHeader(this.strm,t.header);if(t.dictionary){var k;if(typeof t.dictionary==="string")k=ue.string2buf(t.dictionary);else if(ol.call(t.dictionary)==="[object ArrayBuffer]")k=new Uint8Array(t.dictionary);else k=t.dictionary;if(j=r7.deflateSetDictionary(this.strm,k),j!==H6)throw new Error(ve[j]);this._dict_set=!0}}function $e(A,t){var j=new j6(t);if(j.push(A,!0),j.err)throw j.msg||ve[j.err];return j.result}function un(A,t){return t=t||{},t.raw=!0,$e(A,t)}function vn(A,t){return t=t||{},t.gzip=!0,$e(A,t)}var r7=ql(),q7=uj(),ue=ne(),ve=qt(),an=ie(),ol=Object.prototype.toString,sn=0,oe=4,H6=0,nl=1,il=2,Fn=-1,nn=0,on=8;j6.prototype.push=function(A,t){var j=this.strm,k=this.options.chunkSize,e,E;if(this.ended)return!1;if(E=t===~~t?t:t===!0?oe:sn,typeof A==="string")j.input=ue.string2buf(A);else if(ol.call(A)==="[object ArrayBuffer]")j.input=new Uint8Array(A);else j.input=A;j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0)j.output=new q7.Buf8(k),j.next_out=0,j.avail_out=k;if(e=r7.deflate(j,E),e!==nl&&e!==H6)return this.onEnd(e),this.ended=!0,!1;if(j.avail_out===0||j.avail_in===0&&(E===oe||E===il))if(this.options.to==="string")this.onData(ue.buf2binstring(q7.shrinkBuf(j.output,j.next_out)));else this.onData(q7.shrinkBuf(j.output,j.next_out))}while((j.avail_in>0||j.avail_out===0)&&e!==nl);if(E===oe)return e=r7.deflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===H6;if(E===il)return this.onEnd(H6),j.avail_out=0,!0;return!0};j6.prototype.onData=function(A){this.chunks.push(A)};j6.prototype.onEnd=function(A){if(A===H6)if(this.options.to==="string")this.result=this.chunks.join("");else this.result=q7.flattenChunks(this.chunks);this.chunks=[],this.err=A,this.msg=this.strm.msg};$n.Deflate=j6;$n.deflate=$e;$n.deflateRaw=un;$n.gzip=vn});var $l=AA((Vv,vl)=>{var ut=30,hn=12;vl.exports=function A(t,j){var k,e,E,r,G,s,B,a,$,d,h,x,o,F,i,n,m,v,c,p,f,g,P,T,O;k=t.state,e=t.next_in,T=t.input,E=e+(t.avail_in-5),r=t.next_out,O=t.output,G=r-(j-t.avail_out),s=r+(t.avail_out-257),B=k.dmax,a=k.wsize,$=k.whave,d=k.wnext,h=k.window,x=k.hold,o=k.bits,F=k.lencode,i=k.distcode,n=(1<<k.lenbits)-1,m=(1<<k.distbits)-1;A:do{if(o<15)x+=T[e++]<<o,o+=8,x+=T[e++]<<o,o+=8;v=F[x&n];j:for(;;){if(c=v>>>24,x>>>=c,o-=c,c=v>>>16&255,c===0)O[r++]=v&65535;else if(c&16){if(p=v&65535,c&=15,c){if(o<c)x+=T[e++]<<o,o+=8;p+=x&(1<<c)-1,x>>>=c,o-=c}if(o<15)x+=T[e++]<<o,o+=8,x+=T[e++]<<o,o+=8;v=i[x&m];t:for(;;){if(c=v>>>24,x>>>=c,o-=c,c=v>>>16&255,c&16){if(f=v&65535,c&=15,o<c){if(x+=T[e++]<<o,o+=8,o<c)x+=T[e++]<<o,o+=8}if(f+=x&(1<<c)-1,f>B){t.msg="invalid distance too far back",k.mode=ut;break A}if(x>>>=c,o-=c,c=r-G,f>c){if(c=f-c,c>$){if(k.sane){t.msg="invalid distance too far back",k.mode=ut;break A}}if(g=0,P=h,d===0){if(g+=a-c,c<p){p-=c;do O[r++]=h[g++];while(--c);g=r-f,P=O}}else if(d<c){if(g+=a+d-c,c-=d,c<p){p-=c;do O[r++]=h[g++];while(--c);if(g=0,d<p){c=d,p-=c;do O[r++]=h[g++];while(--c);g=r-f,P=O}}}else if(g+=d-c,c<p){p-=c;do O[r++]=h[g++];while(--c);g=r-f,P=O}while(p>2)O[r++]=P[g++],O[r++]=P[g++],O[r++]=P[g++],p-=3;if(p){if(O[r++]=P[g++],p>1)O[r++]=P[g++]}}else{g=r-f;do O[r++]=O[g++],O[r++]=O[g++],O[r++]=O[g++],p-=3;while(p>2);if(p){if(O[r++]=O[g++],p>1)O[r++]=O[g++]}}}else if((c&64)===0){v=i[(v&65535)+(x&(1<<c)-1)];continue t}else{t.msg="invalid distance code",k.mode=ut;break A}break}}else if((c&64)===0){v=F[(v&65535)+(x&(1<<c)-1)];continue j}else if(c&32){k.mode=hn;break A}else{t.msg="invalid literal/length code",k.mode=ut;break A}break}}while(e<E&&r<s);p=o>>3,e-=p,o-=p<<3,x&=(1<<o)-1,t.next_in=e,t.next_out=r,t.avail_in=e<E?5+(E-e):5-(e-E),t.avail_out=r<s?257+(s-r):257-(r-s),k.hold=x,k.bits=o;return}});var xl=AA((Jv,Il)=>{var ml=uj(),g6=15,cl=852,dl=592,pl=0,me=1,hl=2,In=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],xn=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],fn=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Hn=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Il.exports=function A(t,j,k,e,E,r,G,s){var B=s.bits,a=0,$=0,d=0,h=0,x=0,o=0,F=0,i=0,n=0,m=0,v,c,p,f,g,P=null,T=0,O,I=new ml.Buf16(g6+1),K=new ml.Buf16(g6+1),w=null,H=0,y,N,S;for(a=0;a<=g6;a++)I[a]=0;for($=0;$<e;$++)I[j[k+$]]++;x=B;for(h=g6;h>=1;h--)if(I[h]!==0)break;if(x>h)x=h;if(h===0)return E[r++]=20971520,E[r++]=20971520,s.bits=1,0;for(d=1;d<h;d++)if(I[d]!==0)break;if(x<d)x=d;i=1;for(a=1;a<=g6;a++)if(i<<=1,i-=I[a],i<0)return-1;if(i>0&&(t===pl||h!==1))return-1;K[1]=0;for(a=1;a<g6;a++)K[a+1]=K[a]+I[a];for($=0;$<e;$++)if(j[k+$]!==0)G[K[j[k+$]]++]=$;if(t===pl)P=w=G,O=19;else if(t===me)P=In,T-=257,w=xn,H-=257,O=256;else P=fn,w=Hn,O=-1;if(m=0,$=0,a=d,g=r,o=x,F=0,p=-1,n=1<<x,f=n-1,t===me&&n>cl||t===hl&&n>dl)return 1;for(;;){if(y=a-F,G[$]<O)N=0,S=G[$];else if(G[$]>O)N=w[H+G[$]],S=P[T+G[$]];else N=96,S=0;v=1<<a-F,c=1<<o,d=c;do c-=v,E[g+(m>>F)+c]=y<<24|N<<16|S|0;while(c!==0);v=1<<a-1;while(m&v)v>>=1;if(v!==0)m&=v-1,m+=v;else m=0;if($++,--I[a]===0){if(a===h)break;a=j[k+G[$]]}if(a>x&&(m&f)!==p){if(F===0)F=x;g+=d,o=a-F,i=1<<o;while(o+F<h){if(i-=I[o+F],i<=0)break;o++,i<<=1}if(n+=1<<o,t===me&&n>cl||t===hl&&n>dl)return 1;p=m&f,E[p]=x<<24|o<<16|g-r|0}}if(m!==0)E[g+m]=a-F<<24|4194304|0;return s.bits=x,0}});var lr=AA((Un)=>{function Ql(A){return(A>>>24&255)+(A>>>8&65280)+((A&65280)<<8)+((A&255)<<24)}function Tn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new XA.Buf16(320),this.work=new XA.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function tr(A){var t;if(!A||!A.state)return VA;if(t=A.state,A.total_in=A.total_out=t.total=0,A.msg="",t.wrap)A.adler=t.wrap&1;return t.mode=jr,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new XA.Buf32(wn),t.distcode=t.distdyn=new XA.Buf32(Dn),t.sane=1,t.back=-1,t6}function kr(A){var t;if(!A||!A.state)return VA;return t=A.state,t.wsize=0,t.whave=0,t.wnext=0,tr(A)}function er(A,t){var j,k;if(!A||!A.state)return VA;if(k=A.state,t<0)j=0,t=-t;else if(j=(t>>4)+1,t<48)t&=15;if(t&&(t<8||t>15))return VA;if(k.window!==null&&k.wbits!==t)k.window=null;return k.wrap=j,k.wbits=t,kr(A)}function Er(A,t){var j,k;if(!A)return VA;if(k=new Tn,A.state=k,k.window=null,j=er(A,t),j!==t6)A.state=null;return j}function Nn(A){return Er(A,Ln)}function Rn(A){if(Wl){var t;he=new XA.Buf32(512),Ie=new XA.Buf32(32),t=0;while(t<144)A.lens[t++]=8;while(t<256)A.lens[t++]=9;while(t<280)A.lens[t++]=7;while(t<288)A.lens[t++]=8;B7(Zl,A.lens,0,288,he,0,A.work,{bits:9}),t=0;while(t<32)A.lens[t++]=5;B7(Yl,A.lens,0,32,Ie,0,A.work,{bits:5}),Wl=!1}A.lencode=he,A.lenbits=9,A.distcode=Ie,A.distbits=5}function Gr(A,t,j,k){var e,E=A.state;if(E.window===null)E.wsize=1<<E.wbits,E.wnext=0,E.whave=0,E.window=new XA.Buf8(E.wsize);if(k>=E.wsize)XA.arraySet(E.window,t,j-E.wsize,E.wsize,0),E.wnext=0,E.whave=E.wsize;else{if(e=E.wsize-E.wnext,e>k)e=k;if(XA.arraySet(E.window,t,j-k,e,E.wnext),k-=e,k)XA.arraySet(E.window,t,j-k,k,0),E.wnext=k,E.whave=E.wsize;else{if(E.wnext+=e,E.wnext===E.wsize)E.wnext=0;if(E.whave<E.wsize)E.whave+=e}}return 0}function Sn(A,t){var j,k,e,E,r,G,s,B,a,$,d,h,x,o,F=0,i,n,m,v,c,p,f,g,P=new XA.Buf8(4),T,O,I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return VA;if(j=A.state,j.mode===mj)j.mode=ce;r=A.next_out,e=A.output,s=A.avail_out,E=A.next_in,k=A.input,G=A.avail_in,B=j.hold,a=j.bits,$=G,d=s,g=t6;A:for(;;)switch(j.mode){case jr:if(j.wrap===0){j.mode=ce;break}while(a<16){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(j.wrap&2&&B===35615){j.check=0,P[0]=B&255,P[1]=B>>>8&255,j.check=Gj(j.check,P,2,0),B=0,a=0,j.mode=gl;break}if(j.flags=0,j.head)j.head.done=!1;if(!(j.wrap&1)||(((B&255)<<8)+(B>>8))%31){A.msg="incorrect header check",j.mode=cA;break}if((B&15)!==Hl){A.msg="unknown compression method",j.mode=cA;break}if(B>>>=4,a-=4,f=(B&15)+8,j.wbits===0)j.wbits=f;else if(f>j.wbits){A.msg="invalid window size",j.mode=cA;break}j.dmax=1<<f,A.adler=j.check=1,j.mode=B&512?Dl:mj,B=0,a=0;break;case gl:while(a<16){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(j.flags=B,(j.flags&255)!==Hl){A.msg="unknown compression method",j.mode=cA;break}if(j.flags&57344){A.msg="unknown header flags set",j.mode=cA;break}if(j.head)j.head.text=B>>8&1;if(j.flags&512)P[0]=B&255,P[1]=B>>>8&255,j.check=Gj(j.check,P,2,0);B=0,a=0,j.mode=_l;case _l:while(a<32){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(j.head)j.head.time=B;if(j.flags&512)P[0]=B&255,P[1]=B>>>8&255,P[2]=B>>>16&255,P[3]=B>>>24&255,j.check=Gj(j.check,P,4,0);B=0,a=0,j.mode=Ol;case Ol:while(a<16){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(j.head)j.head.xflags=B&255,j.head.os=B>>8;if(j.flags&512)P[0]=B&255,P[1]=B>>>8&255,j.check=Gj(j.check,P,2,0);B=0,a=0,j.mode=Kl;case Kl:if(j.flags&1024){while(a<16){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(j.length=B,j.head)j.head.extra_len=B;if(j.flags&512)P[0]=B&255,P[1]=B>>>8&255,j.check=Gj(j.check,P,2,0);B=0,a=0}else if(j.head)j.head.extra=null;j.mode=Ml;case Ml:if(j.flags&1024){if(h=j.length,h>G)h=G;if(h){if(j.head){if(f=j.head.extra_len-j.length,!j.head.extra)j.head.extra=new Array(j.head.extra_len);XA.arraySet(j.head.extra,k,E,h,f)}if(j.flags&512)j.check=Gj(j.check,k,h,E);G-=h,E+=h,j.length-=h}if(j.length)break A}j.length=0,j.mode=bl;case bl:if(j.flags&2048){if(G===0)break A;h=0;do if(f=k[E+h++],j.head&&f&&j.length<65536)j.head.name+=String.fromCharCode(f);while(f&&h<G);if(j.flags&512)j.check=Gj(j.check,k,h,E);if(G-=h,E+=h,f)break A}else if(j.head)j.head.name=null;j.length=0,j.mode=yl;case yl:if(j.flags&4096){if(G===0)break A;h=0;do if(f=k[E+h++],j.head&&f&&j.length<65536)j.head.comment+=String.fromCharCode(f);while(f&&h<G);if(j.flags&512)j.check=Gj(j.check,k,h,E);if(G-=h,E+=h,f)break A}else if(j.head)j.head.comment=null;j.mode=wl;case wl:if(j.flags&512){while(a<16){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(B!==(j.check&65535)){A.msg="header crc mismatch",j.mode=cA;break}B=0,a=0}if(j.head)j.head.hcrc=j.flags>>9&1,j.head.done=!0;A.adler=j.check=0,j.mode=mj;break;case Dl:while(a<32){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}A.adler=j.check=Ql(B),B=0,a=0,j.mode=ct;case ct:if(j.havedict===0)return A.next_out=r,A.avail_out=s,A.next_in=E,A.avail_in=G,j.hold=B,j.bits=a,Mn;A.adler=j.check=1,j.mode=mj;case mj:if(t===On||t===vt)break A;case ce:if(j.last){B>>>=a&7,a-=a&7,j.mode=pe;break}while(a<3){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}switch(j.last=B&1,B>>>=1,a-=1,B&3){case 0:j.mode=Pl;break;case 1:if(Rn(j),j.mode=$t,t===vt){B>>>=2,a-=2;break A}break;case 2:j.mode=Tl;break;case 3:A.msg="invalid block type",j.mode=cA}B>>>=2,a-=2;break;case Pl:B>>>=a&7,a-=a&7;while(a<32){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if((B&65535)!==(B>>>16^65535)){A.msg="invalid stored block lengths",j.mode=cA;break}if(j.length=B&65535,B=0,a=0,j.mode=de,t===vt)break A;case de:j.mode=Ll;case Ll:if(h=j.length,h){if(h>G)h=G;if(h>s)h=s;if(h===0)break A;XA.arraySet(e,k,E,h,r),G-=h,E+=h,s-=h,r+=h,j.length-=h;break}j.mode=mj;break;case Tl:while(a<14){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(j.nlen=(B&31)+257,B>>>=5,a-=5,j.ndist=(B&31)+1,B>>>=5,a-=5,j.ncode=(B&15)+4,B>>>=4,a-=4,j.nlen>286||j.ndist>30){A.msg="too many length or distance symbols",j.mode=cA;break}j.have=0,j.mode=Nl;case Nl:while(j.have<j.ncode){while(a<3){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}j.lens[I[j.have++]]=B&7,B>>>=3,a-=3}while(j.have<19)j.lens[I[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,T={bits:j.lenbits},g=B7(_n,j.lens,0,19,j.lencode,0,j.work,T),j.lenbits=T.bits,g){A.msg="invalid code lengths set",j.mode=cA;break}j.have=0,j.mode=Rl;case Rl:while(j.have<j.nlen+j.ndist){for(;;){if(F=j.lencode[B&(1<<j.lenbits)-1],i=F>>>24,n=F>>>16&255,m=F&65535,i<=a)break;if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(m<16)B>>>=i,a-=i,j.lens[j.have++]=m;else{if(m===16){O=i+2;while(a<O){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(B>>>=i,a-=i,j.have===0){A.msg="invalid bit length repeat",j.mode=cA;break}f=j.lens[j.have-1],h=3+(B&3),B>>>=2,a-=2}else if(m===17){O=i+3;while(a<O){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}B>>>=i,a-=i,f=0,h=3+(B&7),B>>>=3,a-=3}else{O=i+7;while(a<O){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}B>>>=i,a-=i,f=0,h=11+(B&127),B>>>=7,a-=7}if(j.have+h>j.nlen+j.ndist){A.msg="invalid bit length repeat",j.mode=cA;break}while(h--)j.lens[j.have++]=f}}if(j.mode===cA)break;if(j.lens[256]===0){A.msg="invalid code -- missing end-of-block",j.mode=cA;break}if(j.lenbits=9,T={bits:j.lenbits},g=B7(Zl,j.lens,0,j.nlen,j.lencode,0,j.work,T),j.lenbits=T.bits,g){A.msg="invalid literal/lengths set",j.mode=cA;break}if(j.distbits=6,j.distcode=j.distdyn,T={bits:j.distbits},g=B7(Yl,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,T),j.distbits=T.bits,g){A.msg="invalid distances set",j.mode=cA;break}if(j.mode=$t,t===vt)break A;case $t:j.mode=mt;case mt:if(G>=6&&s>=258){if(A.next_out=r,A.avail_out=s,A.next_in=E,A.avail_in=G,j.hold=B,j.bits=a,gn(A,d),r=A.next_out,e=A.output,s=A.avail_out,E=A.next_in,k=A.input,G=A.avail_in,B=j.hold,a=j.bits,j.mode===mj)j.back=-1;break}j.back=0;for(;;){if(F=j.lencode[B&(1<<j.lenbits)-1],i=F>>>24,n=F>>>16&255,m=F&65535,i<=a)break;if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(n&&(n&240)===0){v=i,c=n,p=m;for(;;){if(F=j.lencode[p+((B&(1<<v+c)-1)>>v)],i=F>>>24,n=F>>>16&255,m=F&65535,v+i<=a)break;if(G===0)break A;G--,B+=k[E++]<<a,a+=8}B>>>=v,a-=v,j.back+=v}if(B>>>=i,a-=i,j.back+=i,j.length=m,n===0){j.mode=Ul;break}if(n&32){j.back=-1,j.mode=mj;break}if(n&64){A.msg="invalid literal/length code",j.mode=cA;break}j.extra=n&15,j.mode=Sl;case Sl:if(j.extra){O=j.extra;while(a<O){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}j.length+=B&(1<<j.extra)-1,B>>>=j.extra,a-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=Xl;case Xl:for(;;){if(F=j.distcode[B&(1<<j.distbits)-1],i=F>>>24,n=F>>>16&255,m=F&65535,i<=a)break;if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if((n&240)===0){v=i,c=n,p=m;for(;;){if(F=j.distcode[p+((B&(1<<v+c)-1)>>v)],i=F>>>24,n=F>>>16&255,m=F&65535,v+i<=a)break;if(G===0)break A;G--,B+=k[E++]<<a,a+=8}B>>>=v,a-=v,j.back+=v}if(B>>>=i,a-=i,j.back+=i,n&64){A.msg="invalid distance code",j.mode=cA;break}j.offset=m,j.extra=n&15,j.mode=Cl;case Cl:if(j.extra){O=j.extra;while(a<O){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}j.offset+=B&(1<<j.extra)-1,B>>>=j.extra,a-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){A.msg="invalid distance too far back",j.mode=cA;break}j.mode=zl;case zl:if(s===0)break A;if(h=d-s,j.offset>h){if(h=j.offset-h,h>j.whave){if(j.sane){A.msg="invalid distance too far back",j.mode=cA;break}}if(h>j.wnext)h-=j.wnext,x=j.wsize-h;else x=j.wnext-h;if(h>j.length)h=j.length;o=j.window}else o=e,x=r-j.offset,h=j.length;if(h>s)h=s;s-=h,j.length-=h;do e[r++]=o[x++];while(--h);if(j.length===0)j.mode=mt;break;case Ul:if(s===0)break A;e[r++]=j.length,s--,j.mode=mt;break;case pe:if(j.wrap){while(a<32){if(G===0)break A;G--,B|=k[E++]<<a,a+=8}if(d-=s,A.total_out+=d,j.total+=d,d)A.adler=j.check=j.flags?Gj(j.check,e,d,r-d):xe(j.check,e,d,r-d);if(d=s,(j.flags?B:Ql(B))!==j.check){A.msg="incorrect data check",j.mode=cA;break}B=0,a=0}j.mode=Vl;case Vl:if(j.wrap&&j.flags){while(a<32){if(G===0)break A;G--,B+=k[E++]<<a,a+=8}if(B!==(j.total&4294967295)){A.msg="incorrect length check",j.mode=cA;break}B=0,a=0}j.mode=Jl;case Jl:g=Kn;break A;case cA:g=Ar;break A;case He:return fe;case yn:default:return VA}if(A.next_out=r,A.avail_out=s,A.next_in=E,A.avail_in=G,j.hold=B,j.bits=a,j.wsize||d!==A.avail_out&&j.mode<cA&&(j.mode<pe||t!==fl)){if(Gr(A,A.output,A.next_out,d-A.avail_out))return j.mode=He,fe}if($-=A.avail_in,d-=A.avail_out,A.total_in+=$,A.total_out+=d,j.total+=d,j.wrap&&d)A.adler=j.check=j.flags?Gj(j.check,e,d,A.next_out-d):xe(j.check,e,d,A.next_out-d);if(A.data_type=j.bits+(j.last?64:0)+(j.mode===mj?128:0)+(j.mode===$t||j.mode===de?256:0),($===0&&d===0||t===fl)&&g===t6)g=bn;return g}function Xn(A){if(!A||!A.state)return VA;var t=A.state;if(t.window)t.window=null;return A.state=null,t6}function Cn(A,t){var j;if(!A||!A.state)return VA;if(j=A.state,(j.wrap&2)===0)return VA;return j.head=t,t.done=!1,t6}function zn(A,t){var j=t.length,k,e,E;if(!A||!A.state)return VA;if(k=A.state,k.wrap!==0&&k.mode!==ct)return VA;if(k.mode===ct){if(e=1,e=xe(e,t,j,0),e!==k.check)return Ar}if(E=Gr(A,t,j,j),E)return k.mode=He,fe;return k.havedict=1,t6}var XA=uj(),xe=re(),Gj=qe(),gn=$l(),B7=xl(),_n=0,Zl=1,Yl=2,fl=4,On=5,vt=6,t6=0,Kn=1,Mn=2,VA=-2,Ar=-3,fe=-4,bn=-5,Hl=8,jr=1,gl=2,_l=3,Ol=4,Kl=5,Ml=6,bl=7,yl=8,wl=9,Dl=10,ct=11,mj=12,ce=13,Pl=14,de=15,Ll=16,Tl=17,Nl=18,Rl=19,$t=20,mt=21,Sl=22,Xl=23,Cl=24,zl=25,Ul=26,pe=27,Vl=28,Jl=29,cA=30,He=31,yn=32,wn=852,Dn=592,Pn=15,Ln=Pn,Wl=!0,he,Ie;Un.inflateReset=kr;Un.inflateReset2=er;Un.inflateResetKeep=tr;Un.inflateInit=Nn;Un.inflateInit2=Er;Un.inflate=Sn;Un.inflateEnd=Xn;Un.inflateGetHeader=Cn;Un.inflateSetDictionary=zn;Un.inflateInfo="pako inflate (from Nodeca project)"});var ge=AA((Wv,rr)=>{rr.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var Br=AA((Zv,qr)=>{function ei(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}qr.exports=ei});var sr=AA((ri)=>{function k6(A){if(!(this instanceof k6))return new k6(A);this.options=a7.assign({chunkSize:16384,windowBits:0,to:""},A||{});var t=this.options;if(t.raw&&t.windowBits>=0&&t.windowBits<16){if(t.windowBits=-t.windowBits,t.windowBits===0)t.windowBits=-15}if(t.windowBits>=0&&t.windowBits<16&&!(A&&A.windowBits))t.windowBits+=32;if(t.windowBits>15&&t.windowBits<48){if((t.windowBits&15)===0)t.windowBits|=15}this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ei,this.strm.avail_out=0;var j=_6.inflateInit2(this.strm,t.windowBits);if(j!==IA.Z_OK)throw new Error(_e[j]);if(this.header=new Gi,_6.inflateGetHeader(this.strm,this.header),t.dictionary){if(typeof t.dictionary==="string")t.dictionary=dt.string2buf(t.dictionary);else if(ar.call(t.dictionary)==="[object ArrayBuffer]")t.dictionary=new Uint8Array(t.dictionary);if(t.raw){if(j=_6.inflateSetDictionary(this.strm,t.dictionary),j!==IA.Z_OK)throw new Error(_e[j])}}}function Oe(A,t){var j=new k6(t);if(j.push(A,!0),j.err)throw j.msg||_e[j.err];return j.result}function li(A,t){return t=t||{},t.raw=!0,Oe(A,t)}var _6=lr(),a7=uj(),dt=ne(),IA=ge(),_e=qt(),Ei=ie(),Gi=Br(),ar=Object.prototype.toString;k6.prototype.push=function(A,t){var j=this.strm,k=this.options.chunkSize,e=this.options.dictionary,E,r,G,s,B,a=!1;if(this.ended)return!1;if(r=t===~~t?t:t===!0?IA.Z_FINISH:IA.Z_NO_FLUSH,typeof A==="string")j.input=dt.binstring2buf(A);else if(ar.call(A)==="[object ArrayBuffer]")j.input=new Uint8Array(A);else j.input=A;j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0)j.output=new a7.Buf8(k),j.next_out=0,j.avail_out=k;if(E=_6.inflate(j,IA.Z_NO_FLUSH),E===IA.Z_NEED_DICT&&e)E=_6.inflateSetDictionary(this.strm,e);if(E===IA.Z_BUF_ERROR&&a===!0)E=IA.Z_OK,a=!1;if(E!==IA.Z_STREAM_END&&E!==IA.Z_OK)return this.onEnd(E),this.ended=!0,!1;if(j.next_out){if(j.avail_out===0||E===IA.Z_STREAM_END||j.avail_in===0&&(r===IA.Z_FINISH||r===IA.Z_SYNC_FLUSH))if(this.options.to==="string"){if(G=dt.utf8border(j.output,j.next_out),s=j.next_out-G,B=dt.buf2string(j.output,G),j.next_out=s,j.avail_out=k-s,s)a7.arraySet(j.output,j.output,G,s,0);this.onData(B)}else this.onData(a7.shrinkBuf(j.output,j.next_out))}if(j.avail_in===0&&j.avail_out===0)a=!0}while((j.avail_in>0||j.avail_out===0)&&E!==IA.Z_STREAM_END);if(E===IA.Z_STREAM_END)r=IA.Z_FINISH;if(r===IA.Z_FINISH)return E=_6.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===IA.Z_OK;if(r===IA.Z_SYNC_FLUSH)return this.onEnd(IA.Z_OK),j.avail_out=0,!0;return!0};k6.prototype.onData=function(A){this.chunks.push(A)};k6.prototype.onEnd=function(A){if(A===IA.Z_OK)if(this.options.to==="string")this.result=this.chunks.join("");else this.result=a7.flattenChunks(this.chunks);this.chunks=[],this.err=A,this.msg=this.strm.msg};ri.Inflate=k6;ri.inflate=Oe;ri.inflateRaw=li;ri.ungzip=Oe});var ir=AA((A0,nr)=>{var Fi=uj().assign,ni=ul(),ii=sr(),oi=ge(),Fr={};Fi(Fr,ni,ii,oi);nr.exports=Fr});var ur=AA((mi)=>{function e6(A,t){pt.call(this,"FlateWorker/"+A),this._pako=null,this._pakoAction=A,this._pakoOptions=t,this.meta={}}var ui=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Uint32Array!=="undefined",vi=ir(),or=pA(),pt=SA(),$i=ui?"uint8array":"array";mi.magic="\b\0";or.inherits(e6,pt);e6.prototype.processChunk=function(A){if(this.meta=A.meta,this._pako===null)this._createPako();this._pako.push(or.transformTo($i,A.data),!1)};e6.prototype.flush=function(){if(pt.prototype.flush.call(this),this._pako===null)this._createPako();this._pako.push([],!0)};e6.prototype.cleanUp=function(){pt.prototype.cleanUp.call(this),this._pako=null};e6.prototype._createPako=function(){this._pako=new vi[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var A=this;this._pako.onData=function(t){A.push({data:t,meta:A.meta})}};mi.compressWorker=function(A){return new e6("Deflate",A)};mi.uncompressWorker=function(){return new e6("Inflate",{})}});var Ke=AA((hi)=>{var vr=SA();hi.STORE={magic:"\0\0",compressWorker:function(){return new vr("STORE compression")},uncompressWorker:function(){return new vr("STORE decompression")}};hi.DEFLATE=ur()});var Me=AA((fi)=>{fi.LOCAL_FILE_HEADER="PK\x03\x04";fi.CENTRAL_FILE_HEADER="PK\x01\x02";fi.CENTRAL_DIRECTORY_END="PK\x05\x06";fi.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07";fi.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06";fi.DATA_DESCRIPTOR="PK\x07\b"});var dr=AA((e0,cr)=>{function ZA(A,t,j,k){K6.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=j,this.encodeFileName=k,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var O6=pA(),K6=SA(),be=c6(),$r=et(),ht=Me(),vA=function(A,t){var j="",k;for(k=0;k<t;k++)j+=String.fromCharCode(A&255),A=A>>>8;return j},bi=function(A,t){var j=A;if(!A)j=t?16893:33204;return(j&65535)<<16},yi=function(A){return(A||0)&63},mr=function(A,t,j,k,e,E){var{file:r,compression:G}=A,s=E!==be.utf8encode,B=O6.transformTo("string",E(r.name)),a=O6.transformTo("string",be.utf8encode(r.name)),$=r.comment,d=O6.transformTo("string",E($)),h=O6.transformTo("string",be.utf8encode($)),x=a.length!==r.name.length,o=h.length!==$.length,F,i,n="",m="",v="",c=r.dir,p=r.date,f={crc32:0,compressedSize:0,uncompressedSize:0};if(!t||j)f.crc32=A.crc32,f.compressedSize=A.compressedSize,f.uncompressedSize=A.uncompressedSize;var g=0;if(t)g|=8;if(!s&&(x||o))g|=2048;var P=0,T=0;if(c)P|=16;if(e==="UNIX")T=798,P|=bi(r.unixPermissions,c);else T=20,P|=yi(r.dosPermissions,c);if(F=p.getUTCHours(),F=F<<6,F=F|p.getUTCMinutes(),F=F<<5,F=F|p.getUTCSeconds()/2,i=p.getUTCFullYear()-1980,i=i<<4,i=i|p.getUTCMonth()+1,i=i<<5,i=i|p.getUTCDate(),x)m=vA(1,1)+vA($r(B),4)+a,n+="up"+vA(m.length,2)+m;if(o)v=vA(1,1)+vA($r(d),4)+h,n+="uc"+vA(v.length,2)+v;var O="";O+=`
\0`,O+=vA(g,2),O+=G.magic,O+=vA(F,2),O+=vA(i,2),O+=vA(f.crc32,4),O+=vA(f.compressedSize,4),O+=vA(f.uncompressedSize,4),O+=vA(B.length,2),O+=vA(n.length,2);var I=ht.LOCAL_FILE_HEADER+O+B+n,K=ht.CENTRAL_FILE_HEADER+vA(T,2)+O+vA(d.length,2)+"\0\0"+"\0\0"+vA(P,4)+vA(k,4)+B+n+d;return{fileRecord:I,dirRecord:K}},wi=function(A,t,j,k,e){var E="",r=O6.transformTo("string",e(k));return E=ht.CENTRAL_DIRECTORY_END+"\0\0"+"\0\0"+vA(A,2)+vA(A,2)+vA(t,4)+vA(j,4)+vA(r.length,2)+r,E},Di=function(A){var t="";return t=ht.DATA_DESCRIPTOR+vA(A.crc32,4)+vA(A.compressedSize,4)+vA(A.uncompressedSize,4),t};O6.inherits(ZA,K6);ZA.prototype.push=function(A){var t=A.meta.percent||0,j=this.entriesCount,k=this._sources.length;if(this.accumulate)this.contentBuffer.push(A);else this.bytesWritten+=A.data.length,K6.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:j?(t+100*(j-k-1))/j:100}})};ZA.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var t=this.streamFiles&&!A.file.dir;if(t){var j=mr(A,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:j.fileRecord,meta:{percent:0}})}else this.accumulate=!0};ZA.prototype.closedSource=function(A){this.accumulate=!1;var t=this.streamFiles&&!A.file.dir,j=mr(A,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(j.dirRecord),t)this.push({data:Di(A),meta:{percent:100}});else{this.push({data:j.fileRecord,meta:{percent:0}});while(this.contentBuffer.length)this.push(this.contentBuffer.shift())}this.currentFile=null};ZA.prototype.flush=function(){var A=this.bytesWritten;for(var t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var j=this.bytesWritten-A,k=wi(this.dirRecords.length,j,A,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})};ZA.prototype.prepareNextSource=function(){if(this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused)this.previous.pause();else this.previous.resume()};ZA.prototype.registerPrevious=function(A){this._sources.push(A);var t=this;return A.on("data",function(j){t.processChunk(j)}),A.on("end",function(){if(t.closedSource(t.previous.streamInfo),t._sources.length)t.prepareNextSource();else t.end()}),A.on("error",function(j){t.error(j)}),this};ZA.prototype.resume=function(){if(!K6.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0};ZA.prototype.error=function(A){var t=this._sources;if(!K6.prototype.error.call(this,A))return!1;for(var j=0;j<t.length;j++)try{t[j].error(A)}catch(k){}return!0};ZA.prototype.lock=function(){K6.prototype.lock.call(this);var A=this._sources;for(var t=0;t<A.length;t++)A[t].lock()};cr.exports=ZA});var pr=AA((Ni)=>{var Pi=Ke(),Li=dr(),Ti=function(A,t){var j=A||t,k=Pi[j];if(!k)throw new Error(j+" is not a valid compression method !");return k};Ni.generateWorker=function(A,t,j){var k=new Li(t.streamFiles,j,t.platform,t.encodeFileName),e=0;try{A.forEach(function(E,r){e++;var G=Ti(r.options.compression,t.compression),s=r.options.compressionOptions||t.compressionOptions||{},B=r.dir,a=r.date;r._compressWorker(G,s).withStreamInfo("file",{name:E,dir:B,date:a,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(k)}),k.entriesCount=e}catch(E){k.error(E)}return k}});var Ir=AA((G0,hr)=>{function s7(A,t){It.call(this,"Nodejs stream input adapter for "+A),this._upstreamEnded=!1,this._bindStream(t)}var Si=pA(),It=SA();Si.inherits(s7,It);s7.prototype._bindStream=function(A){var t=this;this._stream=A,A.pause(),A.on("data",function(j){t.push({data:j,meta:{percent:0}})}).on("error",function(j){if(t.isPaused)this.generatedError=j;else t.error(j)}).on("end",function(){if(t.isPaused)t._upstreamEnded=!0;else t.end()})};s7.prototype.pause=function(){if(!It.prototype.pause.call(this))return!1;return this._stream.pause(),!0};s7.prototype.resume=function(){if(!It.prototype.resume.call(this))return!1;if(this._upstreamEnded)this.end();else this._stream.resume();return!0};hr.exports=s7});var yr=AA((l0,br)=>{function Hr(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var Xi=c6(),F7=pA(),gr=SA(),Ci=Pk(),_r=Lk(),xr=Et(),zi=fG(),Ui=pr(),fr=C6(),Vi=Ir(),Or=function(A,t,j){var k=F7.getTypeOf(t),e,E=F7.extend(j||{},_r);if(E.date=E.date||new Date,E.compression!==null)E.compression=E.compression.toUpperCase();if(typeof E.unixPermissions==="string")E.unixPermissions=parseInt(E.unixPermissions,8);if(E.unixPermissions&&E.unixPermissions&16384)E.dir=!0;if(E.dosPermissions&&E.dosPermissions&16)E.dir=!0;if(E.dir)A=Kr(A);if(E.createFolders&&(e=Ji(A)))Mr.call(this,e,!0);var r=k==="string"&&E.binary===!1&&E.base64===!1;if(!j||typeof j.binary==="undefined")E.binary=!r;var G=t instanceof xr&&t.uncompressedSize===0;if(G||E.dir||!t||t.length===0)E.base64=!1,E.binary=!0,t="",E.compression="STORE",k="string";var s=null;if(t instanceof xr||t instanceof gr)s=t;else if(fr.isNode&&fr.isStream(t))s=new Vi(A,t);else s=F7.prepareContent(A,t,E.binary,E.optimizedBinaryString,E.base64);var B=new zi(A,s,E);this.files[A]=B},Ji=function(A){if(A.slice(-1)==="/")A=A.substring(0,A.length-1);var t=A.lastIndexOf("/");return t>0?A.substring(0,t):""},Kr=function(A){if(A.slice(-1)!=="/")A+="/";return A},Mr=function(A,t){if(t=typeof t!=="undefined"?t:_r.createFolders,A=Kr(A),!this.files[A])Or.call(this,A,null,{dir:!0,createFolders:t});return this.files[A]},Qi={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var t,j,k;for(t in this.files)if(k=this.files[t],j=t.slice(this.root.length,t.length),j&&t.slice(0,this.root.length)===this.root)A(j,k)},filter:function(A){var t=[];return this.forEach(function(j,k){if(A(j,k))t.push(k)}),t},file:function(A,t,j){if(arguments.length===1)if(Hr(A)){var k=A;return this.filter(function(E,r){return!r.dir&&k.test(E)})}else{var e=this.files[this.root+A];if(e&&!e.dir)return e;else return null}else A=this.root+A,Or.call(this,A,t,j);return this},folder:function(A){if(!A)return this;if(Hr(A))return this.filter(function(e,E){return E.dir&&A.test(e)});var t=this.root+A,j=Mr.call(this,t),k=this.clone();return k.root=j.name,k},remove:function(A){A=this.root+A;var t=this.files[A];if(!t){if(A.slice(-1)!=="/")A+="/";t=this.files[A]}if(t&&!t.dir)delete this.files[A];else{var j=this.filter(function(e,E){return E.name.slice(0,A.length)===A});for(var k=0;k<j.length;k++)delete this.files[j[k].name]}return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var t,j={};try{if(j=F7.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Xi.utf8encode}),j.type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring")j.type="string";if(!j.type)throw new Error("No output type specified.");if(F7.checkSupport(j.type),j.platform==="darwin"||j.platform==="freebsd"||j.platform==="linux"||j.platform==="sunos")j.platform="UNIX";if(j.platform==="win32")j.platform="DOS";var k=j.comment||this.comment||"";t=Ui.generateWorker(this,j,k)}catch(e){t=new gr("error"),t.error(e)}return new Ci(t,j.type||"string",j.mimeType)},generateAsync:function(A,t){return this.generateInternalStream(A).accumulate(t)},generateNodeStream:function(A,t){if(A=A||{},!A.type)A.type="nodebuffer";return this.generateInternalStream(A).toNodejsStream(t)}};br.exports=Qi});var ye=AA((r0,Dr)=>{function wr(A){this.data=A,this.length=A.length,this.index=0,this.zero=0}var Wi=pA();wr.prototype={checkOffset:function(A){this.checkIndex(this.index+A)},checkIndex:function(A){if(this.length<this.zero+A||A<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+A+"). Corrupted zip ?")},setIndex:function(A){this.checkIndex(A),this.index=A},skip:function(A){this.setIndex(this.index+A)},byteAt:function(){},readInt:function(A){var t=0,j;this.checkOffset(A);for(j=this.index+A-1;j>=this.index;j--)t=(t<<8)+this.byteAt(j);return this.index+=A,t},readString:function(A){return Wi.transformTo("string",this.readData(A))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var A=this.readInt(4);return new Date(Date.UTC((A>>25&127)+1980,(A>>21&15)-1,A>>16&31,A>>11&31,A>>5&63,(A&31)<<1))}};Dr.exports=wr});var we=AA((q0,Lr)=>{function M6(A){Pr.call(this,A);for(var t=0;t<this.data.length;t++)A[t]=A[t]&255}var Pr=ye(),Zi=pA();Zi.inherits(M6,Pr);M6.prototype.byteAt=function(A){return this.data[this.zero+A]};M6.prototype.lastIndexOfSignature=function(A){var t=A.charCodeAt(0),j=A.charCodeAt(1),k=A.charCodeAt(2),e=A.charCodeAt(3);for(var E=this.length-4;E>=0;--E)if(this.data[E]===t&&this.data[E+1]===j&&this.data[E+2]===k&&this.data[E+3]===e)return E-this.zero;return-1};M6.prototype.readAndCheckSignature=function(A){var t=A.charCodeAt(0),j=A.charCodeAt(1),k=A.charCodeAt(2),e=A.charCodeAt(3),E=this.readData(4);return t===E[0]&&j===E[1]&&k===E[2]&&e===E[3]};M6.prototype.readData=function(A){if(this.checkOffset(A),A===0)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+A);return this.index+=A,t};Lr.exports=M6});var Rr=AA((B0,Nr)=>{function b6(A){Tr.call(this,A)}var Tr=ye(),Yi=pA();Yi.inherits(b6,Tr);b6.prototype.byteAt=function(A){return this.data.charCodeAt(this.zero+A)};b6.prototype.lastIndexOfSignature=function(A){return this.data.lastIndexOf(A)-this.zero};b6.prototype.readAndCheckSignature=function(A){var t=this.readData(4);return A===t};b6.prototype.readData=function(A){this.checkOffset(A);var t=this.data.slice(this.zero+this.index,this.zero+this.index+A);return this.index+=A,t};Nr.exports=b6});var Pe=AA((a0,Xr)=>{function De(A){Sr.call(this,A)}var Sr=we(),Ao=pA();Ao.inherits(De,Sr);De.prototype.readData=function(A){if(this.checkOffset(A),A===0)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+A);return this.index+=A,t};Xr.exports=De});var Ur=AA((s0,zr)=>{function Le(A){Cr.call(this,A)}var Cr=Pe(),jo=pA();jo.inherits(Le,Cr);Le.prototype.readData=function(A){this.checkOffset(A);var t=this.data.slice(this.zero+this.index,this.zero+this.index+A);return this.index+=A,t};zr.exports=Le});var Te=AA((F0,Jr)=>{var xt=pA(),Vr=ij(),to=we(),ko=Rr(),eo=Ur(),Eo=Pe();Jr.exports=function(A){var t=xt.getTypeOf(A);if(xt.checkSupport(t),t==="string"&&!Vr.uint8array)return new ko(A);if(t==="nodebuffer")return new eo(A);if(Vr.uint8array)return new Eo(xt.transformTo("uint8array",A));return new to(xt.transformTo("array",A))}});var Yr=AA((n0,Zr)=>{function Wr(A,t){this.options=A,this.loadOptions=t}var Ne=Te(),Mj=pA(),Go=Et(),Qr=et(),ft=c6(),Ht=Ke(),lo=ij(),ro=0,qo=3,Bo=function(A){for(var t in Ht){if(!Object.prototype.hasOwnProperty.call(Ht,t))continue;if(Ht[t].magic===A)return Ht[t]}return null};Wr.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(A){var t,j;if(A.skip(22),this.fileNameLength=A.readInt(2),j=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(j),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(t=Bo(this.compressionMethod),t===null)throw new Error("Corrupted zip : compression "+Mj.pretty(this.compressionMethod)+" unknown (inner file : "+Mj.transformTo("string",this.fileName)+")");this.decompressed=new Go(this.compressedSize,this.uncompressedSize,this.crc32,t,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var t=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(t),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;if(this.dir=this.externalFileAttributes&16?!0:!1,A===ro)this.dosPermissions=this.externalFileAttributes&63;if(A===qo)this.unixPermissions=this.externalFileAttributes>>16&65535;if(!this.dir&&this.fileNameStr.slice(-1)==="/")this.dir=!0},parseZIP64ExtraField:function(){if(!this.extraFields[1])return;var A=Ne(this.extraFields[1].value);if(this.uncompressedSize===Mj.MAX_VALUE_32BITS)this.uncompressedSize=A.readInt(8);if(this.compressedSize===Mj.MAX_VALUE_32BITS)this.compressedSize=A.readInt(8);if(this.localHeaderOffset===Mj.MAX_VALUE_32BITS)this.localHeaderOffset=A.readInt(8);if(this.diskNumberStart===Mj.MAX_VALUE_32BITS)this.diskNumberStart=A.readInt(4)},readExtraFields:function(A){var t=A.index+this.extraFieldsLength,j,k,e;if(!this.extraFields)this.extraFields={};while(A.index+4<t)j=A.readInt(2),k=A.readInt(2),e=A.readData(k),this.extraFields[j]={id:j,length:k,value:e};A.setIndex(t)},handleUTF8:function(){var A=lo.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=ft.utf8decode(this.fileName),this.fileCommentStr=ft.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(t!==null)this.fileNameStr=t;else{var j=Mj.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(j)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var e=Mj.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(e)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var t=Ne(A.value);if(t.readInt(1)!==1)return null;if(Qr(this.fileName)!==t.readInt(4))return null;return ft.utf8decode(t.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var t=Ne(A.value);if(t.readInt(1)!==1)return null;if(Qr(this.fileComment)!==t.readInt(4))return null;return ft.utf8decode(t.readData(A.length-5))}return null}};Zr.exports=Wr});var tq=AA((i0,jq)=>{function Aq(A){this.files=[],this.loadOptions=A}var ao=Te(),cj=pA(),YA=Me(),so=Yr(),Fo=ij();Aq.prototype={checkSignature:function(A){if(!this.reader.readAndCheckSignature(A)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+cj.pretty(t)+", expected "+cj.pretty(A)+")")}},isSignature:function(A,t){var j=this.reader.index;this.reader.setIndex(A);var k=this.reader.readString(4),e=k===t;return this.reader.setIndex(j),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var A=this.reader.readData(this.zipCommentLength),t=Fo.uint8array?"uint8array":"array",j=cj.transformTo(t,A);this.zipComment=this.loadOptions.decodeFileName(j)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};var A=this.zip64EndOfCentralSize-44,t=0,j,k,e;while(t<A)j=this.reader.readInt(2),k=this.reader.readInt(4),e=this.reader.readData(k),this.zip64ExtensibleData[j]={id:j,length:k,value:e}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var A,t;for(A=0;A<this.files.length;A++)t=this.files[A],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(YA.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var A;this.reader.setIndex(this.centralDirOffset);while(this.reader.readAndCheckSignature(YA.CENTRAL_FILE_HEADER))A=new so({zip64:this.zip64},this.loadOptions),A.readCentralPart(this.reader),this.files.push(A);if(this.centralDirRecords!==this.files.length){if(this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)}},readEndOfCentral:function(){var A=this.reader.lastIndexOfSignature(YA.CENTRAL_DIRECTORY_END);if(A<0){var t=!this.isSignature(0,YA.LOCAL_FILE_HEADER);if(t)throw new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");else throw new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(A);var j=A;if(this.checkSignature(YA.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===cj.MAX_VALUE_16BITS||this.diskWithCentralDirStart===cj.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===cj.MAX_VALUE_16BITS||this.centralDirRecords===cj.MAX_VALUE_16BITS||this.centralDirSize===cj.MAX_VALUE_32BITS||this.centralDirOffset===cj.MAX_VALUE_32BITS){if(this.zip64=!0,A=this.reader.lastIndexOfSignature(YA.ZIP64_CENTRAL_DIRECTORY_LOCATOR),A<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(A),this.checkSignature(YA.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,YA.ZIP64_CENTRAL_DIRECTORY_END)){if(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(YA.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory")}this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(YA.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var k=this.centralDirOffset+this.centralDirSize;if(this.zip64)k+=20,k+=12+this.zip64EndOfCentralSize;var e=j-k;if(e>0)if(this.isSignature(j,YA.CENTRAL_FILE_HEADER));else this.reader.zero=e;else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(A){this.reader=ao(A)},load:function(A){this.prepareReader(A),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};jq.exports=Aq});var Eq=AA((o0,eq)=>{function uo(A){return new gt.Promise(function(t,j){var k=A.decompressed.getContentWorker().pipe(new oo);k.on("error",function(e){j(e)}).on("end",function(){if(k.streamInfo.crc32!==A.decompressed.crc32)j(new Error("Corrupted zip : CRC32 mismatch"));else t()}).resume()})}var Re=pA(),gt=v6(),no=c6(),io=tq(),oo=Rk(),kq=C6();eq.exports=function(A,t){var j=this;if(t=Re.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:no.utf8decode}),kq.isNode&&kq.isStream(A))return gt.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file."));return Re.prepareContent("the loaded zip file",A,!0,t.optimizedBinaryString,t.base64).then(function(k){var e=new io(t);return e.load(k),e}).then(function k(e){var E=[gt.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var G=0;G<r.length;G++)E.push(uo(r[G]));return gt.Promise.all(E)}).then(function k(e){var E=e.shift(),r=E.files;for(var G=0;G<r.length;G++){var s=r[G],B=s.fileNameStr,a=Re.resolve(s.fileNameStr);if(j.file(a,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),!s.dir)j.file(a).unsafeOriginalName=B}if(E.zipComment.length)j.comment=E.zipComment;return j})}});var lq=AA((u0,Gq)=>{function JA(){if(!(this instanceof JA))return new JA;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var A=new JA;for(var t in this)if(typeof this[t]!=="function")A[t]=this[t];return A}}JA.prototype=yr();JA.prototype.loadAsync=Eq();JA.support=ij();JA.defaults=Lk();JA.version="3.10.1";JA.loadAsync=function(A,t){return new JA().loadAsync(A,t)};JA.external=v6();Gq.exports=JA});var nE="var QZ=Object.defineProperty;var JZ=(R,E)=>{for(var Y in E)QZ(R,Y,{get:E[Y],enumerable:!0,configurable:!0,set:(c)=>E[Y]=()=>c})};var KZ=(R,E)=>()=>(R&&(E=R(R=0)),E);var ZZ=((R)=>typeof require!==\"undefined\"?require:typeof Proxy!==\"undefined\"?new Proxy(R,{get:(E,Y)=>(typeof require!==\"undefined\"?require:E)[Y]}):R)(function(R){if(typeof require!==\"undefined\")return require.apply(this,arguments);throw Error('Dynamic require of \"'+R+'\" is not supported')});var $Z=(()=>{var R=null;return async function(E={}){var Y=E,c,u;Y.ready=new Promise((Q,$)=>{c=Q,u=$});var i=Object.assign({},Y),jQ=[],n=\"./this.program\",e=(Q,$)=>{throw $},dQ=typeof window==\"object\",QQ=!0,UQ=typeof process==\"object\"&&typeof process.versions==\"object\"&&typeof process.versions.node==\"string\",l=\"\";function i0(Q){if(Y.locateFile)return Y.locateFile(Q,l);return l+Q}var KQ,ZQ,CQ;if(UQ){const{createRequire:Q}=null;var FQ=Q(null),wQ=FQ(\"fs\"),xQ=FQ(\"path\");if(QQ)l=xQ.dirname(l)+\"/\";else l=FQ(\"url\").fileURLToPath(new URL(\"./\",null));if(KQ=($,J)=>{return $=HQ($)?new URL($):xQ.normalize($),wQ.readFileSync($,J?void 0:\"utf8\")},CQ=($)=>{var J=KQ($,!0);if(!J.buffer)J=new Uint8Array(J);return J},ZQ=($,J,K,Z=!0)=>{$=HQ($)?new URL($):xQ.normalize($),wQ.readFile($,Z?void 0:\"utf8\",(G,X)=>{if(G)K(G);else J(Z?X.buffer:X)})},!Y.thisProgram&&process.argv.length>1)n=process.argv[1].replace(/\\\\/g,\"/\");jQ=process.argv.slice(2),e=($,J)=>{throw process.exitCode=$,J}}else if(dQ||QQ){if(QQ)l=self.location.href;else if(typeof document!=\"undefined\"&&document.currentScript)l=document.currentScript.src;if(R)l=R;if(l.startsWith(\"blob:\"))l=\"\";else l=l.substr(0,l.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1);{if(KQ=(Q)=>{var $=new XMLHttpRequest;return $.open(\"GET\",Q,!1),$.send(null),$.responseText},QQ)CQ=(Q)=>{var $=new XMLHttpRequest;return $.open(\"GET\",Q,!1),$.responseType=\"arraybuffer\",$.send(null),new Uint8Array($.response)};ZQ=(Q,$,J)=>{var K=new XMLHttpRequest;K.open(\"GET\",Q,!0),K.responseType=\"arraybuffer\",K.onload=()=>{if(K.status==200||K.status==0&&K.response){$(K.response);return}J()},K.onerror=J,K.send(null)}}}var vQ=Y.print||console.log.bind(console),s=Y.printErr||console.error.bind(console);if(Object.assign(Y,i),i=null,Y.arguments)jQ=Y.arguments;if(Y.thisProgram)n=Y.thisProgram;if(Y.quit)e=Y.quit;var VQ;if(Y.wasmBinary)VQ=Y.wasmBinary;var RQ,TQ=!1,GQ,f,m,$Q,s0,O,b,o0,n0;function iQ(){var Q=RQ.buffer;Y.HEAP8=f=new Int8Array(Q),Y.HEAP16=$Q=new Int16Array(Q),Y.HEAPU8=m=new Uint8Array(Q),Y.HEAPU16=s0=new Uint16Array(Q),Y.HEAP32=O=new Int32Array(Q),Y.HEAPU32=b=new Uint32Array(Q),Y.HEAPF32=o0=new Float32Array(Q),Y.HEAPF64=n0=new Float64Array(Q)}var sQ=[],oQ=[],nQ=[],r0=!1;function t0(){if(Y.preRun){if(typeof Y.preRun==\"function\")Y.preRun=[Y.preRun];while(Y.preRun.length)Q$(Y.preRun.shift())}gQ(sQ)}function a0(){if(r0=!0,!Y.noFSInit&&!V.init.initialized)V.init();V.ignorePermissions=!1,o.init(),gQ(oQ)}function e0(){if(Y.postRun){if(typeof Y.postRun==\"function\")Y.postRun=[Y.postRun];while(Y.postRun.length)J$(Y.postRun.shift())}gQ(nQ)}function Q$(Q){sQ.unshift(Q)}function $$(Q){oQ.unshift(Q)}function J$(Q){nQ.unshift(Q)}var r=0,yQ=null,XQ=null;function rQ(Q){return Q}function bQ(Q){r++,Y.monitorRunDependencies?.(r)}function IQ(Q){if(r--,Y.monitorRunDependencies?.(r),r==0){if(yQ!==null)clearInterval(yQ),yQ=null;if(XQ){var $=XQ;XQ=null,$()}}}function qQ(Q){Y.onAbort?.(Q),Q=\"Aborted(\"+Q+\")\",s(Q),TQ=!0,GQ=1,Q+=\". Build with -sASSERTIONS for more info.\";var $=new WebAssembly.RuntimeError(Q);throw u($),$}var K$=\"data:application/octet-stream;base64,\",tQ=(Q)=>Q.startsWith(K$),HQ=(Q)=>Q.startsWith(\"file://\"),t;if(Y.locateFile){if(t=\"cmaj-compiler-wasm.wasm\",!tQ(t))t=i0(t)}else t=\"./cmaj-compiler-wasm.wasm\";function aQ(Q){if(Q==t&&VQ)return new Uint8Array(VQ);if(CQ)return CQ(Q);throw\"both async and sync fetching of the wasm failed\"}function Z$(Q){if(!VQ&&(dQ||QQ)){if(typeof fetch==\"function\"&&!HQ(Q))return fetch(Q,{credentials:\"same-origin\"}).then(($)=>{if(!$.ok)throw`failed to load wasm binary file at '${Q}'`;return $.arrayBuffer()}).catch(()=>aQ(Q));else if(ZQ)return new Promise(($,J)=>{ZQ(Q,(K)=>$(new Uint8Array(K)),J)})}return Promise.resolve().then(()=>aQ(Q))}function eQ(Q,$,J){return Z$(Q).then((K)=>WebAssembly.instantiate(K,$)).then(J,(K)=>{s(`failed to asynchronously prepare wasm: ${K}`),qQ(K)})}function V$(Q,$,J,K){if(!Q&&typeof WebAssembly.instantiateStreaming==\"function\"&&!tQ($)&&!HQ($)&&!UQ&&typeof fetch==\"function\")return fetch($,{credentials:\"same-origin\"}).then((Z)=>{var G=WebAssembly.instantiateStreaming(Z,J);return G.then(K,function(X){return s(`wasm streaming compile failed: ${X}`),s(\"falling back to ArrayBuffer instantiation\"),eQ($,J,K)})});return eQ($,J,K)}function G$(){var Q={a:AJ};function $(K,Z){return H=K.exports,H=aK(H),RQ=H.jb,iQ(),J0=H.ub,$$(H.kb),IQ(\"wasm-instantiate\"),H}bQ(\"wasm-instantiate\");function J(K){$(K.instance)}if(Y.instantiateWasm)try{return Y.instantiateWasm(Q,$)}catch(K){s(`Module.instantiateWasm callback failed with error: ${K}`),u(K)}return V$(VQ,t,Q,J).catch(u),{}}var I,w;function Q0(Q){this.name=\"ExitStatus\",this.message=`Program terminated with exit(${Q})`,this.status=Q}var gQ=(Q)=>{while(Q.length>0)Q.shift()(Y)},$0=Y.noExitRuntime||!0,YQ=(Q,$)=>$+2097152>>>0<4194305-!!Q?(Q>>>0)+$*4294967296:NaN,zQ=[],J0,A=(Q)=>{var $=zQ[Q];if(!$){if(Q>=zQ.length)zQ.length=Q+1;zQ[Q]=$=J0.get(Q)}return $};function X$(Q,$){return Q>>>=0,A(Q)($)}var MQ=[],SQ=0;function q$(Q){Q>>>=0;var $=new WQ(Q);if(!$.get_caught())$.set_caught(!0),SQ--;return $.set_rethrown(!1),MQ.push($),R0($.excPtr),$.get_exception_ptr()}var p=0,Y$=()=>{U(0,0);var Q=MQ.pop();F0(Q.excPtr),p=0};class WQ{constructor(Q){this.excPtr=Q,this.ptr=Q-24}set_type(Q){b[this.ptr+4>>>2>>>0]=Q}get_type(){return b[this.ptr+4>>>2>>>0]}set_destructor(Q){b[this.ptr+8>>>2>>>0]=Q}get_destructor(){return b[this.ptr+8>>>2>>>0]}set_caught(Q){Q=Q?1:0,f[this.ptr+12>>>0]=Q}get_caught(){return f[this.ptr+12>>>0]!=0}set_rethrown(Q){Q=Q?1:0,f[this.ptr+13>>>0]=Q}get_rethrown(){return f[this.ptr+13>>>0]!=0}init(Q,$){this.set_adjusted_ptr(0),this.set_type(Q),this.set_destructor($)}set_adjusted_ptr(Q){b[this.ptr+16>>>2>>>0]=Q}get_adjusted_ptr(){return b[this.ptr+16>>>2>>>0]}get_exception_ptr(){var Q=I0(this.get_type());if(Q)return b[this.excPtr>>>2>>>0];var $=this.get_adjusted_ptr();if($!==0)return $;return this.excPtr}}function M$(Q){if(Q>>>=0,!p)p=Q;throw p}var _Q=(Q)=>{var $=p;if(!$)return DQ(0),0;var J=new WQ($);J.set_adjusted_ptr($);var K=J.get_type();if(!K)return DQ(0),$;for(var Z in Q){var G=Q[Z];if(G===0||G===K)break;var X=J.ptr+16;if(T0(G,K,X))return DQ(G),$}return DQ(K),$};function W$(){return _Q([])}function B$(Q){return Q>>>=0,_Q([Q])}function L$(Q,$,J){return Q>>>=0,$>>>=0,J>>>=0,_Q([Q,$,J])}var K0=()=>{var Q=MQ.pop();if(!Q)qQ(\"no exception to throw\");var $=Q.excPtr;if(!Q.get_rethrown())MQ.push(Q),Q.set_rethrown(!0),Q.set_caught(!1),SQ++;throw p=$,p};function N$(Q){if(Q>>>=0,!Q)return;var $=new WQ(Q);MQ.push($),$.set_rethrown(!0),K0()}function O$(Q,$,J){Q>>>=0,$>>>=0,J>>>=0;var K=new WQ(Q);throw K.init($,J),p=Q,SQ++,p}var D$=()=>SQ,v={isAbs:(Q)=>Q.charAt(0)===\"/\",splitPath:(Q)=>{var $=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;return $.exec(Q).slice(1)},normalizeArray:(Q,$)=>{var J=0;for(var K=Q.length-1;K>=0;K--){var Z=Q[K];if(Z===\".\")Q.splice(K,1);else if(Z===\"..\")Q.splice(K,1),J++;else if(J)Q.splice(K,1),J--}if($)for(;J;J--)Q.unshift(\"..\");return Q},normalize:(Q)=>{var $=v.isAbs(Q),J=Q.substr(-1)===\"/\";if(Q=v.normalizeArray(Q.split(\"/\").filter((K)=>!!K),!$).join(\"/\"),!Q&&!$)Q=\".\";if(Q&&J)Q+=\"/\";return($?\"/\":\"\")+Q},dirname:(Q)=>{var $=v.splitPath(Q),J=$[0],K=$[1];if(!J&&!K)return\".\";if(K)K=K.substr(0,K.length-1);return J+K},basename:(Q)=>{if(Q===\"/\")return\"/\";Q=v.normalize(Q),Q=Q.replace(/\\/$/,\"\");var $=Q.lastIndexOf(\"/\");if($===-1)return Q;return Q.substr($+1)},join:(...Q)=>v.normalize(Q.join(\"/\")),join2:(Q,$)=>v.normalize(Q+\"/\"+$)},j$=()=>{if(typeof crypto==\"object\"&&typeof crypto.getRandomValues==\"function\")return(K)=>crypto.getRandomValues(K);else if(UQ)try{var Q=FQ(\"crypto\"),$=Q.randomFillSync;if($)return(K)=>Q.randomFillSync(K);var J=Q.randomBytes;return(K)=>(K.set(J(K.byteLength)),K)}catch(K){}qQ(\"initRandomDevice\")},cQ=(Q)=>(cQ=j$())(Q),d={resolve:(...Q)=>{var $=\"\",J=!1;for(var K=Q.length-1;K>=-1&&!J;K--){var Z=K>=0?Q[K]:V.cwd();if(typeof Z!=\"string\")throw new TypeError(\"Arguments to path.resolve must be strings\");else if(!Z)return\"\";$=Z+\"/\"+$,J=v.isAbs(Z)}return $=v.normalizeArray($.split(\"/\").filter((G)=>!!G),!J).join(\"/\"),(J?\"/\":\"\")+$||\".\"},relative:(Q,$)=>{Q=d.resolve(Q).substr(1),$=d.resolve($).substr(1);function J(W){var N=0;for(;N<W.length;N++)if(W[N]!==\"\")break;var T=W.length-1;for(;T>=0;T--)if(W[T]!==\"\")break;if(N>T)return[];return W.slice(N,T-N+1)}var K=J(Q.split(\"/\")),Z=J($.split(\"/\")),G=Math.min(K.length,Z.length),X=G;for(var q=0;q<G;q++)if(K[q]!==Z[q]){X=q;break}var M=[];for(var q=X;q<K.length;q++)M.push(\"..\");return M=M.concat(Z.slice(X)),M.join(\"/\")}},Z0=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):void 0,JQ=(Q,$,J)=>{$>>>=0;var K=$+J,Z=$;while(Q[Z]&&!(Z>=K))++Z;if(Z-$>16&&Q.buffer&&Z0)return Z0.decode(Q.subarray($,Z));var G=\"\";while($<Z){var X=Q[$++];if(!(X&128)){G+=String.fromCharCode(X);continue}var q=Q[$++]&63;if((X&224)==192){G+=String.fromCharCode((X&31)<<6|q);continue}var M=Q[$++]&63;if((X&240)==224)X=(X&15)<<12|q<<6|M;else X=(X&7)<<18|q<<12|M<<6|Q[$++]&63;if(X<65536)G+=String.fromCharCode(X);else{var W=X-65536;G+=String.fromCharCode(55296|W>>10,56320|W&1023)}}return G},hQ=[],EQ=(Q)=>{var $=0;for(var J=0;J<Q.length;++J){var K=Q.charCodeAt(J);if(K<=127)$++;else if(K<=2047)$+=2;else if(K>=55296&&K<=57343)$+=4,++J;else $+=3}return $},fQ=(Q,$,J,K)=>{if(J>>>=0,!(K>0))return 0;var Z=J,G=J+K-1;for(var X=0;X<Q.length;++X){var q=Q.charCodeAt(X);if(q>=55296&&q<=57343){var M=Q.charCodeAt(++X);q=65536+((q&1023)<<10)|M&1023}if(q<=127){if(J>=G)break;$[J++>>>0]=q}else if(q<=2047){if(J+1>=G)break;$[J++>>>0]=192|q>>6,$[J++>>>0]=128|q&63}else if(q<=65535){if(J+2>=G)break;$[J++>>>0]=224|q>>12,$[J++>>>0]=128|q>>6&63,$[J++>>>0]=128|q&63}else{if(J+3>=G)break;$[J++>>>0]=240|q>>18,$[J++>>>0]=128|q>>12&63,$[J++>>>0]=128|q>>6&63,$[J++>>>0]=128|q&63}}return $[J>>>0]=0,J-Z};function BQ(Q,$,J){var K=J>0?J:EQ(Q)+1,Z=new Array(K),G=fQ(Q,Z,0,Z.length);if($)Z.length=G;return Z}var U$=()=>{if(!hQ.length){var Q=null;if(UQ){var $=256,J=Buffer.alloc($),K=0,Z=process.stdin.fd;try{K=wQ.readSync(Z,J)}catch(G){if(G.toString().includes(\"EOF\"))K=0;else throw G}if(K>0)Q=J.slice(0,K).toString(\"utf-8\");else Q=null}else if(typeof window!=\"undefined\"&&typeof window.prompt==\"function\"){if(Q=window.prompt(\"Input: \"),Q!==null)Q+=\"\\n\"}else if(typeof readline==\"function\"){if(Q=readline(),Q!==null)Q+=\"\\n\"}if(!Q)return null;hQ=BQ(Q,!0)}return hQ.shift()},o={ttys:[],init(){},shutdown(){},register(Q,$){o.ttys[Q]={input:[],output:[],ops:$},V.registerDevice(Q,o.stream_ops)},stream_ops:{open(Q){var $=o.ttys[Q.node.rdev];if(!$)throw new V.ErrnoError(43);Q.tty=$,Q.seekable=!1},close(Q){Q.tty.ops.fsync(Q.tty)},fsync(Q){Q.tty.ops.fsync(Q.tty)},read(Q,$,J,K,Z){if(!Q.tty||!Q.tty.ops.get_char)throw new V.ErrnoError(60);var G=0;for(var X=0;X<K;X++){var q;try{q=Q.tty.ops.get_char(Q.tty)}catch(M){throw new V.ErrnoError(29)}if(q===void 0&&G===0)throw new V.ErrnoError(6);if(q===null||q===void 0)break;G++,$[J+X]=q}if(G)Q.node.timestamp=Date.now();return G},write(Q,$,J,K,Z){if(!Q.tty||!Q.tty.ops.put_char)throw new V.ErrnoError(60);try{for(var G=0;G<K;G++)Q.tty.ops.put_char(Q.tty,$[J+G])}catch(X){throw new V.ErrnoError(29)}if(K)Q.node.timestamp=Date.now();return G}},default_tty_ops:{get_char(Q){return U$()},put_char(Q,$){if($===null||$===10)vQ(JQ(Q.output,0)),Q.output=[];else if($!=0)Q.output.push($)},fsync(Q){if(Q.output&&Q.output.length>0)vQ(JQ(Q.output,0)),Q.output=[]},ioctl_tcgets(Q){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(Q,$,J){return 0},ioctl_tiocgwinsz(Q){return[24,80]}},default_tty1_ops:{put_char(Q,$){if($===null||$===10)s(JQ(Q.output,0)),Q.output=[];else if($!=0)Q.output.push($)},fsync(Q){if(Q.output&&Q.output.length>0)s(JQ(Q.output,0)),Q.output=[]}}},C$=(Q,$)=>{return m.fill(0,Q,Q+$),Q},F$=(Q,$)=>Math.ceil(Q/$)*$,V0=(Q)=>{Q=F$(Q,65536);var $=j0(65536,Q);if(!$)return 0;return C$($,Q)},P={ops_table:null,mount(Q){return P.createNode(null,\"/\",16895,0)},createNode(Q,$,J,K){if(V.isBlkdev(J)||V.isFIFO(J))throw new V.ErrnoError(63);P.ops_table||={dir:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr,lookup:P.node_ops.lookup,mknod:P.node_ops.mknod,rename:P.node_ops.rename,unlink:P.node_ops.unlink,rmdir:P.node_ops.rmdir,readdir:P.node_ops.readdir,symlink:P.node_ops.symlink},stream:{llseek:P.stream_ops.llseek}},file:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr},stream:{llseek:P.stream_ops.llseek,read:P.stream_ops.read,write:P.stream_ops.write,allocate:P.stream_ops.allocate,mmap:P.stream_ops.mmap,msync:P.stream_ops.msync}},link:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr,readlink:P.node_ops.readlink},stream:{}},chrdev:{node:{getattr:P.node_ops.getattr,setattr:P.node_ops.setattr},stream:V.chrdev_stream_ops}};var Z=V.createNode(Q,$,J,K);if(V.isDir(Z.mode))Z.node_ops=P.ops_table.dir.node,Z.stream_ops=P.ops_table.dir.stream,Z.contents={};else if(V.isFile(Z.mode))Z.node_ops=P.ops_table.file.node,Z.stream_ops=P.ops_table.file.stream,Z.usedBytes=0,Z.contents=null;else if(V.isLink(Z.mode))Z.node_ops=P.ops_table.link.node,Z.stream_ops=P.ops_table.link.stream;else if(V.isChrdev(Z.mode))Z.node_ops=P.ops_table.chrdev.node,Z.stream_ops=P.ops_table.chrdev.stream;if(Z.timestamp=Date.now(),Q)Q.contents[$]=Z,Q.timestamp=Z.timestamp;return Z},getFileDataAsTypedArray(Q){if(!Q.contents)return new Uint8Array(0);if(Q.contents.subarray)return Q.contents.subarray(0,Q.usedBytes);return new Uint8Array(Q.contents)},expandFileStorage(Q,$){var J=Q.contents?Q.contents.length:0;if(J>=$)return;var K=1048576;if($=Math.max($,J*(J<K?2:1.125)>>>0),J!=0)$=Math.max($,256);var Z=Q.contents;if(Q.contents=new Uint8Array($),Q.usedBytes>0)Q.contents.set(Z.subarray(0,Q.usedBytes),0)},resizeFileStorage(Q,$){if(Q.usedBytes==$)return;if($==0)Q.contents=null,Q.usedBytes=0;else{var J=Q.contents;if(Q.contents=new Uint8Array($),J)Q.contents.set(J.subarray(0,Math.min($,Q.usedBytes)));Q.usedBytes=$}},node_ops:{getattr(Q){var $={};if($.dev=V.isChrdev(Q.mode)?Q.id:1,$.ino=Q.id,$.mode=Q.mode,$.nlink=1,$.uid=0,$.gid=0,$.rdev=Q.rdev,V.isDir(Q.mode))$.size=4096;else if(V.isFile(Q.mode))$.size=Q.usedBytes;else if(V.isLink(Q.mode))$.size=Q.link.length;else $.size=0;return $.atime=new Date(Q.timestamp),$.mtime=new Date(Q.timestamp),$.ctime=new Date(Q.timestamp),$.blksize=4096,$.blocks=Math.ceil($.size/$.blksize),$},setattr(Q,$){if($.mode!==void 0)Q.mode=$.mode;if($.timestamp!==void 0)Q.timestamp=$.timestamp;if($.size!==void 0)P.resizeFileStorage(Q,$.size)},lookup(Q,$){throw V.genericErrors[44]},mknod(Q,$,J,K){return P.createNode(Q,$,J,K)},rename(Q,$,J){if(V.isDir(Q.mode)){var K;try{K=V.lookupNode($,J)}catch(G){}if(K)for(var Z in K.contents)throw new V.ErrnoError(55)}delete Q.parent.contents[Q.name],Q.parent.timestamp=Date.now(),Q.name=J,$.contents[J]=Q,$.timestamp=Q.parent.timestamp,Q.parent=$},unlink(Q,$){delete Q.contents[$],Q.timestamp=Date.now()},rmdir(Q,$){var J=V.lookupNode(Q,$);for(var K in J.contents)throw new V.ErrnoError(55);delete Q.contents[$],Q.timestamp=Date.now()},readdir(Q){var $=[\".\",\"..\"];for(var J of Object.keys(Q.contents))$.push(J);return $},symlink(Q,$,J){var K=P.createNode(Q,$,41471,0);return K.link=J,K},readlink(Q){if(!V.isLink(Q.mode))throw new V.ErrnoError(28);return Q.link}},stream_ops:{read(Q,$,J,K,Z){var G=Q.node.contents;if(Z>=Q.node.usedBytes)return 0;var X=Math.min(Q.node.usedBytes-Z,K);if(X>8&&G.subarray)$.set(G.subarray(Z,Z+X),J);else for(var q=0;q<X;q++)$[J+q]=G[Z+q];return X},write(Q,$,J,K,Z,G){if($.buffer===f.buffer)G=!1;if(!K)return 0;var X=Q.node;if(X.timestamp=Date.now(),$.subarray&&(!X.contents||X.contents.subarray)){if(G)return X.contents=$.subarray(J,J+K),X.usedBytes=K,K;else if(X.usedBytes===0&&Z===0)return X.contents=$.slice(J,J+K),X.usedBytes=K,K;else if(Z+K<=X.usedBytes)return X.contents.set($.subarray(J,J+K),Z),K}if(P.expandFileStorage(X,Z+K),X.contents.subarray&&$.subarray)X.contents.set($.subarray(J,J+K),Z);else for(var q=0;q<K;q++)X.contents[Z+q]=$[J+q];return X.usedBytes=Math.max(X.usedBytes,Z+K),K},llseek(Q,$,J){var K=$;if(J===1)K+=Q.position;else if(J===2){if(V.isFile(Q.node.mode))K+=Q.node.usedBytes}if(K<0)throw new V.ErrnoError(28);return K},allocate(Q,$,J){P.expandFileStorage(Q.node,$+J),Q.node.usedBytes=Math.max(Q.node.usedBytes,$+J)},mmap(Q,$,J,K,Z){if(!V.isFile(Q.node.mode))throw new V.ErrnoError(43);var G,X,q=Q.node.contents;if(!(Z&2)&&q.buffer===f.buffer)X=!1,G=q.byteOffset;else{if(J>0||J+$<q.length)if(q.subarray)q=q.subarray(J,J+$);else q=Array.prototype.slice.call(q,J,J+$);if(X=!0,G=V0($),!G)throw new V.ErrnoError(48);f.set(q,G>>>0)}return{ptr:G,allocated:X}},msync(Q,$,J,K,Z){return P.stream_ops.write(Q,$,0,K,J,!1),0}}},R$=(Q,$,J,K)=>{var Z=!K?rQ(`al ${Q}`):\"\";if(ZQ(Q,(G)=>{if($(new Uint8Array(G)),Z)IQ(Z)},(G)=>{if(J)J();else throw`Loading data file \"${Q}\" failed.`}),Z)bQ(Z)},T$=(Q,$,J,K,Z,G)=>{V.createDataFile(Q,$,J,K,Z,G)},I$=Y.preloadPlugins||[],H$=(Q,$,J,K)=>{if(typeof Browser!=\"undefined\")Browser.init();var Z=!1;return I$.forEach((G)=>{if(Z)return;if(G.canHandle($))G.handle(Q,$,J,K),Z=!0}),Z},z$=(Q,$,J,K,Z,G,X,q,M,W)=>{var N=$?d.resolve(v.join2(Q,$)):Q,T=rQ(`cp ${N}`);function L(D){function z(_){if(W?.(),!q)T$(Q,$,_,K,Z,M);G?.(),IQ(T)}if(H$(D,N,z,()=>{X?.(),IQ(T)}))return;z(D)}if(bQ(T),typeof J==\"string\")R$(J,L,X);else L(J)},S$=(Q)=>{var $={r:0,\"r+\":2,w:577,\"w+\":578,a:1089,\"a+\":1090},J=$[Q];if(typeof J==\"undefined\")throw new Error(`Unknown file open mode: ${Q}`);return J},uQ=(Q,$)=>{var J=0;if(Q)J|=365;if($)J|=146;return J},V={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:\"/\",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(Q){this.name=\"ErrnoError\",this.errno=Q}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(Q){this.node=Q}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(Q){this.shared.flags=Q}get position(){return this.shared.position}set position(Q){this.shared.position=Q}},FSNode:class{constructor(Q,$,J,K){if(!Q)Q=this;this.parent=Q,this.mount=Q.mount,this.mounted=null,this.id=V.nextInode++,this.name=$,this.mode=J,this.node_ops={},this.stream_ops={},this.rdev=K,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(Q){Q?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(Q){Q?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return V.isDir(this.mode)}get isDevice(){return V.isChrdev(this.mode)}},lookupPath(Q,$={}){if(Q=d.resolve(Q),!Q)return{path:\"\",node:null};var J={follow_mount:!0,recurse_count:0};if($=Object.assign(J,$),$.recurse_count>8)throw new V.ErrnoError(32);var K=Q.split(\"/\").filter((T)=>!!T),Z=V.root,G=\"/\";for(var X=0;X<K.length;X++){var q=X===K.length-1;if(q&&$.parent)break;if(Z=V.lookupNode(Z,K[X]),G=v.join2(G,K[X]),V.isMountpoint(Z)){if(!q||q&&$.follow_mount)Z=Z.mounted.root}if(!q||$.follow){var M=0;while(V.isLink(Z.mode)){var W=V.readlink(G);G=d.resolve(v.dirname(G),W);var N=V.lookupPath(G,{recurse_count:$.recurse_count+1});if(Z=N.node,M++>40)throw new V.ErrnoError(32)}}}return{path:G,node:Z}},getPath(Q){var $;while(!0){if(V.isRoot(Q)){var J=Q.mount.mountpoint;if(!$)return J;return J[J.length-1]!==\"/\"?`${J}/${$}`:J+$}$=$?`${Q.name}/${$}`:Q.name,Q=Q.parent}},hashName(Q,$){var J=0;for(var K=0;K<$.length;K++)J=(J<<5)-J+$.charCodeAt(K)|0;return(Q+J>>>0)%V.nameTable.length},hashAddNode(Q){var $=V.hashName(Q.parent.id,Q.name);Q.name_next=V.nameTable[$],V.nameTable[$]=Q},hashRemoveNode(Q){var $=V.hashName(Q.parent.id,Q.name);if(V.nameTable[$]===Q)V.nameTable[$]=Q.name_next;else{var J=V.nameTable[$];while(J){if(J.name_next===Q){J.name_next=Q.name_next;break}J=J.name_next}}},lookupNode(Q,$){var J=V.mayLookup(Q);if(J)throw new V.ErrnoError(J);var K=V.hashName(Q.id,$);for(var Z=V.nameTable[K];Z;Z=Z.name_next){var G=Z.name;if(Z.parent.id===Q.id&&G===$)return Z}return V.lookup(Q,$)},createNode(Q,$,J,K){var Z=new V.FSNode(Q,$,J,K);return V.hashAddNode(Z),Z},destroyNode(Q){V.hashRemoveNode(Q)},isRoot(Q){return Q===Q.parent},isMountpoint(Q){return!!Q.mounted},isFile(Q){return(Q&61440)===32768},isDir(Q){return(Q&61440)===16384},isLink(Q){return(Q&61440)===40960},isChrdev(Q){return(Q&61440)===8192},isBlkdev(Q){return(Q&61440)===24576},isFIFO(Q){return(Q&61440)===4096},isSocket(Q){return(Q&49152)===49152},flagsToPermissionString(Q){var $=[\"r\",\"w\",\"rw\"][Q&3];if(Q&512)$+=\"w\";return $},nodePermissions(Q,$){if(V.ignorePermissions)return 0;if($.includes(\"r\")&&!(Q.mode&292))return 2;else if($.includes(\"w\")&&!(Q.mode&146))return 2;else if($.includes(\"x\")&&!(Q.mode&73))return 2;return 0},mayLookup(Q){if(!V.isDir(Q.mode))return 54;var $=V.nodePermissions(Q,\"x\");if($)return $;if(!Q.node_ops.lookup)return 2;return 0},mayCreate(Q,$){try{var J=V.lookupNode(Q,$);return 20}catch(K){}return V.nodePermissions(Q,\"wx\")},mayDelete(Q,$,J){var K;try{K=V.lookupNode(Q,$)}catch(G){return G.errno}var Z=V.nodePermissions(Q,\"wx\");if(Z)return Z;if(J){if(!V.isDir(K.mode))return 54;if(V.isRoot(K)||V.getPath(K)===V.cwd())return 10}else if(V.isDir(K.mode))return 31;return 0},mayOpen(Q,$){if(!Q)return 44;if(V.isLink(Q.mode))return 32;else if(V.isDir(Q.mode)){if(V.flagsToPermissionString($)!==\"r\"||$&512)return 31}return V.nodePermissions(Q,V.flagsToPermissionString($))},MAX_OPEN_FDS:4096,nextfd(){for(var Q=0;Q<=V.MAX_OPEN_FDS;Q++)if(!V.streams[Q])return Q;throw new V.ErrnoError(33)},getStreamChecked(Q){var $=V.getStream(Q);if(!$)throw new V.ErrnoError(8);return $},getStream:(Q)=>V.streams[Q],createStream(Q,$=-1){if(Q=Object.assign(new V.FSStream,Q),$==-1)$=V.nextfd();return Q.fd=$,V.streams[$]=Q,Q},closeStream(Q){V.streams[Q]=null},dupStream(Q,$=-1){var J=V.createStream(Q,$);return J.stream_ops?.dup?.(J),J},chrdev_stream_ops:{open(Q){var $=V.getDevice(Q.node.rdev);Q.stream_ops=$.stream_ops,Q.stream_ops.open?.(Q)},llseek(){throw new V.ErrnoError(70)}},major:(Q)=>Q>>8,minor:(Q)=>Q&255,makedev:(Q,$)=>Q<<8|$,registerDevice(Q,$){V.devices[Q]={stream_ops:$}},getDevice:(Q)=>V.devices[Q],getMounts(Q){var $=[],J=[Q];while(J.length){var K=J.pop();$.push(K),J.push(...K.mounts)}return $},syncfs(Q,$){if(typeof Q==\"function\")$=Q,Q=!1;if(V.syncFSRequests++,V.syncFSRequests>1)s(`warning: ${V.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var J=V.getMounts(V.root.mount),K=0;function Z(X){return V.syncFSRequests--,$(X)}function G(X){if(X){if(!G.errored)return G.errored=!0,Z(X);return}if(++K>=J.length)Z(null)}J.forEach((X)=>{if(!X.type.syncfs)return G(null);X.type.syncfs(X,Q,G)})},mount(Q,$,J){var K=J===\"/\",Z=!J,G;if(K&&V.root)throw new V.ErrnoError(10);else if(!K&&!Z){var X=V.lookupPath(J,{follow_mount:!1});if(J=X.path,G=X.node,V.isMountpoint(G))throw new V.ErrnoError(10);if(!V.isDir(G.mode))throw new V.ErrnoError(54)}var q={type:Q,opts:$,mountpoint:J,mounts:[]},M=Q.mount(q);if(M.mount=q,q.root=M,K)V.root=M;else if(G){if(G.mounted=q,G.mount)G.mount.mounts.push(q)}return M},unmount(Q){var $=V.lookupPath(Q,{follow_mount:!1});if(!V.isMountpoint($.node))throw new V.ErrnoError(28);var J=$.node,K=J.mounted,Z=V.getMounts(K);Object.keys(V.nameTable).forEach((X)=>{var q=V.nameTable[X];while(q){var M=q.name_next;if(Z.includes(q.mount))V.destroyNode(q);q=M}}),J.mounted=null;var G=J.mount.mounts.indexOf(K);J.mount.mounts.splice(G,1)},lookup(Q,$){return Q.node_ops.lookup(Q,$)},mknod(Q,$,J){var K=V.lookupPath(Q,{parent:!0}),Z=K.node,G=v.basename(Q);if(!G||G===\".\"||G===\"..\")throw new V.ErrnoError(28);var X=V.mayCreate(Z,G);if(X)throw new V.ErrnoError(X);if(!Z.node_ops.mknod)throw new V.ErrnoError(63);return Z.node_ops.mknod(Z,G,$,J)},create(Q,$){return $=$!==void 0?$:438,$&=4095,$|=32768,V.mknod(Q,$,0)},mkdir(Q,$){return $=$!==void 0?$:511,$&=1023,$|=16384,V.mknod(Q,$,0)},mkdirTree(Q,$){var J=Q.split(\"/\"),K=\"\";for(var Z=0;Z<J.length;++Z){if(!J[Z])continue;K+=\"/\"+J[Z];try{V.mkdir(K,$)}catch(G){if(G.errno!=20)throw G}}},mkdev(Q,$,J){if(typeof J==\"undefined\")J=$,$=438;return $|=8192,V.mknod(Q,$,J)},symlink(Q,$){if(!d.resolve(Q))throw new V.ErrnoError(44);var J=V.lookupPath($,{parent:!0}),K=J.node;if(!K)throw new V.ErrnoError(44);var Z=v.basename($),G=V.mayCreate(K,Z);if(G)throw new V.ErrnoError(G);if(!K.node_ops.symlink)throw new V.ErrnoError(63);return K.node_ops.symlink(K,Z,Q)},rename(Q,$){var J=v.dirname(Q),K=v.dirname($),Z=v.basename(Q),G=v.basename($),X,q,M;if(X=V.lookupPath(Q,{parent:!0}),q=X.node,X=V.lookupPath($,{parent:!0}),M=X.node,!q||!M)throw new V.ErrnoError(44);if(q.mount!==M.mount)throw new V.ErrnoError(75);var W=V.lookupNode(q,Z),N=d.relative(Q,K);if(N.charAt(0)!==\".\")throw new V.ErrnoError(28);if(N=d.relative($,J),N.charAt(0)!==\".\")throw new V.ErrnoError(55);var T;try{T=V.lookupNode(M,G)}catch(z){}if(W===T)return;var L=V.isDir(W.mode),D=V.mayDelete(q,Z,L);if(D)throw new V.ErrnoError(D);if(D=T?V.mayDelete(M,G,L):V.mayCreate(M,G),D)throw new V.ErrnoError(D);if(!q.node_ops.rename)throw new V.ErrnoError(63);if(V.isMountpoint(W)||T&&V.isMountpoint(T))throw new V.ErrnoError(10);if(M!==q){if(D=V.nodePermissions(q,\"w\"),D)throw new V.ErrnoError(D)}V.hashRemoveNode(W);try{q.node_ops.rename(W,M,G)}catch(z){throw z}finally{V.hashAddNode(W)}},rmdir(Q){var $=V.lookupPath(Q,{parent:!0}),J=$.node,K=v.basename(Q),Z=V.lookupNode(J,K),G=V.mayDelete(J,K,!0);if(G)throw new V.ErrnoError(G);if(!J.node_ops.rmdir)throw new V.ErrnoError(63);if(V.isMountpoint(Z))throw new V.ErrnoError(10);J.node_ops.rmdir(J,K),V.destroyNode(Z)},readdir(Q){var $=V.lookupPath(Q,{follow:!0}),J=$.node;if(!J.node_ops.readdir)throw new V.ErrnoError(54);return J.node_ops.readdir(J)},unlink(Q){var $=V.lookupPath(Q,{parent:!0}),J=$.node;if(!J)throw new V.ErrnoError(44);var K=v.basename(Q),Z=V.lookupNode(J,K),G=V.mayDelete(J,K,!1);if(G)throw new V.ErrnoError(G);if(!J.node_ops.unlink)throw new V.ErrnoError(63);if(V.isMountpoint(Z))throw new V.ErrnoError(10);J.node_ops.unlink(J,K),V.destroyNode(Z)},readlink(Q){var $=V.lookupPath(Q),J=$.node;if(!J)throw new V.ErrnoError(44);if(!J.node_ops.readlink)throw new V.ErrnoError(28);return d.resolve(V.getPath(J.parent),J.node_ops.readlink(J))},stat(Q,$){var J=V.lookupPath(Q,{follow:!$}),K=J.node;if(!K)throw new V.ErrnoError(44);if(!K.node_ops.getattr)throw new V.ErrnoError(63);return K.node_ops.getattr(K)},lstat(Q){return V.stat(Q,!0)},chmod(Q,$,J){var K;if(typeof Q==\"string\"){var Z=V.lookupPath(Q,{follow:!J});K=Z.node}else K=Q;if(!K.node_ops.setattr)throw new V.ErrnoError(63);K.node_ops.setattr(K,{mode:$&4095|K.mode&-4096,timestamp:Date.now()})},lchmod(Q,$){V.chmod(Q,$,!0)},fchmod(Q,$){var J=V.getStreamChecked(Q);V.chmod(J.node,$)},chown(Q,$,J,K){var Z;if(typeof Q==\"string\"){var G=V.lookupPath(Q,{follow:!K});Z=G.node}else Z=Q;if(!Z.node_ops.setattr)throw new V.ErrnoError(63);Z.node_ops.setattr(Z,{timestamp:Date.now()})},lchown(Q,$,J){V.chown(Q,$,J,!0)},fchown(Q,$,J){var K=V.getStreamChecked(Q);V.chown(K.node,$,J)},truncate(Q,$){if($<0)throw new V.ErrnoError(28);var J;if(typeof Q==\"string\"){var K=V.lookupPath(Q,{follow:!0});J=K.node}else J=Q;if(!J.node_ops.setattr)throw new V.ErrnoError(63);if(V.isDir(J.mode))throw new V.ErrnoError(31);if(!V.isFile(J.mode))throw new V.ErrnoError(28);var Z=V.nodePermissions(J,\"w\");if(Z)throw new V.ErrnoError(Z);J.node_ops.setattr(J,{size:$,timestamp:Date.now()})},ftruncate(Q,$){var J=V.getStreamChecked(Q);if((J.flags&2097155)===0)throw new V.ErrnoError(28);V.truncate(J.node,$)},utime(Q,$,J){var K=V.lookupPath(Q,{follow:!0}),Z=K.node;Z.node_ops.setattr(Z,{timestamp:Math.max($,J)})},open(Q,$,J){if(Q===\"\")throw new V.ErrnoError(44);if($=typeof $==\"string\"?S$($):$,J=typeof J==\"undefined\"?438:J,$&64)J=J&4095|32768;else J=0;var K;if(typeof Q==\"object\")K=Q;else{Q=v.normalize(Q);try{var Z=V.lookupPath(Q,{follow:!($&131072)});K=Z.node}catch(M){}}var G=!1;if($&64)if(K){if($&128)throw new V.ErrnoError(20)}else K=V.mknod(Q,J,0),G=!0;if(!K)throw new V.ErrnoError(44);if(V.isChrdev(K.mode))$&=-513;if($&65536&&!V.isDir(K.mode))throw new V.ErrnoError(54);if(!G){var X=V.mayOpen(K,$);if(X)throw new V.ErrnoError(X)}if($&512&&!G)V.truncate(K,0);$&=-131713;var q=V.createStream({node:K,path:V.getPath(K),flags:$,seekable:!0,position:0,stream_ops:K.stream_ops,ungotten:[],error:!1});if(q.stream_ops.open)q.stream_ops.open(q);if(Y.logReadFiles&&!($&1)){if(!V.readFiles)V.readFiles={};if(!(Q in V.readFiles))V.readFiles[Q]=1}return q},close(Q){if(V.isClosed(Q))throw new V.ErrnoError(8);if(Q.getdents)Q.getdents=null;try{if(Q.stream_ops.close)Q.stream_ops.close(Q)}catch($){throw $}finally{V.closeStream(Q.fd)}Q.fd=null},isClosed(Q){return Q.fd===null},llseek(Q,$,J){if(V.isClosed(Q))throw new V.ErrnoError(8);if(!Q.seekable||!Q.stream_ops.llseek)throw new V.ErrnoError(70);if(J!=0&&J!=1&&J!=2)throw new V.ErrnoError(28);return Q.position=Q.stream_ops.llseek(Q,$,J),Q.ungotten=[],Q.position},read(Q,$,J,K,Z){if(K<0||Z<0)throw new V.ErrnoError(28);if(V.isClosed(Q))throw new V.ErrnoError(8);if((Q.flags&2097155)===1)throw new V.ErrnoError(8);if(V.isDir(Q.node.mode))throw new V.ErrnoError(31);if(!Q.stream_ops.read)throw new V.ErrnoError(28);var G=typeof Z!=\"undefined\";if(!G)Z=Q.position;else if(!Q.seekable)throw new V.ErrnoError(70);var X=Q.stream_ops.read(Q,$,J,K,Z);if(!G)Q.position+=X;return X},write(Q,$,J,K,Z,G){if(K<0||Z<0)throw new V.ErrnoError(28);if(V.isClosed(Q))throw new V.ErrnoError(8);if((Q.flags&2097155)===0)throw new V.ErrnoError(8);if(V.isDir(Q.node.mode))throw new V.ErrnoError(31);if(!Q.stream_ops.write)throw new V.ErrnoError(28);if(Q.seekable&&Q.flags&1024)V.llseek(Q,0,2);var X=typeof Z!=\"undefined\";if(!X)Z=Q.position;else if(!Q.seekable)throw new V.ErrnoError(70);var q=Q.stream_ops.write(Q,$,J,K,Z,G);if(!X)Q.position+=q;return q},allocate(Q,$,J){if(V.isClosed(Q))throw new V.ErrnoError(8);if($<0||J<=0)throw new V.ErrnoError(28);if((Q.flags&2097155)===0)throw new V.ErrnoError(8);if(!V.isFile(Q.node.mode)&&!V.isDir(Q.node.mode))throw new V.ErrnoError(43);if(!Q.stream_ops.allocate)throw new V.ErrnoError(138);Q.stream_ops.allocate(Q,$,J)},mmap(Q,$,J,K,Z){if((K&2)!==0&&(Z&2)===0&&(Q.flags&2097155)!==2)throw new V.ErrnoError(2);if((Q.flags&2097155)===1)throw new V.ErrnoError(2);if(!Q.stream_ops.mmap)throw new V.ErrnoError(43);return Q.stream_ops.mmap(Q,$,J,K,Z)},msync(Q,$,J,K,Z){if(!Q.stream_ops.msync)return 0;return Q.stream_ops.msync(Q,$,J,K,Z)},ioctl(Q,$,J){if(!Q.stream_ops.ioctl)throw new V.ErrnoError(59);return Q.stream_ops.ioctl(Q,$,J)},readFile(Q,$={}){if($.flags=$.flags||0,$.encoding=$.encoding||\"binary\",$.encoding!==\"utf8\"&&$.encoding!==\"binary\")throw new Error(`Invalid encoding type \"${$.encoding}\"`);var J,K=V.open(Q,$.flags),Z=V.stat(Q),G=Z.size,X=new Uint8Array(G);if(V.read(K,X,0,G,0),$.encoding===\"utf8\")J=JQ(X,0);else if($.encoding===\"binary\")J=X;return V.close(K),J},writeFile(Q,$,J={}){J.flags=J.flags||577;var K=V.open(Q,J.flags,J.mode);if(typeof $==\"string\"){var Z=new Uint8Array(EQ($)+1),G=fQ($,Z,0,Z.length);V.write(K,Z,0,G,void 0,J.canOwn)}else if(ArrayBuffer.isView($))V.write(K,$,0,$.byteLength,void 0,J.canOwn);else throw new Error(\"Unsupported data type\");V.close(K)},cwd:()=>V.currentPath,chdir(Q){var $=V.lookupPath(Q,{follow:!0});if($.node===null)throw new V.ErrnoError(44);if(!V.isDir($.node.mode))throw new V.ErrnoError(54);var J=V.nodePermissions($.node,\"x\");if(J)throw new V.ErrnoError(J);V.currentPath=$.path},createDefaultDirectories(){V.mkdir(\"/tmp\"),V.mkdir(\"/home\"),V.mkdir(\"/home/web_user\")},createDefaultDevices(){V.mkdir(\"/dev\"),V.registerDevice(V.makedev(1,3),{read:()=>0,write:(K,Z,G,X,q)=>X}),V.mkdev(\"/dev/null\",V.makedev(1,3)),o.register(V.makedev(5,0),o.default_tty_ops),o.register(V.makedev(6,0),o.default_tty1_ops),V.mkdev(\"/dev/tty\",V.makedev(5,0)),V.mkdev(\"/dev/tty1\",V.makedev(6,0));var Q=new Uint8Array(1024),$=0,J=()=>{if($===0)$=cQ(Q).byteLength;return Q[--$]};V.createDevice(\"/dev\",\"random\",J),V.createDevice(\"/dev\",\"urandom\",J),V.mkdir(\"/dev/shm\"),V.mkdir(\"/dev/shm/tmp\")},createSpecialDirectories(){V.mkdir(\"/proc\");var Q=V.mkdir(\"/proc/self\");V.mkdir(\"/proc/self/fd\"),V.mount({mount(){var $=V.createNode(Q,\"fd\",16895,73);return $.node_ops={lookup(J,K){var Z=+K,G=V.getStreamChecked(Z),X={parent:null,mount:{mountpoint:\"fake\"},node_ops:{readlink:()=>G.path}};return X.parent=X,X}},$}},{},\"/proc/self/fd\")},createStandardStreams(){if(Y.stdin)V.createDevice(\"/dev\",\"stdin\",Y.stdin);else V.symlink(\"/dev/tty\",\"/dev/stdin\");if(Y.stdout)V.createDevice(\"/dev\",\"stdout\",null,Y.stdout);else V.symlink(\"/dev/tty\",\"/dev/stdout\");if(Y.stderr)V.createDevice(\"/dev\",\"stderr\",null,Y.stderr);else V.symlink(\"/dev/tty1\",\"/dev/stderr\");var Q=V.open(\"/dev/stdin\",0),$=V.open(\"/dev/stdout\",1),J=V.open(\"/dev/stderr\",1)},staticInit(){[44].forEach((Q)=>{V.genericErrors[Q]=new V.ErrnoError(Q),V.genericErrors[Q].stack=\"<generic error, no stack>\"}),V.nameTable=new Array(4096),V.mount(P,{},\"/\"),V.createDefaultDirectories(),V.createDefaultDevices(),V.createSpecialDirectories(),V.filesystems={MEMFS:P}},init(Q,$,J){V.init.initialized=!0,Y.stdin=Q||Y.stdin,Y.stdout=$||Y.stdout,Y.stderr=J||Y.stderr,V.createStandardStreams()},quit(){V.init.initialized=!1;for(var Q=0;Q<V.streams.length;Q++){var $=V.streams[Q];if(!$)continue;V.close($)}},findObject(Q,$){var J=V.analyzePath(Q,$);if(!J.exists)return null;return J.object},analyzePath(Q,$){try{var J=V.lookupPath(Q,{follow:!$});Q=J.path}catch(Z){}var K={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var J=V.lookupPath(Q,{parent:!0});K.parentExists=!0,K.parentPath=J.path,K.parentObject=J.node,K.name=v.basename(Q),J=V.lookupPath(Q,{follow:!$}),K.exists=!0,K.path=J.path,K.object=J.node,K.name=J.node.name,K.isRoot=J.path===\"/\"}catch(Z){K.error=Z.errno}return K},createPath(Q,$,J,K){Q=typeof Q==\"string\"?Q:V.getPath(Q);var Z=$.split(\"/\").reverse();while(Z.length){var G=Z.pop();if(!G)continue;var X=v.join2(Q,G);try{V.mkdir(X)}catch(q){}Q=X}return X},createFile(Q,$,J,K,Z){var G=v.join2(typeof Q==\"string\"?Q:V.getPath(Q),$),X=uQ(K,Z);return V.create(G,X)},createDataFile(Q,$,J,K,Z,G){var X=$;if(Q)Q=typeof Q==\"string\"?Q:V.getPath(Q),X=$?v.join2(Q,$):Q;var q=uQ(K,Z),M=V.create(X,q);if(J){if(typeof J==\"string\"){var W=new Array(J.length);for(var N=0,T=J.length;N<T;++N)W[N]=J.charCodeAt(N);J=W}V.chmod(M,q|146);var L=V.open(M,577);V.write(L,J,0,J.length,0,G),V.close(L),V.chmod(M,q)}},createDevice(Q,$,J,K){var Z=v.join2(typeof Q==\"string\"?Q:V.getPath(Q),$),G=uQ(!!J,!!K);if(!V.createDevice.major)V.createDevice.major=64;var X=V.makedev(V.createDevice.major++,0);return V.registerDevice(X,{open(q){q.seekable=!1},close(q){if(K?.buffer?.length)K(10)},read(q,M,W,N,T){var L=0;for(var D=0;D<N;D++){var z;try{z=J()}catch(_){throw new V.ErrnoError(29)}if(z===void 0&&L===0)throw new V.ErrnoError(6);if(z===null||z===void 0)break;L++,M[W+D]=z}if(L)q.node.timestamp=Date.now();return L},write(q,M,W,N,T){for(var L=0;L<N;L++)try{K(M[W+L])}catch(D){throw new V.ErrnoError(29)}if(N)q.node.timestamp=Date.now();return L}}),V.mkdev(Z,G,X)},forceLoadFile(Q){if(Q.isDevice||Q.isFolder||Q.link||Q.contents)return!0;if(typeof XMLHttpRequest!=\"undefined\")throw new Error(\"Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.\");else if(KQ)try{Q.contents=BQ(KQ(Q.url),!0),Q.usedBytes=Q.contents.length}catch($){throw new V.ErrnoError(29)}else throw new Error(\"Cannot load without read() or XMLHttpRequest.\")},createLazyFile(Q,$,J,K,Z){class G{constructor(){this.lengthKnown=!1,this.chunks=[]}get(L){if(L>this.length-1||L<0)return;var D=L%this.chunkSize,z=L/this.chunkSize|0;return this.getter(z)[D]}setDataGetter(L){this.getter=L}cacheLength(){var L=new XMLHttpRequest;if(L.open(\"HEAD\",J,!1),L.send(null),!(L.status>=200&&L.status<300||L.status===304))throw new Error(\"Couldn't load \"+J+\". Status: \"+L.status);var D=Number(L.getResponseHeader(\"Content-length\")),z,_=(z=L.getResponseHeader(\"Accept-Ranges\"))&&z===\"bytes\",y=(z=L.getResponseHeader(\"Content-Encoding\"))&&z===\"gzip\",k=1048576;if(!_)k=D;var B=(x,g)=>{if(x>g)throw new Error(\"invalid range (\"+x+\", \"+g+\") or no bytes requested!\");if(g>D-1)throw new Error(\"only \"+D+\" bytes available! programmer error!\");var h=new XMLHttpRequest;if(h.open(\"GET\",J,!1),D!==k)h.setRequestHeader(\"Range\",\"bytes=\"+x+\"-\"+g);if(h.responseType=\"arraybuffer\",h.overrideMimeType)h.overrideMimeType(\"text/plain; charset=x-user-defined\");if(h.send(null),!(h.status>=200&&h.status<300||h.status===304))throw new Error(\"Couldn't load \"+J+\". Status: \"+h.status);if(h.response!==void 0)return new Uint8Array(h.response||[]);return BQ(h.responseText||\"\",!0)},j=this;if(j.setDataGetter((x)=>{var g=x*k,h=(x+1)*k-1;if(h=Math.min(h,D-1),typeof j.chunks[x]==\"undefined\")j.chunks[x]=B(g,h);if(typeof j.chunks[x]==\"undefined\")throw new Error(\"doXHR failed!\");return j.chunks[x]}),y||!D)k=D=1,D=this.getter(0).length,k=D,vQ(\"LazyFiles on gzip forces download of the whole file when length is accessed\");this._length=D,this._chunkSize=k,this.lengthKnown=!0}get length(){if(!this.lengthKnown)this.cacheLength();return this._length}get chunkSize(){if(!this.lengthKnown)this.cacheLength();return this._chunkSize}}if(typeof XMLHttpRequest!=\"undefined\"){if(!QQ)throw\"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc\";var X=new G,q={isDevice:!1,contents:X}}else var q={isDevice:!1,url:J};var M=V.createFile(Q,$,q,K,Z);if(q.contents)M.contents=q.contents;else if(q.url)M.contents=null,M.url=q.url;Object.defineProperties(M,{usedBytes:{get:function(){return this.contents.length}}});var W={},N=Object.keys(M.stream_ops);N.forEach((L)=>{var D=M.stream_ops[L];W[L]=(...z)=>{return V.forceLoadFile(M),D(...z)}});function T(L,D,z,_,y){var k=L.node.contents;if(y>=k.length)return 0;var B=Math.min(k.length-y,_);if(k.slice)for(var j=0;j<B;j++)D[z+j]=k[y+j];else for(var j=0;j<B;j++)D[z+j]=k.get(y+j);return B}return W.read=(L,D,z,_,y)=>{return V.forceLoadFile(M),T(L,D,z,_,y)},W.mmap=(L,D,z,_,y)=>{V.forceLoadFile(M);var k=V0(D);if(!k)throw new V.ErrnoError(48);return T(L,f,k,D,z),{ptr:k,allocated:!0}},M.stream_ops=W,M}},AQ=(Q,$)=>{return Q>>>=0,Q?JQ(m,Q,$):\"\"},S={DEFAULT_POLLMASK:5,calculateAt(Q,$,J){if(v.isAbs($))return $;var K;if(Q===-100)K=V.cwd();else{var Z=S.getStreamFromFD(Q);K=Z.path}if($.length==0){if(!J)throw new V.ErrnoError(44);return K}return v.join2(K,$)},doStat(Q,$,J){var K=Q($);O[J>>>2>>>0]=K.dev,O[J+4>>>2>>>0]=K.mode,b[J+8>>>2>>>0]=K.nlink,O[J+12>>>2>>>0]=K.uid,O[J+16>>>2>>>0]=K.gid,O[J+20>>>2>>>0]=K.rdev,w=[K.size>>>0,(I=K.size,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[J+24>>>2>>>0]=w[0],O[J+28>>>2>>>0]=w[1],O[J+32>>>2>>>0]=4096,O[J+36>>>2>>>0]=K.blocks;var Z=K.atime.getTime(),G=K.mtime.getTime(),X=K.ctime.getTime();return w=[Math.floor(Z/1000)>>>0,(I=Math.floor(Z/1000),+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[J+40>>>2>>>0]=w[0],O[J+44>>>2>>>0]=w[1],b[J+48>>>2>>>0]=Z%1000*1000,w=[Math.floor(G/1000)>>>0,(I=Math.floor(G/1000),+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[J+56>>>2>>>0]=w[0],O[J+60>>>2>>>0]=w[1],b[J+64>>>2>>>0]=G%1000*1000,w=[Math.floor(X/1000)>>>0,(I=Math.floor(X/1000),+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[J+72>>>2>>>0]=w[0],O[J+76>>>2>>>0]=w[1],b[J+80>>>2>>>0]=X%1000*1000,w=[K.ino>>>0,(I=K.ino,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[J+88>>>2>>>0]=w[0],O[J+92>>>2>>>0]=w[1],0},doMsync(Q,$,J,K,Z){if(!V.isFile($.node.mode))throw new V.ErrnoError(43);if(K&2)return 0;var G=m.slice(Q,Q+J);V.msync($,G,Z,J,K)},varargs:void 0,get(){var Q=O[+S.varargs>>>2>>>0];return S.varargs+=4,Q},getp(){return S.get()},getStr(Q){var $=AQ(Q);return $},getStreamFromFD(Q){var $=V.getStreamChecked(Q);return $}};function E$(Q){Q>>>=0;try{return Q=S.getStr(Q),V.chdir(Q),0}catch($){if(typeof V==\"undefined\"||$.name!==\"ErrnoError\")throw $;return-$.errno}}function A$(Q,$,J,K){$>>>=0;try{if($=S.getStr($),$=S.calculateAt(Q,$),J&-8)return-28;var Z=V.lookupPath($,{follow:!0}),G=Z.node;if(!G)return-44;var X=\"\";if(J&4)X+=\"r\";if(J&2)X+=\"w\";if(J&1)X+=\"x\";if(X&&V.nodePermissions(G,X))return-2;return 0}catch(q){if(typeof V==\"undefined\"||q.name!==\"ErrnoError\")throw q;return-q.errno}}function P$(Q,$,J){J>>>=0,S.varargs=J;try{var K=S.getStreamFromFD(Q);switch($){case 0:{var Z=S.get();if(Z<0)return-28;while(V.streams[Z])Z++;var G=V.dupStream(K,Z);return G.fd}case 1:case 2:return 0;case 3:return K.flags;case 4:{var Z=S.get();return K.flags|=Z,0}case 12:{var Z=S.getp(),X=0;return $Q[Z+X>>>1>>>0]=2,0}case 13:case 14:return 0}return-28}catch(q){if(typeof V==\"undefined\"||q.name!==\"ErrnoError\")throw q;return-q.errno}}function k$(Q,$){$>>>=0;try{var J=S.getStreamFromFD(Q);return S.doStat(V.stat,J.path,$)}catch(K){if(typeof V==\"undefined\"||K.name!==\"ErrnoError\")throw K;return-K.errno}}var a=(Q,$,J)=>fQ(Q,m,$,J);function w$(Q,$){Q>>>=0,$>>>=0;try{if($===0)return-28;var J=V.cwd(),K=EQ(J)+1;if($<K)return-68;return a(J,Q,$),K}catch(Z){if(typeof V==\"undefined\"||Z.name!==\"ErrnoError\")throw Z;return-Z.errno}}function x$(Q,$,J){$>>>=0,J>>>=0;try{var K=S.getStreamFromFD(Q);K.getdents||=V.readdir(K.path);var Z=280,G=0,X=V.llseek(K,0,1),q=Math.floor(X/Z);while(q<K.getdents.length&&G+Z<=J){var M,W,N=K.getdents[q];if(N===\".\")M=K.node.id,W=4;else if(N===\"..\"){var T=V.lookupPath(K.path,{parent:!0});M=T.node.id,W=4}else{var L=V.lookupNode(K.node,N);M=L.id,W=V.isChrdev(L.mode)?2:V.isDir(L.mode)?4:V.isLink(L.mode)?10:8}w=[M>>>0,(I=M,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[$+G>>>2>>>0]=w[0],O[$+G+4>>>2>>>0]=w[1],w=[(q+1)*Z>>>0,(I=(q+1)*Z,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[$+G+8>>>2>>>0]=w[0],O[$+G+12>>>2>>>0]=w[1],$Q[$+G+16>>>1>>>0]=280,f[$+G+18>>>0]=W,a(N,$+G+19,256),G+=Z,q+=1}return V.llseek(K,q*Z,0),G}catch(D){if(typeof V==\"undefined\"||D.name!==\"ErrnoError\")throw D;return-D.errno}}function v$(Q,$,J){J>>>=0,S.varargs=J;try{var K=S.getStreamFromFD(Q);switch($){case 21509:{if(!K.tty)return-59;return 0}case 21505:{if(!K.tty)return-59;if(K.tty.ops.ioctl_tcgets){var Z=K.tty.ops.ioctl_tcgets(K),G=S.getp();O[G>>>2>>>0]=Z.c_iflag||0,O[G+4>>>2>>>0]=Z.c_oflag||0,O[G+8>>>2>>>0]=Z.c_cflag||0,O[G+12>>>2>>>0]=Z.c_lflag||0;for(var X=0;X<32;X++)f[G+X+17>>>0]=Z.c_cc[X]||0;return 0}return 0}case 21510:case 21511:case 21512:{if(!K.tty)return-59;return 0}case 21506:case 21507:case 21508:{if(!K.tty)return-59;if(K.tty.ops.ioctl_tcsets){var G=S.getp(),q=O[G>>>2>>>0],M=O[G+4>>>2>>>0],W=O[G+8>>>2>>>0],N=O[G+12>>>2>>>0],T=[];for(var X=0;X<32;X++)T.push(f[G+X+17>>>0]);return K.tty.ops.ioctl_tcsets(K.tty,$,{c_iflag:q,c_oflag:M,c_cflag:W,c_lflag:N,c_cc:T})}return 0}case 21519:{if(!K.tty)return-59;var G=S.getp();return O[G>>>2>>>0]=0,0}case 21520:{if(!K.tty)return-59;return-28}case 21531:{var G=S.getp();return V.ioctl(K,$,G)}case 21523:{if(!K.tty)return-59;if(K.tty.ops.ioctl_tiocgwinsz){var L=K.tty.ops.ioctl_tiocgwinsz(K.tty),G=S.getp();$Q[G>>>1>>>0]=L[0],$Q[G+2>>>1>>>0]=L[1]}return 0}case 21524:{if(!K.tty)return-59;return 0}case 21515:{if(!K.tty)return-59;return 0}default:return-28}}catch(D){if(typeof V==\"undefined\"||D.name!==\"ErrnoError\")throw D;return-D.errno}}function y$(Q,$){Q>>>=0,$>>>=0;try{return Q=S.getStr(Q),S.doStat(V.lstat,Q,$)}catch(J){if(typeof V==\"undefined\"||J.name!==\"ErrnoError\")throw J;return-J.errno}}function b$(Q,$,J,K){$>>>=0,J>>>=0;try{$=S.getStr($);var Z=K&256,G=K&4096;return K=K&-6401,$=S.calculateAt(Q,$,G),S.doStat(Z?V.lstat:V.stat,$,J)}catch(X){if(typeof V==\"undefined\"||X.name!==\"ErrnoError\")throw X;return-X.errno}}function g$(Q,$,J,K){$>>>=0,K>>>=0,S.varargs=K;try{$=S.getStr($),$=S.calculateAt(Q,$);var Z=K?S.get():0;return V.open($,J,Z).fd}catch(G){if(typeof V==\"undefined\"||G.name!==\"ErrnoError\")throw G;return-G.errno}}function _$(Q,$,J,K){$>>>=0,J>>>=0,K>>>=0;try{if($=S.getStr($),$=S.calculateAt(Q,$),K<=0)return-28;var Z=V.readlink($),G=Math.min(K,EQ(Z)),X=f[J+G>>>0];return a(Z,J,K+1),f[J+G>>>0]=X,G}catch(q){if(typeof V==\"undefined\"||q.name!==\"ErrnoError\")throw q;return-q.errno}}function c$(Q){Q>>>=0;try{return Q=S.getStr(Q),V.rmdir(Q),0}catch($){if(typeof V==\"undefined\"||$.name!==\"ErrnoError\")throw $;return-$.errno}}function h$(Q,$){Q>>>=0,$>>>=0;try{return Q=S.getStr(Q),S.doStat(V.stat,Q,$)}catch(J){if(typeof V==\"undefined\"||J.name!==\"ErrnoError\")throw J;return-J.errno}}function f$(Q,$,J){Q>>>=0,$>>>=0,J>>>=0;try{return Q=S.getStr(Q),O[J+4>>>2>>>0]=4096,O[J+40>>>2>>>0]=4096,O[J+8>>>2>>>0]=1e6,O[J+12>>>2>>>0]=500000,O[J+16>>>2>>>0]=500000,O[J+20>>>2>>>0]=V.nextInode,O[J+24>>>2>>>0]=1e6,O[J+28>>>2>>>0]=42,O[J+44>>>2>>>0]=2,O[J+36>>>2>>>0]=255,0}catch(K){if(typeof V==\"undefined\"||K.name!==\"ErrnoError\")throw K;return-K.errno}}function u$(Q,$,J){$>>>=0;try{if($=S.getStr($),$=S.calculateAt(Q,$),J===0)V.unlink($);else if(J===512)V.rmdir($);else qQ(\"Invalid flags passed to unlinkat\");return 0}catch(K){if(typeof V==\"undefined\"||K.name!==\"ErrnoError\")throw K;return-K.errno}}var l$=1,m$=()=>l$,p$=()=>{$0=!1,X0=0},LQ=(Q)=>Q%4===0&&(Q%100!==0||Q%400===0),d$=[0,31,60,91,121,152,182,213,244,274,305,335],i$=[0,31,59,90,120,151,181,212,243,273,304,334],s$=(Q)=>{var $=LQ(Q.getFullYear()),J=$?d$:i$,K=J[Q.getMonth()]+Q.getDate()-1;return K};function o$(Q,$,J){var K=YQ(Q,$);J>>>=0;var Z=new Date(K*1000);O[J>>>2>>>0]=Z.getSeconds(),O[J+4>>>2>>>0]=Z.getMinutes(),O[J+8>>>2>>>0]=Z.getHours(),O[J+12>>>2>>>0]=Z.getDate(),O[J+16>>>2>>>0]=Z.getMonth(),O[J+20>>>2>>>0]=Z.getFullYear()-1900,O[J+24>>>2>>>0]=Z.getDay();var G=s$(Z)|0;O[J+28>>>2>>>0]=G,O[J+36>>>2>>>0]=-(Z.getTimezoneOffset()*60);var X=new Date(Z.getFullYear(),0,1),q=new Date(Z.getFullYear(),6,1).getTimezoneOffset(),M=X.getTimezoneOffset(),W=(q!=M&&Z.getTimezoneOffset()==Math.min(M,q))|0;O[J+32>>>2>>>0]=W}function n$(Q,$,J,K,Z,G,X,q){Q>>>=0;var M=YQ(Z,G);X>>>=0,q>>>=0;try{if(isNaN(M))return 61;var W=S.getStreamFromFD(K),N=V.mmap(W,Q,M,$,J),T=N.ptr;return O[X>>>2>>>0]=N.allocated,b[q>>>2>>>0]=T,0}catch(L){if(typeof V==\"undefined\"||L.name!==\"ErrnoError\")throw L;return-L.errno}}function r$(Q,$,J,K,Z,G,X){Q>>>=0,$>>>=0;var q=YQ(G,X);try{var M=S.getStreamFromFD(Z);if(J&2)S.doMsync(Q,M,$,K,q)}catch(W){if(typeof V==\"undefined\"||W.name!==\"ErrnoError\")throw W;return-W.errno}}var NQ={},G0=(Q)=>{if(Q instanceof Q0||Q==\"unwind\")return GQ;e(1,Q)},X0=0,q0=()=>$0||X0>0,Y0=(Q)=>{if(GQ=Q,!q0())Y.onExit?.(Q),TQ=!0;e(Q,new Q0(Q))},t$=(Q,$)=>{GQ=Q,Y0(Q)},M0=t$,a$=()=>{if(!q0())try{M0(GQ)}catch(Q){G0(Q)}},e$=(Q)=>{if(TQ)return;try{Q(),a$()}catch($){G0($)}},lQ;lQ=()=>performance.now();var QJ=(Q,$)=>{if(NQ[Q])clearTimeout(NQ[Q].id),delete NQ[Q];if(!$)return 0;var J=setTimeout(()=>{delete NQ[Q],e$(()=>U0(Q,lQ()))},$);return NQ[Q]={id:J,timeout_ms:$},0};function $J(Q,$,J,K){Q>>>=0,$>>>=0,J>>>=0,K>>>=0;var Z=new Date().getFullYear(),G=new Date(Z,0,1),X=new Date(Z,6,1),q=G.getTimezoneOffset(),M=X.getTimezoneOffset(),W=Math.max(q,M);b[Q>>>2>>>0]=W*60,O[$>>>2>>>0]=Number(q!=M);function N(D){var z=D.toTimeString().match(/\\(([A-Za-z ]+)\\)$/);return z?z[1]:\"GMT\"}var T=N(G),L=N(X);if(M<q)a(T,J,7),a(L,K,7);else a(T,K,7),a(L,J,7)}var JJ=()=>{qQ(\"\")},KJ=()=>Date.now(),W0=()=>4294901760;function ZJ(){return W0()}function VJ(Q,$,J){return Q>>>=0,$>>>=0,J>>>=0,m.copyWithin(Q>>>0,$>>>0,$+J>>>0)}var GJ=(Q)=>{var $=RQ.buffer,J=(Q-$.byteLength+65535)/65536;try{return RQ.grow(J),iQ(),1}catch(K){}};function XJ(Q){Q>>>=0;var $=m.length,J=W0();if(Q>J)return!1;var K=(M,W)=>M+(W-M%W)%W;for(var Z=1;Z<=4;Z*=2){var G=$*(1+0.2/Z);G=Math.min(G,Q+100663296);var X=Math.min(J,K(Math.max(Q,G),65536)),q=GJ(X);if(q)return!0}return!1}var mQ={},qJ=()=>n||\"./this.program\",OQ=()=>{if(!OQ.strings){var Q=(typeof navigator==\"object\"&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\",$={USER:\"web_user\",LOGNAME:\"web_user\",PATH:\"/\",PWD:\"/\",HOME:\"/home/web_user\",LANG:Q,_:qJ()};for(var J in mQ)if(mQ[J]===void 0)delete $[J];else $[J]=mQ[J];var K=[];for(var J in $)K.push(`${J}=${$[J]}`);OQ.strings=K}return OQ.strings},YJ=(Q,$)=>{for(var J=0;J<Q.length;++J)f[$++>>>0]=Q.charCodeAt(J);f[$>>>0]=0},MJ=function(Q,$){Q>>>=0,$>>>=0;var J=0;return OQ().forEach((K,Z)=>{var G=$+J;b[Q+Z*4>>>2>>>0]=G,YJ(K,G),J+=K.length+1}),0},WJ=function(Q,$){Q>>>=0,$>>>=0;var J=OQ();b[Q>>>2>>>0]=J.length;var K=0;return J.forEach((Z)=>K+=Z.length+1),b[$>>>2>>>0]=K,0};function BJ(Q){try{var $=S.getStreamFromFD(Q);return V.close($),0}catch(J){if(typeof V==\"undefined\"||J.name!==\"ErrnoError\")throw J;return J.errno}}function LJ(Q,$){$>>>=0;try{var J=0,K=0,Z=0,G=S.getStreamFromFD(Q),X=G.tty?2:V.isDir(G.mode)?3:V.isLink(G.mode)?7:4;return f[$>>>0]=X,$Q[$+2>>>1>>>0]=Z,w=[J>>>0,(I=J,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[$+8>>>2>>>0]=w[0],O[$+12>>>2>>>0]=w[1],w=[K>>>0,(I=K,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[$+16>>>2>>>0]=w[0],O[$+20>>>2>>>0]=w[1],0}catch(q){if(typeof V==\"undefined\"||q.name!==\"ErrnoError\")throw q;return q.errno}}var B0=(Q,$,J,K)=>{var Z=0;for(var G=0;G<J;G++){var X=b[$>>>2>>>0],q=b[$+4>>>2>>>0];$+=8;var M=V.read(Q,f,X,q,K);if(M<0)return-1;if(Z+=M,M<q)break;if(typeof K!==\"undefined\")K+=M}return Z};function NJ(Q,$,J,K,Z,G){$>>>=0,J>>>=0;var X=YQ(K,Z);G>>>=0;try{if(isNaN(X))return 61;var q=S.getStreamFromFD(Q),M=B0(q,$,J,X);return b[G>>>2>>>0]=M,0}catch(W){if(typeof V==\"undefined\"||W.name!==\"ErrnoError\")throw W;return W.errno}}function OJ(Q,$,J,K){$>>>=0,J>>>=0,K>>>=0;try{var Z=S.getStreamFromFD(Q),G=B0(Z,$,J);return b[K>>>2>>>0]=G,0}catch(X){if(typeof V==\"undefined\"||X.name!==\"ErrnoError\")throw X;return X.errno}}function DJ(Q,$,J,K,Z){var G=YQ($,J);Z>>>=0;try{if(isNaN(G))return 61;var X=S.getStreamFromFD(Q);if(V.llseek(X,G,K),w=[X.position>>>0,(I=X.position,+Math.abs(I)>=1?I>0?+Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],O[Z>>>2>>>0]=w[0],O[Z+4>>>2>>>0]=w[1],X.getdents&&G===0&&K===0)X.getdents=null;return 0}catch(q){if(typeof V==\"undefined\"||q.name!==\"ErrnoError\")throw q;return q.errno}}var jJ=(Q,$,J,K)=>{var Z=0;for(var G=0;G<J;G++){var X=b[$>>>2>>>0],q=b[$+4>>>2>>>0];$+=8;var M=V.write(Q,f,X,q,K);if(M<0)return-1;if(Z+=M,typeof K!==\"undefined\")K+=M}return Z};function UJ(Q,$,J,K){$>>>=0,J>>>=0,K>>>=0;try{var Z=S.getStreamFromFD(Q),G=jJ(Z,$,J);return b[K>>>2>>>0]=G,0}catch(X){if(typeof V==\"undefined\"||X.name!==\"ErrnoError\")throw X;return X.errno}}function CJ(Q,$){return Q>>>=0,$>>>=0,cQ(m.subarray(Q>>>0,Q+$>>>0)),0}function FJ(Q){return Q>>>=0,Q}var RJ=(Q,$)=>{var J=0;for(var K=0;K<=$;J+=Q[K++]);return J},L0=[31,29,31,30,31,30,31,31,30,31,30,31],N0=[31,28,31,30,31,30,31,31,30,31,30,31],TJ=(Q,$)=>{var J=new Date(Q.getTime());while($>0){var K=LQ(J.getFullYear()),Z=J.getMonth(),G=(K?L0:N0)[Z];if($>G-J.getDate())if($-=G-J.getDate()+1,J.setDate(1),Z<11)J.setMonth(Z+1);else J.setMonth(0),J.setFullYear(J.getFullYear()+1);else return J.setDate(J.getDate()+$),J}return J},IJ=(Q,$)=>{f.set(Q,$>>>0)};function O0(Q,$,J,K){Q>>>=0,$>>>=0,J>>>=0,K>>>=0;var Z=b[K+40>>>2>>>0],G={tm_sec:O[K>>>2>>>0],tm_min:O[K+4>>>2>>>0],tm_hour:O[K+8>>>2>>>0],tm_mday:O[K+12>>>2>>>0],tm_mon:O[K+16>>>2>>>0],tm_year:O[K+20>>>2>>>0],tm_wday:O[K+24>>>2>>>0],tm_yday:O[K+28>>>2>>>0],tm_isdst:O[K+32>>>2>>>0],tm_gmtoff:O[K+36>>>2>>>0],tm_zone:Z?AQ(Z):\"\"},X=AQ(J),q={\"%c\":\"%a %b %d %H:%M:%S %Y\",\"%D\":\"%m/%d/%y\",\"%F\":\"%Y-%m-%d\",\"%h\":\"%b\",\"%r\":\"%I:%M:%S %p\",\"%R\":\"%H:%M\",\"%T\":\"%H:%M:%S\",\"%x\":\"%m/%d/%y\",\"%X\":\"%H:%M:%S\",\"%Ec\":\"%c\",\"%EC\":\"%C\",\"%Ex\":\"%m/%d/%y\",\"%EX\":\"%H:%M:%S\",\"%Ey\":\"%y\",\"%EY\":\"%Y\",\"%Od\":\"%d\",\"%Oe\":\"%e\",\"%OH\":\"%H\",\"%OI\":\"%I\",\"%Om\":\"%m\",\"%OM\":\"%M\",\"%OS\":\"%S\",\"%Ou\":\"%u\",\"%OU\":\"%U\",\"%OV\":\"%V\",\"%Ow\":\"%w\",\"%OW\":\"%W\",\"%Oy\":\"%y\"};for(var M in q)X=X.replace(new RegExp(M,\"g\"),q[M]);var W=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],N=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];function T(B,j,x){var g=typeof B==\"number\"?B.toString():B||\"\";while(g.length<j)g=x[0]+g;return g}function L(B,j){return T(B,j,\"0\")}function D(B,j){function x(h){return h<0?-1:h>0?1:0}var g;if((g=x(B.getFullYear()-j.getFullYear()))===0){if((g=x(B.getMonth()-j.getMonth()))===0)g=x(B.getDate()-j.getDate())}return g}function z(B){switch(B.getDay()){case 0:return new Date(B.getFullYear()-1,11,29);case 1:return B;case 2:return new Date(B.getFullYear(),0,3);case 3:return new Date(B.getFullYear(),0,2);case 4:return new Date(B.getFullYear(),0,1);case 5:return new Date(B.getFullYear()-1,11,31);case 6:return new Date(B.getFullYear()-1,11,30)}}function _(B){var j=TJ(new Date(B.tm_year+1900,0,1),B.tm_yday),x=new Date(j.getFullYear(),0,4),g=new Date(j.getFullYear()+1,0,4),h=z(x),eK=z(g);if(D(h,j)<=0){if(D(eK,j)<=0)return j.getFullYear()+1;return j.getFullYear()}return j.getFullYear()-1}var y={\"%a\":(B)=>W[B.tm_wday].substring(0,3),\"%A\":(B)=>W[B.tm_wday],\"%b\":(B)=>N[B.tm_mon].substring(0,3),\"%B\":(B)=>N[B.tm_mon],\"%C\":(B)=>{var j=B.tm_year+1900;return L(j/100|0,2)},\"%d\":(B)=>L(B.tm_mday,2),\"%e\":(B)=>T(B.tm_mday,2,\" \"),\"%g\":(B)=>_(B).toString().substring(2),\"%G\":_,\"%H\":(B)=>L(B.tm_hour,2),\"%I\":(B)=>{var j=B.tm_hour;if(j==0)j=12;else if(j>12)j-=12;return L(j,2)},\"%j\":(B)=>L(B.tm_mday+RJ(LQ(B.tm_year+1900)?L0:N0,B.tm_mon-1),3),\"%m\":(B)=>L(B.tm_mon+1,2),\"%M\":(B)=>L(B.tm_min,2),\"%n\":()=>\"\\n\",\"%p\":(B)=>{if(B.tm_hour>=0&&B.tm_hour<12)return\"AM\";return\"PM\"},\"%S\":(B)=>L(B.tm_sec,2),\"%t\":()=>\"\\t\",\"%u\":(B)=>B.tm_wday||7,\"%U\":(B)=>{var j=B.tm_yday+7-B.tm_wday;return L(Math.floor(j/7),2)},\"%V\":(B)=>{var j=Math.floor((B.tm_yday+7-(B.tm_wday+6)%7)/7);if((B.tm_wday+371-B.tm_yday-2)%7<=2)j++;if(!j){j=52;var x=(B.tm_wday+7-B.tm_yday-1)%7;if(x==4||x==5&&LQ(B.tm_year%400-1))j++}else if(j==53){var g=(B.tm_wday+371-B.tm_yday)%7;if(g!=4&&(g!=3||!LQ(B.tm_year)))j=1}return L(j,2)},\"%w\":(B)=>B.tm_wday,\"%W\":(B)=>{var j=B.tm_yday+7-(B.tm_wday+6)%7;return L(Math.floor(j/7),2)},\"%y\":(B)=>(B.tm_year+1900).toString().substring(2),\"%Y\":(B)=>B.tm_year+1900,\"%z\":(B)=>{var j=B.tm_gmtoff,x=j>=0;return j=Math.abs(j)/60,j=j/60*100+j%60,(x?\"+\":\"-\")+String(\"0000\"+j).slice(-4)},\"%Z\":(B)=>B.tm_zone,\"%%\":()=>\"%\"};X=X.replace(/%%/g,\"\\0\\0\");for(var M in y)if(X.includes(M))X=X.replace(new RegExp(M,\"g\"),y[M](G));X=X.replace(/\\0\\0/g,\"%\");var k=BQ(X,!1);if(k.length>$)return 0;return IJ(k,Q),k.length-1}function HJ(Q,$,J,K,Z){return Q>>>=0,$>>>=0,J>>>=0,K>>>=0,Z>>>=0,O0(Q,$,J,K)}var zJ=0,SJ=1,EJ=(Q,$)=>{var J;if($==SJ)J=C0(Q.length);else J=D0(Q.length);if(!Q.subarray&&!Q.slice)Q=new Uint8Array(Q);return m.set(Q,J>>>0),J};V.createPreloadedFile=z$,V.staticInit();var AJ={za:X$,r:q$,s:Y$,a:W$,k:B$,I:L$,W:K0,qa:N$,t:O$,ra:D$,d:M$,Ka:E$,La:A$,y:P$,Ga:k$,Ca:w$,ya:x$,Ha:v$,Da:y$,Ea:b$,P:g$,xa:_$,wa:c$,Fa:h$,va:f$,N:u$,Ia:m$,Aa:p$,_a:o$,Ya:n$,Za:r$,X:QJ,ta:$J,f:JJ,_:KJ,ua:ZJ,Z:lQ,Ja:VJ,sa:XJ,Na:MJ,Oa:WJ,A:M0,D:BJ,Ba:LJ,Xa:NJ,Y:OJ,$a:DJ,O:UJ,na:CJ,$:AK,J:JK,Qa:RK,M:wK,da:VK,V:kK,v:KK,c:mJ,ca:qK,Ta:XK,e:dJ,h:oJ,S:TK,Ra:FK,o:$K,pa:PK,p:rJ,u:aJ,x:jK,T:DK,L:CK,E:UK,Va:rK,gb:lK,la:vK,ab:oK,Wa:nK,eb:pK,ma:xK,Ua:tK,cb:iK,db:dK,n:eJ,i:sJ,F:MK,fa:hK,U:YK,b:pJ,B:iJ,ga:cK,ea:ZK,g:lJ,ja:bK,l:QK,j:tJ,m:nJ,q:GK,z:WK,G:OK,C:zK,R:HK,K:IK,H:NK,Q:SK,Sa:LK,aa:EK,ba:BK,ka:yK,fb:mK,bb:sK,ia:gK,ha:_K,hb:uK,ib:fK,w:FJ,Ma:Y0,Pa:O0,oa:HJ},H=G$(),PJ=()=>(PJ=H.kb)(),kJ=Y._getCmajorVersion=()=>(kJ=Y._getCmajorVersion=H.lb)(),wJ=Y._initialise=(Q)=>(wJ=Y._initialise=H.mb)(Q),xJ=Y._addFile=(Q,$,J)=>(xJ=Y._addFile=H.nb)(Q,$,J),vJ=Y._generate=()=>(vJ=Y._generate=H.ob)(),yJ=Y._getUnresolvedResourceFiles=()=>(yJ=Y._getUnresolvedResourceFiles=H.pb)(),bJ=Y._getMessages=()=>(bJ=Y._getMessages=H.qb)(),gJ=Y._getGeneratedCode=()=>(gJ=Y._getGeneratedCode=H.rb)(),_J=Y._free=(Q)=>(_J=Y._free=H.sb)(Q),cJ=(Q)=>(cJ=H.__cxa_free_exception)(Q),D0=Y._malloc=(Q)=>(D0=Y._malloc=H.tb)(Q),hJ=Y.__ZN4llvm3orc14linkComponentsEv=()=>(hJ=Y.__ZN4llvm3orc14linkComponentsEv=H.vb)(),DQ=(Q)=>(DQ=H.wb)(Q),fJ=(Q)=>(fJ=H.htons)(Q),j0=(Q,$)=>(j0=H.xb)(Q,$),uJ=(Q)=>(uJ=H.ntohs)(Q),U0=(Q,$)=>(U0=H.yb)(Q,$),U=(Q,$)=>(U=H.zb)(Q,$),C=()=>(C=H.Ab)(),F=(Q)=>(F=H.Bb)(Q),C0=(Q)=>(C0=H.Cb)(Q),F0=(Q)=>(F0=H.Db)(Q),R0=(Q)=>(R0=H.Eb)(Q),T0=(Q,$,J)=>(T0=H.Fb)(Q,$,J),I0=(Q)=>(I0=H.Gb)(Q),H0=Y.dynCall_jii=(Q,$,J)=>(H0=Y.dynCall_jii=H.Hb)(Q,$,J),z0=Y.dynCall_iiji=(Q,$,J,K,Z)=>(z0=Y.dynCall_iiji=H.Ib)(Q,$,J,K,Z),S0=Y.dynCall_viiiiiij=(Q,$,J,K,Z,G,X,q,M)=>(S0=Y.dynCall_viiiiiij=H.Jb)(Q,$,J,K,Z,G,X,q,M),E0=Y.dynCall_viiidji=(Q,$,J,K,Z,G,X,q)=>(E0=Y.dynCall_viiidji=H.Kb)(Q,$,J,K,Z,G,X,q),A0=Y.dynCall_viidji=(Q,$,J,K,Z,G,X)=>(A0=Y.dynCall_viidji=H.Lb)(Q,$,J,K,Z,G,X),P0=Y.dynCall_viij=(Q,$,J,K,Z)=>(P0=Y.dynCall_viij=H.Mb)(Q,$,J,K,Z),k0=Y.dynCall_vidj=(Q,$,J,K,Z)=>(k0=Y.dynCall_vidj=H.Nb)(Q,$,J,K,Z),w0=Y.dynCall_viji=(Q,$,J,K,Z)=>(w0=Y.dynCall_viji=H.Ob)(Q,$,J,K,Z),x0=Y.dynCall_vij=(Q,$,J,K)=>(x0=Y.dynCall_vij=H.Pb)(Q,$,J,K),v0=Y.dynCall_iij=(Q,$,J,K)=>(v0=Y.dynCall_iij=H.Qb)(Q,$,J,K),y0=Y.dynCall_viiiiij=(Q,$,J,K,Z,G,X,q)=>(y0=Y.dynCall_viiiiij=H.Rb)(Q,$,J,K,Z,G,X,q),b0=Y.dynCall_ji=(Q,$)=>(b0=Y.dynCall_ji=H.Sb)(Q,$),g0=Y.dynCall_jiijjj=(Q,$,J,K,Z,G,X,q,M)=>(g0=Y.dynCall_jiijjj=H.Tb)(Q,$,J,K,Z,G,X,q,M),_0=Y.dynCall_iijijj=(Q,$,J,K,Z,G,X,q,M)=>(_0=Y.dynCall_iijijj=H.Ub)(Q,$,J,K,Z,G,X,q,M),c0=Y.dynCall_viiij=(Q,$,J,K,Z,G)=>(c0=Y.dynCall_viiij=H.Vb)(Q,$,J,K,Z,G),h0=Y.dynCall_iiiiij=(Q,$,J,K,Z,G,X)=>(h0=Y.dynCall_iiiiij=H.Wb)(Q,$,J,K,Z,G,X),f0=Y.dynCall_viijii=(Q,$,J,K,Z,G,X)=>(f0=Y.dynCall_viijii=H.Xb)(Q,$,J,K,Z,G,X),u0=Y.dynCall_j=(Q)=>(u0=Y.dynCall_j=H.Yb)(Q),l0=Y.dynCall_jiiii=(Q,$,J,K,Z)=>(l0=Y.dynCall_jiiii=H.Zb)(Q,$,J,K,Z),m0=Y.dynCall_jiiij=(Q,$,J,K,Z,G)=>(m0=Y.dynCall_jiiij=H._b)(Q,$,J,K,Z,G);function lJ(Q,$,J,K){var Z=C();try{A(Q)($,J,K)}catch(G){if(F(Z),G!==G+0)throw G;U(1,0)}}function mJ(Q,$){var J=C();try{return A(Q)($)}catch(K){if(F(J),K!==K+0)throw K;U(1,0)}}function pJ(Q,$,J){var K=C();try{A(Q)($,J)}catch(Z){if(F(K),Z!==Z+0)throw Z;U(1,0)}}function dJ(Q,$,J){var K=C();try{return A(Q)($,J)}catch(Z){if(F(K),Z!==Z+0)throw Z;U(1,0)}}function iJ(Q,$,J,K){var Z=C();try{A(Q)($,J,K)}catch(G){if(F(Z),G!==G+0)throw G;U(1,0)}}function sJ(Q,$){var J=C();try{A(Q)($)}catch(K){if(F(J),K!==K+0)throw K;U(1,0)}}function oJ(Q,$,J,K){var Z=C();try{return A(Q)($,J,K)}catch(G){if(F(Z),G!==G+0)throw G;U(1,0)}}function nJ(Q,$,J,K,Z,G,X){var q=C();try{A(Q)($,J,K,Z,G,X)}catch(M){if(F(q),M!==M+0)throw M;U(1,0)}}function rJ(Q,$,J,K,Z,G){var X=C();try{return A(Q)($,J,K,Z,G)}catch(q){if(F(X),q!==q+0)throw q;U(1,0)}}function tJ(Q,$,J,K,Z,G){var X=C();try{A(Q)($,J,K,Z,G)}catch(q){if(F(X),q!==q+0)throw q;U(1,0)}}function aJ(Q,$,J,K,Z,G,X){var q=C();try{return A(Q)($,J,K,Z,G,X)}catch(M){if(F(q),M!==M+0)throw M;U(1,0)}}function eJ(Q){var $=C();try{A(Q)()}catch(J){if(F($),J!==J+0)throw J;U(1,0)}}function QK(Q,$,J,K,Z){var G=C();try{A(Q)($,J,K,Z)}catch(X){if(F(G),X!==X+0)throw X;U(1,0)}}function $K(Q,$,J,K,Z){var G=C();try{return A(Q)($,J,K,Z)}catch(X){if(F(G),X!==X+0)throw X;U(1,0)}}function JK(Q,$,J){var K=C();try{return A(Q)($,J)}catch(Z){if(F(K),Z!==Z+0)throw Z;U(1,0)}}function KK(Q){var $=C();try{return A(Q)()}catch(J){if(F($),J!==J+0)throw J;U(1,0)}}function ZK(Q,$,J,K){var Z=C();try{A(Q)($,J,K)}catch(G){if(F(Z),G!==G+0)throw G;U(1,0)}}function VK(Q,$,J){var K=C();try{return A(Q)($,J)}catch(Z){if(F(K),Z!==Z+0)throw Z;U(1,0)}}function GK(Q,$,J,K,Z,G,X,q){var M=C();try{A(Q)($,J,K,Z,G,X,q)}catch(W){if(F(M),W!==W+0)throw W;U(1,0)}}function XK(Q,$,J){var K=C();try{return A(Q)($,J)}catch(Z){if(F(K),Z!==Z+0)throw Z;U(1,0)}}function qK(Q,$,J){var K=C();try{return A(Q)($,J)}catch(Z){if(F(K),Z!==Z+0)throw Z;U(1,0)}}function YK(Q,$,J){var K=C();try{A(Q)($,J)}catch(Z){if(F(K),Z!==Z+0)throw Z;U(1,0)}}function MK(Q,$,J){var K=C();try{A(Q)($,J)}catch(Z){if(F(K),Z!==Z+0)throw Z;U(1,0)}}function WK(Q,$,J,K,Z,G,X,q,M){var W=C();try{A(Q)($,J,K,Z,G,X,q,M)}catch(N){if(F(W),N!==N+0)throw N;U(1,0)}}function BK(Q,$,J,K,Z,G,X,q,M,W,N,T,L,D,z,_,y,k,B,j){var x=C();try{A(Q)($,J,K,Z,G,X,q,M,W,N,T,L,D,z,_,y,k,B,j)}catch(g){if(F(x),g!==g+0)throw g;U(1,0)}}function LK(Q,$,J,K,Z,G,X,q,M,W,N,T,L,D,z,_,y,k){var B=C();try{A(Q)($,J,K,Z,G,X,q,M,W,N,T,L,D,z,_,y,k)}catch(j){if(F(B),j!==j+0)throw j;U(1,0)}}function NK(Q,$,J,K,Z,G,X,q,M,W,N,T,L,D,z,_){var y=C();try{A(Q)($,J,K,Z,G,X,q,M,W,N,T,L,D,z,_)}catch(k){if(F(y),k!==k+0)throw k;U(1,0)}}function OK(Q,$,J,K,Z,G,X,q,M,W){var N=C();try{A(Q)($,J,K,Z,G,X,q,M,W)}catch(T){if(F(N),T!==T+0)throw T;U(1,0)}}function DK(Q,$,J,K,Z,G,X,q,M){var W=C();try{return A(Q)($,J,K,Z,G,X,q,M)}catch(N){if(F(W),N!==N+0)throw N;U(1,0)}}function jK(Q,$,J,K,Z,G,X,q){var M=C();try{return A(Q)($,J,K,Z,G,X,q)}catch(W){if(F(M),W!==W+0)throw W;U(1,0)}}function UK(Q,$,J,K,Z,G,X,q,M,W,N,T){var L=C();try{return A(Q)($,J,K,Z,G,X,q,M,W,N,T)}catch(D){if(F(L),D!==D+0)throw D;U(1,0)}}function CK(Q,$,J,K,Z,G,X,q,M,W){var N=C();try{return A(Q)($,J,K,Z,G,X,q,M,W)}catch(T){if(F(N),T!==T+0)throw T;U(1,0)}}function FK(Q,$,J,K,Z,G,X){var q=C();try{return A(Q)($,J,K,Z,G,X)}catch(M){if(F(q),M!==M+0)throw M;U(1,0)}}function RK(Q,$,J,K,Z,G){var X=C();try{return A(Q)($,J,K,Z,G)}catch(q){if(F(X),q!==q+0)throw q;U(1,0)}}function TK(Q,$,J,K,Z){var G=C();try{return A(Q)($,J,K,Z)}catch(X){if(F(G),X!==X+0)throw X;U(1,0)}}function IK(Q,$,J,K,Z,G,X,q,M,W,N,T,L,D,z){var _=C();try{A(Q)($,J,K,Z,G,X,q,M,W,N,T,L,D,z)}catch(y){if(F(_),y!==y+0)throw y;U(1,0)}}function HK(Q,$,J,K,Z,G,X,q,M,W,N,T,L){var D=C();try{A(Q)($,J,K,Z,G,X,q,M,W,N,T,L)}catch(z){if(F(D),z!==z+0)throw z;U(1,0)}}function zK(Q,$,J,K,Z,G,X,q,M,W,N){var T=C();try{A(Q)($,J,K,Z,G,X,q,M,W,N)}catch(L){if(F(T),L!==L+0)throw L;U(1,0)}}function SK(Q,$,J,K,Z,G,X,q,M,W,N,T,L,D,z,_,y){var k=C();try{A(Q)($,J,K,Z,G,X,q,M,W,N,T,L,D,z,_,y)}catch(B){if(F(k),B!==B+0)throw B;U(1,0)}}function EK(Q,$,J,K,Z,G,X,q,M,W,N,T,L,D,z,_,y,k,B){var j=C();try{A(Q)($,J,K,Z,G,X,q,M,W,N,T,L,D,z,_,y,k,B)}catch(x){if(F(j),x!==x+0)throw x;U(1,0)}}function AK(Q,$){var J=C();try{return A(Q)($)}catch(K){if(F(J),K!==K+0)throw K;U(1,0)}}function PK(Q,$,J,K,Z,G){var X=C();try{return A(Q)($,J,K,Z,G)}catch(q){if(F(X),q!==q+0)throw q;U(1,0)}}function kK(Q,$,J,K){var Z=C();try{return A(Q)($,J,K)}catch(G){if(F(Z),G!==G+0)throw G;U(1,0)}}function wK(Q,$,J,K){var Z=C();try{return A(Q)($,J,K)}catch(G){if(F(Z),G!==G+0)throw G;U(1,0)}}function xK(Q,$,J){var K=C();try{return H0(Q,$,J)}catch(Z){if(F(K),Z!==Z+0)throw Z;U(1,0)}}function vK(Q,$,J,K,Z){var G=C();try{return z0(Q,$,J,K,Z)}catch(X){if(F(G),X!==X+0)throw X;U(1,0)}}function yK(Q,$,J,K,Z,G,X,q,M){var W=C();try{S0(Q,$,J,K,Z,G,X,q,M)}catch(N){if(F(W),N!==N+0)throw N;U(1,0)}}function bK(Q,$,J,K,Z,G,X,q){var M=C();try{E0(Q,$,J,K,Z,G,X,q)}catch(W){if(F(M),W!==W+0)throw W;U(1,0)}}function gK(Q,$,J,K,Z){var G=C();try{P0(Q,$,J,K,Z)}catch(X){if(F(G),X!==X+0)throw X;U(1,0)}}function _K(Q,$,J,K,Z,G,X){var q=C();try{f0(Q,$,J,K,Z,G,X)}catch(M){if(F(q),M!==M+0)throw M;U(1,0)}}function cK(Q,$,J,K,Z,G,X){var q=C();try{A0(Q,$,J,K,Z,G,X)}catch(M){if(F(q),M!==M+0)throw M;U(1,0)}}function hK(Q,$,J,K,Z){var G=C();try{k0(Q,$,J,K,Z)}catch(X){if(F(G),X!==X+0)throw X;U(1,0)}}function fK(Q,$,J,K,Z){var G=C();try{w0(Q,$,J,K,Z)}catch(X){if(F(G),X!==X+0)throw X;U(1,0)}}function uK(Q,$,J,K){var Z=C();try{x0(Q,$,J,K)}catch(G){if(F(Z),G!==G+0)throw G;U(1,0)}}function lK(Q,$,J,K){var Z=C();try{return v0(Q,$,J,K)}catch(G){if(F(Z),G!==G+0)throw G;U(1,0)}}function mK(Q,$,J,K,Z,G,X,q){var M=C();try{y0(Q,$,J,K,Z,G,X,q)}catch(W){if(F(M),W!==W+0)throw W;U(1,0)}}function pK(Q,$){var J=C();try{return b0(Q,$)}catch(K){if(F(J),K!==K+0)throw K;U(1,0)}}function dK(Q,$,J,K,Z,G,X,q,M){var W=C();try{return g0(Q,$,J,K,Z,G,X,q,M)}catch(N){if(F(W),N!==N+0)throw N;U(1,0)}}function iK(Q,$,J,K,Z,G){var X=C();try{return m0(Q,$,J,K,Z,G)}catch(q){if(F(X),q!==q+0)throw q;U(1,0)}}function sK(Q,$,J,K,Z,G){var X=C();try{c0(Q,$,J,K,Z,G)}catch(q){if(F(X),q!==q+0)throw q;U(1,0)}}function oK(Q,$,J,K,Z,G,X,q,M){var W=C();try{return _0(Q,$,J,K,Z,G,X,q,M)}catch(N){if(F(W),N!==N+0)throw N;U(1,0)}}function nK(Q){var $=C();try{return u0(Q)}catch(J){if(F($),J!==J+0)throw J;U(1,0)}}function rK(Q,$,J,K,Z,G,X){var q=C();try{return h0(Q,$,J,K,Z,G,X)}catch(M){if(F(q),M!==M+0)throw M;U(1,0)}}function tK(Q,$,J,K,Z){var G=C();try{return l0(Q,$,J,K,Z)}catch(X){if(F(G),X!==X+0)throw X;U(1,0)}}function aK(Q){Q=Object.assign({},Q);var $=(Z)=>(G)=>Z(G)>>>0,J=(Z)=>(G,X)=>Z(G,X)>>>0,K=(Z)=>()=>Z()>>>0;return Q.tb=$(Q.tb),Q.xb=J(Q.xb),Q.Ab=K(Q.Ab),Q.Cb=$(Q.Cb),Q}Y.UTF8ToString=AQ,Y.intArrayFromString=BQ,Y.ALLOC_NORMAL=zJ,Y.allocate=EJ;var PQ;XQ=function Q(){if(!PQ)p0();if(!PQ)XQ=Q};function p0(){if(r>0)return;if(t0(),r>0)return;function Q(){if(PQ)return;if(PQ=!0,Y.calledRun=!0,TQ)return;if(a0(),c(Y),Y.onRuntimeInitialized)Y.onRuntimeInitialized();e0()}if(Y.setStatus)Y.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){Y.setStatus(\"\")},1),Q()},1);else Q()}if(Y.preInit){if(typeof Y.preInit==\"function\")Y.preInit=[Y.preInit];while(Y.preInit.length>0)Y.preInit.pop()()}return p0(),E.ready}})(),d0=$Z;class kQ{constructor(){this.CmajorVersion=\"unknown\",this.baseURL=\"\",this.sources=[]}setManifestURL(R,E){if(typeof R!==\"URL\")R=new URL(R);if(!R.href.endsWith(\"/\"))R=new URL(R.href+\"/\");this.readPatchFile=async(Y)=>{const c=new URL(Y,R),u=await fetch(c);return new Uint8Array(await u.arrayBuffer())},this.baseURL=R,this.manifestPath=E}addSourceFile(R,E){for(let Y of this.sources)if(Y.path==R){Y.content=E;return}this.sources.push({path:R,content:E})}async createJavascriptCode(){const R=await d0();this.CmajorVersion=R.UTF8ToString(R._getCmajorVersion());for(;;){R._initialise(128);const E=(Y)=>{if(Y instanceof Uint8Array)return Y;if(typeof Y==\"string\")return new TextEncoder().encode(Y);throw new Error(`The content type of source \"${Y}\" was not supported`)};await this.addKnownFilesFromManifest();for(let Y of this.sources){const c=R.allocate(R.intArrayFromString(Y.path),R.ALLOC_NORMAL),u=E(Y.content),i=R.allocate(u,R.ALLOC_NORMAL);R._addFile(c,i,u.length),R._free(c),R._free(i)}if(!R._generate()){const Y=R.UTF8ToString(R._getUnresolvedResourceFiles());if(Y?.length>0){const c=JSON.parse(Y);if(c?.length>0){for(let u of c)await this.getSourceFileContent(u);continue}}throw new Error(R.UTF8ToString(R._getMessages()))}return R.UTF8ToString(R._getGeneratedCode())}}async getSourceFileContent(R){for(let Y of this.sources)if(Y.path==R)return Y.content;let E;if(this.readPatchFile)E=await this.readPatchFile(R),this.addSourceFile(R,E);if(!E)throw new Error(\"Could not read required file \"+R);return E}async getSourceFileContentAsString(R){const E=await this.getSourceFileContent(R);if(typeof E===\"string\")return E;return await new TextDecoder(\"utf-8\").decode(E)}async readManifest(){const R=()=>{if(this.manifestPath)return this.manifestPath;for(let E of this.sources)if(E.path.endsWith(\".cmajorpatch\"))return E.path;throw new Error(\"Couldn't find a manifest file\")};return JSON.parse(await this.getSourceFileContentAsString(R()))}async addKnownFilesFromManifest(){const R=async(Y)=>{if(Y instanceof Array)for(let c of Y)await R(c.toString());else if(Y){const c=await this.getSourceFileContent(Y.toString());this.addSourceFile(Y.toString(),c)}},E=await this.readManifest();await R(E.source),await R(E.patchworker)}}var pQ=(R)=>R.split(\"/\").map((E)=>E.trim()).filter((E)=>(E||\".\")!=\".\").filter((E,Y,c)=>E!=\"..\"&&c[Y+1]!=\"..\").join(\"/\");self.onmessage=async function(R){try{const E=new kQ,Y=R.data.files,c=R.data.manifest,u=R.data.manifestPath,i=pQ(u+\"/..\");c.source=[c.source??[]].flat().map((n)=>pQ(n)),Y[R.data.manifestPath]=JSON.stringify(c),Object.entries(Y).forEach(([n,e])=>E.addSourceFile(pQ(n.substring(i.length)),e));const jQ=await E.createJavascriptCode();self.postMessage({code:jQ,version:E.CmajorVersion})}catch(E){console.error(E),self.postMessage({error:E})}};\n\n//# debugId=246EAFFF89CF013A64756E2164756E21\n//# sourceMappingURL=cmajor.worker.js.map\n";var rk="var p0=Object.defineProperty;var d0=(Q,q)=>{for(var U in q)p0(Q,U,{get:q[U],enumerable:!0,configurable:!0,set:(X)=>q[U]=()=>X})};var l0=(Q,q)=>()=>(Q&&(q=Q(Q=0)),q);var f0=((Q)=>typeof require!==\"undefined\"?require:typeof Proxy!==\"undefined\"?new Proxy(Q,{get:(q,U)=>(typeof require!==\"undefined\"?require:q)[U]}):Q)(function(Q){if(typeof require!==\"undefined\")return require.apply(this,arguments);throw Error('Dynamic require of \"'+Q+'\" is not supported')});var O0={};d0(O0,{resolveObject:()=>$0,resolve:()=>H0,parse:()=>a,format:()=>j0,default:()=>a0,Url:()=>u,URLSearchParams:()=>E0,URL:()=>V0});function L0(Q){return typeof Q==\"string\"}function k0(Q){return typeof Q==\"object\"&&Q!==null}function Q0(Q){return Q===null}function s0(Q){return Q==null}function u(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(Q,q,U){if(Q&&k0(Q)&&Q instanceof u)return Q;var X=new u;return X.parse(Q,q,U),X}function j0(Q){return L0(Q)&&(Q=a(Q)),Q instanceof u?Q.format():u.prototype.format.call(Q)}function H0(Q,q){return a(Q,!1,!0).resolve(q)}function $0(Q,q){return Q?a(Q,!1,!0).resolveObject(q):q}var V0,E0,u0,c0,m0,r0,n0,R0,W0,N0,o0=255,B0,i0,t0,G0,t,T0,a0;var I0=l0(()=>{({URL:V0,URLSearchParams:E0}=globalThis),u0=/^([a-z0-9.+-]+:)/i,c0=/:[0-9]*$/,m0=/^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,r0=[\"<\",\">\",'\"',\"`\",\" \",\"\\r\",`\n`,\"\t\"],n0=[\"{\",\"}\",\"|\",\"\\\\\",\"^\",\"`\"].concat(r0),R0=[\"'\"].concat(n0),W0=[\"%\",\"/\",\"?\",\";\",\"#\"].concat(R0),N0=[\"/\",\"?\",\"#\"],B0=/^[+a-z0-9A-Z_-]{0,63}$/,i0=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,t0={javascript:!0,\"javascript:\":!0},G0={javascript:!0,\"javascript:\":!0},t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,\"http:\":!0,\"https:\":!0,\"ftp:\":!0,\"gopher:\":!0,\"file:\":!0},T0={parse(Q){var q=decodeURIComponent;return(Q+\"\").replace(/\\+/g,\" \").split(\"&\").filter(Boolean).reduce(function(U,X,Y){var Z=X.split(\"=\"),J=q(Z[0]||\"\"),K=q(Z[1]||\"\"),G=U[J];return U[J]=G===void 0?K:[].concat(G,K),U},{})},stringify(Q){var q=encodeURIComponent;return Object.keys(Q||{}).reduce(function(U,X){return[].concat(Q[X]).forEach(function(Y){U.push(q(X)+\"=\"+q(Y))}),U},[]).join(\"&\").replace(/\\s/g,\"+\")}};u.prototype.parse=function(Q,q,U){if(!L0(Q))throw new TypeError(\"Parameter 'url' must be a string, not \"+typeof Q);var X=Q.indexOf(\"?\"),Y=X!==-1&&X<Q.indexOf(\"#\")?\"?\":\"#\",Z=Q.split(Y),J=/\\\\/g;Z[0]=Z[0].replace(J,\"/\"),Q=Z.join(Y);var K=Q;if(K=K.trim(),!U&&Q.split(\"#\").length===1){var G=m0.exec(K);if(G)return this.path=K,this.href=K,this.pathname=G[1],G[2]?(this.search=G[2],q?this.query=T0.parse(this.search.substr(1)):this.query=this.search.substr(1)):q&&(this.search=\"\",this.query={}),this}var R=u0.exec(K);if(R){R=R[0];var T=R.toLowerCase();this.protocol=T,K=K.substr(R.length)}if(U||R||K.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)){var k=K.substr(0,2)===\"//\";k&&!(R&&G0[R])&&(K=K.substr(2),this.slashes=!0)}if(!G0[R]&&(k||R&&!t[R])){for(var W=-1,L=0;L<N0.length;L++){var D=K.indexOf(N0[L]);D!==-1&&(W===-1||D<W)&&(W=D)}var F,z;W===-1?z=K.lastIndexOf(\"@\"):z=K.lastIndexOf(\"@\",W),z!==-1&&(F=K.slice(0,z),K=K.slice(z+1),this.auth=decodeURIComponent(F)),W=-1;for(var L=0;L<W0.length;L++){var D=K.indexOf(W0[L]);D!==-1&&(W===-1||D<W)&&(W=D)}W===-1&&(W=K.length),this.host=K.slice(0,W),K=K.slice(W),this.parseHost(),this.hostname=this.hostname||\"\";var g=this.hostname[0]===\"[\"&&this.hostname[this.hostname.length-1]===\"]\";if(!g)for(var V=this.hostname.split(/\\./),L=0,B=V.length;L<B;L++){var I=V[L];if(!!I&&!I.match(B0)){for(var M=\"\",A=0,b=I.length;A<b;A++)I.charCodeAt(A)>127?M+=\"x\":M+=I[A];if(!M.match(B0)){var h=V.slice(0,L),x=V.slice(L+1),r=I.match(i0);r&&(h.push(r[1]),x.unshift(r[2])),x.length&&(K=\"/\"+x.join(\".\")+K),this.hostname=h.join(\".\");break}}}this.hostname.length>o0?this.hostname=\"\":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=new V0(`https://${this.hostname}`).hostname);var N=this.port?\":\"+this.port:\"\",j=this.hostname||\"\";this.host=j+N,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),K[0]!==\"/\"&&(K=\"/\"+K))}if(!t0[T])for(var L=0,B=R0.length;L<B;L++){var E=R0[L];if(K.indexOf(E)!==-1){var H=encodeURIComponent(E);H===E&&(H=escape(E)),K=K.split(E).join(H)}}var $=K.indexOf(\"#\");$!==-1&&(this.hash=K.substr($),K=K.slice(0,$));var O=K.indexOf(\"?\");if(O!==-1?(this.search=K.substr(O),this.query=K.substr(O+1),q&&(this.query=T0.parse(this.query)),K=K.slice(0,O)):q&&(this.search=\"\",this.query={}),K&&(this.pathname=K),t[T]&&this.hostname&&!this.pathname&&(this.pathname=\"/\"),this.pathname||this.search){var N=this.pathname||\"\",w=this.search||\"\";this.path=N+w}return this.href=this.format(),this};u.prototype.format=function(){var Q=this.auth||\"\";Q&&(Q=encodeURIComponent(Q),Q=Q.replace(/%3A/i,\":\"),Q+=\"@\");var q=this.protocol||\"\",U=this.pathname||\"\",X=this.hash||\"\",Y=!1,Z=\"\";this.host?Y=Q+this.host:this.hostname&&(Y=Q+(this.hostname.indexOf(\":\")===-1?this.hostname:\"[\"+this.hostname+\"]\"),this.port&&(Y+=\":\"+this.port)),this.query&&k0(this.query)&&Object.keys(this.query).length&&(Z=T0.stringify(this.query));var J=this.search||Z&&\"?\"+Z||\"\";return q&&q.substr(-1)!==\":\"&&(q+=\":\"),this.slashes||(!q||t[q])&&Y!==!1?(Y=\"//\"+(Y||\"\"),U&&U.charAt(0)!==\"/\"&&(U=\"/\"+U)):Y||(Y=\"\"),X&&X.charAt(0)!==\"#\"&&(X=\"#\"+X),J&&J.charAt(0)!==\"?\"&&(J=\"?\"+J),U=U.replace(/[?#]/g,function(K){return encodeURIComponent(K)}),J=J.replace(\"#\",\"%23\"),q+Y+U+J+X};u.prototype.resolve=function(Q){return this.resolveObject(a(Q,!1,!0)).format()};u.prototype.resolveObject=function(Q){if(L0(Q)){var q=new u;q.parse(Q,!1,!0),Q=q}for(var U=new u,X=Object.keys(this),Y=0;Y<X.length;Y++){var Z=X[Y];U[Z]=this[Z]}if(U.hash=Q.hash,Q.href===\"\")return U.href=U.format(),U;if(Q.slashes&&!Q.protocol){for(var J=Object.keys(Q),K=0;K<J.length;K++){var G=J[K];G!==\"protocol\"&&(U[G]=Q[G])}return t[U.protocol]&&U.hostname&&!U.pathname&&(U.path=U.pathname=\"/\"),U.href=U.format(),U}if(Q.protocol&&Q.protocol!==U.protocol){if(!t[Q.protocol]){for(var R=Object.keys(Q),T=0;T<R.length;T++){var k=R[T];U[k]=Q[k]}return U.href=U.format(),U}if(U.protocol=Q.protocol,!Q.host&&!G0[Q.protocol]){for(var B=(Q.pathname||\"\").split(\"/\");B.length&&!(Q.host=B.shift()););Q.host||(Q.host=\"\"),Q.hostname||(Q.hostname=\"\"),B[0]!==\"\"&&B.unshift(\"\"),B.length<2&&B.unshift(\"\"),U.pathname=B.join(\"/\")}else U.pathname=Q.pathname;if(U.search=Q.search,U.query=Q.query,U.host=Q.host||\"\",U.auth=Q.auth,U.hostname=Q.hostname||Q.host,U.port=Q.port,U.pathname||U.search){var W=U.pathname||\"\",L=U.search||\"\";U.path=W+L}return U.slashes=U.slashes||Q.slashes,U.href=U.format(),U}var D=U.pathname&&U.pathname.charAt(0)===\"/\",F=Q.host||Q.pathname&&Q.pathname.charAt(0)===\"/\",z=F||D||U.host&&Q.pathname,g=z,V=U.pathname&&U.pathname.split(\"/\")||[],B=Q.pathname&&Q.pathname.split(\"/\")||[],I=U.protocol&&!t[U.protocol];if(I&&(U.hostname=\"\",U.port=null,U.host&&(V[0]===\"\"?V[0]=U.host:V.unshift(U.host)),U.host=\"\",Q.protocol&&(Q.hostname=null,Q.port=null,Q.host&&(B[0]===\"\"?B[0]=Q.host:B.unshift(Q.host)),Q.host=null),z=z&&(B[0]===\"\"||V[0]===\"\")),F)U.host=Q.host||Q.host===\"\"?Q.host:U.host,U.hostname=Q.hostname||Q.hostname===\"\"?Q.hostname:U.hostname,U.search=Q.search,U.query=Q.query,V=B;else if(B.length)V||(V=[]),V.pop(),V=V.concat(B),U.search=Q.search,U.query=Q.query;else if(!s0(Q.search)){if(I){U.hostname=U.host=V.shift();var M=U.host&&U.host.indexOf(\"@\")>0?U.host.split(\"@\"):!1;M&&(U.auth=M.shift(),U.host=U.hostname=M.shift())}return U.search=Q.search,U.query=Q.query,(!Q0(U.pathname)||!Q0(U.search))&&(U.path=(U.pathname?U.pathname:\"\")+(U.search?U.search:\"\")),U.href=U.format(),U}if(!V.length)return U.pathname=null,U.search?U.path=\"/\"+U.search:U.path=null,U.href=U.format(),U;for(var A=V.slice(-1)[0],b=(U.host||Q.host||V.length>1)&&(A===\".\"||A===\"..\")||A===\"\",h=0,x=V.length;x>=0;x--)A=V[x],A===\".\"?V.splice(x,1):A===\"..\"?(V.splice(x,1),h++):h&&(V.splice(x,1),h--);if(!z&&!g)for(;h--;h)V.unshift(\"..\");z&&V[0]!==\"\"&&(!V[0]||V[0].charAt(0)!==\"/\")&&V.unshift(\"\"),b&&V.join(\"/\").substr(-1)!==\"/\"&&V.push(\"\");var r=V[0]===\"\"||V[0]&&V[0].charAt(0)===\"/\";if(I){U.hostname=U.host=r?\"\":V.length?V.shift():\"\";var M=U.host&&U.host.indexOf(\"@\")>0?U.host.split(\"@\"):!1;M&&(U.auth=M.shift(),U.host=U.hostname=M.shift())}return z=z||U.host&&V.length,z&&!r&&V.unshift(\"\"),V.length?U.pathname=V.join(\"/\"):(U.pathname=null,U.path=null),(!Q0(U.pathname)||!Q0(U.search))&&(U.path=(U.pathname?U.pathname:\"\")+(U.search?U.search:\"\")),U.auth=Q.auth||U.auth,U.slashes=U.slashes||Q.slashes,U.href=U.format(),U};u.prototype.parseHost=function(){var Q=this.host,q=c0.exec(Q);q&&(q=q[0],q!==\":\"&&(this.port=q.substr(1)),Q=Q.substr(0,Q.length-q.length)),Q&&(this.hostname=Q)};a0={parse:a,resolve:H0,resolveObject:$0,format:j0,Url:u,URL:V0,URLSearchParams:E0}});function X1(Q,q,U,X){function Y(Z){return Z instanceof U?Z:new U(function(J){J(Z)})}return new(U||(U=Promise))(function(Z,J){function K(T){try{R(X.next(T))}catch(k){J(k)}}function G(T){try{R(X.throw(T))}catch(k){J(k)}}function R(T){T.done?Z(T.value):Y(T.value).then(K,G)}R((X=X.apply(Q,q||[])).next())})}function Y1(Q,q){var U={label:0,sent:function(){if(Z[0]&1)throw Z[1];return Z[1]},trys:[],ops:[]},X,Y,Z,J=Object.create((typeof Iterator===\"function\"?Iterator:Object).prototype);return J.next=K(0),J.throw=K(1),J.return=K(2),typeof Symbol===\"function\"&&(J[Symbol.iterator]=function(){return this}),J;function K(R){return function(T){return G([R,T])}}function G(R){if(X)throw new TypeError(\"Generator is already executing.\");while(J&&(J=0,R[0]&&(U=0)),U)try{if(X=1,Y&&(Z=R[0]&2?Y.return:R[0]?Y.throw||((Z=Y.return)&&Z.call(Y),0):Y.next)&&!(Z=Z.call(Y,R[1])).done)return Z;if(Y=0,Z)R=[R[0]&2,Z.value];switch(R[0]){case 0:case 1:Z=R;break;case 4:return U.label++,{value:R[1],done:!1};case 5:U.label++,Y=R[1],R=[0];continue;case 7:R=U.ops.pop(),U.trys.pop();continue;default:if((Z=U.trys,!(Z=Z.length>0&&Z[Z.length-1]))&&(R[0]===6||R[0]===2)){U=0;continue}if(R[0]===3&&(!Z||R[1]>Z[0]&&R[1]<Z[3])){U.label=R[1];break}if(R[0]===6&&U.label<Z[1]){U.label=Z[1],Z=R;break}if(Z&&U.label<Z[2]){U.label=Z[2],U.ops.push(R);break}if(Z[2])U.ops.pop();U.trys.pop();continue}R=q.call(Q,U)}catch(T){R=[6,T],Y=0}finally{X=Z=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}}function _0(Q){if(Q instanceof Uint8Array)return Q;if(typeof Q===\"string\")return T1(Q);if(ArrayBuffer.isView(Q))return new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(Q)}function V1(Q){if(typeof Q===\"string\")return Q.length===0;return Q.byteLength===0}function W1(Q){var q=_0(Q);if(q.byteLength>c){var U=new X0;U.update(q),q=U.digest()}var X=new Uint8Array(c);return X.set(q),X}var z0=(Q,q,U)=>{if(!q.has(Q))throw TypeError(\"Cannot \"+U)},M0=(Q,q,U)=>{return z0(Q,q,\"read from private field\"),U?U.call(Q):q.get(Q)},A0=(Q,q,U)=>{if(q.has(Q))throw TypeError(\"Cannot add the same private member more than once\");q instanceof WeakSet?q.add(Q):q.set(Q,U)},C0=(Q,q,U,X)=>{return z0(Q,q,\"write to private field\"),X?X.call(Q,U):q.set(Q,U),U},e0=async(Q,q=Q.replace(/c?js$/,\"data\"),U=Q.replace(/c?js$/,\"wasm\"))=>{var X,Y;let Z,J,K;const G=/var (.+) = \\(/;if(typeof window===\"object\"){let T=await(await fetch(Q)).text();T=`${T}\nexport default ${(X=T.match(G))==null?void 0:X[1]};\n`,Z=(await import(URL.createObjectURL(new Blob([T],{type:\"text/javascript\"})))).default,J=await(await fetch(q)).arrayBuffer(),K=new Uint8Array(await(await fetch(U)).arrayBuffer())}else{const{promises:T}=await import(\"fs\"),{pathToFileURL:k}=await Promise.resolve().then(() => (I0(),O0));let W=await T.readFile(Q,{encoding:\"utf-8\"});W=`\nimport process from \"process\";\nimport * as path from \"path\";\nimport { createRequire } from \"module\";\nimport { fileURLToPath } from \"url\";\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\nconst __filename = fileURLToPath(import.meta.url);\nconst require = createRequire(import.meta.url);\n\n${W}\n\nexport default ${(Y=W.match(G))==null?void 0:Y[1]};\n`;const L=Q.replace(/c?js$/,\"mjs\");await T.writeFile(L,W),Z=(await import(k(L).href)).default,await T.unlink(L),J=(await T.readFile(q)).buffer,K=(await T.readFile(U)).buffer}return await Z({wasmBinary:K,getPreloadedPackage:(T,k)=>{if(T===\"libfaust-wasm.data\")return J;return new ArrayBuffer(0)}})},w0=e0,q1=(Q,q,U=!0)=>{const{registerProcessor:X,AudioWorkletProcessor:Y,sampleRate:Z}=globalThis,{FaustBaseWebAudioDsp:J,FaustWasmInstantiator:K}=Q,{processorName:G,dspName:R,dspMeta:T,effectMeta:k,poly:W}=q,L=(V)=>{const B=[\"/gate\",\"/freq\",\"/gain\",\"/key\",\"/vel\",\"/velocity\"],I=\"address\"in V&&!!B.find((M)=>V.address.endsWith(M));if(W&&I)return null;if(V.type===\"vslider\"||V.type===\"hslider\"||V.type===\"nentry\")return{name:V.address,defaultValue:V.init||0,minValue:V.min||0,maxValue:V.max||0};else if(V.type===\"button\"||V.type===\"checkbox\")return{name:V.address,defaultValue:V.init||0,minValue:0,maxValue:1};return null};class D extends Y{constructor(V){super(V);this.paramValuesCache={},this.port.onmessage=(A)=>this.handleMessageAux(A);const{parameterDescriptors:B}=this.constructor;B.forEach((A)=>{this.paramValuesCache[A.name]=A.defaultValue||0});const{moduleId:I,instanceId:M}=V.processorOptions;if(!I||!M)return;this.wamInfo={moduleId:I,instanceId:M}}static get parameterDescriptors(){const V=[],B=(I)=>{const M=L(I);if(M)V.push(M)};if(J.parseUI(T.ui,B),k)J.parseUI(k.ui,B);return V}setupWamEventHandler(){var V;if(!this.wamInfo)return;const{moduleId:B,instanceId:I}=this.wamInfo,{webAudioModules:M}=globalThis,A=M.getModuleScope(B),b=(V=A==null?void 0:A.paramMgrProcessors)==null?void 0:V[I];if(!b)return;if(b.handleEvent)return;b.handleEvent=(h)=>{if(h.type===\"wam-midi\")this.midiMessage(h.data.bytes)}}process(V,B,I){for(let M in I){const[A]=I[M];if(A!==this.paramValuesCache[M])this.fDSPCode.setParamValue(M,A),this.paramValuesCache[M]=A}return this.fDSPCode.compute(V[0],B[0])}handleMessageAux(V){const B=V.data;switch(B.type){case\"acc\":{this.propagateAcc(B.data,B.invert);break}case\"gyr\":{this.propagateGyr(B.data);break}case\"midi\":{this.midiMessage(B.data);break}case\"ctrlChange\":{this.ctrlChange(B.data[0],B.data[1],B.data[2]);break}case\"pitchWheel\":{this.pitchWheel(B.data[0],B.data[1]);break}case\"param\":{this.setParamValue(B.data.path,B.data.value);break}case\"setPlotHandler\":{if(B.data)this.fDSPCode.setPlotHandler((I,M,A)=>this.port.postMessage({type:\"plot\",value:I,index:M,events:A}));else this.fDSPCode.setPlotHandler(null);break}case\"setupWamEventHandler\":{this.setupWamEventHandler();break}case\"start\":{this.fDSPCode.start();break}case\"stop\":{this.fDSPCode.stop();break}case\"destroy\":{this.port.close(),this.fDSPCode.destroy();break}default:break}}setParamValue(V,B){this.fDSPCode.setParamValue(V,B),this.paramValuesCache[V]=B}midiMessage(V){this.fDSPCode.midiMessage(V)}ctrlChange(V,B,I){this.fDSPCode.ctrlChange(V,B,I)}pitchWheel(V,B){this.fDSPCode.pitchWheel(V,B)}propagateAcc(V,B=!1){this.fDSPCode.propagateAcc(V,B)}propagateGyr(V){this.fDSPCode.propagateGyr(V)}}class F extends D{constructor(V){super(V);const{FaustMonoWebAudioDsp:B}=Q,{factory:I,sampleSize:M}=V.processorOptions,A=K.createSyncMonoDSPInstance(I);this.fDSPCode=new B(A,Z,M,128,I.soundfiles),this.fDSPCode.setOutputParamHandler((b,h)=>this.port.postMessage({path:b,value:h,type:\"param\"})),this.fDSPCode.start()}}class z extends D{constructor(V){super(V);this.handleMessageAux=(N)=>{const j=N.data;switch(j.type){case\"keyOn\":this.keyOn(j.data[0],j.data[1],j.data[2]);break;case\"keyOff\":this.keyOff(j.data[0],j.data[1],j.data[2]);break;default:super.handleMessageAux(N);break}};const{FaustPolyWebAudioDsp:B}=Q,{voiceFactory:I,mixerModule:M,voices:A,effectFactory:b,sampleSize:h}=V.processorOptions,x=K.createSyncPolyDSPInstance(I,M,A,b),r={...b==null?void 0:b.soundfiles,...I.soundfiles};this.fDSPCode=new B(x,Z,h,128,r),this.port.onmessage=(N)=>this.handleMessageAux(N),this.fDSPCode.setOutputParamHandler((N,j)=>this.port.postMessage({path:N,value:j,type:\"param\"})),this.fDSPCode.start()}midiMessage(V){const B=V[0]>>4,I=V[0]&15,M=V[1],A=V[2];if(B===8||B===9&&A===0)this.keyOff(I,M,A);else if(B===9)this.keyOn(I,M,A);else super.midiMessage(V)}keyOn(V,B,I){this.fDSPCode.keyOn(V,B,I)}keyOff(V,B,I){this.fDSPCode.keyOff(V,B,I)}allNotesOff(V){this.fDSPCode.allNotesOff(V)}}const g=W?z:F;if(U)try{X(G||R||(W?\"mydsp_poly\":\"mydsp\"),g)}catch(V){console.warn(V)}return W?z:F},J0=q1,U1=(Q,q,U=!0)=>{const{registerProcessor:X,AudioWorkletProcessor:Y,sampleRate:Z}=globalThis,{FaustBaseWebAudioDsp:J,FaustWasmInstantiator:K,FaustMonoWebAudioDsp:G,FFTUtils:R}=Q,{processorName:T,dspName:k,dspMeta:W,fftOptions:L}=q,{windowFunctions:D,getFFT:F,fftToSignal:z,signalToFFT:g,signalToNoFFT:V}=R,B=(N,j)=>Math.abs(j)<1?Math.ceil(N*(1/j))/(1/j):Math.ceil(N/j)*j,I=(N,j)=>(N%j+j)%j,M=(N,j)=>{for(let E=0;E<N.length;E++)N[E]*=j(E,N.length)},A=[\"/fftSize\",\"/fftHopSize\",\"/fftOverlap\",\"/windowFunction\",\"/noIFFT\"],b=(N,j,E=0,H=0)=>{const $=N.length,O=j.length,w=Math.min($,O);let y=0,C=I(E,$)||0,_=I(H,O)||0;while(y<w){const v=Math.min(w-y,$-C,O-_),i=_+v;if(_===0&&i===O)N.set(j,C);else N.set(j.subarray(_,i),C);C=(C+v)%$,_=i%O,y+=v}return C},h=(N)=>{if(\"address\"in N&&!!A.find((E)=>N.address.endsWith(E)))return null;if(N.type===\"vslider\"||N.type===\"hslider\"||N.type===\"nentry\")return{name:N.address,defaultValue:N.init||0,minValue:N.min||0,maxValue:N.max||0};else if(N.type===\"button\"||N.type===\"checkbox\")return{name:N.address,defaultValue:N.init||0,minValue:0,maxValue:1};return null};class x extends Y{constructor(N){super(N);this.paramValuesCache={},this.destroyed=!1,this.$inputWrite=0,this.$inputRead=0,this.$outputWrite=0,this.$outputRead=0,this.noIFFT=!1,this.fftInput=[],this.fftOutput=[],this.fftOverlap=0,this.fftHopSize=0,this.fftSize=0,this.fftBufferSize=0,this.fPlotHandler=null,this.fCachedEvents=[],this.fBufferNum=0,this.soundfiles={},this.windowFunction=null,this.port.onmessage=(w)=>this.handleMessageAux(w);const{parameterDescriptors:j}=this.constructor;j.forEach((w)=>{this.paramValuesCache[w.name]=w.defaultValue||0});const{factory:E,sampleSize:H}=N.processorOptions;this.dspInstance=K.createSyncMonoDSPInstance(E),this.sampleSize=H,this.soundfiles=E.soundfiles,this.initFFT();const{moduleId:$,instanceId:O}=N.processorOptions;if(!$||!O)return;this.wamInfo={moduleId:$,instanceId:O}}get fftProcessorBufferSize(){return this.fftSize/2+1}async initFFT(){return this.FFT=await F(),await this.createFFTProcessor(),!0}static get parameterDescriptors(){const N=[],j=(E)=>{const H=h(E);if(H)N.push(H)};return J.parseUI(W.ui,j),[...N,{defaultValue:(L==null?void 0:L.fftSize)||1024,maxValue:4294967296,minValue:2,name:\"fftSize\"},{defaultValue:(L==null?void 0:L.fftOverlap)||2,maxValue:32,minValue:1,name:\"fftOverlap\"},{defaultValue:typeof(L==null?void 0:L.defaultWindowFunction)===\"number\"?L.defaultWindowFunction+1:0,maxValue:(D==null?void 0:D.length)||0,minValue:0,name:\"windowFunction\"},{defaultValue:+!!(L==null?void 0:L.noIFFT)||0,maxValue:1,minValue:0,name:\"noIFFT\"}]}setupWamEventHandler(){var N;if(!this.wamInfo)return;const{moduleId:j,instanceId:E}=this.wamInfo,{webAudioModules:H}=globalThis,$=H.getModuleScope(j),O=(N=$==null?void 0:$.paramMgrProcessors)==null?void 0:N[E];if(!O)return;if(O.handleEvent)return;O.handleEvent=(w)=>{if(w.type===\"wam-midi\")this.midiMessage(w.data.bytes)}}processFFT(){let N=I(this.$inputWrite-this.$inputRead,this.fftBufferSize)||this.fftBufferSize;while(N>=this.fftSize){let j=[];this.fDSPCode.compute((E)=>{for(let H=0;H<Math.min(this.fftInput.length,Math.ceil(E.length/3));H++){const $=this.rfft.forward((O)=>{b(O,this.fftInput[H],0,this.$inputRead);for(let w=0;w<O.length;w++)O[w]*=this.window[w]});z($,E[H*3],E[H*3+1],E[H*3+2])}for(let H=this.fftInput.length*3;H<E.length;H++)if(H%3===2)E[H].forEach(($,O)=>E[H][O]=O);else E[H].fill(0)},(E)=>{j=E}),this.$inputRead+=this.fftHopSize,this.$inputRead%=this.fftBufferSize,N-=this.fftHopSize;for(let E=0;E<this.fftOutput.length;E++){let H;if(this.noIFFT)H=this.noIFFTBuffer,V(j[E*2]||this.fftProcessorZeros,j[E*2+1]||this.fftProcessorZeros,H);else H=this.rfft.inverse((O)=>{g(j[E*2]||this.fftProcessorZeros,j[E*2+1]||this.fftProcessorZeros,O)});for(let O=0;O<H.length;O++)H[O]*=this.window[O];let $;for(let O=0;O<H.length-this.fftHopSize;O++)if($=I(this.$outputWrite+O,this.fftBufferSize),this.fftOutput[E][$]+=H[O],E===0)this.windowSumSquare[$]+=this.noIFFT?this.window[O]:this.window[O]**2;for(let O=H.length-this.fftHopSize;O<H.length;O++)if($=I(this.$outputWrite+O,this.fftBufferSize),this.fftOutput[E][$]=H[O],E===0)this.windowSumSquare[$]=this.noIFFT?this.window[O]:this.window[O]**2}this.$outputWrite+=this.fftHopSize,this.$outputWrite%=this.fftBufferSize}}process(N,j,E){if(this.destroyed)return!1;if(!this.FFT)return!0;const H=N[0],$=j[0],O=(H==null?void 0:H.length)||0,w=($==null?void 0:$.length)||0,y=(H==null?void 0:H.length)?Math.max(...H.map((C)=>C.length))||128:128;if(this.noIFFT=!!E.noIFFT[0],this.resetFFT(~~E.fftSize[0],~~E.fftOverlap[0],~~E.windowFunction[0],O,w,y),!this.fDSPCode)return!0;for(let C in E){if(A.find((v)=>`/${C}`.endsWith(v)))continue;const[_]=E[C];if(_!==this.paramValuesCache[C])this.fDSPCode.setParamValue(C,_),this.paramValuesCache[C]=_}if(H==null?void 0:H.length){let C=0;for(let _=0;_<H.length;_++){const v=this.fftInput[_],i=H[_].length?H[_]:new Float32Array(y);C=b(v,i,this.$inputWrite)}this.$inputWrite=C}else this.$inputWrite+=y,this.$inputWrite%=this.fftBufferSize;this.processFFT();for(let C=0;C<$.length;C++){b($[C],this.fftOutput[C],0,this.$outputRead);let _=0;for(let v=0;v<y;v++)_=this.windowSumSquare[I(this.$outputRead+v,this.fftBufferSize)],$[C][v]/=_<0.00000001?1:_}if(this.$outputRead+=y,this.$outputRead%=this.fftBufferSize,this.fPlotHandler)this.port.postMessage({type:\"plot\",value:$,index:this.fBufferNum++,events:this.fCachedEvents}),this.fCachedEvents=[];return!0}handleMessageAux(N){var j,E,H;const $=N.data;switch($.type){case\"midi\":this.midiMessage($.data);break;case\"ctrlChange\":this.ctrlChange($.data[0],$.data[1],$.data[2]);break;case\"pitchWheel\":this.pitchWheel($.data[0],$.data[1]);break;case\"param\":this.setParamValue($.data.path,$.data.value);break;case\"setPlotHandler\":{if($.data)this.fPlotHandler=(O,w,y)=>{if(y)this.fCachedEvents.push(...y)};else this.fPlotHandler=null;(j=this.fDSPCode)==null||j.setPlotHandler(this.fPlotHandler);break}case\"setupWamEventHandler\":{this.setupWamEventHandler();break}case\"start\":{(E=this.fDSPCode)==null||E.start();break}case\"stop\":{(H=this.fDSPCode)==null||H.stop();break}case\"destroy\":{this.port.close(),this.destroy();break}default:break}}setParamValue(N,j){var E;(E=this.fDSPCode)==null||E.setParamValue(N,j),this.paramValuesCache[N]=j}midiMessage(N){var j;(j=this.fDSPCode)==null||j.midiMessage(N)}ctrlChange(N,j,E){var H;(H=this.fDSPCode)==null||H.ctrlChange(N,j,E)}pitchWheel(N,j){var E;(E=this.fDSPCode)==null||E.pitchWheel(N,j)}resetFFT(N,j,E,H,$,O){var w,y;const C=~~B(Math.max(2,N||1024),2),_=~~Math.min(C,Math.max(1,j)),v=~~Math.max(1,C/_),i=C-Math.min(v,O);let q0=null;if(E!==0)q0=typeof D===\"object\"?D[~~E-1]||null:null;const U0=C!==this.fftSize,K0=_!==this.fftOverlap;if(U0||K0){if(this.fftSize=C,this.fftOverlap=_,this.fftHopSize=v,this.$inputWrite=0,this.$inputRead=0,this.$outputWrite=0,this.$outputRead=-i,this.fftBufferSize=Math.max(C*2-this.fftHopSize,O*2),!U0&&this.fftHopSizeParam)(w=this.fDSPCode)==null||w.setParamValue(this.fftHopSizeParam,this.fftHopSize)}if(U0)(y=this.rfft)==null||y.dispose(),this.rfft=new this.FFT(C),this.noIFFTBuffer=new Float32Array(this.fftSize),this.createFFTProcessor();if(U0||K0||q0!==this.windowFunction){if(this.windowFunction=q0,this.window=new Float32Array(C),this.window.fill(1),q0)M(this.window,q0);this.windowSumSquare=new Float32Array(this.fftBufferSize)}if(this.fftInput.length>H)this.fftInput.splice(H);if(this.fftOutput.length>$)this.fftOutput.splice($);if(U0||K0){for(let p=0;p<H;p++)this.fftInput[p]=new Float32Array(this.fftBufferSize);for(let p=0;p<$;p++)this.fftOutput[p]=new Float32Array(this.fftBufferSize)}else{if(this.fftInput.length<H)for(let p=this.fftInput.length;p<H;p++)this.fftInput[p]=new Float32Array(this.fftBufferSize);if(this.fftOutput.length<$)for(let p=this.fftOutput.length;p<$;p++)this.fftOutput[p]=new Float32Array(this.fftBufferSize)}}async createFFTProcessor(){var N,j;(N=this.fDSPCode)==null||N.stop(),(j=this.fDSPCode)==null||j.destroy(),this.fDSPCode=new G(this.dspInstance,Z,this.sampleSize,this.fftProcessorBufferSize,this.soundfiles),this.fDSPCode.setOutputParamHandler(($,O)=>this.port.postMessage({path:$,value:O,type:\"param\"})),this.fDSPCode.setPlotHandler(this.fPlotHandler);const E=this.fDSPCode.getParams();this.fDSPCode.start();for(let $ in this.paramValuesCache){if(A.find((O)=>`/${$}`.endsWith(O)))continue;this.fDSPCode.setParamValue($,this.paramValuesCache[$])}const H=E.find(($)=>$.endsWith(\"/fftSize\"));if(H)this.fDSPCode.setParamValue(H,this.fftSize);if(this.fftHopSizeParam=E.find(($)=>$.endsWith(\"/fftHopSize\")),this.fftHopSizeParam)this.fDSPCode.setParamValue(this.fftHopSizeParam,this.fftHopSize);this.fftProcessorZeros=new Float32Array(this.fftProcessorBufferSize)}destroy(){var N,j,E;(N=this.fDSPCode)==null||N.stop(),(j=this.fDSPCode)==null||j.destroy(),(E=this.rfft)==null||E.dispose(),this.destroyed=!0}}const r=x;if(U)try{X(T||k||\"myfftdsp\",r)}catch(N){console.warn(N)}return x},Q1=U1,c=64,Z1=32,J1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),K1=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],R1=Math.pow(2,53)-1,X0=function(){function Q(){this.state=Int32Array.from(K1),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return Q.prototype.update=function(q){if(this.finished)throw new Error(\"Attempted to update an already finished hash.\");var U=0,X=q.byteLength;if(this.bytesHashed+=X,this.bytesHashed*8>R1)throw new Error(\"Cannot hash more than 2^53 - 1 bits\");while(X>0)if(this.buffer[this.bufferLength++]=q[U++],X--,this.bufferLength===c)this.hashBuffer(),this.bufferLength=0},Q.prototype.digest=function(){if(!this.finished){var q=this.bytesHashed*8,U=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),X=this.bufferLength;if(U.setUint8(this.bufferLength++,128),X%c>=c-8){for(var Y=this.bufferLength;Y<c;Y++)U.setUint8(Y,0);this.hashBuffer(),this.bufferLength=0}for(var Y=this.bufferLength;Y<c-8;Y++)U.setUint8(Y,0);U.setUint32(c-8,Math.floor(q/4294967296),!0),U.setUint32(c-4,q),this.hashBuffer(),this.finished=!0}var Z=new Uint8Array(Z1);for(var Y=0;Y<8;Y++)Z[Y*4]=this.state[Y]>>>24&255,Z[Y*4+1]=this.state[Y]>>>16&255,Z[Y*4+2]=this.state[Y]>>>8&255,Z[Y*4+3]=this.state[Y]>>>0&255;return Z},Q.prototype.hashBuffer=function(){var q=this,U=q.buffer,X=q.state,Y=X[0],Z=X[1],J=X[2],K=X[3],G=X[4],R=X[5],T=X[6],k=X[7];for(var W=0;W<c;W++){if(W<16)this.temp[W]=(U[W*4]&255)<<24|(U[W*4+1]&255)<<16|(U[W*4+2]&255)<<8|U[W*4+3]&255;else{var L=this.temp[W-2],D=(L>>>17|L<<15)^(L>>>19|L<<13)^L>>>10;L=this.temp[W-15];var F=(L>>>7|L<<25)^(L>>>18|L<<14)^L>>>3;this.temp[W]=(D+this.temp[W-7]|0)+(F+this.temp[W-16]|0)}var z=(((G>>>6|G<<26)^(G>>>11|G<<21)^(G>>>25|G<<7))+(G&R^~G&T)|0)+(k+(J1[W]+this.temp[W]|0)|0)|0,g=((Y>>>2|Y<<30)^(Y>>>13|Y<<19)^(Y>>>22|Y<<10))+(Y&Z^Y&J^Z&J)|0;k=T,T=R,R=G,G=K+z|0,K=J,J=Z,Z=Y,Y=z+g|0}X[0]+=Y,X[1]+=Z,X[2]+=J,X[3]+=K,X[4]+=G,X[5]+=R,X[6]+=T,X[7]+=k},Q}(),G1=(Q)=>new TextEncoder().encode(Q),T1=typeof Buffer!==\"undefined\"&&Buffer.from?function(Q){return Buffer.from(Q,\"utf8\")}:G1,L1=function(){function Q(q){this.secret=q,this.hash=new X0,this.reset()}return Q.prototype.update=function(q){if(V1(q)||this.error)return;try{this.hash.update(_0(q))}catch(U){this.error=U}},Q.prototype.digestSync=function(){if(this.error)throw this.error;if(this.outer){if(!this.outer.finished)this.outer.update(this.hash.digest());return this.outer.digest()}return this.hash.digest()},Q.prototype.digest=function(){return X1(this,void 0,void 0,function(){return Y1(this,function(q){return[2,this.digestSync()]})})},Q.prototype.reset=function(){if(this.hash=new X0,this.secret){this.outer=new X0;var q=W1(this.secret),U=new Uint8Array(c);U.set(q);for(var X=0;X<c;X++)q[X]^=54,U[X]^=92;this.hash.update(q),this.outer.update(U);for(var X=0;X<q.byteLength;X++)q[X]=0}},Q}(),N1=(Q)=>String.fromCharCode.apply(null,Q),B1=(Q)=>{const q=new ArrayBuffer(Q.length),U=new Uint8Array(q);for(let X=0,Y=Q.length;X<Y;X++)U[X]=Q.charCodeAt(X);return U},E1=async(Q)=>{const q=new L1;return q.update(Q),Array.from(await q.digest()).map((Y)=>Y.toString(16).padStart(2,\"0\")).join(\"\")},P0=class Q{static serializeDSPFactories(){const q={};return this.gFactories.forEach((U,X)=>{const{code:Y,json:Z,poly:J}=U;q[X]={code:btoa(N1(Y)),json:JSON.parse(Z),poly:J}}),q}static stringifyDSPFactories(){return JSON.stringify(this.serializeDSPFactories())}static deserializeDSPFactories(q){const U=[];for(let X in q){const Y=q[X],{code:Z,json:J,poly:K}=Y,G=B1(atob(Z));U.push(WebAssembly.compile(G).then((R)=>this.gFactories.set(X,{shaKey:X,cfactory:0,code:G,module:R,json:JSON.stringify(J),poly:K,soundfiles:{}})))}return Promise.all(U)}static importDSPFactories(q){const U=JSON.parse(q);return this.deserializeDSPFactories(U)}constructor(q){this.fLibFaust=q,this.fErrorMessage=\"\"}intVec2intArray(q){const U=q.size(),X=new Uint8Array(U);for(let Y=0;Y<U;Y++)X[Y]=q.get(Y);return X}async createDSPFactory(q,U,X,Y){if(Q.gFactories.size>10)Q.gFactories.clear();let Z=await E1(q+U+X+(Y?\"poly\":\"mono\"));if(Q.gFactories.has(Z))return Q.gFactories.get(Z)||null;else try{const J=this.fLibFaust.createDSPFactory(q,U,X,!Y),K=this.intVec2intArray(J.data);J.data.delete();const G=await WebAssembly.compile(K),R={shaKey:Z,cfactory:J.cfactory,code:K,module:G,json:J.json,poly:Y,soundfiles:{}};return this.deleteDSPFactory(R),Q.gFactories.set(Z,R),R}catch(J){throw this.fErrorMessage=this.fLibFaust.getErrorAfterException(),this.fLibFaust.cleanupAfterException(),this.fErrorMessage?new Error(this.fErrorMessage):J}}version(){return this.fLibFaust.version()}getErrorMessage(){return this.fErrorMessage}async createMonoDSPFactory(q,U,X){return this.createDSPFactory(q,U,X,!1)}async createPolyDSPFactory(q,U,X){return this.createDSPFactory(q,U,X,!0)}deleteDSPFactory(q){this.fLibFaust.deleteDSPFactory(q.cfactory),q.cfactory=0}expandDSP(q,U){try{return this.fLibFaust.expandDSP(\"FaustDSP\",q,U)}catch(X){throw this.fErrorMessage=this.fLibFaust.getErrorAfterException(),this.fLibFaust.cleanupAfterException(),this.fErrorMessage?new Error(this.fErrorMessage):X}}generateAuxFiles(q,U,X){try{return this.fLibFaust.generateAuxFiles(q,U,X)}catch(Y){throw this.fErrorMessage=this.fLibFaust.getErrorAfterException(),this.fLibFaust.cleanupAfterException(),this.fErrorMessage?new Error(this.fErrorMessage):Y}}deleteAllDSPFactories(){this.fLibFaust.deleteAllDSPFactories()}fs(){return this.fLibFaust.fs()}async getAsyncInternalMixerModule(q=!1){const U=q?\"mixer64Buffer\":\"mixer32Buffer\",X=q?\"mixer64Module\":\"mixer32Module\";if(this[X])return{mixerBuffer:this[U],mixerModule:this[X]};const Y=q?\"/usr/rsrc/mixer64.wasm\":\"/usr/rsrc/mixer32.wasm\",Z=this.fs().readFile(Y,{encoding:\"binary\"});this[U]=Z;const J=await WebAssembly.compile(Z);return this[X]=J,{mixerBuffer:Z,mixerModule:J}}getSyncInternalMixerModule(q=!1){const U=q?\"mixer64Buffer\":\"mixer32Buffer\",X=q?\"mixer64Module\":\"mixer32Module\";if(this[X])return{mixerBuffer:this[U],mixerModule:this[X]};const Y=q?\"/usr/rsrc/mixer64.wasm\":\"/usr/rsrc/mixer32.wasm\",Z=this.fs().readFile(Y,{encoding:\"binary\"});this[U]=Z;const J=new WebAssembly.Module(Z);return this[X]=J,{mixerBuffer:Z,mixerModule:J}}};P0.gFactories=new Map;var k1=P0,S0=k1,s=class{constructor(Q){this.fExports=Q}compute(Q,q,U,X){this.fExports.compute(Q,q,U,X)}getNumInputs(Q){return this.fExports.getNumInputs(Q)}getNumOutputs(Q){return this.fExports.getNumOutputs(Q)}getParamValue(Q,q){return this.fExports.getParamValue(Q,q)}getSampleRate(Q){return this.fExports.getSampleRate(Q)}init(Q,q){this.fExports.init(Q,q)}instanceClear(Q){this.fExports.instanceClear(Q)}instanceConstants(Q,q){this.fExports.instanceConstants(Q,q)}instanceInit(Q,q){this.fExports.instanceInit(Q,q)}instanceResetUserInterface(Q){this.fExports.instanceResetUserInterface(Q)}setParamValue(Q,q,U){this.fExports.setParamValue(Q,q,U)}},j1=class{static createWasmImport(Q){return{env:{memory:Q||new WebAssembly.Memory({initial:100}),memoryBase:0,tableBase:0,_abs:Math.abs,_acosf:Math.acos,_asinf:Math.asin,_atanf:Math.atan,_atan2f:Math.atan2,_ceilf:Math.ceil,_cosf:Math.cos,_expf:Math.exp,_floorf:Math.floor,_fmodf:(q,U)=>q%U,_logf:Math.log,_log10f:Math.log10,_max_f:Math.max,_min_f:Math.min,_remainderf:(q,U)=>q-Math.round(q/U)*U,_powf:Math.pow,_roundf:Math.round,_sinf:Math.sin,_sqrtf:Math.sqrt,_tanf:Math.tan,_acoshf:Math.acosh,_asinhf:Math.asinh,_atanhf:Math.atanh,_coshf:Math.cosh,_sinhf:Math.sinh,_tanhf:Math.tanh,_isnanf:Number.isNaN,_isinff:(q)=>!isFinite(q),_copysignf:(q,U)=>Math.sign(q)===Math.sign(U)?q:-q,_acos:Math.acos,_asin:Math.asin,_atan:Math.atan,_atan2:Math.atan2,_ceil:Math.ceil,_cos:Math.cos,_exp:Math.exp,_floor:Math.floor,_fmod:(q,U)=>q%U,_log:Math.log,_log10:Math.log10,_max_:Math.max,_min_:Math.min,_remainder:(q,U)=>q-Math.round(q/U)*U,_pow:Math.pow,_round:Math.round,_sin:Math.sin,_sqrt:Math.sqrt,_tan:Math.tan,_acosh:Math.acosh,_asinh:Math.asinh,_atanh:Math.atanh,_cosh:Math.cosh,_sinh:Math.sinh,_tanh:Math.tanh,_isnan:Number.isNaN,_isinf:(q)=>!isFinite(q),_copysign:(q,U)=>Math.sign(q)===Math.sign(U)?q:-q,table:new WebAssembly.Table({initial:0,element:\"anyfunc\"})}}}static createWasmMemoryPoly(Q,q,U,X,Y){const Z=Math.max(4,Q),J=q,K=(T)=>{let k=65536;while(k<T)k*=2;return k},G=X?X.size:0;let R=K(G+U.size*Z+(U.inputs+U.outputs*2)*(J+Y*q))/65536;return R=Math.max(2,R),new WebAssembly.Memory({initial:R})}static createWasmMemoryMono(Q,q,U){const X=Q,Y=(q.size+(q.inputs+q.outputs)*(X+U*Q))/65536;return new WebAssembly.Memory({initial:Y*2})}static createMonoDSPInstanceAux(Q,q,U=null){const X=Q.exports,Y=new s(X);return{memory:U?U:Q.exports.memory,api:Y,json:q}}static createMemoryMono(Q){const q=JSON.parse(Q.json),U=q.compile_options.match(\"-double\")?8:4;return this.createWasmMemoryMono(U,q,8192)}static createMemoryPoly(Q,q,U){const X=JSON.parse(q.json),Y=U&&U.json?JSON.parse(U.json):null,Z=X.compile_options.match(\"-double\")?8:4;return this.createWasmMemoryPoly(Q,Z,X,Y,8192)}static createMixerAux(Q,q){const U={imports:{print:console.log},memory:{memory:q}};return new WebAssembly.Instance(Q,U).exports}static async loadDSPFactory(Q,q){const U=await fetch(Q);if(!U.ok)throw new Error(`=> exception raised while running loadDSPFactory, file not found: ${Q}`);try{const X=await U.arrayBuffer(),Y=await WebAssembly.compile(X),J=await(await fetch(q)).text(),R=JSON.parse(J).compile_options.indexOf(\"wasm-e\")!==-1;return{cfactory:0,code:new Uint8Array(X),module:Y,json:J,poly:R}}catch(X){throw X}}static async loadDSPMixer(Q,q){try{let U=null;if(q)U=q.readFile(Q,{encoding:\"binary\"});else U=await(await fetch(Q)).arrayBuffer();return WebAssembly.compile(U)}catch(U){throw U}}static async createAsyncMonoDSPInstance(Q){if(/\"type\":\\s*\"soundfile\"/.test(Q.json)){const X=this.createMemoryMono(Q),Y=await WebAssembly.instantiate(Q.module,this.createWasmImport(X));return this.createMonoDSPInstanceAux(Y,Q.json,X)}else{const X=await WebAssembly.instantiate(Q.module,this.createWasmImport());return this.createMonoDSPInstanceAux(X,Q.json)}}static createSyncMonoDSPInstance(Q){if(/\"type\":\\s*\"soundfile\"/.test(Q.json)){const X=this.createMemoryMono(Q),Y=new WebAssembly.Instance(Q.module,this.createWasmImport(X));return this.createMonoDSPInstanceAux(Y,Q.json,X)}else{const X=new WebAssembly.Instance(Q.module,this.createWasmImport());return this.createMonoDSPInstanceAux(X,Q.json)}}static async createAsyncPolyDSPInstance(Q,q,U,X){const Y=this.createMemoryPoly(U,Q,X),J=(await WebAssembly.instantiate(Q.module,this.createWasmImport(Y))).exports,K=new s(J),G=this.createMixerAux(q,Y);if(X){const T=(await WebAssembly.instantiate(X.module,this.createWasmImport(Y))).exports,k=new s(T);return{memory:Y,voices:U,voiceAPI:K,effectAPI:k,mixerAPI:G,voiceJSON:Q.json,effectJSON:X.json}}else return{memory:Y,voices:U,voiceAPI:K,mixerAPI:G,voiceJSON:Q.json}}static createSyncPolyDSPInstance(Q,q,U,X){const Y=this.createMemoryPoly(U,Q,X),J=new WebAssembly.Instance(Q.module,this.createWasmImport(Y)).exports,K=new s(J),G=this.createMixerAux(q,Y);if(X){const T=new WebAssembly.Instance(X.module,this.createWasmImport(Y)).exports,k=new s(T);return{memory:Y,voices:U,voiceAPI:K,effectAPI:k,mixerAPI:G,voiceJSON:Q.json,effectJSON:X.json}}else return{memory:Y,voices:U,voiceAPI:K,mixerAPI:G,voiceJSON:Q.json}}},d=j1,l=class Q{static convertToAxis(q){switch(q){case 0:return 0;case 1:return 1;case 2:return 2;default:return console.error(\"Error: Axis not found value: \"+q),0}}static convertToCurve(q){switch(q){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;default:return console.error(\"Error: Curve not found value: \"+q),0}}static get Range(){if(!this._Range)this._Range=class{constructor(q,U){this.fLo=Math.min(q,U),this.fHi=Math.max(q,U)}clip(q){if(q<this.fLo)return this.fLo;if(q>this.fHi)return this.fHi;return q}};return this._Range}static get Interpolator(){if(!this._Interpolator)this._Interpolator=class{constructor(q,U,X,Y){if(this.fRange=new Q.Range(q,U),U!==q)this.fCoef=(Y-X)/(U-q),this.fOffset=X-q*this.fCoef;else this.fCoef=0,this.fOffset=(X+Y)/2}returnMappedValue(q){var U=this.fRange.clip(q);return this.fOffset+U*this.fCoef}getLowHigh(q,U){return{amin:this.fRange.fLo,amax:this.fRange.fHi}}};return this._Interpolator}static get Interpolator3pt(){if(!this._Interpolator3pt)this._Interpolator3pt=class{constructor(q,U,X,Y,Z,J){this.fSegment1=new Q.Interpolator(q,U,Y,Z),this.fSegment2=new Q.Interpolator(U,X,Z,J),this.fMid=U}returnMappedValue(q){return q<this.fMid?this.fSegment1.returnMappedValue(q):this.fSegment2.returnMappedValue(q)}getMappingValues(q,U,X){var Y=this.fSegment1.getLowHigh(q,U),Z=this.fSegment2.getLowHigh(U,X);return{amin:Y.amin,amid:Z.amin,amax:Z.amax}}};return this._Interpolator3pt}static get UpConverter(){if(!this._UpConverter)this._UpConverter=class{constructor(q,U,X,Y,Z,J){this.fActive=!0,this.fA2F=new Q.Interpolator3pt(q,U,X,Y,Z,J),this.fF2A=new Q.Interpolator3pt(Y,Z,J,q,U,X)}uiToFaust(q){return this.fA2F.returnMappedValue(q)}faustToUi(q){return this.fF2A.returnMappedValue(q)}setMappingValues(q,U,X,Y,Z,J){this.fA2F=new Q.Interpolator3pt(q,U,X,Y,Z,J),this.fF2A=new Q.Interpolator3pt(Y,Z,J,q,U,X)}getMappingValues(q,U,X){return this.fA2F.getMappingValues(q,U,X)}setActive(q){this.fActive=q}getActive(){return this.fActive}};return this._UpConverter}static get DownConverter(){if(!this._DownConverter)this._DownConverter=class{constructor(q,U,X,Y,Z,J){this.fActive=!0,this.fA2F=new Q.Interpolator3pt(q,U,X,J,Z,Y),this.fF2A=new Q.Interpolator3pt(Y,Z,J,X,U,q)}uiToFaust(q){return this.fA2F.returnMappedValue(q)}faustToUi(q){return this.fF2A.returnMappedValue(q)}setMappingValues(q,U,X,Y,Z,J){this.fA2F=new Q.Interpolator3pt(q,U,X,J,Z,Y),this.fF2A=new Q.Interpolator3pt(Y,Z,J,X,U,q)}getMappingValues(q,U,X){return this.fA2F.getMappingValues(q,U,X)}setActive(q){this.fActive=q}getActive(){return this.fActive}};return this._DownConverter}static get UpDownConverter(){if(!this._UpDownConverter)this._UpDownConverter=class{constructor(q,U,X,Y,Z,J){this.fActive=!0,this.fA2F=new Q.Interpolator3pt(q,U,X,Y,J,Y),this.fF2A=new Q.Interpolator(Y,J,q,X)}uiToFaust(q){return this.fA2F.returnMappedValue(q)}faustToUi(q){return this.fF2A.returnMappedValue(q)}setMappingValues(q,U,X,Y,Z,J){this.fA2F=new Q.Interpolator3pt(q,U,X,Y,J,Y),this.fF2A=new Q.Interpolator(Y,J,q,X)}getMappingValues(q,U,X){return this.fA2F.getMappingValues(q,U,X)}setActive(q){this.fActive=q}getActive(){return this.fActive}};return this._UpDownConverter}static get DownUpConverter(){if(!this._DownUpConverter)this._DownUpConverter=class{constructor(q,U,X,Y,Z,J){this.fActive=!0,this.fA2F=new Q.Interpolator3pt(q,U,X,J,Y,J),this.fF2A=new Q.Interpolator(Y,J,q,X)}uiToFaust(q){return this.fA2F.returnMappedValue(q)}faustToUi(q){return this.fF2A.returnMappedValue(q)}setMappingValues(q,U,X,Y,Z,J){this.fA2F=new Q.Interpolator3pt(q,U,X,J,Y,J),this.fF2A=new Q.Interpolator(Y,J,q,X)}getMappingValues(q,U,X){return this.fA2F.getMappingValues(q,U,X)}setActive(q){this.fActive=q}getActive(){return this.fActive}};return this._DownUpConverter}static buildHandler(q,U,X,Y,Z,J,K){switch(q){case 0:return new Q.UpConverter(U,X,Y,Z,J,K);case 1:return new Q.DownConverter(U,X,Y,Z,J,K);case 2:return new Q.UpDownConverter(U,X,Y,Z,J,K);case 3:return new Q.DownUpConverter(U,X,Y,Z,J,K);default:return new Q.UpConverter(U,X,Y,Z,J,K)}}},m=class{constructor(Q,q){this.memory=Q,this.allocatedBytes=q}alloc(Q){const q=this.allocatedBytes,U=q+Q,X=this.memory.buffer.byteLength;if(U>X){const Y=Math.ceil((U-X)/65536);console.log(`GROW: ${Y} pages`),this.memory.grow(Y)}return this.allocatedBytes=U,q}getBuffer(){return this.memory.buffer}getInt32Array(){return new Int32Array(this.memory.buffer)}getInt64Array(){return new BigInt64Array(this.memory.buffer)}getFloat32Array(){return new Float32Array(this.memory.buffer)}getFloat64Array(){return new Float64Array(this.memory.buffer)}},f=class Q{static get MAX_SOUNDFILE_PARTS(){return 256}static get MAX_CHAN(){return 64}static get BUFFER_SIZE(){return 1024}static get SAMPLE_RATE(){return 44100}constructor(q,U,X,Y,Z,J){this.fSampleSize=U,this.fIntSize=this.fSampleSize,this.fPtrSize=4,this.fAllocator=q,console.log(`Soundfile constructor: curChan: ${X}, length: ${Y}, maxChan: ${Z}, totalParts: ${J}`),this.fPtr=q.alloc(4*this.fPtrSize),this.fLength=q.alloc(Q.MAX_SOUNDFILE_PARTS*this.fIntSize),this.fSR=q.alloc(Q.MAX_SOUNDFILE_PARTS*this.fIntSize),this.fOffset=q.alloc(Q.MAX_SOUNDFILE_PARTS*this.fIntSize),this.fBuffers=this.allocBuffers(X,Y,Z);const K=this.fAllocator.getInt32Array();K[this.fPtr>>2]=this.fBuffers,K[this.fPtr+this.fPtrSize>>2]=this.fLength,K[this.fPtr+2*this.fPtrSize>>2]=this.fSR,K[this.fPtr+3*this.fPtrSize>>2]=this.fOffset;for(let G=0;G<X;G++){const R=K[(this.fBuffers>>2)+G];console.log(`allocBuffers AFTER: ${G} - ${R}`)}}allocBuffers(q,U,X){const Y=this.fAllocator.alloc(X*this.fPtrSize);console.log(`allocBuffers buffers: ${Y}`);for(let Z=0;Z<q;Z++){const J=this.fAllocator.alloc(U*this.fSampleSize),K=this.fAllocator.getInt32Array();K[(Y>>2)+Z]=J}return Y}shareBuffers(q,U){const X=this.fAllocator.getInt32Array();for(let Y=q;Y<U;Y++)X[(this.fBuffers>>2)+Y]=X[(this.fBuffers>>2)+Y%q]}copyToOut(q,U,X,Y){if(this.fIntSize===4){const Z=this.fAllocator.getInt32Array();Z[(this.fLength>>Math.log2(this.fIntSize))+q]=Y.audioBuffer[0].length,Z[(this.fSR>>Math.log2(this.fIntSize))+q]=Y.sampleRate,Z[(this.fOffset>>Math.log2(this.fIntSize))+q]=X}else{const Z=this.fAllocator.getInt64Array();Z[(this.fLength>>Math.log2(this.fIntSize))+q]=BigInt(Y.audioBuffer[0].length),Z[(this.fSR>>Math.log2(this.fIntSize))+q]=BigInt(Y.sampleRate),Z[(this.fOffset>>Math.log2(this.fIntSize))+q]=BigInt(X)}if(console.log(`copyToOut: part: ${q}, maxChannels: ${U}, offset: ${X}, buffer: ${Y}`),this.fSampleSize===8)this.copyToOutReal64(U,X,Y);else this.copyToOutReal32(U,X,Y)}copyToOutReal32(q,U,X){const Y=this.fAllocator.getInt32Array(),Z=this.fAllocator.getFloat32Array();for(let J=0;J<X.audioBuffer.length;J++){const K=X.audioBuffer[J],G=Y[(this.fBuffers>>2)+J],R=G+U*this.fSampleSize>>Math.log2(this.fSampleSize),T=G+(U+K.length)*this.fSampleSize>>Math.log2(this.fSampleSize);console.log(`copyToOutReal32 begin: ${R}, end: ${T}, delta: ${T-R}`);const k=Z.subarray(G+U*this.fSampleSize>>Math.log2(this.fSampleSize),G+(U+K.length)*this.fSampleSize>>Math.log2(this.fSampleSize));for(let W=0;W<K.length;W++)k[W]=K[W]}}copyToOutReal64(q,U,X){const Y=this.fAllocator.getInt32Array(),Z=this.fAllocator.getFloat64Array();for(let J=0;J<X.audioBuffer.length;J++){const K=X.audioBuffer[J],G=Y[(this.fBuffers>>2)+J],R=G+U*this.fSampleSize>>Math.log2(this.fSampleSize),T=G+(U+K.length)*this.fSampleSize>>Math.log2(this.fSampleSize);console.log(`copyToOutReal64 begin: ${R}, end: ${T}, delta: ${T-R}`);const k=Z.subarray(G+U*this.fSampleSize>>Math.log2(this.fSampleSize),G+(U+K.length)*this.fSampleSize>>Math.log2(this.fSampleSize));for(let W=0;W<K.length;W++)k[W]=K[W]}}emptyFile(q,U){if(this.fIntSize===4){const X=this.fAllocator.getInt32Array();X[(this.fLength>>Math.log2(this.fIntSize))+q]=Q.BUFFER_SIZE,X[(this.fSR>>Math.log2(this.fIntSize))+q]=Q.SAMPLE_RATE,X[(this.fOffset>>Math.log2(this.fIntSize))+q]=U}else{const X=this.fAllocator.getInt64Array();X[(this.fLength>>Math.log2(this.fIntSize))+q]=BigInt(Q.BUFFER_SIZE),X[(this.fSR>>Math.log2(this.fIntSize))+q]=BigInt(Q.SAMPLE_RATE),X[(this.fOffset>>Math.log2(this.fIntSize))+q]=BigInt(U)}return U+Q.BUFFER_SIZE}displayMemory(q=\"\",U=!1){console.log(\"Soundfile memory: \"+q),console.log(`fPtr: ${this.fPtr}`),console.log(`fBuffers: ${this.fBuffers}`),console.log(`fLength: ${this.fLength}`),console.log(`fSR: ${this.fSR}`),console.log(`fOffset: ${this.fOffset}`);const X=this.fAllocator.getInt32Array();if(U)console.log(`HEAP32: ${X}`);console.log(`HEAP32[this.fPtr >> 2]: ${X[this.fPtr>>2]}`),console.log(`HEAP32[(this.fPtr + ptrSize) >> 2]: ${X[this.fPtr+this.fPtrSize>>2]}`),console.log(`HEAP32[(this.fPtr + 2 * ptrSize) >> 2]: ${X[this.fPtr+2*this.fPtrSize>>2]}`),console.log(`HEAP32[(this.fPtr + 3 * ptrSize) >> 2]: ${X[this.fPtr+3*this.fPtrSize>>2]}`)}getPtr(){return this.fPtr}getHEAP32(){return this.fAllocator.getInt32Array()}getHEAPFloat32(){return this.fAllocator.getFloat32Array()}getHEAPFloat64(){return this.fAllocator.getFloat64Array()}},P=class Q{constructor(q,U,X){this.fOutputHandler=null,this.fComputeHandler=null,this.fPlotHandler=null,this.fCachedEvents=[],this.fBufferNum=0,this.fInChannels=[],this.fOutChannels=[],this.fOutputsTimer=5,this.fInputsItems=[],this.fOutputsItems=[],this.fDescriptor=[],this.fSoundfiles=[],this.fSoundfileBuffers={},this.fPitchwheelLabel=[],this.fCtrlLabel=new Array(128).fill(null).map(()=>[]),this.fPathTable={},this.fUICallback=(Y)=>{if(Y.type===\"hbargraph\"||Y.type===\"vbargraph\")this.fOutputsItems.push(Y.address),this.fPathTable[Y.address]=Y.index;else if(Y.type===\"vslider\"||Y.type===\"hslider\"||Y.type===\"button\"||Y.type===\"checkbox\"||Y.type===\"nentry\"){if(this.fInputsItems.push(Y.address),this.fPathTable[Y.address]=Y.index,this.fDescriptor.push(Y),!Y.meta)return;Y.meta.forEach((Z)=>{const{midi:J,acc:K,gyr:G}=Z;if(J){const R=J.trim();if(R===\"pitchwheel\"){const T=R.match(/^pitchwheel\\s(\\d+)/);if(T)this.fPitchwheelLabel.push({path:Y.address,chan:parseInt(T[1]),min:Y.min,max:Y.max});else this.fPitchwheelLabel.push({path:Y.address,chan:0,min:Y.min,max:Y.max})}else{const T=R.match(/^ctrl\\s(\\d+)\\s(\\d+)/),k=R.match(/^ctrl\\s(\\d+)/);if(T)this.fCtrlLabel[parseInt(T[1])].push({path:Y.address,chan:parseInt(T[2]),min:Y.min,max:Y.max});else if(k)this.fCtrlLabel[parseInt(k[1])].push({path:Y.address,chan:0,min:Y.min,max:Y.max})}}if(K){const R=K.trim().split(\" \").map(Number);this.setupAccHandler(Y.address,l.convertToAxis(R[0]),l.convertToCurve(R[1]),R[2],R[3],R[4],Y.min,Y.init,Y.max)}if(G){const R=G.trim().split(\" \").map(Number);this.setupGyrHandler(Y.address,l.convertToAxis(R[0]),l.convertToCurve(R[1]),R[2],R[3],R[4],Y.min,Y.init,Y.max)}})}else if(Y.type===\"soundfile\")this.fSoundfiles.push({name:Y.label,url:Y.url,index:Y.index,basePtr:-1})},this.fProcessing=!1,this.fDestroyed=!1,this.fFirstCall=!0,this.fBufferSize=U,this.fPtrSize=q,this.fSampleSize=q,this.fSoundfileBuffers=X,this.fAcc={x:[],y:[],z:[]},this.fGyr={x:[],y:[],z:[]}}static remap(q,U,X,Y,Z){return(q-U)/(X-U)*(Z-Y)+Y}static parseUI(q,U){q.forEach((X)=>this.parseGroup(X,U))}static parseGroup(q,U){if(q.items)this.parseItems(q.items,U)}static parseItems(q,U){q.forEach((X)=>this.parseItem(X,U))}static parseItem(q,U){if(q.type===\"vgroup\"||q.type===\"hgroup\"||q.type===\"tgroup\")this.parseItems(q.items,U);else U(q)}static splitSoundfileNames(q){return q.replace(/^\\{|\\}$/g,\"\").split(\";\").map((X)=>X.length<=2?\"\":X.substring(1,X.length-1))}get hasAccInput(){return this.fAcc.x.length+this.fAcc.y.length+this.fAcc.z.length>0}propagateAcc(q,U=!1){const{x:X,y:Y,z:Z}=q;if(U){if(X!==null)this.fAcc.x.forEach((J)=>J(-X));if(Y!==null)this.fAcc.y.forEach((J)=>J(-Y));if(Z!==null)this.fAcc.z.forEach((J)=>J(-Z))}else{if(X!==null)this.fAcc.x.forEach((J)=>J(X));if(Y!==null)this.fAcc.y.forEach((J)=>J(Y));if(Z!==null)this.fAcc.z.forEach((J)=>J(Z))}}get hasGyrInput(){return this.fGyr.x.length+this.fGyr.y.length+this.fGyr.z.length>0}propagateGyr(q){const{alpha:U,beta:X,gamma:Y}=q;if(U!==null)this.fGyr.x.forEach((Z)=>Z(U));if(X!==null)this.fGyr.y.forEach((Z)=>Z(X));if(Y!==null)this.fGyr.z.forEach((Z)=>Z(Y))}setupAccHandler(q,U,X,Y,Z,J,K,G,R){const T=l.buildHandler(X,Y,Z,J,K,G,R);switch(U){case 0:this.fAcc.x.push((k)=>this.setParamValue(q,T.uiToFaust(k)));break;case 1:this.fAcc.y.push((k)=>this.setParamValue(q,T.uiToFaust(k)));break;case 2:this.fAcc.z.push((k)=>this.setParamValue(q,T.uiToFaust(k)));break}}setupGyrHandler(q,U,X,Y,Z,J,K,G,R){const T=l.buildHandler(X,Y,Z,J,K,G,R);switch(U){case 0:this.fGyr.x.push((k)=>this.setParamValue(q,T.uiToFaust(k)));break;case 1:this.fGyr.y.push((k)=>this.setParamValue(q,T.uiToFaust(k)));break;case 2:this.fGyr.z.push((k)=>this.setParamValue(q,T.uiToFaust(k)));break}}static extractUrlsFromMeta(q){const U=q.meta.find((X)=>X.soundfiles!==void 0);if(U)return U.soundfiles.split(\";\").filter((X)=>X!==\"\");else return[]}loadSoundfile(q,U,X,Y){console.log(`Soundfile ${X} paths: ${Y}`);const Z=Q.splitSoundfileNames(Y),J=this.fSoundfiles.find((K)=>K.url===Y);if(!J)throw new Error(`Soundfile with ${Y} cannot be found !}`);if(J.basePtr!==-1){const K=q.getInt32Array();console.log(`Soundfile CACHE ${Y}} : ${X} loaded at ${J.basePtr} in wasm memory with index ${J.index}`),K[U+J.index>>2]=J.basePtr}else{const K=this.createSoundfile(q,Z,this.fSoundfileBuffers);if(K){const G=K.getHEAP32();J.basePtr=K.getPtr(),console.log(`Soundfile ${X} loaded at ${J.basePtr} in wasm memory with index ${J.index}`),G[U+J.index>>2]=J.basePtr}else console.log(`Soundfile ${X} for ${Y} cannot be created !}`)}}createSoundfile(q,U,X,Y=f.MAX_CHAN){let Z=1,J=0;for(let R of U){let T=0,k=0;const W=X[R];if(W)T=W.audioBuffer.length,k=W.audioBuffer[0].length;else k=f.BUFFER_SIZE,T=1;Z=Math.max(Z,T),J+=k}J+=(f.MAX_SOUNDFILE_PARTS-U.length)*f.BUFFER_SIZE;const K=new f(q,this.fSampleSize,Z,J,Y,U.length);let G=0;for(let R=0;R<U.length;R++){const T=U[R],k=X[T];if(k)K.copyToOut(R,Y,G,k),G+=k.audioBuffer[0].length;else G=K.emptyFile(R,G)}for(let R=U.length;R<f.MAX_SOUNDFILE_PARTS;R++)G=K.emptyFile(R,G);return K.shareBuffers(Z,Y),K}initSoundfileMemory(q,U){for(let{name:X,url:Y}of this.fSoundfiles)this.loadSoundfile(q,U,X,Y)}updateOutputs(){if(this.fOutputsItems.length>0&&this.fOutputHandler&&this.fOutputsTimer--===0)this.fOutputsTimer=5,this.fOutputsItems.forEach((q)=>{var U;return(U=this.fOutputHandler)==null?void 0:U.call(this,q,this.getParamValue(q))})}metadata(q){if(this.fJSONDsp.meta)this.fJSONDsp.meta.forEach((U)=>q(Object.keys(U)[0],U[Object.keys(U)[0]]))}compute(q,U){return!1}setOutputParamHandler(q){this.fOutputHandler=q}getOutputParamHandler(){return this.fOutputHandler}setComputeHandler(q){this.fComputeHandler=q}getComputeHandler(){return this.fComputeHandler}setPlotHandler(q){this.fPlotHandler=q}getPlotHandler(){return this.fPlotHandler}getNumInputs(){return-1}getNumOutputs(){return-1}midiMessage(q){if(this.fPlotHandler)this.fCachedEvents.push({data:q,type:\"midi\"});const U=q[0]>>4,X=q[0]&15,Y=q[1],Z=q[2];if(U===11)return this.ctrlChange(X,Y,Z);if(U===14)return this.pitchWheel(X,Z*128+Y)}ctrlChange(q,U,X){if(this.fPlotHandler)this.fCachedEvents.push({type:\"ctrlChange\",data:[q,U,X]});if(this.fCtrlLabel[U].length)this.fCtrlLabel[U].forEach((Y)=>{const{path:Z,chan:J}=Y;if(J===0||q===J-1){if(this.setParamValue(Z,Q.remap(X,0,127,Y.min,Y.max)),this.fOutputHandler)this.fOutputHandler(Z,this.getParamValue(Z))}})}pitchWheel(q,U){if(this.fPlotHandler)this.fCachedEvents.push({type:\"pitchWheel\",data:[q,U]});this.fPitchwheelLabel.forEach((X)=>{const{path:Y,chan:Z}=X;if(Z===0||q===Z-1){if(this.setParamValue(Y,Q.remap(U,0,16383,X.min,X.max)),this.fOutputHandler)this.fOutputHandler(Y,this.getParamValue(Y))}})}setParamValue(q,U){}getParamValue(q){return 0}getParams(){return this.fInputsItems}getMeta(){return this.fJSONDsp}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.fJSONDsp.ui}getDescriptors(){return this.fDescriptor}hasSoundfiles(){return this.fSoundfiles.length>0}start(){this.fProcessing=!0}stop(){this.fProcessing=!1}destroy(){this.fDestroyed=!0,this.fOutputHandler=null,this.fComputeHandler=null,this.fPlotHandler=null}},n=class extends P{constructor(Q,q,U,X,Y){super(U,X,Y);if(this.fInstance=Q,console.log(`sampleSize: ${U} bufferSize: ${X}`),this.fJSONDsp=JSON.parse(this.fInstance.json),P.parseUI(this.fJSONDsp.ui,this.fUICallback),this.fEndMemory=this.initMemory(),this.fInstance.api.init(this.fDSP,q),this.fSoundfiles.length>0){const Z=new m(this.fInstance.memory,this.fEndMemory);this.initSoundfileMemory(Z,this.fDSP)}}initMemory(){this.fDSP=0;const Q=this.fJSONDsp.size;this.fAudioInputs=Q,this.fAudioOutputs=this.fAudioInputs+this.getNumInputs()*this.fPtrSize;const q=this.fAudioOutputs+this.getNumOutputs()*this.fPtrSize,U=q+this.getNumInputs()*this.fBufferSize*this.fSampleSize,X=U+this.getNumOutputs()*this.fBufferSize*this.fSampleSize,Y=this.fInstance.memory.buffer,Z=new Int32Array(Y),J=this.fSampleSize===4?new Float32Array(Y):new Float64Array(Y);if(this.getNumInputs()>0){for(let G=0;G<this.getNumInputs();G++)Z[(this.fAudioInputs>>2)+G]=q+this.fBufferSize*this.fSampleSize*G;const K=Z.subarray(this.fAudioInputs>>2,this.fAudioInputs+this.getNumInputs()*this.fPtrSize>>2);for(let G=0;G<this.getNumInputs();G++)this.fInChannels[G]=J.subarray(K[G]>>Math.log2(this.fSampleSize),K[G]+this.fBufferSize*this.fSampleSize>>Math.log2(this.fSampleSize))}if(this.getNumOutputs()>0){for(let G=0;G<this.getNumOutputs();G++)Z[(this.fAudioOutputs>>2)+G]=U+this.fBufferSize*this.fSampleSize*G;const K=Z.subarray(this.fAudioOutputs>>2,this.fAudioOutputs+this.getNumOutputs()*this.fPtrSize>>2);for(let G=0;G<this.getNumOutputs();G++)this.fOutChannels[G]=J.subarray(K[G]>>Math.log2(this.fSampleSize),K[G]+this.fBufferSize*this.fSampleSize>>Math.log2(this.fSampleSize))}return X}toString(){return`============== Mono Memory layout ==============\n        this.fBufferSize: ${this.fBufferSize}\n        this.fJSONDsp.size: ${this.fJSONDsp.size}\n        this.fAudioInputs: ${this.fAudioInputs}\n        this.fAudioOutputs: ${this.fAudioOutputs}\n        this.fDSP: ${this.fDSP}`}compute(Q,q){if(this.fDestroyed)return!1;if(!this.fProcessing)return!0;if(this.fFirstCall)this.initMemory(),this.fFirstCall=!1;if(typeof Q===\"function\")Q(this.fInChannels);else{if(this.getNumInputs()>0&&(!Q||!Q[0]||Q[0].length===0))return!0;if(this.getNumOutputs()>0&&typeof q!==\"function\"&&(!q||!q[0]||q[0].length===0))return!0;if(Q!==void 0)for(let X=0;X<Math.min(this.getNumInputs(),Q.length);X++)this.fInChannels[X].set(Q[X])}if(this.fComputeHandler)this.fComputeHandler(this.fBufferSize);this.fInstance.api.compute(this.fDSP,this.fBufferSize,this.fAudioInputs,this.fAudioOutputs),this.updateOutputs();let U=this.fOutChannels;if(typeof q===\"function\")q(this.fOutChannels);else{for(let X=0;X<Math.min(this.getNumOutputs(),q.length);X++){const Y=this.fOutChannels[X];q[X].set(Y)}U=q}if(this.fPlotHandler)this.fPlotHandler(U,this.fBufferNum++,this.fCachedEvents.length?this.fCachedEvents:void 0),this.fCachedEvents=[];return!0}metadata(Q){super.metadata(Q)}getNumInputs(){return this.fInstance.api.getNumInputs(this.fDSP)}getNumOutputs(){return this.fInstance.api.getNumOutputs(this.fDSP)}setParamValue(Q,q){if(this.fPlotHandler)this.fCachedEvents.push({type:\"param\",data:{path:Q,value:q}});this.fInstance.api.setParamValue(this.fDSP,this.fPathTable[Q],q)}getParamValue(Q){return this.fInstance.api.getParamValue(this.fDSP,this.fPathTable[Q])}getMeta(){return this.fJSONDsp}getJSON(){return this.fInstance.json}getDescriptors(){return this.fDescriptor}getUI(){return this.fJSONDsp.ui}},S=class Q{constructor(q,U,X,Y,Z){this.fFreqLabel=[],this.fGateLabel=[],this.fGainLabel=[],this.fKeyLabel=[],this.fVelLabel=[],this.fCurNote=Q.kFreeVoice,this.fNextNote=-1,this.fNextVel=-1,this.fDate=0,this.fLevel=0,this.fRelease=0,this.fDSP=q,this.fAPI=U,this.fAPI.init(this.fDSP,Z),this.extractPaths(X,Y)}static get kActiveVoice(){return 0}static get kFreeVoice(){return-1}static get kReleaseVoice(){return-2}static get kLegatoVoice(){return-3}static get kNoVoice(){return-4}static get VOICE_STOP_LEVEL(){return 0.0005}static midiToFreq(q){return 440*2**((q-69)/12)}static normalizeVelocity(q){return q/127}extractPaths(q,U){q.forEach((X)=>{if(X.endsWith(\"/gate\"))this.fGateLabel.push(U[X]);else if(X.endsWith(\"/freq\"))this.fFreqLabel.push(U[X]);else if(X.endsWith(\"/key\"))this.fKeyLabel.push(U[X]);else if(X.endsWith(\"/gain\"))this.fGainLabel.push(U[X]);else if(X.endsWith(\"/vel\")&&X.endsWith(\"/velocity\"))this.fVelLabel.push(U[X])})}keyOn(q,U,X=!1){if(X)this.fNextNote=q,this.fNextVel=U;else this.fFreqLabel.forEach((Y)=>this.fAPI.setParamValue(this.fDSP,Y,Q.midiToFreq(q))),this.fGateLabel.forEach((Y)=>this.fAPI.setParamValue(this.fDSP,Y,1)),this.fGainLabel.forEach((Y)=>this.fAPI.setParamValue(this.fDSP,Y,Q.normalizeVelocity(U))),this.fKeyLabel.forEach((Y)=>this.fAPI.setParamValue(this.fDSP,Y,q)),this.fVelLabel.forEach((Y)=>this.fAPI.setParamValue(this.fDSP,Y,U)),this.fCurNote=q}keyOff(q=!1){if(this.fGateLabel.forEach((U)=>this.fAPI.setParamValue(this.fDSP,U,0)),q)this.fCurNote=Q.kFreeVoice;else this.fRelease=this.fAPI.getSampleRate(this.fDSP)/2,this.fCurNote=Q.kReleaseVoice}computeLegato(q,U,X,Y){let Z=q/2;this.fGateLabel.forEach((J)=>this.fAPI.setParamValue(this.fDSP,J,0)),this.fAPI.compute(this.fDSP,Z,U,X),this.keyOn(this.fNextNote,this.fNextVel),this.fAPI.compute(this.fDSP,Z,U,Y)}compute(q,U,X){this.fAPI.compute(this.fDSP,q,U,X)}setParamValue(q,U){this.fAPI.setParamValue(this.fDSP,q,U)}getParamValue(q){return this.fAPI.getParamValue(this.fDSP,q)}},e=class Q extends P{constructor(q,U,X,Y,Z){super(X,Y,Z);if(this.fInstance=q,console.log(`sampleSize: ${X} bufferSize: ${Y}`),this.fJSONDsp=JSON.parse(this.fInstance.voiceJSON),this.fJSONEffect=this.fInstance.effectAPI&&this.fInstance.effectJSON?JSON.parse(this.fInstance.effectJSON):null,P.parseUI(this.fJSONDsp.ui,this.fUICallback),this.fJSONEffect)P.parseUI(this.fJSONEffect.ui,this.fUICallback);this.fEndMemory=this.initMemory(),this.fVoiceTable=[];for(let J=0;J<this.fInstance.voices;J++)this.fVoiceTable.push(new S(this.fJSONDsp.size*J,this.fInstance.voiceAPI,this.fInputsItems,this.fPathTable,U));if(this.fInstance.effectAPI)this.fInstance.effectAPI.init(this.fEffect,U);if(this.fSoundfiles.length>0){const J=new m(this.fInstance.memory,this.fEndMemory);for(let K=0;K<this.fInstance.voices;K++)this.initSoundfileMemory(J,this.fJSONDsp.size*K)}}initMemory(){this.fEffect=this.fJSONDsp.size*this.fInstance.voices;const q=this.fEffect+(this.fJSONEffect?this.fJSONEffect.size:0);this.fAudioInputs=q,this.fAudioOutputs=this.fAudioInputs+this.getNumInputs()*this.fPtrSize,this.fAudioMixing=this.fAudioOutputs+this.getNumOutputs()*this.fPtrSize,this.fAudioMixingHalf=this.fAudioMixing+this.getNumOutputs()*this.fPtrSize;const U=this.fAudioMixingHalf+this.getNumOutputs()*this.fPtrSize,X=U+this.getNumInputs()*this.fBufferSize*this.fSampleSize,Y=X+this.getNumOutputs()*this.fBufferSize*this.fSampleSize,Z=Y+this.getNumOutputs()*this.fBufferSize*this.fSampleSize,J=this.fInstance.memory.buffer,K=new Int32Array(J),G=this.fSampleSize===4?new Float32Array(J):new Float64Array(J);if(this.getNumInputs()>0){for(let T=0;T<this.getNumInputs();T++)K[(this.fAudioInputs>>2)+T]=U+this.fBufferSize*this.fSampleSize*T;const R=K.subarray(this.fAudioInputs>>2,this.fAudioInputs+this.getNumInputs()*this.fPtrSize>>2);for(let T=0;T<this.getNumInputs();T++)this.fInChannels[T]=G.subarray(R[T]>>Math.log2(this.fSampleSize),R[T]+this.fBufferSize*this.fSampleSize>>Math.log2(this.fSampleSize))}if(this.getNumOutputs()>0){for(let T=0;T<this.getNumOutputs();T++)K[(this.fAudioOutputs>>2)+T]=X+this.fBufferSize*this.fSampleSize*T,K[(this.fAudioMixing>>2)+T]=Y+this.fBufferSize*this.fSampleSize*T,K[(this.fAudioMixingHalf>>2)+T]=Y+this.fBufferSize*this.fSampleSize*T+this.fBufferSize/2*this.fSampleSize;const R=K.subarray(this.fAudioOutputs>>2,this.fAudioOutputs+this.getNumOutputs()*this.fPtrSize>>2);for(let T=0;T<this.getNumOutputs();T++)this.fOutChannels[T]=G.subarray(R[T]>>Math.log2(this.fSampleSize),R[T]+this.fBufferSize*this.fSampleSize>>Math.log2(this.fSampleSize))}return Z}toString(){return`============== Poly Memory layout ==============\n        this.fBufferSize: ${this.fBufferSize}\n        this.fJSONDsp.size: ${this.fJSONDsp.size}\n        this.fAudioInputs: ${this.fAudioInputs}\n        this.fAudioOutputs: ${this.fAudioOutputs}\n        this.fAudioMixing: ${this.fAudioMixing}\n        this.fAudioMixingHalf: ${this.fAudioMixingHalf}`}allocVoice(q,U){return this.fVoiceTable[q].fDate++,this.fVoiceTable[q].fCurNote=U,q}getPlayingVoice(q){let U=S.kNoVoice,X=Number.MAX_VALUE;for(let Y=0;Y<this.fInstance.voices;Y++)if(this.fVoiceTable[Y].fCurNote===q){if(this.fVoiceTable[Y].fDate<X)X=this.fVoiceTable[Y].fDate,U=Y}return U}getFreeVoice(){for(let Z=0;Z<this.fInstance.voices;Z++)if(this.fVoiceTable[Z].fCurNote===S.kFreeVoice)return this.allocVoice(Z,S.kActiveVoice);let{kNoVoice:q,kNoVoice:U}=S,X=Number.MAX_VALUE,Y=Number.MAX_VALUE;for(let Z=0;Z<this.fInstance.voices;Z++)if(this.fVoiceTable[Z].fCurNote===S.kReleaseVoice){if(this.fVoiceTable[Z].fDate<X)X=this.fVoiceTable[Z].fDate,q=Z}else if(this.fVoiceTable[Z].fDate<Y)Y=this.fVoiceTable[Z].fDate,U=Z;if(X!==Number.MAX_VALUE)return console.log(`Steal release voice : voice_date = ${this.fVoiceTable[q].fDate} voice = ${q}`),this.allocVoice(q,S.kLegatoVoice);if(Y!==Number.MAX_VALUE)return console.log(`Steal playing voice : voice_date = ${this.fVoiceTable[U].fDate} voice = ${U}`),this.allocVoice(U,S.kLegatoVoice);return S.kNoVoice}compute(q,U){if(this.fDestroyed)return!1;if(this.fFirstCall)this.initMemory(),this.fFirstCall=!1;if(!this.fProcessing)return!0;if(this.getNumInputs()>0&&(!q||!q[0]||q[0].length===0))return!0;if(this.getNumOutputs()>0&&(!U||!U[0]||U[0].length===0))return!0;if(q!==void 0)for(let X=0;X<Math.min(this.getNumInputs(),q.length);++X)this.fInChannels[X].set(q[X]);if(this.fComputeHandler)this.fComputeHandler(this.fBufferSize);if(this.fInstance.mixerAPI.clearOutput(this.fBufferSize,this.getNumOutputs(),this.fAudioOutputs),this.fVoiceTable.forEach((X)=>{if(X.fCurNote===S.kLegatoVoice)X.computeLegato(this.fBufferSize,this.fAudioInputs,this.fAudioMixing,this.fAudioMixingHalf),this.fInstance.mixerAPI.fadeOut(this.fBufferSize/2,this.getNumOutputs(),this.fAudioMixing),X.fLevel=this.fInstance.mixerAPI.mixCheckVoice(this.fBufferSize,this.getNumOutputs(),this.fAudioMixing,this.fAudioOutputs);else if(X.fCurNote!==S.kFreeVoice){if(X.compute(this.fBufferSize,this.fAudioInputs,this.fAudioMixing),X.fLevel=this.fInstance.mixerAPI.mixCheckVoice(this.fBufferSize,this.getNumOutputs(),this.fAudioMixing,this.fAudioOutputs),X.fRelease-=this.fBufferSize,X.fCurNote==S.kReleaseVoice&&(X.fLevel<S.VOICE_STOP_LEVEL&&X.fRelease<0))X.fCurNote=S.kFreeVoice}}),this.fInstance.effectAPI)this.fInstance.effectAPI.compute(this.fEffect,this.fBufferSize,this.fAudioOutputs,this.fAudioOutputs);if(this.updateOutputs(),U!==void 0){for(let X=0;X<Math.min(this.getNumOutputs(),U.length);X++){const Y=this.fOutChannels[X];U[X].set(Y)}if(this.fPlotHandler)this.fPlotHandler(U,this.fBufferNum++,this.fCachedEvents.length?this.fCachedEvents:void 0),this.fCachedEvents=[]}return!0}getNumInputs(){return this.fInstance.voiceAPI.getNumInputs(0)}getNumOutputs(){return this.fInstance.voiceAPI.getNumOutputs(0)}static findPath(q,U){if(typeof q!==\"object\")return!1;else if(q.address)return q.address===U;else{for(let X in q)if(Q.findPath(q[X],U))return!0;return!1}}setParamValue(q,U){if(this.fPlotHandler)this.fCachedEvents.push({type:\"param\",data:{path:q,value:U}});if(this.fJSONEffect&&Q.findPath(this.fJSONEffect.ui,q)&&this.fInstance.effectAPI)this.fInstance.effectAPI.setParamValue(this.fEffect,this.fPathTable[q],U);else this.fVoiceTable.forEach((X)=>X.setParamValue(this.fPathTable[q],U))}getParamValue(q){if(this.fJSONEffect&&Q.findPath(this.fJSONEffect.ui,q)&&this.fInstance.effectAPI)return this.fInstance.effectAPI.getParamValue(this.fEffect,this.fPathTable[q]);else return this.fVoiceTable[0].getParamValue(this.fPathTable[q])}getMeta(){const q=this.fJSONDsp,U=this.fJSONEffect,X={...q};if(U)X.ui=[{type:\"tgroup\",label:\"Sequencer\",items:[{type:\"vgroup\",label:\"Instrument\",items:q.ui},{type:\"vgroup\",label:\"Effect\",items:U.ui}]}];else X.ui=[{type:\"tgroup\",label:\"Polyphonic\",items:[{type:\"vgroup\",label:\"Voices\",items:q.ui}]}];return X}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.getMeta().ui}getDescriptors(){return this.fDescriptor}midiMessage(q){const U=q[0]>>4,X=q[0]&15,Y=q[1],Z=q[2];if(U===8||U===9&&Z===0)return this.keyOff(X,Y,Z);else if(U===9)return this.keyOn(X,Y,Z);else super.midiMessage(q)}ctrlChange(q,U,X){if(U===123||U===120)this.allNotesOff(!0);else super.ctrlChange(q,U,X)}keyOn(q,U,X){if(this.fPlotHandler)this.fCachedEvents.push({type:\"keyOn\",data:[q,U,X]});const Y=this.getFreeVoice();this.fVoiceTable[Y].keyOn(U,X,this.fVoiceTable[Y].fCurNote==S.kLegatoVoice)}keyOff(q,U,X){if(this.fPlotHandler)this.fCachedEvents.push({type:\"keyOff\",data:[q,U,X]});const Y=this.getPlayingVoice(U);if(Y!==S.kNoVoice)this.fVoiceTable[Y].keyOff();else console.log(\"Playing pitch = %d not found\\n\",U)}allNotesOff(q=!0){this.fCachedEvents.push({type:\"ctrlChange\",data:[0,123,0]}),this.fVoiceTable.forEach((U)=>U.keyOff(q))}},g0=class{constructor(Q,q){this.fDSPCode=Q,this.fBufferSize=q,this.fInputs=new Array(this.fDSPCode.getNumInputs()).fill(null).map(()=>new Float32Array(q)),this.fOutputs=new Array(this.fDSPCode.getNumOutputs()).fill(null).map(()=>new Float32Array(q))}getParameterDescriptors(){const Q=[],q=(U)=>{let X=null;const Y=[\"/gate\",\"/freq\",\"/gain\",\"/key\",\"/vel\",\"/velocity\"],Z=\"address\"in U&&!!Y.find((J)=>U.address.endsWith(J));if(this.fDSPCode instanceof n||!Z){if(U.type===\"vslider\"||U.type===\"hslider\"||U.type===\"nentry\")X={name:U.address,defaultValue:U.init||0,minValue:U.min||0,maxValue:U.max||0};else if(U.type===\"button\"||U.type===\"checkbox\")X={name:U.address,defaultValue:U.init||0,minValue:0,maxValue:1}}if(X)Q.push(X)};return P.parseUI(this.fDSPCode.getUI(),q),Q}compute(Q,q){return this.fDSPCode.compute(Q,q)}setOutputParamHandler(Q){this.fDSPCode.setOutputParamHandler(Q)}getOutputParamHandler(){return this.fDSPCode.getOutputParamHandler()}setComputeHandler(Q){this.fDSPCode.setComputeHandler(Q)}getComputeHandler(){return this.fDSPCode.getComputeHandler()}setPlotHandler(Q){this.fDSPCode.setPlotHandler(Q)}getPlotHandler(){return this.fDSPCode.getPlotHandler()}getNumInputs(){return this.fDSPCode.getNumInputs()}getNumOutputs(){return this.fDSPCode.getNumOutputs()}metadata(Q){}midiMessage(Q){this.fDSPCode.midiMessage(Q)}ctrlChange(Q,q,U){this.fDSPCode.ctrlChange(Q,q,U)}pitchWheel(Q,q){this.fDSPCode.pitchWheel(Q,q)}setParamValue(Q,q){this.fDSPCode.setParamValue(Q,q)}getParamValue(Q){return this.fDSPCode.getParamValue(Q)}getParams(){return this.fDSPCode.getParams()}getMeta(){return this.fDSPCode.getMeta()}getJSON(){return this.fDSPCode.getJSON()}getDescriptors(){return this.fDSPCode.getDescriptors()}getUI(){return this.fDSPCode.getUI()}start(){this.fDSPCode.start()}stop(){this.fDSPCode.stop()}destroy(){this.fDSPCode.destroy()}get hasAccInput(){return this.fDSPCode.hasAccInput}propagateAcc(Q,q=!1){this.fDSPCode.propagateAcc(Q,q)}get hasGyrInput(){return this.fDSPCode.hasGyrInput}propagateGyr(Q){this.fDSPCode.propagateGyr(Q)}render(Q=[],q=this.fBufferSize,U){let X=0;const Y=new Array(this.fDSPCode.getNumOutputs()).fill(null).map(()=>new Float32Array(q));this.fDSPCode.start();while(X<q){const Z=Math.min(q-X,this.fBufferSize);for(let J=0;J<this.fDSPCode.getNumInputs();J++){let K;if(Q[J])if(Q[J].length<=X)K=new Float32Array(Z);else if(Q[J].length>X+Z)K=Q[J].subarray(X,X+Z);else K=Q[J].subarray(X,Q[J].length);else K=new Float32Array(Z);this.fInputs[J]=K}this.fDSPCode.compute(this.fInputs,this.fOutputs);for(let J=0;J<this.fDSPCode.getNumOutputs();J++){const K=this.fOutputs[J];if(Z<this.fBufferSize)Y[J].set(K.subarray(0,Z),X);else Y[J].set(K,X)}X+=this.fBufferSize,U==null||U(X)}return this.fDSPCode.stop(),Y}},H1=class extends g0{},$1=class extends g0{keyOn(Q,q,U){this.fDSPCode.keyOn(Q,q,U)}keyOff(Q,q,U){this.fDSPCode.keyOff(Q,q,U)}allNotesOff(Q){this.fDSPCode.allNotesOff(Q)}};var O1=class{constructor(Q){this.fModule=Q,this.fCompiler=new Q.libFaustWasm,this.fFileSystem=this.fModule.FS}module(){return this.fModule}fs(){return this.fFileSystem}version(){return this.fCompiler.version()}createDSPFactory(Q,q,U,X){return this.fCompiler.createDSPFactory(Q,q,U,X)}deleteDSPFactory(Q){return this.fCompiler.deleteDSPFactory(Q)}expandDSP(Q,q,U){return this.fCompiler.expandDSP(Q,q,U)}generateAuxFiles(Q,q,U){return this.fCompiler.generateAuxFiles(Q,q,U)}deleteAllDSPFactories(){return this.fCompiler.deleteAllDSPFactories()}getErrorAfterException(){return this.fCompiler.getErrorAfterException()}cleanupAfterException(){return this.fCompiler.cleanupAfterException()}getInfos(Q){return this.fCompiler.getInfos(Q)}toString(){return`LibFaust module: ${this.fModule}, compiler: ${this.fCompiler}`}},b0=O1;var I1=class{static get fallbackPaths(){return[location.href,this.getParentUrl(location.href),location.origin]}static getParentUrl(Q){return Q.substring(0,Q.lastIndexOf(\"/\")+1)}static toAudioData(Q){const{sampleRate:q,numberOfChannels:U}=Q;return{sampleRate:q,audioBuffer:new Array(U).fill(null).map((X,Y)=>Q.getChannelData(Y))}}static findSoundfilesFromMeta(Q){const q={},U=(X)=>{if(X.type===\"soundfile\")P.splitSoundfileNames(X.url).forEach((Z)=>q[Z]=null)};return P.parseUI(Q.ui,U),q}static async checkFileExists(Q){try{console.log(`\"checkFileExists\" url: ${Q}`);const q=await fetch(Q);return console.log(`\"checkFileExists\" response.ok: ${q.ok}`),q.ok}catch(q){return console.error(\"Fetch error:\",q),!1}}static async fetchSoundfile(Q,q){console.log(`Loading sound file from ${Q}`);const U=await fetch(Q);if(!U.ok)throw new Error(`Failed to load sound file from ${Q}: ${U.statusText}`);const X=await U.arrayBuffer(),Y=await q.decodeAudioData(X);return this.toAudioData(Y)}static async loadSoundfile(Q,q,U,X){if(U[Q])return;const Y=[Q,...[...q,...this.fallbackPaths].map((K)=>new URL(Q,K.endsWith(\"/\")?K:`${K}/`).href)],J=(await Promise.all(Y.map((K)=>this.checkFileExists(K)))).findIndex((K)=>!!K);if(J===-1)throw new Error(`Failed to load sound file ${Q}, all check failed.`);U[Q]=await this.fetchSoundfile(Y[J],X)}static async loadSoundfiles(Q,q,U){const X=P.extractUrlsFromMeta(Q),Y=this.findSoundfilesFromMeta(Q);for(let Z in Y){if(q[Z]){Y[Z]=q[Z];continue}try{await this.loadSoundfile(Z,X,Y,U)}catch(J){console.error(J)}}return Y}},o=I1,Y0,Z0,h0=class extends(globalThis.AudioWorkletNode||null){constructor(Q,q,U,X={}){const Y=JSON.parse(U.json);super(Q,q,{numberOfInputs:Y.inputs>0?1:0,numberOfOutputs:Y.outputs>0?1:0,channelCount:Math.max(1,Y.inputs),outputChannelCount:[Y.outputs],channelCountMode:\"explicit\",channelInterpretation:\"speakers\",processorOptions:X.processorOptions,...X});A0(this,Y0,!1),A0(this,Z0,!1),this.handleDeviceMotion=({accelerationIncludingGravity:Z})=>{const J=/Android/i.test(navigator.userAgent);if(!Z)return;const{x:K,y:G,z:R}=Z;this.propagateAcc({x:K,y:G,z:R},J)},this.handleDeviceOrientation=({alpha:Z,beta:J,gamma:K})=>{this.propagateGyr({alpha:Z,beta:J,gamma:K})},this.fJSONDsp=Y,this.fJSON=U.json,this.fOutputHandler=null,this.fComputeHandler=null,this.fPlotHandler=null,this.fDescriptor=[],this.fInputsItems=[],this.fUICallback=(Z)=>{if(Z.type===\"vslider\"||Z.type===\"hslider\"||Z.type===\"button\"||Z.type===\"checkbox\"||Z.type===\"nentry\"){if(this.fInputsItems.push(Z.address),this.fDescriptor.push(Z),!Z.meta)return;Z.meta.forEach((J)=>{const{midi:K,acc:G,gyr:R}=J;if(G)C0(this,Y0,!0);if(R)C0(this,Z0,!0)})}},P.parseUI(this.fJSONDsp.ui,this.fUICallback),this.port.onmessage=(Z)=>{if(Z.data.type===\"param\"&&this.fOutputHandler)this.fOutputHandler(Z.data.path,Z.data.value);else if(Z.data.type===\"plot\"&&this.fPlotHandler)this.fPlotHandler(Z.data.value,Z.data.index,Z.data.events)}}async startSensors(){if(this.hasAccInput)if(window.DeviceMotionEvent)if(typeof window.DeviceMotionEvent.requestPermission===\"function\")try{const Q=await window.DeviceMotionEvent.requestPermission();if(Q===\"granted\")window.addEventListener(\"devicemotion\",this.handleDeviceMotion,!0);else if(Q===\"denied\")throw alert(\"You have denied access to motion and orientation data. To enable it, go to Settings > Safari > Motion & Orientation Access.\"),new Error(\"Unable to access the accelerometer.\")}catch(Q){console.error(Q)}else window.addEventListener(\"devicemotion\",this.handleDeviceMotion,!0);else console.log(\"Cannot set the accelerometer handler.\");if(this.hasGyrInput)if(window.DeviceMotionEvent)if(typeof window.DeviceOrientationEvent.requestPermission===\"function\")try{const Q=await window.DeviceOrientationEvent.requestPermission();if(Q===\"granted\")window.addEventListener(\"deviceorientation\",this.handleDeviceOrientation,!0);else if(Q===\"denied\")throw alert(\"You have denied access to motion and orientation data. To enable it, go to Settings > Safari > Motion & Orientation Access.\"),new Error(\"Unable to access the gyroscope.\")}catch(Q){console.error(Q)}else window.addEventListener(\"deviceorientation\",this.handleDeviceOrientation,!0);else console.log(\"Cannot set the gyroscope handler.\")}stopSensors(){if(this.hasAccInput)window.removeEventListener(\"devicemotion\",this.handleDeviceMotion,!0);if(this.hasGyrInput)window.removeEventListener(\"deviceorientation\",this.handleDeviceOrientation,!0)}setOutputParamHandler(Q){this.fOutputHandler=Q}getOutputParamHandler(){return this.fOutputHandler}setComputeHandler(Q){this.fComputeHandler=Q}getComputeHandler(){return this.fComputeHandler}setPlotHandler(Q){if(this.fPlotHandler=Q,this.fPlotHandler)this.port.postMessage({type:\"setPlotHandler\",data:!0});else this.port.postMessage({type:\"setPlotHandler\",data:!1})}getPlotHandler(){return this.fPlotHandler}setupWamEventHandler(){this.port.postMessage({type:\"setupWamEventHandler\"})}getNumInputs(){return this.fJSONDsp.inputs}getNumOutputs(){return this.fJSONDsp.outputs}compute(Q,q){return!1}metadata(Q){if(this.fJSONDsp.meta)this.fJSONDsp.meta.forEach((q)=>Q(Object.keys(q)[0],q[Object.keys(q)[0]]))}midiMessage(Q){const q=Q[0]>>4,U=Q[0]&15,X=Q[1],Y=Q[2];if(q===11)this.ctrlChange(U,X,Y);else if(q===14)this.pitchWheel(U,Y*128+X);else this.port.postMessage({type:\"midi\",data:Q})}ctrlChange(Q,q,U){const X={type:\"ctrlChange\",data:[Q,q,U]};this.port.postMessage(X)}pitchWheel(Q,q){const U={type:\"pitchWheel\",data:[Q,q]};this.port.postMessage(U)}get hasAccInput(){return M0(this,Y0)}propagateAcc(Q,q=!1){if(!Q)return;const U={type:\"acc\",data:Q,invert:q};this.port.postMessage(U)}get hasGyrInput(){return M0(this,Z0)}propagateGyr(Q){if(!Q)return;const q={type:\"gyr\",data:Q};this.port.postMessage(q)}setParamValue(Q,q){const U={type:\"param\",data:{path:Q,value:q}};this.port.postMessage(U);const X=this.parameters.get(Q);if(X)X.setValueAtTime(q,this.context.currentTime)}getParamValue(Q){const q=this.parameters.get(Q);return q?q.value:0}getParams(){return this.fInputsItems}getMeta(){return this.fJSONDsp}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.fJSONDsp.ui}getDescriptors(){return this.fDescriptor}start(){this.port.postMessage({type:\"start\"})}stop(){this.port.postMessage({type:\"stop\"})}destroy(){this.port.postMessage({type:\"destroy\"}),this.port.close()}};Y0=new WeakMap;Z0=new WeakMap;var D0=class extends h0{constructor(Q,q){super(Q,q.processorOptions.name,q.processorOptions.factory,q);this.onprocessorerror=(U)=>{throw U}}},M1=class extends h0{constructor(Q,q){super(Q,q.processorOptions.name,q.processorOptions.voiceFactory,q);if(this.onprocessorerror=(U)=>{throw U},this.fJSONEffect=q.processorOptions.effectFactory?JSON.parse(q.processorOptions.effectFactory.json):null,this.fJSONEffect)P.parseUI(this.fJSONEffect.ui,this.fUICallback)}keyOn(Q,q,U){const X={type:\"keyOn\",data:[Q,q,U]};this.port.postMessage(X)}keyOff(Q,q,U){const X={type:\"keyOff\",data:[Q,q,U]};this.port.postMessage(X)}allNotesOff(Q){const q={type:\"ctrlChange\",data:[0,123,0]};this.port.postMessage(q)}getMeta(){const Q=this.fJSONDsp,q=this.fJSONEffect,U={...Q};if(q)U.ui=[{type:\"tgroup\",label:\"Sequencer\",items:[{type:\"vgroup\",label:\"Instrument\",items:Q.ui},{type:\"vgroup\",label:\"Effect\",items:q.ui}]}];else U.ui=[{type:\"tgroup\",label:\"Polyphonic\",items:[{type:\"vgroup\",label:\"Voices\",items:Q.ui}]}];return U}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.getMeta().ui}},F0=class extends(globalThis.ScriptProcessorNode||null){constructor(){super(...arguments);this.handleDeviceMotion=void 0,this.handleDeviceOrientation=void 0}init(Q){this.fDSPCode=Q,this.fInputs=new Array(this.fDSPCode.getNumInputs()),this.fOutputs=new Array(this.fDSPCode.getNumOutputs()),this.handleDeviceMotion=({accelerationIncludingGravity:q})=>{const U=/Android/i.test(navigator.userAgent);if(!q)return;const{x:X,y:Y,z:Z}=q;this.propagateAcc({x:X,y:Y,z:Z},U)},this.handleDeviceOrientation=({alpha:q,beta:U,gamma:X})=>{this.propagateGyr({alpha:q,beta:U,gamma:X})},this.onaudioprocess=(q)=>{for(let U=0;U<this.fDSPCode.getNumInputs();U++)this.fInputs[U]=q.inputBuffer.getChannelData(U);for(let U=0;U<this.fDSPCode.getNumOutputs();U++)this.fOutputs[U]=q.outputBuffer.getChannelData(U);return this.fDSPCode.compute(this.fInputs,this.fOutputs)},this.start()}async startSensors(){if(this.hasAccInput)if(window.DeviceMotionEvent)if(typeof window.DeviceMotionEvent.requestPermission===\"function\")try{const Q=await window.DeviceMotionEvent.requestPermission();if(Q===\"granted\")window.addEventListener(\"devicemotion\",this.handleDeviceMotion,!0);else if(Q===\"denied\")throw alert(\"You have denied access to motion and orientation data. To enable it, go to Settings > Safari > Motion & Orientation Access.\"),new Error(\"Unable to access the accelerometer.\")}catch(Q){console.error(Q)}else window.addEventListener(\"devicemotion\",this.handleDeviceMotion,!0);else console.log(\"Cannot set the accelerometer handler.\");if(this.hasGyrInput)if(window.DeviceMotionEvent)if(typeof window.DeviceOrientationEvent.requestPermission===\"function\")try{const Q=await window.DeviceOrientationEvent.requestPermission();if(Q===\"granted\")window.addEventListener(\"deviceorientation\",this.handleDeviceOrientation,!0);else if(Q===\"denied\")throw alert(\"You have denied access to motion and orientation data. To enable it, go to Settings > Safari > Motion & Orientation Access.\"),new Error(\"Unable to access the gyroscope.\")}catch(Q){console.error(Q)}else window.addEventListener(\"deviceorientation\",this.handleDeviceOrientation,!0);else console.log(\"Cannot set the gyroscope handler.\")}stopSensors(){if(this.hasAccInput)window.removeEventListener(\"devicemotion\",this.handleDeviceMotion,!0);if(this.hasGyrInput)window.removeEventListener(\"deviceorientation\",this.handleDeviceOrientation,!0)}compute(Q,q){return this.fDSPCode.compute(Q,q)}setOutputParamHandler(Q){this.fDSPCode.setOutputParamHandler(Q)}getOutputParamHandler(){return this.fDSPCode.getOutputParamHandler()}setComputeHandler(Q){this.fDSPCode.setComputeHandler(Q)}getComputeHandler(){return this.fDSPCode.getComputeHandler()}setPlotHandler(Q){this.fDSPCode.setPlotHandler(Q)}getPlotHandler(){return this.fDSPCode.getPlotHandler()}getNumInputs(){return this.fDSPCode.getNumInputs()}getNumOutputs(){return this.fDSPCode.getNumOutputs()}metadata(Q){}midiMessage(Q){this.fDSPCode.midiMessage(Q)}ctrlChange(Q,q,U){this.fDSPCode.ctrlChange(Q,q,U)}pitchWheel(Q,q){this.fDSPCode.pitchWheel(Q,q)}setParamValue(Q,q){this.fDSPCode.setParamValue(Q,q)}getParamValue(Q){return this.fDSPCode.getParamValue(Q)}getParams(){return this.fDSPCode.getParams()}getMeta(){return this.fDSPCode.getMeta()}getJSON(){return this.fDSPCode.getJSON()}getDescriptors(){return this.fDSPCode.getDescriptors()}getUI(){return this.fDSPCode.getUI()}start(){this.fDSPCode.start()}stop(){this.fDSPCode.stop()}destroy(){this.fDSPCode.destroy()}get hasAccInput(){return this.fDSPCode.hasAccInput}propagateAcc(Q,q=!1){this.fDSPCode.propagateAcc(Q,q)}get hasGyrInput(){return this.fDSPCode.hasGyrInput}propagateGyr(Q){this.fDSPCode.propagateGyr(Q)}},A1=class extends F0{},C1=class extends F0{keyOn(Q,q,U){this.fDSPCode.keyOn(Q,q,U)}keyOff(Q,q,U){this.fDSPCode.keyOff(Q,q,U)}allNotesOff(Q){this.fDSPCode.allNotesOff(Q)}},x0=class Q{constructor(){this.factory=null}async compile(q,U,X,Y){if(this.factory=await q.createMonoDSPFactory(U,X,Y),this.factory)return this.name=U,this;else return null}addSoundfiles(q){if(!this.factory)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");for(let U in q)this.factory.soundfiles[U]=q[U]}getSoundfileList(){if(!this.factory)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");const q=JSON.parse(this.factory.json),U=o.findSoundfilesFromMeta(q);return Object.keys(U)}async createNode(q,U=this.name,X=this.factory,Y=!1,Z=1024,J=(X==null?void 0:X.shaKey)||U,K={}){var G,R;if(!X)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");const T=JSON.parse(X.json),k=T.compile_options.match(\"-double\")?8:4;if(X.soundfiles=await o.loadSoundfiles(T,X.soundfiles||{},q),Y){const W=await d.createAsyncMonoDSPInstance(X),L=new n(W,q.sampleRate,k,Z,X.soundfiles),D=q.createScriptProcessor(Z,L.getNumInputs(),L.getNumOutputs());return Object.setPrototypeOf(D,A1.prototype),D.init(L),D}else{if(!Q.gWorkletProcessors.has(q))Q.gWorkletProcessors.set(q,new Set);if(!((G=Q.gWorkletProcessors.get(q))==null?void 0:G.has(J)))try{const L=`\n// DSP name and JSON string for DSP are generated\nconst faustData = ${JSON.stringify({processorName:J,dspName:U,dspMeta:T,poly:!1})};\n// Implementation needed classes of functions\nvar ${s.name} = ${s.toString()}\nvar FaustDspInstance = ${s.name};\nvar ${P.name} = ${P.toString()}\nvar FaustBaseWebAudioDsp = ${P.name};\nvar ${n.name} = ${n.toString()}\nvar FaustMonoWebAudioDsp = ${n.name};\nvar ${d.name} = ${d.toString()}\nvar FaustWasmInstantiator = ${d.name};\nvar ${f.name} = ${f.toString()}\nvar Soundfile = ${f.name};\nvar ${m.name} = ${m.toString()}\nvar WasmAllocator = ${m.name};\nvar ${l.name} = ${l.toString()}\nvar FaustSensors = ${l.name};\n// Put them in dependencies\nconst dependencies = {\n    FaustBaseWebAudioDsp,\n    FaustMonoWebAudioDsp,\n    FaustWasmInstantiator\n};\n// Generate the actual AudioWorkletProcessor code\n(${J0.toString()})(dependencies, faustData);\n`,D=URL.createObjectURL(new Blob([L],{type:\"text/javascript\"}));await q.audioWorklet.addModule(D),(R=Q.gWorkletProcessors.get(q))==null||R.add(J)}catch(L){throw L}return new D0(q,{processorOptions:{name:J,factory:X,sampleSize:k,...K}})}}async createFFTNode(q,U,X=this.name,Y=this.factory,Z={},J=(Y==null?void 0:Y.shaKey)?`${Y.shaKey}_fft`:X,K={}){var G,R;if(!Y)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");const T=JSON.parse(Y.json),k=T.compile_options.match(\"-double\")?8:4;if(Y.soundfiles=await o.loadSoundfiles(T,Y.soundfiles||{},q),!Q.gWorkletProcessors.has(q))Q.gWorkletProcessors.set(q,new Set);if(!((G=Q.gWorkletProcessors.get(q))==null?void 0:G.has(J)))try{const L=`\n// DSP name and JSON string for DSP are generated\nconst faustData = ${JSON.stringify({processorName:J,dspName:X,dspMeta:T,fftOptions:Z})};\n// Implementation needed classes of functions\nvar ${s.name} = ${s.toString()}\nvar FaustDspInstance = ${s.name};\nvar ${P.name} = ${P.toString()}\nvar FaustBaseWebAudioDsp = ${P.name};\nvar ${n.name} = ${n.toString()}\nvar FaustMonoWebAudioDsp = ${n.name};\nvar ${d.name} = ${d.toString()}\nvar FaustWasmInstantiator = ${d.name};\nvar ${f.name} = ${f.toString()}\nvar Soundfile = ${f.name};\nvar ${m.name} = ${m.toString()}\nvar WasmAllocator = ${m.name};\nvar ${l.name} = ${l.toString()}\nvar FaustSensors = ${l.name};\nvar FFTUtils = ${U.toString()}\n// Put them in dependencies\nconst dependencies = {\n    FaustBaseWebAudioDsp,\n    FaustMonoWebAudioDsp,\n    FaustWasmInstantiator,\n    FFTUtils\n};\n// Generate the actual AudioWorkletProcessor code\n(${Q1.toString()})(dependencies, faustData);\n`,D=URL.createObjectURL(new Blob([L],{type:\"text/javascript\"}));await q.audioWorklet.addModule(D),(R=Q.gWorkletProcessors.get(q))==null||R.add(J)}catch(L){throw L}const W=new D0(q,{channelCount:Math.max(1,Math.ceil(T.inputs/3)),outputChannelCount:[Math.ceil(T.outputs/2)],processorOptions:{name:J,factory:Y,sampleSize:k,...K}});if(Z.fftSize){const L=W.parameters.get(\"fftSize\");if(L)L.value=Z.fftSize}if(Z.fftOverlap){const L=W.parameters.get(\"fftOverlap\");if(L)L.value=Z.fftOverlap}if(typeof Z.defaultWindowFunction===\"number\"){const L=W.parameters.get(\"windowFunction\");if(L)L.value=Z.defaultWindowFunction+1}if(typeof Z.noIFFT===\"boolean\"){const L=W.parameters.get(\"noIFFT\");if(L)L.value=+Z.noIFFT}return W}async createAudioWorkletProcessor(q=this.name,U=this.factory,X=(U==null?void 0:U.shaKey)||q){if(!U)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");const Y=JSON.parse(U.json),Z={FaustBaseWebAudioDsp:P,FaustMonoWebAudioDsp:n,FaustWasmInstantiator:d,FaustPolyWebAudioDsp:void 0,FaustWebAudioDspVoice:void 0};try{return J0(Z,{processorName:X,dspName:q,dspMeta:Y,poly:!1})}catch(J){throw J}}async createOfflineProcessor(q,U,X=this.factory,Y){if(!X)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");const Z=JSON.parse(X.json),J=await d.createAsyncMonoDSPInstance(X),K=Z.compile_options.match(\"-double\")?8:4;if(Y)X.soundfiles=await o.loadSoundfiles(Z,X.soundfiles||{},Y);const G=new n(J,q,K,U,X.soundfiles);return new H1(G,U)}getMeta(){return JSON.parse(this.factory.json)}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.getMeta().ui}};x0.gWorkletProcessors=new Map;var y0=x0,D1=class Q{constructor(){this.voiceFactory=null,this.effectFactory=null}async compile(q,U,X,Y,Z=`dsp_code = environment{\n                ${X}\n            };\n            process = dsp_code.effect;`){try{if(this.effectFactory=await q.createPolyDSPFactory(U,Z,Y),this.effectFactory){const J=JSON.parse(this.effectFactory.json),K=`// Voice output is forced to 2, when DSP is stereo or effect has 2 ins or 2 outs,\n// so that the effect can process the 2 channels of the voice\nadaptOut(1,1,1) = _;\nadaptOut(1,1,2) = _ <: _,0;  // The left channel only is kept\nadaptOut(1,2,1) = _ <: _,_;\nadaptOut(1,2,2) = _ <: _,_;\nadaptOut(2,1,1) = _,_;\nadaptOut(2,1,2) = _,_;\nadaptOut(2,2,1) = _,_;\nadaptOut(2,2,2) = _,_;\nadaptor(F) = adaptOut(outputs(F),${J.inputs},${J.outputs});\ndsp_code = environment{\n    ${X}\n};\nprocess = dsp_code.process : adaptor(dsp_code.process);\n`,G=`// Inputs\nadaptIn(1,1,1) = _;\nadaptIn(1,1,2) = _,_ :> _;  \nadaptIn(1,2,1) = _,_;\nadaptIn(1,2,2) = _,_;\nadaptIn(2,1,1) = _,_ :> _;\nadaptIn(2,1,2) = _,_ :> _;\nadaptIn(2,2,1) = _,_;\nadaptIn(2,2,2) = _,_;\n// Outputs\nadaptOut(1,1) = _ <: _,0;   // The left channel only is kept\nadaptOut(1,2) = _,_;\nadaptOut(2,1) = _ <: _,0;   // The left channel only is kept\nadaptOut(2,2) = _,_;\nadaptorIns(F) = adaptIn(outputs(F),${J.inputs},${J.outputs});\nadaptorOuts = adaptOut(${J.inputs},${J.outputs});\ndsp_code = environment{\n    ${X}\n};\nprocess = adaptorIns(dsp_code.process) : dsp_code.effect : adaptorOuts;\n`;this.voiceFactory=await q.createPolyDSPFactory(U,K,Y);try{this.effectFactory=await q.createPolyDSPFactory(U,G,Y+\" -inpl\")}catch(R){console.warn(R)}}}catch(J){console.warn(J),this.voiceFactory=await q.createPolyDSPFactory(U,X,Y)}if(this.voiceFactory){this.name=U;const K=JSON.parse(this.voiceFactory.json).compile_options.match(\"-double\"),{mixerBuffer:G,mixerModule:R}=await q.getAsyncInternalMixerModule(!!K);return this.mixerBuffer=G,this.mixerModule=R,this}else return null}addSoundfiles(q){if(!this.voiceFactory)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");for(let U in q)this.voiceFactory.soundfiles[U]=q[U]}getSoundfileList(){if(!this.voiceFactory)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");const q=JSON.parse(this.voiceFactory.json),U=o.findSoundfilesFromMeta(q);if(!this.effectFactory)return Object.keys(U);const X=JSON.parse(this.effectFactory.json),Y=o.findSoundfilesFromMeta(X);return Object.keys({...Y,...U})}async createNode(q,U,X=this.name,Y=this.voiceFactory,Z=this.mixerModule,J=this.effectFactory,K=!1,G=1024,R=((Y==null?void 0:Y.shaKey)||\"\")+((J==null?void 0:J.shaKey)||\"\")||`${X}_poly`,T={}){var k,W;if(!Y)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");const L=JSON.parse(Y.json),D=J?JSON.parse(J.json):void 0,F=L.compile_options.match(\"-double\")?8:4;if(Y.soundfiles=await o.loadSoundfiles(L,Y.soundfiles||{},q),J)J.soundfiles=await o.loadSoundfiles(D,J.soundfiles||{},q);if(K){const z=await d.createAsyncPolyDSPInstance(Y,Z,U,J||void 0),g={...J==null?void 0:J.soundfiles,...Y.soundfiles},V=new e(z,q.sampleRate,F,G,g),B=q.createScriptProcessor(G,V.getNumInputs(),V.getNumOutputs());return Object.setPrototypeOf(B,C1.prototype),B.init(V),B}else{if(!Q.gWorkletProcessors.has(q))Q.gWorkletProcessors.set(q,new Set);if(!((k=Q.gWorkletProcessors.get(q))==null?void 0:k.has(R)))try{const g=`\n// DSP name and JSON string for DSP are generated\nconst faustData = ${JSON.stringify({processorName:R,dspName:X,dspMeta:L,poly:!0,effectMeta:D})};\n// Implementation needed classes of functions\nvar ${s.name} = ${s.toString()}\nvar FaustDspInstance = ${s.name};\nvar ${P.name} = ${P.toString()}\nvar FaustBaseWebAudioDsp = ${P.name};\nvar ${e.name} = ${e.toString()}\nvar FaustPolyWebAudioDsp = ${e.name};\nvar ${S.name} = ${S.toString()}\nvar FaustWebAudioDspVoice = ${S.name};\nvar ${d.name} = ${d.toString()}\nvar FaustWasmInstantiator = ${d.name};\nvar ${f.name} = ${f.toString()}\nvar Soundfile = ${f.name};\nvar ${m.name} = ${m.toString()}\nvar WasmAllocator = ${m.name};\nvar ${l.name} = ${l.toString()}\nvar FaustSensors = ${l.name};\n// Put them in dependencies\nconst dependencies = {\n    FaustBaseWebAudioDsp,\n    FaustPolyWebAudioDsp,\n    FaustWasmInstantiator\n};\n// Generate the actual AudioWorkletProcessor code\n(${J0.toString()})(dependencies, faustData);\n`,V=URL.createObjectURL(new Blob([g],{type:\"text/javascript\"}));await q.audioWorklet.addModule(V),(W=Q.gWorkletProcessors.get(q))==null||W.add(R)}catch(g){throw g}return new M1(q,{processorOptions:{name:R,voiceFactory:Y,mixerModule:Z,voices:U,sampleSize:F,effectFactory:J||void 0,...T}})}}async createAudioWorkletProcessor(q=this.name,U=this.voiceFactory,X=this.effectFactory,Y=((U==null?void 0:U.shaKey)||\"\")+((X==null?void 0:X.shaKey)||\"\")||`${q}_poly`){if(!U)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");const Z=JSON.parse(U.json),J=X?JSON.parse(X.json):void 0,K=Z.compile_options.match(\"-double\")?8:4;try{return J0({FaustBaseWebAudioDsp:P,FaustMonoWebAudioDsp:void 0,FaustWasmInstantiator:d,FaustPolyWebAudioDsp:e,FaustWebAudioDspVoice:S},{processorName:Y,dspName:q,dspMeta:Z,poly:!0,effectMeta:J})}catch(G){throw G}}async createOfflineProcessor(q,U,X,Y=this.voiceFactory,Z=this.mixerModule,J=this.effectFactory,K){if(!Y)throw new Error(\"Code is not compiled, please define the factory or call `await this.compile()` first.\");const G=JSON.parse(Y.json),R=J?JSON.parse(J.json):void 0,T=await d.createAsyncPolyDSPInstance(Y,Z,X,J||void 0),k=G.compile_options.match(\"-double\")?8:4;if(K){if(Y.soundfiles=await o.loadSoundfiles(G,Y.soundfiles||{},K),J)J.soundfiles=await o.loadSoundfiles(R,J.soundfiles||{},K)}const W={...J==null?void 0:J.soundfiles,...Y.soundfiles},L=new e(T,q,k,U,W);return new $1(L,U)}getMeta(){const q=this.voiceFactory?JSON.parse(this.voiceFactory.json):null,U=this.effectFactory?JSON.parse(this.effectFactory.json):null,X={...q};if(U)X.ui=[{type:\"tgroup\",label:\"Sequencer\",items:[{type:\"vgroup\",label:\"Instrument\",items:q.ui},{type:\"vgroup\",label:\"Effect\",items:U.ui}]}];else X.ui=[{type:\"tgroup\",label:\"Polyphonic\",items:[{type:\"vgroup\",label:\"Voices\",items:q.ui}]}];return X}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.getMeta().ui}};D1.gWorkletProcessors=new Map;var v0=globalThis;v0.window=globalThis;self.onmessage=async function(Q){try{const q=Q.data,U=q.content,X=q.target,Y=q.faustModuleUrl,Z=q.filename,J=await w0(Y),K=new b0(J);v0.libFaust=K;const G=new S0(K),R=Z.split(\"/\").at(-1).split(\".\")[0].trim();if(X==\"cmajor\"){if(!G.generateAuxFiles(R,U,\"-lang cmajor-hybrid -cn \"+R+\" -o foo.cmajor\"))throw new Error(\"Ooops\");self.postMessage(G.fs().readFile(\"foo.cmajor\",{encoding:\"utf8\"}))}else{const T=new y0;await T.compile(G,R,U,\"-lang wasm-i -json -ct 1 -es 1 -mcd 16 -mdd 1024 -mdy 33 -single -ftz 2\");const k=T.factory.code,W=JSON.parse(T.factory.json),L=btoa(String.fromCharCode(...k));self.postMessage({wasm:L,json:W})}}catch(q){self.postMessage({error:q.message})}};\n\n//# debugId=2D6B6994DDE3484C64756E2164756E21\n//# sourceMappingURL=faust.worker.js.map\n";var iE="../builders/src/cmaj/worker/cmaj_api/cmaj-compiler-wasm.wasm";function N7(A,t){if(t??=[],typeof A=="string")return t.push(A),t;if(Array.isArray(A))return A.forEach((j)=>N7(j,t)),t;if(typeof A=="object"){for(let j in A)N7(A[j],t);return t}return t}var R7=(A=16)=>[...self.crypto.getRandomValues(new Uint32Array(A))].map((t)=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[t%"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".length]).join("");globalThis.generateUniqueId=R7;var oE=async(...A)=>[...new Uint8Array(await crypto.subtle.digest("SHA-256",new TextEncoder().encode(A.join("-"))))].map((t)=>t.toString(16).padStart(2,"0")).join("");class S7{listeners=new Set;add=(A)=>this.listeners.add(A);remove=(A)=>this.listeners.delete(A);trigger=(A)=>this.listeners.forEach((t)=>t(A));dispose=()=>this.listeners.clear()}var X7=async(A,t)=>{const j=A instanceof URL?A:URL.createObjectURL(new Blob([A],{type:"application/javascript"})),k=new Worker(j);try{return await new Promise((e,E)=>{k.onmessage=(r)=>r.data.error?E(r.data.error):e(r.data),k.postMessage(t)})}finally{if(k.terminate(),typeof j=="string")URL.revokeObjectURL(j)}};class qk{A;idb;constructor(A){this.dbName=A}storeRequirements={};indexRequirements={};requireStore=(A,t,j)=>this.storeRequirements[A]??={keyPath:t,autoIncrement:j};requireIndex=(A,t,j)=>(this.indexRequirements[A]??={})[t]??=j;async getDB(A){const t=await(this.idb??=this.createDB(A));if(this.needsUpdate(t))return t.close(),delete this.idb,await this.getDB(!0);return t}createDB(A){return new Promise(async(t,j)=>{const E=(await indexedDB.databases()).find((s)=>s.name==this.dbName)?.version??1,r=A?E+1:E,G=indexedDB.open(this.dbName,r);G.onupgradeneeded=(s)=>{const B=s.target,a=B.result;for(let[$,d]of Object.entries(this.storeRequirements)){if(a.objectStoreNames.contains($))continue;a.createObjectStore($,{keyPath:d.keyPath,autoIncrement:d.autoIncrement})}for(let[$,d]of Object.entries(this.indexRequirements)){const h=B.transaction.objectStore($);if(!h)continue;for(let[x,{keys:o,unique:F,multiEntry:i}]of Object.entries(d)){if(h.indexNames.contains(x)){const n=h.index(x);if((n.unique??!1)==(F??!1)&&(n.multiEntry??!1)==(i??!1)&&JSON.stringify(n.keyPath)==JSON.stringify(o))continue;h.deleteIndex(x)}h.createIndex(x,o,{unique:F,multiEntry:i})}}this.storeRequirements={},this.indexRequirements={}},G.onsuccess=(s)=>t(s.target.result),G.onerror=(s)=>j(`Failed to open database: ${s.target.error}`)})}needsUpdate(A){if(Object.keys(this.storeRequirements).find((j)=>!A.objectStoreNames.contains(j)))return!0;if(Object.entries(this.indexRequirements).length==0)return!1;const t=A.transaction(Object.keys(this.indexRequirements),"readonly");for(let[j,k]of Object.entries(this.indexRequirements)){const e=t.objectStore(j);if(!e)continue;for(let[E,{keys:r,unique:G,multiEntry:s}]of Object.entries(k)){if(!e.indexNames.contains(E))return!0;const B=e.index(E);if((B.unique??!1)!=(G??!1))return!0;if((B.multiEntry??!1)!=(s??!1))return!0;if(JSON.stringify(B.keyPath)!==JSON.stringify(r))return!0}}return!1}async write(A,t){const k=(await this.getDB()).transaction(A,"readwrite"),e=[];let E;try{if(E=await t(Object.fromEntries(A.map((G)=>[G,new uE(k.objectStore(G),e)]))),E===!1){k.abort();return}}catch(G){throw k.abort(),G}const r=e.map((G)=>new Promise((s,B)=>{if(G.readyState=="done"){if(G.error){B(G.error);return}s(G.result);return}G.onsuccess=()=>s(G.result),G.onerror=(a)=>B(a)}));return await Promise.all(r),E}async read(A,t){const k=(await this.getDB()).transaction(A,"readwrite");return await t(Object.fromEntries(A.map((e)=>[e,new Bk(k.objectStore(e))])))}}class Bk{A;constructor(A){this.store=A}get=(A)=>new Promise((t,j)=>{const k=this.store.get(A);k.onsuccess=()=>t(k.result),k.onerror=(e)=>j(e)});all=()=>new Promise((A,t)=>{const j=this.store.getAll();j.onsuccess=()=>A(j.result),j.onerror=(k)=>t(k)});find=(A,t)=>new Promise((j,k)=>{const e=this.store.index(A).getAll(t);e.onsuccess=()=>j(e.result),e.onerror=(E)=>k(E)});findOne=(A,t)=>new Promise((j,k)=>{const e=this.store.index(A).get(t);e.onsuccess=()=>j(e.result),e.onerror=(E)=>k(E)});cursor=(A,t,j)=>new Promise((k,e)=>{const E=this.store.index(A).openCursor(t,j),r=[];E.onsuccess=()=>{const G=E.result;if(!G)return k(r);r.push(G.value),G.continue()},E.onerror=(G)=>e(G)})}class uE extends Bk{t;constructor(A,t){super(A);this.requestQueue=t}set=(A)=>{const t=this.store.put(A);this.requestQueue.push(t)};delete=(A)=>{const t=this.store.delete(A);this.requestQueue.push(t)};clear=()=>{const A=this.store.clear();this.requestQueue.push(A)}}var QB=sE($E(),1);var CA=function(A,t,j,k){if(j==="a"&&!k)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?A!==t||!k:!t.has(A))throw new TypeError("Cannot read private member from an object whose class did not declare it");return j==="m"?k:j==="a"?k.call(A):k?k.value:t.get(A)},n6,X6,Sj;class mE{constructor(...A){n6.set(this,new Map),X6.set(this,new Map),Sj.set(this,new Map);for(let t of A)this.define(t)}define(A,t=!1){for(let[j,k]of Object.entries(A)){if(j=j.toLowerCase(),k=k.map((r)=>r.toLowerCase()),!CA(this,Sj,"f").has(j))CA(this,Sj,"f").set(j,new Set);const e=CA(this,Sj,"f").get(j);let E=!0;for(let r of k){const G=r.startsWith("*");if(r=G?r.slice(1):r,e?.add(r),E)CA(this,X6,"f").set(j,r);if(E=!1,G)continue;const s=CA(this,n6,"f").get(r);if(s&&s!=j&&!t)throw new Error(`"${j} -> ${r}" conflicts with "${s} -> ${r}". Pass \`force=true\` to override this definition.`);CA(this,n6,"f").set(r,j)}}return this}getType(A){if(typeof A!=="string")return null;const t=A.replace(/^.*[/\\]/,"").toLowerCase(),j=t.replace(/^.*\./,"").toLowerCase(),k=t.length<A.length;if(!(j.length<t.length-1)&&k)return null;return CA(this,n6,"f").get(j)??null}getExtension(A){if(typeof A!=="string")return null;return A=A?.split?.(";")[0],(A&&CA(this,X6,"f").get(A.trim().toLowerCase()))??null}getAllExtensions(A){if(typeof A!=="string")return null;return CA(this,Sj,"f").get(A.toLowerCase())??null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(let A of CA(this,Sj,"f").values())Object.freeze(A);return this}_getTestState(){return{types:CA(this,n6,"f"),extensions:CA(this,X6,"f")}}}n6=new WeakMap,X6=new WeakMap,Sj=new WeakMap;var cE=mE;var dE={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(dE);var pE=dE;var hE={"application/prs.cww":["cww"],"application/prs.xsf+xml":["xsf"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["*xfdf"],"application/vnd.age":["age"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["*fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["*mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.pwg-xhtml-print+xml":["xhtm"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml","uo"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["*prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["*sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["*aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif","btf"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.cld":["cld"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.pytha.pyox":["pyo","pyox"],"model/vnd.sap.vds":["vds"],"model/vnd.usda":["usda"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.familysearch.gedcom":["ged"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};Object.freeze(hE);var IE=hE;var JB=new cE(pE,IE);JB.define({"application/json":["cmajorpatch"],"text/plain":["cmajor","ts"]},!0);var HA=(A)=>A.split("/").map((t)=>t.trim()).filter((t)=>(t||".")!=".").filter((t,j,k)=>t!=".."&&k[j+1]!="..").join("/");class WB{A;t;j;disposed=!1;onChange=new S7;onDelete=new S7;get name(){return this.path.split("/").at(-1)??""}constructor(A,t,j){this.fs=A;this.path=t;this.id=j}dispose(){return this.disposed=!0,this.onDispose(),this.onDelete.trigger(),this.onDelete.dispose(),this.onChange.dispose(),this.id}reset(){this.onReset(),this.onChange.trigger()}rename=(A)=>this.disposed?void 0:this.fs.rename(this,A);moveTo=(A)=>this.disposed?void 0:this.fs.rename(this,A+"/"+this.name);unlink=()=>this.disposed?void 0:this.fs.unlink(this);get parent(){return this.fs.get(HA(this.path+"/.."))}}class sk{A;db;watchers=new Set;watch=(A)=>this.watchers.add(A);unwatch=(A)=>this.watchers.delete(A);volumes={};constructor(A="VirtualFS"){this.dbName=A;this.db=new qk(A),this.db.requireStore("volumes","id",!1),this.db.requireIndex("volumes","parentVolumeId",{keys:"parentVolumeId",unique:!1}),this.db.requireStore("entries","id",!1),this.db.requireIndex("entries","[volume,path]",{keys:["volume","path"],unique:!0}),this.db.requireIndex("entries","tags",{keys:"volume",unique:!1}),this.db.requireIndex("entries","volume",{keys:"volume",unique:!1}),this.db.requireIndex("entries","path",{keys:"path",unique:!1}),this.db.requireIndex("entries","[volume,parentPath]",{keys:["volume","parentPath"],unique:!1}),this.db.requireIndex("entries","type",{keys:"type",unique:!1}),this.db.requireIndex("entries","hash",{keys:"hash",unique:!1}),this.db.requireStore("content","hash",!1),globalThis.addEventListener("storage",(t)=>this.forwardWatcherEvents(t,`${A}/change`))}forwardWatcherEvents(A,t){if(A.key!==t||!A.newValue)return;const j=JSON.parse(A.newValue);this.watchers.forEach((k)=>k(j)),this.volumes[j.volume]?.notifyWatchers(j)}getVolumes=async(A="")=>await this.db.read(["volumes"],async(t)=>t.volumes.find("parentVolumeId",A));createVolume=async(A,t={},j="")=>{if(j!=""&&!await this.getVolume(j))throw new Error("Parent volume not found");return await this.db.write(["volumes"],async(k)=>k.volumes.set({id:A,meta:t,parentVolumeId:j})),this.broadcast({type:"volumeAdded"},A),await this.getVolume(A)};broadcast(A,t){if(A=[A].flat(),A.length==0)return;const j={operations:A,timestamp:Date.now(),volume:t};this.watchers.forEach((k)=>k(j)),localStorage?.setItem(`${this.dbName}/change`,JSON.stringify(j))}getVolume=async(A)=>{if(this.volumes[A])return this.volumes[A];const t=await this.db.read(["volumes"],async(j)=>j.volumes.get(A));if(!t)throw new Error("Volume not found: "+A);return this.volumes[A]??=new i6(this,t.id,this.db,this.dbName)};async deleteVolume(A){await(await this.getVolume(A)).delete(),delete this.volumes[A],this.broadcast({type:"volumeRemoved"},A)}}class i6{A;t;j;k;constructor(A,t,j,k){this.vfs=A;this.id=t;this.db=j;this.dbName=k}watchers=new Set;notifyWatchers=(A)=>this.watchers.forEach((t)=>{return A={...A,operations:t.path?A.operations.filter((j)=>j.path?.startsWith(t.path??"")):A.operations},A.operations.length==0?void 0:t.callback(A)});watch=(A,t)=>this.watchers.add({callback:A,path:t});unwatch=(A)=>this.watchers.delete([...this.watchers].find((t)=>t.callback==A));broadcast(A){if(A=[A].flat(),A.length==0)return;const t={operations:A,timestamp:Date.now(),volume:this.id};this.notifyWatchers(t),localStorage?.setItem(`${this.dbName}/change`,JSON.stringify(t))}async readText(A){return this.read(A,"string")}async readBinary(A){return this.read(A,"binary")}async read(A,t){const j=HA(A),k=await this.db.read(["entries","content"],async(e)=>{const E=await e.entries.findOne("[volume,path]",[this.id,j]);if(!E||E.type!=="file")throw new Error("File not found: "+j);return(await e.content.get(E.hash)).content});return t=="string"?new TextDecoder().decode(k):k}getStats=(A)=>{return this.db.read(["entries"],async(t)=>await t.entries.findOne("[volume,path]",[this.id,HA(A)]))};readDir(A,t=!0){const j=HA(A);return this.db.read(["entries"],async(k)=>{if(j!=""){const r=await k.entries.findOne("[volume,path]",[this.id,j]);if(!r)throw new Error(`Directory not found: ${j} ${A}`);if(r.type!="dir")throw new Error("Not a directory")}const e=[],E=async(r)=>{const G=await k.entries.find("[volume,parentPath]",[this.id,r]);if(e.push(...G.map((B)=>({path:B.path,type:B.type,id:B.id,created:B.created,modified:B.modified,size:B.size,hash:B.hash}))),!t)return;const s=JSON.parse(JSON.stringify(G.filter((B)=>B.type==="dir")));for(let B of s)await E(B.path)};return await E(j),e})}async writeFile(A,t){A=HA(A),t=this.normalizeContent(t);const j=A.split("/").slice(0,-1).join("/"),k=await this.hashContents(t);await this.mkdir(j,!0);const e=await this.db.write(["entries","content"],async(E)=>{const r=await E.entries.findOne("[volume,path]",[this.id,A]);if(r?.type=="dir")throw new Error("Cannot write to a directory");const G=r?.id??R7(),s=r?.created??Date.now();if(E.entries.set({id:G,type:"file",volume:this.id,path:A,parentPath:j,size:this.getSize(t),created:s,modified:Date.now(),hash:k}),r?.hash!=k){if(r)await i6.removeContentIfNeeded(r.hash,E.entries,E.content,[r.id]);if(!await E.content.get(k))E.content.set({hash:k,content:t})}return G});return this.broadcast({path:A,type:"writeFile",id:e,hash:k}),e}normalizeContent=(A)=>typeof A==="string"?new TextEncoder().encode(A):A;static async removeContentIfNeeded(A,t,j,k){if((await t.find("hash",A)).filter((E)=>!k.includes(E.id)).length==0)j.delete(A)}async hashContents(A){return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",A))).map((t)=>t.toString(16).padStart(2,"0")).join("")}async mkdir(A,t=!0){if(A=="")return;const k=HA(A).split("/");if(k.length==0)return;const e=[],E=await this.db.write(["entries"],async(r)=>{let G=void 0;do{const s=k.join("/"),B=await r.entries.findOne("[volume,path]",[this.id,s]);if(B?.type==="file")throw new Error(`Cannot create directory ${s}, file exists`);if(!B){const a=R7();G??=a,r.entries.set({id:a,type:"dir",volume:this.id,path:s,parentPath:k.slice(0,-1).join("/"),created:Date.now(),modified:Date.now()}),e.push({path:s,type:"mkdir",id:a})}k.pop()}while(k.length>0&&t);return G});return this.broadcast(e),E}async exists(A){return await this.db.read(["entries"],async(t)=>await t.entries.findOne("[volume,path]",[this.id,HA(A)])!=null)}async unlink(A){const t=HA(A),j=[];await this.db.write(["entries","content"],async(k)=>{const e=async(E)=>{const r=await k.entries.findOne("[volume,path]",[this.id,E]);if(!r)throw new Error("File not found");if(r.type==="dir")for(let G of await k.entries.find("[volume,parentPath]",[this.id,E]))await e(G.path);else i6.removeContentIfNeeded(r.hash,k.entries,k.content,[r.id]);k.entries.delete(r.id),j.push({path:E,type:"unlink",id:r.id})};await e(t)}),this.broadcast(j)}async rename(A,t){const j=[];await this.db.write(["entries"],async(k)=>{const e=HA(A),E=HA(t),r=async(G,s)=>{const B=await k.entries.findOne("[volume,path]",[this.id,G]);if(!B)throw new Error("File not found");if(j.push({path:s,oldPath:G,type:"rename",id:B.id}),B.type==="dir"){const $=await k.entries.find("[volume,parentPath]",[this.id,G]);for(let d of $)await r(d.path,s+d.path.slice(G.length))}const a=s.split("/").slice(0,-1).join("/");k.entries.set({...B,path:s,parentPath:a,modified:Date.now()})};await r(e,E)}),this.broadcast(j)}getSize=(A)=>A.length??A.size??A.byteLength??0;getById=async(A)=>await this.db.read(["entries"],async(t)=>await t.entries.get(A));close=()=>this.watchers=new Set;async delete(){await this.db.write(["entries","content","volumes"],async(A)=>{const t=await A.entries.find("volume",this.id),j={};t.forEach((k)=>{A.entries.delete(k.id),j[k.hash]??=[],j[k.hash].push(k.id)});for(let k in j)await i6.removeContentIfNeeded(k,A.entries,A.content,j[k]);A.volumes.delete(this.id)})}async clear(){await this.db.write(["entries","content"],async(A)=>{const t=await A.entries.find("volume",this.id),j={};t.forEach((k)=>{A.entries.delete(k.id),j[k.hash]??=[],j[k.hash].push(k.id)});for(let k in j)await i6.removeContentIfNeeded(k,A.entries,A.content,j[k])})}async cloneTo(A,t="",j=""){if(t=HA(t),t!="")t+="/";return j=HA(j)+"/",await this.db.write(["entries"],async(k)=>{(await k.entries.find("volume",this.id)).filter((E)=>E.path.startsWith(t)).forEach((E)=>k.entries.set({...E,volume:A.id,path:HA(j+"/"+E.path.slice(t.length))}))}),A}}var vo=sE(lq(),1);class y6{static ownedManagers=new Map;static get(A){let t=this.ownedManagers.get(A);if(t==null)t=new y6(1),this.ownedManagers.set(A,t);return t}static addTask(A,t){return y6.get(A).addTask(t)}static await(A){return y6.get(A).wait()}max;tasks;queue;all;constructor(A){this.max=A,this.tasks=0,this.queue=[],this.all=[]}addTask(A){let t,j;const k=new Promise((E,r)=>{t=E,j=r});this.all.push(k);const e=async()=>{try{const E=await A();t(E)}catch(E){j(E)}finally{this.tasks--,this.processNextTask();const E=this.all.indexOf(k);if(E>-1)this.all.splice(E,1)}};if(this.tasks<this.max)this.tasks++,e();else this.queue.push(e);return k}processNextTask(){if(this.queue.length>0&&this.tasks<this.max){const A=this.queue.shift();this.tasks++,A()}}async wait(){const A=[...this.all];await Promise.all(A)}}var rq=(A)=>typeof A=="string"?new Uint8Array([...atob(A)].map((t)=>t.charCodeAt(0))):A;var _t="../builders/node_modules/@grame/faustwasm/libfaust-wasm/libfaust-wasm.js";var mo=import.meta.resolve(_t),co=nE.replaceAll("./cmaj-compiler-wasm.wasm",new URL(iE,import.meta.url).href);class qq{processFiles=(A)=>this.process(A)}class Bq extends qq{cache={};process=async(A)=>Object.fromEntries(await Promise.all(Object.entries(A).map(async([t,{content:j,hash:k}])=>{if(!t.endsWith(".dsp"))return[t,{content:j,hash:k}];const e=`faust_${k}`;return this.cache[k]??=await this.compile(j,e),[t+".cmajor",{content:this.cache[k].replaceAll(e,t.split("/").at(-1).split(".")[0]),hash:k}]})));compile=async(A,t)=>{return await X7(rk,{content:A,faustModuleUrl:mo,filename:t,target:"cmajor"})}}class po{static type="cmajor";static cache={};static preprocessors=[new Bq];static test=(A)=>A.endsWith(".cmajorpatch");static async update(A,t,j){const k=t.path,e=JSON.parse(await t.content);let E=HA(k+"/../");if(E!="")E+="/";const r=N7(e.externals).map((h)=>HA(k+"/../"+h)),G=await this.loadFiles(A,r),s=!e.source?[]:[e.source].flat().map((h)=>HA(k+"/../"+h));let B=await this.loadFiles(A,s);for(let h of this.preprocessors)B=await h.processFiles(B);const a=await oE(...Object.entries(B).map(([h,{hash:x}])=>x)),$=Object.fromEntries(Object.entries(B).map(([h,{content:x}])=>[h.replace(E,""),x])),d=Object.fromEntries(Object.entries(G).map(([h,{content:x}])=>[h.replace(E,""),x]));if(e.source=Object.keys($),this.cache[a])return j(!1),this.cache[a];return j(!0),this.cache[a]={build:await X7(co,{manifestPath:k.split("/").at(-1),files:{...d,...$},manifest:e}),hash:a}}static loadFiles=async(A,t)=>{const j={};for(let k of t){const e=await A.get(k);if(!e)continue;j[k]={content:await e.content,hash:e.hash}}return j}}var Ot=globalThis,Kt=Ot.ShadowRoot&&(Ot.ShadyCSS===void 0||Ot.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Se=Symbol(),aq=new WeakMap;class Mt{constructor(A,t,j){if(this._$cssResult$=!0,j!==Se)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=A,this.t=t}get styleSheet(){let A=this.o;const t=this.t;if(Kt&&A===void 0){const j=t!==void 0&&t.length===1;j&&(A=aq.get(t)),A===void 0&&((this.o=A=new CSSStyleSheet).replaceSync(this.cssText),j&&aq.set(t,A))}return A}toString(){return this.cssText}}var bt=(A)=>new Mt(typeof A=="string"?A:A+"",void 0,Se),n7=(A,...t)=>{const j=A.length===1?A[0]:t.reduce((k,e,E)=>k+((r)=>{if(r._$cssResult$===!0)return r.cssText;if(typeof r=="number")return r;throw Error("Value passed to 'css' function must be a 'css' function result: "+r+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(e)+A[E+1],A[0]);return new Mt(j,A,Se)},Xe=(A,t)=>{if(Kt)A.adoptedStyleSheets=t.map((j)=>j instanceof CSSStyleSheet?j:j.styleSheet);else for(let j of t){const k=document.createElement("style"),e=Ot.litNonce;e!==void 0&&k.setAttribute("nonce",e),k.textContent=j.cssText,A.appendChild(k)}},yt=Kt?(A)=>A:(A)=>A instanceof CSSStyleSheet?((t)=>{let j="";for(let k of t.cssRules)j+=k.cssText;return bt(j)})(A):A;var{is:ho,defineProperty:Io,getOwnPropertyDescriptor:xo,getOwnPropertyNames:fo,getOwnPropertySymbols:Ho,getPrototypeOf:go}=Object,Dt=globalThis,sq=Dt.trustedTypes,_o=sq?sq.emptyScript:"",Oo=Dt.reactiveElementPolyfillSupport,i7=(A,t)=>A,wt={toAttribute(A,t){switch(t){case Boolean:A=A?_o:null;break;case Object:case Array:A=A==null?A:JSON.stringify(A)}return A},fromAttribute(A,t){let j=A;switch(t){case Boolean:j=A!==null;break;case Number:j=A===null?null:Number(A);break;case Object:case Array:try{j=JSON.parse(A)}catch(k){j=null}}return j}},Ce=(A,t)=>!ho(A,t),Fq={attribute:!0,type:String,converter:wt,reflect:!1,hasChanged:Ce};Symbol.metadata??=Symbol("metadata"),Dt.litPropertyMetadata??=new WeakMap;class bj extends HTMLElement{static addInitializer(A){this._$Ei(),(this.l??=[]).push(A)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(A,t=Fq){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(A,t),!t.noAccessor){const j=Symbol(),k=this.getPropertyDescriptor(A,j,t);k!==void 0&&Io(this.prototype,A,k)}}static getPropertyDescriptor(A,t,j){const{get:k,set:e}=xo(this.prototype,A)??{get(){return this[t]},set(E){this[t]=E}};return{get(){return k?.call(this)},set(E){const r=k?.call(this);e.call(this,E),this.requestUpdate(A,r,j)},configurable:!0,enumerable:!0}}static getPropertyOptions(A){return this.elementProperties.get(A)??Fq}static _$Ei(){if(this.hasOwnProperty(i7("elementProperties")))return;const A=go(this);A.finalize(),A.l!==void 0&&(this.l=[...A.l]),this.elementProperties=new Map(A.elementProperties)}static finalize(){if(this.hasOwnProperty(i7("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(i7("properties"))){const t=this.properties,j=[...fo(t),...Ho(t)];for(let k of j)this.createProperty(k,t[k])}const A=this[Symbol.metadata];if(A!==null){const t=litPropertyMetadata.get(A);if(t!==void 0)for(let[j,k]of t)this.elementProperties.set(j,k)}this._$Eh=new Map;for(let[t,j]of this.elementProperties){const k=this._$Eu(t,j);k!==void 0&&this._$Eh.set(k,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(A){const t=[];if(Array.isArray(A)){const j=new Set(A.flat(1/0).reverse());for(let k of j)t.unshift(yt(k))}else A!==void 0&&t.push(yt(A));return t}static _$Eu(A,t){const j=t.attribute;return j===!1?void 0:typeof j=="string"?j:typeof A=="string"?A.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((A)=>this.enableUpdating=A),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((A)=>A(this))}addController(A){(this._$EO??=new Set).add(A),this.renderRoot!==void 0&&this.isConnected&&A.hostConnected?.()}removeController(A){this._$EO?.delete(A)}_$E_(){const A=new Map,t=this.constructor.elementProperties;for(let j of t.keys())this.hasOwnProperty(j)&&(A.set(j,this[j]),delete this[j]);A.size>0&&(this._$Ep=A)}createRenderRoot(){const A=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Xe(A,this.constructor.elementStyles),A}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((A)=>A.hostConnected?.())}enableUpdating(A){}disconnectedCallback(){this._$EO?.forEach((A)=>A.hostDisconnected?.())}attributeChangedCallback(A,t,j){this._$AK(A,j)}_$EC(A,t){const j=this.constructor.elementProperties.get(A),k=this.constructor._$Eu(A,j);if(k!==void 0&&j.reflect===!0){const e=(j.converter?.toAttribute!==void 0?j.converter:wt).toAttribute(t,j.type);this._$Em=A,e==null?this.removeAttribute(k):this.setAttribute(k,e),this._$Em=null}}_$AK(A,t){const j=this.constructor,k=j._$Eh.get(A);if(k!==void 0&&this._$Em!==k){const e=j.getPropertyOptions(k),E=typeof e.converter=="function"?{fromAttribute:e.converter}:e.converter?.fromAttribute!==void 0?e.converter:wt;this._$Em=k,this[k]=E.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(A,t,j){if(A!==void 0){if(j??=this.constructor.getPropertyOptions(A),!(j.hasChanged??Ce)(this[A],t))return;this.P(A,t,j)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(A,t,j){this._$AL.has(A)||this._$AL.set(A,t),j.reflect===!0&&this._$Em!==A&&(this._$Ej??=new Set).add(A)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const A=this.scheduleUpdate();return A!=null&&await A,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[k,e]of this._$Ep)this[k]=e;this._$Ep=void 0}const j=this.constructor.elementProperties;if(j.size>0)for(let[k,e]of j)e.wrapped!==!0||this._$AL.has(k)||this[k]===void 0||this.P(k,this[k],e)}let A=!1;const t=this._$AL;try{A=this.shouldUpdate(t),A?(this.willUpdate(t),this._$EO?.forEach((j)=>j.hostUpdate?.()),this.update(t)):this._$EU()}catch(j){throw A=!1,this._$EU(),j}A&&this._$AE(t)}willUpdate(A){}_$AE(A){this._$EO?.forEach((t)=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(A)),this.updated(A)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(A){return!0}update(A){this._$Ej&&=this._$Ej.forEach((t)=>this._$EC(t,this[t])),this._$EU()}updated(A){}firstUpdated(A){}}bj.elementStyles=[],bj.shadowRootOptions={mode:"open"},bj[i7("elementProperties")]=new Map,bj[i7("finalized")]=new Map,Oo?.({ReactiveElement:bj}),(Dt.reactiveElementVersions??=[]).push("2.0.4");function dq(A,t){if(!Ue(A)||!A.hasOwnProperty("raw"))throw Error("invalid template strings array");return nq!==void 0?nq.createHTML(t):t}function w6(A,t,j=A,k){if(t===r6)return t;let e=k!==void 0?j._$Co?.[k]:j._$Cl;const E=v7(t)?void 0:t._$litDirective$;return e?.constructor!==E&&(e?._$AO?.(!1),E===void 0?e=void 0:(e=new E(A),e._$AT(A,j,k)),k!==void 0?(j._$Co??=[])[k]=e:j._$Cl=e),e!==void 0&&(t=w6(A,e._$AS(A,t.values),e,k)),t}var ze=globalThis,Pt=ze.trustedTypes,nq=Pt?Pt.createPolicy("lit-html",{createHTML:(A)=>A}):void 0;var yj=`lit\$${Math.random().toFixed(9).slice(2)}\$`,mq="?"+yj,Ko=`<${mq}>`,l6=document,u7=()=>l6.createComment(""),v7=(A)=>A===null||typeof A!="object"&&typeof A!="function",Ue=Array.isArray,Mo=(A)=>Ue(A)||typeof A?.[Symbol.iterator]=="function";var o7=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,iq=/-->/g,oq=/>/g,E6=RegExp(`>|[ \t\n\f\r](?:([^\\s"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|\$)`,"g"),uq=/'/g,vq=/"/g,cq=/^(?:script|style|textarea|title)$/i,Ve=(A)=>(t,...j)=>({_$litType$:A,strings:t,values:j}),e8=Ve(1),E8=Ve(2),G8=Ve(3),r6=Symbol.for("lit-noChange"),OA=Symbol.for("lit-nothing"),$q=new WeakMap,G6=l6.createTreeWalker(l6,129),bo=(A,t)=>{const j=A.length-1,k=[];let e,E=t===2?"<svg>":t===3?"<math>":"",r=o7;for(let G=0;G<j;G++){const s=A[G];let B,a,$=-1,d=0;for(;d<s.length&&(r.lastIndex=d,a=r.exec(s),a!==null);)d=r.lastIndex,r===o7?a[1]==="!--"?r=iq:a[1]!==void 0?r=oq:a[2]!==void 0?(cq.test(a[2])&&(e=RegExp("</"+a[2],"g")),r=E6):a[3]!==void 0&&(r=E6):r===E6?a[0]===">"?(r=e??o7,$=-1):a[1]===void 0?$=-2:($=r.lastIndex-a[2].length,B=a[1],r=a[3]===void 0?E6:a[3]==='"'?vq:uq):r===vq||r===uq?r=E6:r===iq||r===oq?r=o7:(r=E6,e=void 0);const h=r===E6&&A[G+1].startsWith("/>")?" ":"";E+=r===o7?s+Ko:$>=0?(k.push(B),s.slice(0,$)+"$lit$"+s.slice($)+yj+h):s+yj+($===-2?G:h)}return[dq(A,E+(A[j]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),k]};class $7{constructor({strings:A,_$litType$:t},j){let k;this.parts=[];let e=0,E=0;const r=A.length-1,G=this.parts,[s,B]=bo(A,t);if(this.el=$7.createElement(s,j),G6.currentNode=this.el.content,t===2||t===3){const a=this.el.content.firstChild;a.replaceWith(...a.childNodes)}for(;(k=G6.nextNode())!==null&&G.length<r;){if(k.nodeType===1){if(k.hasAttributes())for(let a of k.getAttributeNames())if(a.endsWith("$lit$")){const $=B[E++],d=k.getAttribute(a).split(yj),h=/([.?@])?(.*)/.exec($);G.push({type:1,index:e,name:h[2],strings:d,ctor:h[1]==="."?hq:h[1]==="?"?Iq:h[1]==="@"?xq:c7}),k.removeAttribute(a)}else a.startsWith(yj)&&(G.push({type:6,index:e}),k.removeAttribute(a));if(cq.test(k.tagName)){const a=k.textContent.split(yj),$=a.length-1;if($>0){k.textContent=Pt?Pt.emptyScript:"";for(let d=0;d<$;d++)k.append(a[d],u7()),G6.nextNode(),G.push({type:2,index:++e});k.append(a[$],u7())}}}else if(k.nodeType===8)if(k.data===mq)G.push({type:2,index:e});else{let a=-1;for(;(a=k.data.indexOf(yj,a+1))!==-1;)G.push({type:7,index:e}),a+=yj.length-1}e++}}static createElement(A,t){const j=l6.createElement("template");return j.innerHTML=A,j}}class pq{constructor(A,t){this._$AV=[],this._$AN=void 0,this._$AD=A,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(A){const{el:{content:t},parts:j}=this._$AD,k=(A?.creationScope??l6).importNode(t,!0);G6.currentNode=k;let e=G6.nextNode(),E=0,r=0,G=j[0];for(;G!==void 0;){if(E===G.index){let s;G.type===2?s=new m7(e,e.nextSibling,this,A):G.type===1?s=new G.ctor(e,G.name,G.strings,this,A):G.type===6&&(s=new fq(e,this,A)),this._$AV.push(s),G=j[++r]}E!==G?.index&&(e=G6.nextNode(),E++)}return G6.currentNode=l6,k}p(A){let t=0;for(let j of this._$AV)j!==void 0&&(j.strings!==void 0?(j._$AI(A,j,t),t+=j.strings.length-2):j._$AI(A[t])),t++}}class m7{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(A,t,j,k){this.type=2,this._$AH=OA,this._$AN=void 0,this._$AA=A,this._$AB=t,this._$AM=j,this.options=k,this._$Cv=k?.isConnected??!0}get parentNode(){let A=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&A?.nodeType===11&&(A=t.parentNode),A}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(A,t=this){A=w6(this,A,t),v7(A)?A===OA||A==null||A===""?(this._$AH!==OA&&this._$AR(),this._$AH=OA):A!==this._$AH&&A!==r6&&this._(A):A._$litType$!==void 0?this.$(A):A.nodeType!==void 0?this.T(A):Mo(A)?this.k(A):this._(A)}O(A){return this._$AA.parentNode.insertBefore(A,this._$AB)}T(A){this._$AH!==A&&(this._$AR(),this._$AH=this.O(A))}_(A){this._$AH!==OA&&v7(this._$AH)?this._$AA.nextSibling.data=A:this.T(l6.createTextNode(A)),this._$AH=A}$(A){const{values:t,_$litType$:j}=A,k=typeof j=="number"?this._$AC(A):(j.el===void 0&&(j.el=$7.createElement(dq(j.h,j.h[0]),this.options)),j);if(this._$AH?._$AD===k)this._$AH.p(t);else{const e=new pq(k,this),E=e.u(this.options);e.p(t),this.T(E),this._$AH=e}}_$AC(A){let t=$q.get(A.strings);return t===void 0&&$q.set(A.strings,t=new $7(A)),t}k(A){Ue(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let j,k=0;for(let e of A)k===t.length?t.push(j=new m7(this.O(u7()),this.O(u7()),this,this.options)):j=t[k],j._$AI(e),k++;k<t.length&&(this._$AR(j&&j._$AB.nextSibling,k),t.length=k)}_$AR(A=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);A&&A!==this._$AB;){const j=A.nextSibling;A.remove(),A=j}}setConnected(A){this._$AM===void 0&&(this._$Cv=A,this._$AP?.(A))}}class c7{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(A,t,j,k,e){this.type=1,this._$AH=OA,this._$AN=void 0,this.element=A,this.name=t,this._$AM=k,this.options=e,j.length>2||j[0]!==""||j[1]!==""?(this._$AH=Array(j.length-1).fill(new String),this.strings=j):this._$AH=OA}_$AI(A,t=this,j,k){const e=this.strings;let E=!1;if(e===void 0)A=w6(this,A,t,0),E=!v7(A)||A!==this._$AH&&A!==r6,E&&(this._$AH=A);else{const r=A;let G,s;for(A=e[0],G=0;G<e.length-1;G++)s=w6(this,r[j+G],t,G),s===r6&&(s=this._$AH[G]),E||=!v7(s)||s!==this._$AH[G],s===OA?A=OA:A!==OA&&(A+=(s??"")+e[G+1]),this._$AH[G]=s}E&&!k&&this.j(A)}j(A){A===OA?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,A??"")}}class hq extends c7{constructor(){super(...arguments),this.type=3}j(A){this.element[this.name]=A===OA?void 0:A}}class Iq extends c7{constructor(){super(...arguments),this.type=4}j(A){this.element.toggleAttribute(this.name,!!A&&A!==OA)}}class xq extends c7{constructor(A,t,j,k,e){super(A,t,j,k,e),this.type=5}_$AI(A,t=this){if((A=w6(this,A,t,0)??OA)===r6)return;const j=this._$AH,k=A===OA&&j!==OA||A.capture!==j.capture||A.once!==j.once||A.passive!==j.passive,e=A!==OA&&(j===OA||k);k&&this.element.removeEventListener(this.name,this,j),e&&this.element.addEventListener(this.name,this,A),this._$AH=A}handleEvent(A){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,A):this._$AH.handleEvent(A)}}class fq{constructor(A,t,j){this.element=A,this.type=6,this._$AN=void 0,this._$AM=t,this.options=j}get _$AU(){return this._$AM._$AU}_$AI(A){w6(this,A)}}var yo=ze.litHtmlPolyfillSupport;yo?.($7,m7),(ze.litHtmlVersions??=[]).push("3.2.1");var Hq=(A,t,j)=>{const k=j?.renderBefore??t;let e=k._$litPart$;if(e===void 0){const E=j?.renderBefore??null;k._$litPart$=e=new m7(t.insertBefore(u7(),E),E,void 0,j??{})}return e._$AI(A),e};class dj extends bj{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const A=super.createRenderRoot();return this.renderOptions.renderBefore??=A.firstChild,A}update(A){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(A),this._$Do=Hq(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r6}}dj._$litElement$=!0,dj.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:dj});var wo=globalThis.litElementPolyfillSupport;wo?.({LitElement:dj});(globalThis.litElementVersions??=[]).push("4.1.1");var Lt=(A)=>(t,j)=>{j!==void 0?j.addInitializer(()=>{customElements.define(A,t)}):customElements.define(A,t)};var Xt={};L7(Xt,{printHexMIDIData:()=>jB,isStop:()=>Jq,isStart:()=>Uq,isSongPositionPointer:()=>Wq,isQuarterFrame:()=>Cq,isProgramChange:()=>Mq,isPitchWheel:()=>yq,isNoteOn:()=>Nt,isNoteOff:()=>Rt,isNatural:()=>I7,isMetaEvent:()=>Qq,isControllerNumber:()=>Qe,isController:()=>Je,isContinue:()=>Vq,isClock:()=>zq,isChannelPressure:()=>Lq,isAllSoundOff:()=>Xq,isAllNotesOff:()=>Sq,isAftertouch:()=>Dq,isActiveSense:()=>Do,isAccidental:()=>To,getVelocity:()=>d7,getSongPositionPointerValue:()=>Zq,getProgramChangeNumber:()=>bq,getPitchWheelValue:()=>wq,getOctaveNumber:()=>Yq,getNoteNumber:()=>h7,getNoteNameWithSharps:()=>Po,getNoteNameWithOctaveNumber:()=>St,getNoteNameWithFlats:()=>Lo,getNoteName:()=>AB,getMessageSize:()=>Kq,getMIDIDescription:()=>No,getControllerValue:()=>Rq,getControllerNumber:()=>Nq,getControllerName:()=>tB,getChromaticScaleIndex:()=>Pj,getChannelPressureValue:()=>Tq,getChannel1to16:()=>Oq,getChannel0to15:()=>_q,getByte2:()=>p7,getByte1:()=>Dj,getByte0:()=>Aj,getAfterTouchValue:()=>Pq});function Aj(A){return A>>16&255}function Dj(A){return A>>8&255}function p7(A){return A&255}function wj(A,t){return(A>>16&240)==t}function gq(A){return Dj(A)|p7(A)<<7}function _q(A){return Aj(A)&15}function Oq(A){return _q(A)+1}function Kq(A){const k=Aj(A),e=k>>4&7;return(e!=7?15103>>2*e:1431655865>>2*(k&15))&3}function Nt(A){return wj(A,144)&&d7(A)!=0}function Rt(A){return wj(A,128)||wj(A,144)&&d7(A)==0}function h7(A){return Dj(A)}function d7(A){return p7(A)}function Mq(A){return wj(A,192)}function bq(A){return Dj(A)}function yq(A){return wj(A,224)}function wq(A){return gq(A)}function Dq(A){return wj(A,160)}function Pq(A){return p7(A)}function Lq(A){return wj(A,208)}function Tq(A){return Dj(A)}function Je(A){return wj(A,176)}function Nq(A){return Dj(A)}function Rq(A){return p7(A)}function Qe(A,t){return Dj(A)==t&&Je(A)}function Sq(A){return Qe(A,123)}function Xq(A){return Qe(A,120)}function Cq(A){return Aj(A)==241}function zq(A){return Aj(A)==248}function Uq(A){return Aj(A)==250}function Vq(A){return Aj(A)==251}function Jq(A){return Aj(A)==252}function Do(A){return Aj(A)==254}function Qq(A){return Aj(A)==255}function Wq(A){return Aj(A)==242}function Zq(A){return gq(A)}function Pj(A){return A%12&15}function Yq(A,t){return(Math.floor(A/12)+(t?t:3)&255)-5}function AB(A){return["C","C#","D","Eb","E","F","F#","G","G#","A","Bb","B"][Pj(A)]}function Po(A){return["C","C#","D","Eb","E","F","F#","G","G#","A","Bb","B"][Pj(A)]}function Lo(A){return["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"][Pj(A)]}function St(A){return AB(A)+Yq(A)}function I7(A){return[!0,!1,!0,!1,!0,!0,!1,!0,!1,!0,!1,!0][Pj(A)]}function To(A){return!I7(A)}function jB(A){const t=Kq(A);if(t==0)return"[empty]";let j="";for(let k=0;k<t;++k){if(k!=0)j+=" ";const e=A>>16-8*k&255;j+="0123456789abcdef"[e>>4],j+="0123456789abcdef"[e&15]}return j}function No(A){const t=" Channel "+Oq(A);function j(k){const e=St(h7(A));return e.length<4?e+" ":e}if(Nt(A))return"Note-On:  "+j(A)+t+"  Velocity "+d7(A);if(Rt(A))return"Note-Off: "+j(A)+t+"  Velocity "+d7(A);if(Dq(A))return"Aftertouch: "+j(A)+t+": "+Pq(A);if(yq(A))return"Pitch wheel: "+wq(A)+" "+t;if(Lq(A))return"Channel pressure: "+Tq(A)+" "+t;if(Je(A))return"Controller:"+t+": "+tB(Nq(A))+" = "+Rq(A);if(Mq(A))return"Program change: "+bq(A)+" "+t;if(Sq(A))return"All notes off:"+t;if(Xq(A))return"All sound off:"+t;if(Cq(A))return"Quarter-frame";if(zq(A))return"Clock";if(Uq(A))return"Start";if(Vq(A))return"Continue";if(Jq(A))return"Stop";if(Qq(A))return"Meta-event: type "+Dj(A);if(Wq(A))return"Song Position: "+Zq(A);return jB(A)}function tB(A){if(A<128){const j=["Bank Select","Modulation Wheel (coarse)","Breath controller (coarse)",void 0,"Foot Pedal (coarse)","Portamento Time (coarse)","Data Entry (coarse)","Volume (coarse)","Balance (coarse)",void 0,"Pan position (coarse)","Expression (coarse)","Effect Control 1 (coarse)","Effect Control 2 (coarse)",void 0,void 0,"General Purpose Slider 1","General Purpose Slider 2","General Purpose Slider 3","General Purpose Slider 4",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"Bank Select (fine)","Modulation Wheel (fine)","Breath controller (fine)",void 0,"Foot Pedal (fine)","Portamento Time (fine)","Data Entry (fine)","Volume (fine)","Balance (fine)",void 0,"Pan position (fine)","Expression (fine)","Effect Control 1 (fine)","Effect Control 2 (fine)",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"Hold Pedal","Portamento","Sustenuto Pedal","Soft Pedal","Legato Pedal","Hold 2 Pedal","Sound Variation","Sound Timbre","Sound Release Time","Sound Attack Time","Sound Brightness","Sound Control 6","Sound Control 7","Sound Control 8","Sound Control 9","Sound Control 10","General Purpose Button 1","General Purpose Button 2","General Purpose Button 3","General Purpose Button 4",void 0,void 0,void 0,void 0,void 0,void 0,void 0,"Reverb Level","Tremolo Level","Chorus Level","Celeste Level","Phaser Level","Data Button increment","Data Button decrement","Non-registered Parameter (fine)","Non-registered Parameter (coarse)","Registered Parameter (fine)","Registered Parameter (coarse)",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"All Sound Off","All Controllers Off","Local Keyboard","All Notes Off","Omni Mode Off","Omni Mode On","Mono Operation","Poly Operation"][A];if(j)return j}return A.toString()}class q6 extends HTMLElement{constructor({naturalNoteWidth:A,accidentalWidth:t,accidentalPercentageHeight:j,naturalNoteBorder:k,accidentalNoteBorder:e,pressedNoteColour:E}={}){super();this.naturalWidth=A||20,this.accidentalWidth=t||12,this.accidentalPercentageHeight=j||66,this.naturalBorder=k||"2px solid #333",this.accidentalBorder=e||"2px solid #333",this.pressedColour=E||"#8ad",this.root=this.attachShadow({mode:"open"}),this.root.addEventListener("mousedown",(r)=>this.handleMouse(r,!0,!1)),this.root.addEventListener("mouseup",(r)=>this.handleMouse(r,!1,!0)),this.root.addEventListener("mousemove",(r)=>this.handleMouse(r,!1,!1)),this.root.addEventListener("mouseenter",(r)=>this.handleMouse(r,!1,!1)),this.root.addEventListener("mouseout",(r)=>this.handleMouse(r,!1,!1)),this.addEventListener("keydown",(r)=>this.handleKey(r,!0)),this.addEventListener("keyup",(r)=>this.handleKey(r,!1)),this.addEventListener("focusout",(r)=>this.allNotesOff()),this.currentDraggedNote=-1,this.currentExternalNotesOn=new Set,this.currentKeyboardNotes=new Set,this.currentPlayedNotes=new Set,this.currentDisplayedNotes=new Set,this.notes=[],this.modifierKeys=0,this.currentTouches=new Map,this.refreshHTML();for(let r of this.root.children)r.addEventListener("touchstart",(G)=>this.touchStart(G),{passive:!1}),r.addEventListener("touchend",(G)=>this.touchEnd(G))}static get observedAttributes(){return["root-note","note-count","key-map"]}get config(){return{rootNote:parseInt(this.getAttribute("root-note")||"36"),numNotes:parseInt(this.getAttribute("note-count")||"61"),keymap:this.getAttribute("key-map")||"KeyA KeyW KeyS KeyE KeyD KeyF KeyT KeyG KeyY KeyH KeyU KeyJ KeyK KeyO KeyL KeyP Semicolon"}}attachToPatchConnection(A,t){const k={noteDown:(e)=>A.sendMIDIInputEvent(t,9437184|e.detail.note<<8|100),noteUp:(e)=>A.sendMIDIInputEvent(t,8388608|e.detail.note<<8|100),midiIn:(e)=>this.handleExternalMIDI(e.message),midiInputEndpointID:t};if(!this.callbacks)this.callbacks=new Map;this.callbacks.set(A,k),this.addEventListener("note-down",k.noteDown),this.addEventListener("note-up",k.noteUp),A.addEndpointListener(t,k.midiIn)}detachPatchConnection(A){const t=this.callbacks.get(A);if(t)this.removeEventListener("note-down",t.noteDown),this.removeEventListener("note-up",t.noteUp),A.removeEndpointListener(t.midiInputEndpointID,t.midiIn);this.callbacks[A]=void 0}getNoteColour(A){return}getNoteLabel(A){return Pj(A)==0?St(A):""}handleExternalMIDI(A){if(Nt(A)){const t=h7(A);this.currentExternalNotesOn.add(t),this.refreshActiveNoteElements()}else if(Rt(A)){const t=h7(A);this.currentExternalNotesOn.delete(t),this.refreshActiveNoteElements()}}sendNoteOn(A){this.dispatchEvent(new CustomEvent("note-down",{detail:{note:A}}))}sendNoteOff(A){this.dispatchEvent(new CustomEvent("note-up",{detail:{note:A}}))}allNotesOff(){this.setDraggedNote(-1),this.modifierKeys=0;for(let A of this.currentKeyboardNotes.values())this.removeKeyboardNote(A);this.currentExternalNotesOn.clear(),this.refreshActiveNoteElements()}setDraggedNote(A){if(A!=this.currentDraggedNote){if(this.currentDraggedNote>=0)this.sendNoteOff(this.currentDraggedNote);if(this.currentDraggedNote=A,this.currentDraggedNote>=0)this.sendNoteOn(this.currentDraggedNote);this.refreshActiveNoteElements()}}addKeyboardNote(A){if(!this.currentKeyboardNotes.has(A))this.sendNoteOn(A),this.currentKeyboardNotes.add(A),this.refreshActiveNoteElements()}removeKeyboardNote(A){if(this.currentKeyboardNotes.has(A))this.sendNoteOff(A),this.currentKeyboardNotes.delete(A),this.refreshActiveNoteElements()}isNoteActive(A){return A==this.currentDraggedNote||this.currentExternalNotesOn.has(A)||this.currentKeyboardNotes.has(A)}touchEnd(A){for(let t of A.changedTouches){const j=this.currentTouches.get(t.identifier);this.currentTouches.delete(t.identifier),this.removeKeyboardNote(j)}A.preventDefault()}touchStart(A){for(let t of A.changedTouches){const j=t.target.id.substring(4);this.currentTouches.set(t.identifier,j),this.addKeyboardNote(j)}A.preventDefault()}handleMouse(A,t,j){if(t)this.isDragging=!0;if(this.isDragging){let k=-1;if(A.buttons!=0&&A.type!="mouseout"){const e=A.target.id.substring(4);if(e!==void 0)k=parseInt(e)}if(this.setDraggedNote(k),!t)A.preventDefault()}if(j)this.isDragging=!1}handleKey(A,t){if(A.key=="Meta"||A.key=="Alt"||A.key=="Control"||A.key=="Shift"){this.modifierKeys+=t?1:-1;return}if(this.modifierKeys!=0)return;const j=this.config,k=j.keymap.split(" ").indexOf(A.code);if(k>=0){const e=Math.floor((j.rootNote+j.numNotes/4+11)/12)*12+k;if(t)this.addKeyboardNote(e);else this.removeKeyboardNote(e);A.preventDefault()}}refreshHTML(){this.root.innerHTML=`<style>${this.getCSS()}</style>${this.getNoteElements()}`;for(let A=0;A<128;++A){const t=this.shadowRoot.getElementById(`note${A.toString()}`);this.notes.push({note:A,element:t})}this.style.maxWidth=window.getComputedStyle(this).scrollWidth}refreshActiveNoteElements(){for(let A of this.notes)if(A.element)if(this.isNoteActive(A.note))A.element.classList.add("active");else A.element.classList.remove("active")}getAccidentalOffset(A){let t=Pj(A),j=-this.accidentalWidth/16,k=3*this.accidentalWidth/16;return this.naturalWidth-this.accidentalWidth/2+[0,j,0,k,0,0,j,0,0,0,k,0][t]}getNoteElements(){const A=this.config;let t="",j="",k=0;for(let e=0;e<A.numNotes;++e){const E=A.rootNote+e,r=this.getNoteLabel(E);if(I7(E))t+=`<div class="natural-note note" id="note${E}" style=" left: ${k+1}px"><p>${r}</p></div>`;else{let G=this.getAccidentalOffset(E);j+=`<div class="accidental-note note" id="note${E}" style="left: ${k+G}px"></div>`}if(I7(E+1)||e==A.numNotes-1)k+=this.naturalWidth}return this.style.maxWidth=k+1+"px",`<div tabindex="0" class="note-holder" style="width: ${k+1}px;">
                ${t}
                ${j}
                </div>`}getCSS(){let A="";const t=this.config;for(let j=0;j<t.numNotes;++j){const k=t.rootNote+j,e=this.getNoteColour(k);if(e)A+=`#note${k}:not(.active) { background: ${e}; }`}return`
            * {
                box-sizing: border-box;
                user-select: none;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                margin: 0;
                padding: 0;
            }

            :host {
                display: block;
                overflow: auto;
                position: relative;
            }

            .natural-note {
                position: absolute;
                border: ${this.naturalBorder};
                background: #fff;
                width: ${this.naturalWidth}px;
                height: 100%;

                display: flex;
                align-items: end;
                justify-content: center;
            }

            p {
                pointer-events: none;
                text-align: center;
                font-size: 0.7rem;
                color: grey;
            }

            .accidental-note {
                position: absolute;
                top: 0;
                border: ${this.accidentalBorder};
                background: #333;
                width: ${this.accidentalWidth}px;
                height: ${this.accidentalPercentageHeight}%;
            }

            .note-holder {
                position: relative;
                height: 100%;
            }

            .active {
                background: ${this.pressedColour};
            }

            ${A}
            `}}class We{constructor(){this.listenersPerType={}}addEventListener(A,t){if(A&&t){const j=this.listenersPerType[A];if(j)j.push(t);else this.listenersPerType[A]=[t]}}removeEventListener(A,t){if(A&&t){const j=this.listenersPerType[A];if(j){const k=j.indexOf(t);if(k>=0)j.splice(k,1)}}}addSingleUseListener(A,t){const j=(k)=>{this.removeEventListener(A,j),t?.(k)};this.addEventListener(A,j)}dispatchEvent(A,t){const j=this.listenersPerType[A];if(j)for(let k of j)k?.(t)}getNumListenersForType(A){const t=this.listenersPerType[A];return t?t.length:0}}var AE={};L7(AE,{default:()=>Ut});var zt={};L7(zt,{getAllCSS:()=>Ze,createLabelledControlForEndpointID:()=>Ro,createLabelledControl:()=>Ct,createControl:()=>eB,Switch:()=>P6,ParameterControlBase:()=>L6,Options:()=>Lj,LabelledControlHolder:()=>x7,Knob:()=>D6});function kB(A,t){return`${A.toFixed(2)} ${t.annotation?.unit??""}`}function Ze(){return`
        ${Lj.getCSS()}
        ${D6.getCSS()}
        ${P6.getCSS()}
        ${x7.getCSS()}`}function eB(A,t){if(P6.canBeUsedFor(t))return new P6(A,t);if(Lj.canBeUsedFor(t))return new Lj(A,t);if(D6.canBeUsedFor(t))return new D6(A,t);return}function Ct(A,t){const j=eB(A,t);if(j)return new x7(A,t,j);return}function Ro(A,t,j){for(let k of t?.details?.inputs)if(k.endpointID==j)return Ct(A,k);return}class L6 extends HTMLElement{constructor(){super();this.onmousedown=(A)=>A.stopPropagation()}setEndpoint(A,t){if(this.detachListener(),this.patchConnection=A,this.endpointInfo=t,this.defaultValue=t.annotation?.init||t.defaultValue||0,this.isConnected)this.attachListener()}valueChanged(A){}setValue(A){this.patchConnection?.sendEventOrValue(this.endpointInfo.endpointID,A)}beginGesture(){this.patchConnection?.sendParameterGestureStart(this.endpointInfo.endpointID)}endGesture(){this.patchConnection?.sendParameterGestureEnd(this.endpointInfo.endpointID)}setValueAsGesture(A){this.beginGesture(),this.setValue(A),this.endGesture()}resetToDefault(){if(this.defaultValue!==null)this.setValueAsGesture(this.defaultValue)}connectedCallback(){this.attachListener()}disconnectedCallback(){this.detachListener()}detachListener(){if(this.listener)this.patchConnection?.removeParameterListener?.(this.listener.endpointID,this.listener),this.listener=void 0}attachListener(){if(this.patchConnection&&this.endpointInfo)this.detachListener(),this.listener=(A)=>this.valueChanged(A),this.listener.endpointID=this.endpointInfo.endpointID,this.patchConnection.addParameterListener(this.endpointInfo.endpointID,this.listener),this.patchConnection.requestParameterValue(this.endpointInfo.endpointID)}}class D6 extends L6{constructor(A,t){super();this.setEndpoint(A,t)}setEndpoint(A,t){super.setEndpoint(A,t),this.innerHTML="",this.className="knob-container";const j=t?.annotation?.min||0,k=t?.annotation?.max||1,e=t?.annotation?.mid||void 0,E=(c)=>window.document.createElementNS("http://www.w3.org/2000/svg",c),r=E("svg");r.setAttribute("viewBox","0 0 100 100");const G=E("path");G.setAttribute("d","M20,76 A 40 40 0 1 1 80 76"),G.classList.add("knob-path"),G.classList.add("knob-track-background");const s=132,B=j+k===0,a=B?251.5:184,$=B?0:132;this.getDashOffset=(c)=>a-184/(s*2)*(c+$),this.trackValue=E("path"),this.trackValue.setAttribute("d",B?"M50.01,10 A 40 40 0 1 1 50 10":"M20,76 A 40 40 0 1 1 80 76"),this.trackValue.setAttribute("stroke-dasharray",a),this.trackValue.classList.add("knob-path"),this.trackValue.classList.add("knob-track-value"),this.dial=document.createElement("div"),this.dial.className="knob-dial";const d=document.createElement("div");d.className="knob-dial-tick",this.dial.appendChild(d),r.appendChild(G),r.appendChild(this.trackValue),this.appendChild(r),this.appendChild(this.dial);const h=(c,p,f,g,P)=>g+(c-p)*(P-g)/(f-p),x=(c)=>{if(e>j&&e<k){const p=h(c,-s,s,0,1),f=k-j,g=Math.log((e-j)/f)/Math.log(0.5);return j+f*Math.pow(p,g)}else return h(c,-s,s,j,k)};this.toRotation=(c)=>{if(e>j&&e<k){const p=k-j,f=Math.log((e-j)/p)/Math.log(0.5),g=Math.pow((c-j)/p,1/f);return h(g,0,1,-s,s)}else return h(c,j,k,-s,s)},this.rotation=this.toRotation(this.defaultValue),this.setRotation(this.rotation,!0);const o=(c)=>{c.preventDefault();const p=(T,O)=>{return((K,w,H)=>Math.min(Math.max(K,w),H))(T-O,-s,s)},g=c.movementY===c.screenY?c.screenY-this.previousScreenY:c.movementY;this.previousScreenY=c.screenY;const P=c.shiftKey?0.25:1.5;this.accumulatedRotation=p(this.accumulatedRotation,g*P),this.setValue(x(this.accumulatedRotation))},F=(c)=>{this.previousScreenY=void 0,this.accumulatedRotation=void 0,window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",F),this.endGesture()},i=(c)=>{this.previousScreenY=c.screenY,this.accumulatedRotation=this.rotation,this.beginGesture(),window.addEventListener("mousemove",o),window.addEventListener("mouseup",F),c.preventDefault()},n=(c)=>{this.previousClientY=c.changedTouches[0].clientY,this.accumulatedRotation=this.rotation,this.touchIdentifier=c.changedTouches[0].identifier,this.beginGesture(),window.addEventListener("touchmove",m),window.addEventListener("touchend",v),c.preventDefault()},m=(c)=>{for(let p of c.changedTouches)if(p.identifier==this.touchIdentifier){const f=(T,O)=>{return((K,w,H)=>Math.min(Math.max(K,w),H))(T-O,-s,s)},g=p.clientY-this.previousClientY;this.previousClientY=p.clientY;const P=c.shiftKey?0.25:1.5;this.accumulatedRotation=f(this.accumulatedRotation,g*P),this.setValue(x(this.accumulatedRotation))}},v=(c)=>{this.previousClientY=void 0,this.accumulatedRotation=void 0,window.removeEventListener("touchmove",m),window.removeEventListener("touchend",v),this.endGesture()};this.addEventListener("mousedown",i),this.addEventListener("dblclick",()=>this.resetToDefault()),this.addEventListener("touchstart",n)}static canBeUsedFor(A){return A.purpose==="parameter"}valueChanged(A){this.setRotation(this.toRotation(A),!1)}getDisplayValue(A){return kB(A,this.endpointInfo)}setRotation(A,t){if(t||this.rotation!==A)this.rotation=A,this.trackValue.setAttribute("stroke-dashoffset",this.getDashOffset(this.rotation)),this.dial.style.transform=`translate(-50%,-50%) rotate(${A}deg)`}static getCSS(){return`
        .knob-container {
            --knob-track-background-color: var(--background);
            --knob-track-value-color: var(--foreground);

            --knob-dial-border-color: var(--foreground);
            --knob-dial-background-color: var(--background);
            --knob-dial-tick-color: var(--foreground);

            position: relative;
            display: inline-block;
            height: 5rem;
            width: 5rem;
            margin: 0;
            padding: 0;
        }

        .knob-path {
            fill: none;
            stroke-linecap: round;
            stroke-width: 0.15rem;
        }

        .knob-track-background {
            stroke: var(--knob-track-background-color);
        }

        .knob-track-value {
            stroke: var(--knob-track-value-color);
        }

        .knob-dial {
            position: absolute;
            text-align: center;
            height: 60%;
            width: 60%;
            top: 50%;
            left: 50%;
            border: 0.15rem solid var(--knob-dial-border-color);
            border-radius: 100%;
            box-sizing: border-box;
            transform: translate(-50%,-50%);
            background-color: var(--knob-dial-background-color);
        }

        .knob-dial-tick {
            position: absolute;
            display: inline-block;

            height: 1rem;
            width: 0.15rem;
            background-color: var(--knob-dial-tick-color);
        }`}}class P6 extends L6{constructor(A,t){super();this.setEndpoint(A,t)}setEndpoint(A,t){super.setEndpoint(A,t);const j=document.createElement("div");j.classList="switch-outline";const k=document.createElement("div");k.classList="switch-thumb",this.innerHTML="",this.currentValue=this.defaultValue>0.5,this.valueChanged(this.currentValue),this.classList.add("switch-container"),j.appendChild(k),this.appendChild(j),this.addEventListener("click",()=>this.setValueAsGesture(this.currentValue?0:1))}static canBeUsedFor(A){return A.purpose==="parameter"&&A.annotation?.boolean}valueChanged(A){const t=A>0.5;this.currentValue=t,this.classList.remove(!t?"switch-on":"switch-off"),this.classList.add(t?"switch-on":"switch-off")}getDisplayValue(A){return`${A>0.5?"On":"Off"}`}static getCSS(){return`
        .switch-container {
            --switch-outline-color: var(--foreground);
            --switch-thumb-color: var(--foreground);
            --switch-on-background-color: var(--background);
            --switch-off-background-color: var(--background);

            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        .switch-outline {
            position: relative;
            display: inline-block;
            height: 1.25rem;
            width: 2.5rem;
            border-radius: 10rem;
            box-shadow: 0 0 0 0.15rem var(--switch-outline-color);
            transition: background-color 0.1s cubic-bezier(0.5, 0, 0.2, 1);
        }

        .switch-thumb {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            height: 1rem;
            width: 1rem;
            background-color: var(--switch-thumb-color);
            border-radius: 100%;
            transition: left 0.1s cubic-bezier(0.5, 0, 0.2, 1);
        }

        .switch-off .switch-thumb {
            left: 25%;
            background: none;
            border: var(--switch-thumb-color) solid 0.1rem;
            height: 0.8rem;
            width: 0.8rem;
        }
        .switch-on .switch-thumb {
            left: 75%;
        }

        .switch-off .switch-outline {
            background-color: var(--switch-on-background-color);
        }
        .switch-on .switch-outline {
            background-color: var(--switch-off-background-color);
        }`}}class Lj extends L6{constructor(A,t){super();this.setEndpoint(A,t)}setEndpoint(A,t){super.setEndpoint(A,t);const j=(a,$,d)=>a+$*d,k=(a)=>a>0?a-1:1,{min:e,max:E,options:r}=(()=>{if(Lj.hasTextOptions(t)){const a=t.annotation.text.split("|"),$=k(a.length);let d=0,h=$,x=1;if(t.annotation.min!=null&&t.annotation.max!=null)d=t.annotation.min,h=t.annotation.max,x=(h-d)/$;const o=a.map((F,i)=>({value:j(d,x,i),text:F}));return{min:d,max:h,options:o}}if(Lj.isExplicitlyDiscrete(t)){const a=t.annotation.step,$=t.annotation?.min||0,d=t.annotation?.max||1,h=((d-$)/a|0)+1,x=new Array(h);for(let o=0;o<h;++o){const F=j($,a,o);x[o]={value:F,text:kB(F,t)}}return{min:$,max:d,options:x}}})();this.options=r;const G=k(this.options.length),s=(a)=>(a-e)/(E-e);this.toIndex=(a)=>Math.min(G,s(a)*this.options.length)|0,this.innerHTML="",this.select=document.createElement("select");for(let a of this.options){const $=document.createElement("option");$.innerText=a.text,this.select.appendChild($)}this.selectedIndex=this.toIndex(this.defaultValue),this.select.addEventListener("change",(a)=>{const $=a.target.selectedIndex;a.target.selectedIndex=this.selectedIndex,this.setValueAsGesture(this.options[$].value)}),this.valueChanged(this.selectedIndex),this.className="select-container",this.appendChild(this.select);const B=document.createElement("span");B.className="select-icon",this.appendChild(B)}static canBeUsedFor(A){return A.purpose==="parameter"&&(this.hasTextOptions(A)||this.isExplicitlyDiscrete(A))}valueChanged(A){const t=this.toIndex(A);this.selectedIndex=t,this.select.selectedIndex=t}getDisplayValue(A){return this.options[this.toIndex(A)].text}static hasTextOptions(A){return A.annotation?.text?.split?.("|").length>1}static isExplicitlyDiscrete(A){return A.annotation?.discrete&&A.annotation?.step>0}static getCSS(){return`
        .select-container {
            position: relative;
            display: block;
            font-size: 0.8rem;
            width: 100%;
            color: var(--foreground);
            border: 0.15rem solid var(--foreground);
            border-radius: 0.6rem;
            margin: 0;
            padding: 0;
        }

        select {
            background: none;
            appearance: none;
            -webkit-appearance: none;
            font-family: inherit;
            font-size: 0.8rem;

            overflow: hidden;
            text-overflow: ellipsis;

            padding: 0 1.5rem 0 0.6rem;

            outline: none;
            color: var(--foreground);
            height: 2rem;
            box-sizing: border-box;
            margin: 0;
            border: none;

            width: 100%;
        }

        select option {
            background: var(--background);
            color: var(--foreground);
        }

        .select-icon {
            position: absolute;
            right: 0.3rem;
            top: 0.5rem;
            pointer-events: none;
            background-color: var(--foreground);
            width: 1.4em;
            height: 1.4em;
            mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z'/%3E%3C/svg%3E");
            mask-repeat: no-repeat;
            -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z'/%3E%3C/svg%3E");
            -webkit-mask-repeat: no-repeat;
        }`}}class x7 extends L6{constructor(A,t,j){super();this.childControl=j,this.setEndpoint(A,t)}setEndpoint(A,t){super.setEndpoint(A,t),this.innerHTML="",this.className="labelled-control";const j=document.createElement("div");j.className="labelled-control-centered-control",j.appendChild(this.childControl);const k=document.createElement("div");k.className="labelled-control-label-container";const e=document.createElement("div");e.classList.add("labelled-control-name"),e.innerText=t.annotation?.name||t.name||t.endpointID||"",this.valueText=document.createElement("div"),this.valueText.classList.add("labelled-control-value"),k.appendChild(e),k.appendChild(this.valueText),this.appendChild(j),this.appendChild(k)}valueChanged(A){this.valueText.innerText=this.childControl?.getDisplayValue(A)}static getCSS(){return`
        .labelled-control {
            --labelled-control-font-color: var(--foreground);
            --labelled-control-font-size: 0.8rem;

            position: relative;
            display: inline-block;
            margin: 0 0.4rem 0.4rem;
            vertical-align: top;
            text-align: left;
            padding: 0;
        }

        .labelled-control-centered-control {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;

            width: 5.5rem;
            height: 5rem;
        }

        .labelled-control-label-container {
            position: relative;
            display: block;
            max-width: 5.5rem;
            margin: -0.4rem auto 0.4rem;
            text-align: center;
            font-size: var(--labelled-control-font-size);
            color: var(--labelled-control-font-color);
            cursor: default;
        }

        .labelled-control-name {
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .labelled-control-value {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            opacity: 0;
        }

        .labelled-control:hover .labelled-control-name,
        .labelled-control:active .labelled-control-name {
            opacity: 0;
        }
        .labelled-control:hover .labelled-control-value,
        .labelled-control:active .labelled-control-value {
            opacity: 1;
        }`}}if(!window.customElements.get("cmaj-knob-control"))window.customElements.define("cmaj-knob-control",D6);if(!window.customElements.get("cmaj-switch-control"))window.customElements.define("cmaj-switch-control",P6);if(!window.customElements.get("cmaj-options-control"))window.customElements.define("cmaj-options-control",Lj);if(!window.customElements.get("cmaj-labelled-control-holder"))window.customElements.define("cmaj-labelled-control-holder",x7);class Ye extends HTMLElement{constructor(A){super();this.patchConnection=A,this.statusListener=(t)=>{this.status=t,this.createControlElements()},this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=this.getHTML(),this.titleElement=this.shadowRoot.getElementById("patch-title"),this.parametersElement=this.shadowRoot.getElementById("patch-parameters")}hasOwnTitleBar(){return!0}connectedCallback(){this.patchConnection.addStatusListener(this.statusListener),this.patchConnection.requestStatusUpdate()}disconnectedCallback(){this.patchConnection.removeStatusListener(this.statusListener)}createControlElements(){if(this.parametersElement.innerHTML="",this.titleElement.innerText=this.status?.manifest?.name??"Cmajor",this.status?.details?.inputs){for(let A of this.status.details.inputs)if(!A.annotation?.hidden){const t=Ct(this.patchConnection,A);if(t)this.parametersElement.appendChild(t)}}}getHTML(){const A=import.meta.url;return`
            <style>
            * {
                box-sizing: border-box;
                user-select: none;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                font-family: Avenir, 'Avenir Next LT Pro', Montserrat, Corbel, 'URW Gothic', source-sans-pro, sans-serif;
                font-size: 0.9rem;
            }

            :host {
                --header-height: 2.5rem;
                --foreground: #ffffff;
                --background: #191b1b;

                display: block;
                height: 100%;
                background-color: var(--background);
            }

            .main {
                background: var(--background);
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .header {
                width: 100%;
                height: var(--header-height);
                border-bottom: 0.1rem solid var(--foreground);
                display: flex;
                justify-content: space-between;
                align-items: center;
                display: none;
            }

            #patch-title {
                color: var(--foreground);
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
                cursor: default;
                font-size: 140%;
            }

            .logo {
                flex: 1;
                opacity: 0;
                height: 80%;
                margin-left: 0.3rem;
                margin-right: 0.3rem;
                background-color: var(--foreground);
                mask: url(${A}/../assets/cmajor-logo.svg);
                mask-repeat: no-repeat;
                -webkit-mask: url(${A}/../assets/cmajor-logo.svg);
                -webkit-mask-repeat: no-repeat;
                min-width: 6.25rem;
            }

            .header-filler {
                flex: 1;
            }

            #patch-parameters {
                max-height: 100%;
                overflow: auto;
                padding: 1rem;
                text-align: center;
                
            }

            ${Ze()}

            </style>

            <div class="main">
              <div class="header">
                <span class="logo"></span>
                <h2 id="patch-title"></h2>
                <div class="header-filler"></div>
              </div>
              <div id="patch-parameters"></div>
            </div>`}}if(!window.customElements.get("cmaj-generic-patch-view"))window.customElements.define("cmaj-generic-patch-view",Ye);function Ut(A){return new Ye(A)}class f7 extends We{constructor(){super()}requestStatusUpdate(){this.sendMessageToServer({type:"req_status"})}addStatusListener(A){this.addEventListener("status",A)}removeStatusListener(A){this.removeEventListener("status",A)}resetToInitialState(){this.sendMessageToServer({type:"req_reset"})}sendEventOrValue(A,t,j,k){this.sendMessageToServer({type:"send_value",id:A,value:t,rampFrames:j,timeout:k})}sendMIDIInputEvent(A,t){this.sendEventOrValue(A,{message:t})}sendParameterGestureStart(A){this.sendMessageToServer({type:"send_gesture_start",id:A})}sendParameterGestureEnd(A){this.sendMessageToServer({type:"send_gesture_end",id:A})}requestStoredStateValue(A){this.sendMessageToServer({type:"req_state_value",key:A})}sendStoredStateValue(A,t){this.sendMessageToServer({type:"send_state_value",key:A,value:t})}addStoredStateValueListener(A){this.addEventListener("state_key_value",A)}removeStoredStateValueListener(A){this.removeEventListener("state_key_value",A)}sendFullStoredState(A){this.sendMessageToServer({type:"send_full_state",value:A})}requestFullStoredState(A){const t="fullstate_response_"+Math.floor(Math.random()*1e8).toString();this.addSingleUseListener(t,A),this.sendMessageToServer({type:"req_full_state",replyType:t})}addEndpointListener(A,t,j,k){t.eventID="event_"+A+"_"+Math.floor(Math.random()*1e8).toString(),this.addEventListener(t.eventID,t),this.sendMessageToServer({type:"add_endpoint_listener",endpoint:A,replyType:t.eventID,granularity:j,fullAudioData:k})}removeEndpointListener(A,t){this.removeEventListener(t.eventID,t),this.sendMessageToServer({type:"remove_endpoint_listener",endpoint:A,replyType:t.eventID})}requestParameterValue(A){this.sendMessageToServer({type:"req_param_value",id:A})}addParameterListener(A,t){this.addEventListener("param_value_"+A.toString(),t)}removeParameterListener(A,t){this.removeEventListener("param_value_"+A.toString(),t)}addAllParameterListener(A){this.addEventListener("param_value",A)}removeAllParameterListener(A){this.removeEventListener("param_value",A)}getResourceAddress(A){return A}utilities={midi:Xt,PianoKeyboard:q6,ParameterControls:zt,GenericPatchView:Ut};deliverMessageFromServer(A){if(A.type==="status")this.manifest=A.message?.manifest;if(A.type=="param_value")this.dispatchEvent("param_value_"+A.message.endpointID,A.message.value);this.dispatchEvent(A.type,A.message)}}async function So(A,t,j){const k=`(${Xo.toString()}) ("${t}", ${A.toString()}, "${j}");`;let e=new FileReader;return e.readAsDataURL(new Blob([k],{type:"text/javascript"})),await new Promise((E)=>{e.onloadend=()=>E(e.result)})}function Xo(A,t,j){function k({wrapper:a,eventOutputs:$,dispatchOutputEvent:d}){const h=$.map(({endpointID:x})=>{const o=a[`getOutputEventCount_${x}`]?.bind(a),F=a[`resetOutputEventCount_${x}`]?.bind(a),i=a[`getOutputEvent_${x}`]?.bind(a);return()=>{const n=o();for(let m=0;m<n;++m)d(x,i(m));F()}});return()=>h.forEach((x)=>x())}function e(a){for(let{initialise:$}of Object.values(a))$()}function E(a,$,d){const h=({endpointType:o,endpointID:F})=>{switch(o){case"event":return`sendInputEvent_${F}`;case"value":return`setInputValue_${F}`}throw"Unhandled endpoint type"},x={};for(let{endpointID:o,endpointType:F,annotation:i,purpose:n}of $){const m=h({endpointType:F,endpointID:o}),v=a[m]?.bind(a),c=(f)=>{if(i.step!=null)f=Math.round(f/i.step)*i.step;if(i.min!=null&&i.max!=null)f=Math.min(Math.max(f,i.min),i.max);return f},p=(f,g)=>{const P=x[o];P.cachedValue=f,v(f,g)};if(p){const f=d[o]??i?.init;x[o]={snapAndConstrainValue:c,update:p,initialise:f!=null?()=>p(f):()=>{},purpose:n,cachedValue:void 0}}}return x}function r({wrapper:a,toEndpoints:$,wrapperMethodNamePrefix:d}){const h=$(a);if(h.length===0)return()=>{};let x=[],o=[],F=0;for(let i of h){const n=a[`${d}_${i.endpointID}`]?.bind(a);if(!n)return()=>{};x.push(n),o.push(F),F+=i.numAudioChannels}return(i,n)=>{for(let m=0;m<x.length;m++)x[m](i,n,o[m])}}function G(a){return r({wrapper:a,toEndpoints:($)=>$.getInputEndpoints().filter(({purpose:d})=>d==="audio in"),wrapperMethodNamePrefix:"setInputStreamFrames"})}function s(a){return r({wrapper:a,toEndpoints:($)=>$.getOutputEndpoints().filter(({purpose:d})=>d==="audio out"),wrapperMethodNamePrefix:"getOutputFrames"})}class B extends AudioWorkletProcessor{static get parameterDescriptors(){return[]}constructor({processorOptions:a,...$}){super($);this.processImpl=void 0,this.consumeOutputEvents=void 0;const{sessionID:d=Date.now()&2147483647,initialValueOverrides:h={}}=a,x=new t;x.initialise(d,sampleRate).then(()=>this.initialisePatch(x,h)).catch((o)=>{throw new Error(o)})}process(a,$){const d=a[0],h=$[0];return this.processImpl?.(d,h),this.consumeOutputEvents?.(),!0}sendPatchMessage(a){this.port.postMessage({type:"patch",payload:a})}sendParameterValueChanged(a,$){this.sendPatchMessage({type:"param_value",message:{endpointID:a,value:$}})}initialisePatch(a,$){try{const d=a.getInputEndpoints().filter(({purpose:w})=>w==="parameter"),h=E(a,d,$);e(h);const x=(w,H)=>{const y=([N,{cachedValue:S}])=>({[w]:N,value:S});return Object.entries(H).map(y)},o=x("endpointID",h),F=a.getState(),i=()=>{a.restoreState(F),e(h)},n=({purpose:w})=>!["audio in","parameter"].includes(w),m=a.getInputEndpoints().filter(n),v=E(a,m,$),c=({endpointType:w})=>w==="event",p=a.getInputEndpoints().filter(c),f=a.getOutputEndpoints().filter(c),g=(w)=>{const H={};for(let{endpointID:y}of w)H[y]=[];return H},P=g(p),T=g(f);this.consumeOutputEvents=k({eventOutputs:f,wrapper:a,dispatchOutputEvent:(w,H)=>{for(let{replyType:y}of T[w]??[])this.sendPatchMessage({type:y,message:H.event})}});const O=128,I=G(a),K=s(a);this.processImpl=(w,H)=>{I(w,O),a.advance(O),K(H,O)},this.port.addEventListener("message",(w)=>{if(w.data.type!=="patch")return;const H=w.data.payload;switch(H.type){case"req_status":{this.sendPatchMessage({type:"status",message:{details:{inputs:a.getInputEndpoints(),outputs:a.getOutputEndpoints()},sampleRate,host:j?j:"WebAudio"}});break}case"req_reset":{i(),o.forEach((y)=>this.sendParameterValueChanged(y.endpointID,y.value));break}case"req_param_value":{const y=H.id,N=h[y];if(!N)return;const S=N.cachedValue;this.sendParameterValueChanged(y,S);break}case"send_value":{const y=H.id,N=h[y];if(N){const C=N.snapAndConstrainValue(H.value);N.update(C,H.rampFrames),this.sendParameterValueChanged(y,C);return}const S=v[y];if(S){S.update(H.value);for(let{replyType:C}of P[y]??[])this.sendPatchMessage({type:C,message:S.cachedValue})}break}case"send_gesture_start":break;case"send_gesture_end":break;case"req_full_state":this.sendPatchMessage({type:H?.replyType,message:{parameters:x("name",h)}});break;case"send_full_state":{const{parameters:y=[]}=w.data.payload?.value||[];for(let[N,S]of Object.entries(h)){const C=y.find(({name:R})=>R===N);if(C)S.update(C.value);else S.initialise();this.sendParameterValueChanged(N,S.cachedValue)}break}case"add_endpoint_listener":{const y=(N,S)=>{const C=S?.endpoint,R=N[C];if(!R)return!1;return R.push({replyType:S?.replyType})>0};if(!y(P,H))y(T,H);break}case"remove_endpoint_listener":{const y=(N,S)=>{const C=S?.endpoint,R=N[C];if(!R)return!1;const X=R.indexOf(S?.replyType);if(X===-1)return!1;return R.splice(X,1).length===1};if(!y(P,H))y(T,H);break}default:break}}),this.port.postMessage({type:"initialised"}),this.port.start()}catch(d){this.port.postMessage(d.toString())}}}registerProcessor(A,B)}async function Co(A,t){try{const j=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}});if(!j)throw new Error;const k=A.createMediaStreamSource(j);if(!k)throw new Error;k.connect(t)}catch(j){console.warn("Could not open audio input")}}async function zo(A,t){try{if(!navigator.requestMIDIAccess)throw new Error("Web MIDI API not supported.");const j=await navigator.requestMIDIAccess({sysex:!0,software:!0});for(let k of j.inputs.values())k.onmidimessage=({data:e})=>A.sendMIDIInputEvent(t,e[2]|e[1]<<8|e[0]<<16)}catch(j){console.warn(`Could not open MIDI devices: ${j}`)}}class jE extends f7{constructor(A){super();this.manifest=A,this.cachedState={}}async initialise({CmajorClass:A,audioContext:t,workletName:j,hostDescription:k,sessionID:e,initialValueOverrides:E,rootResourcePath:r}){if(this.audioContext=t,r){if(this.rootResourcePath=r.toString(),!this.rootResourcePath.endsWith("/"))this.rootResourcePath+="/"}else{const F=(i)=>{return i.href.substring(0,i.href.lastIndexOf("/"))};if(this.rootResourcePath=F(new URL(".",import.meta.url)),!this.rootResourcePath.endsWith("/"))this.rootResourcePath+="/../"}const G=await So(A,j,k);await t.audioWorklet.addModule(G),this.inputEndpoints=A.prototype.getInputEndpoints(),this.outputEndpoints=A.prototype.getOutputEndpoints();const s=this.inputEndpoints.filter(({purpose:F})=>F==="audio in"),B=this.outputEndpoints.filter(({purpose:F})=>F==="audio out");let a=0,$=0;s.forEach((F)=>{a=a+F.numAudioChannels}),B.forEach((F)=>{$=$+F.numAudioChannels});const d=a>0,h=$>0,x=new AudioWorkletNode(t,j,{numberOfInputs:+d,numberOfOutputs:+h,channelCountMode:"explicit",channelCount:d?a:void 0,outputChannelCount:h?[$]:[],processorOptions:{sessionID:e,initialValueOverrides:E}}),o=async()=>{return new Promise((F)=>{const i=(n)=>{if(n.data.type==="initialised")x.port.removeEventListener("message",i),F()};x.port.addEventListener("message",i)})};x.port.start(),await o(),this.audioNode=x,x.port.addEventListener("message",(F)=>{if(F.data.type==="patch"){const i=F.data.payload;if(i?.type==="status")i.message={manifest:this.manifest,...i.message};this.deliverMessageFromServer(i)}}),await this.startPatchWorker()}async connectDefaultAudioAndMIDI(A){if(!this.audioNode)throw new Error("AudioWorkletPatchConnection.initialise() must have been successfully completed before calling connectDefaultAudioAndMIDI()");const t=(k)=>{for(let e of this.inputEndpoints)if(e.purpose===k)return e.endpointID},j=t("midi in");if(j)zo(this,j);if(t("audio in"))Co(A,this.audioNode);this.audioNode.connect(A.destination)}sendMessageToServer(A){this.audioNode.port.postMessage({type:"patch",payload:A})}requestStoredStateValue(A){this.dispatchEvent("state_key_value",{key:A,value:this.cachedState[A]})}sendStoredStateValue(A,t){if(this.cachedState[A]!=t){if(t==null){delete this.cachedState[A];return}this.cachedState[A]=t,this.dispatchEvent("state_key_value",{key:A,value:t})}}sendFullStoredState(A){const t=(()=>{const e={};return Object.keys(this.cachedState).forEach((E)=>e[E]=void 0),e})(),j=A.values??{},k={...t,...j};Object.entries(k).forEach(([e,E])=>this.sendStoredStateValue(e,E)),super.sendFullStoredState(A)}requestFullStoredState(A){super.requestFullStoredState((t)=>A({values:{...this.cachedState},...t}))}getResourceAddress(A){return this.rootResourcePath+A}async readResource(A){return fetch(A)}async readResourceAsAudioData(A){const t=await this.readResource(A),j=await this.audioContext.decodeAudioData(await t.arrayBuffer());let k=[];for(let e=0;e<j.length;++e)k.push([]);for(let e=0;e<j.numberOfChannels;++e){const E=j.getChannelData(e);for(let r=0;r<j.length;++r)k[r].push(E[r])}return{frames:k,sampleRate:j.sampleRate}}async startPatchWorker(){if(this.manifest.worker?.length>0)(await import(this.getResourceAddress(this.manifest.worker))).default(this)}}async function Vo(A,t){if(A?.manifest){let j=A.manifest.view;if(j&&t==="generic"){if(j.src)j=void 0}const k=j?.src?A.getResourceAddress(j.src):"./cmaj-generic-patch-view.js",E=await(j?.src?await import(k):AE)?.default(A);if(E){if(E.style.display="block",j?.width>10)E.style.width=j.width+"px";else E.style.width=void 0;if(j?.height>10)E.style.height=j.height+"px";else E.style.height=void 0;return E}}return}function EB(A,t,j){function k(E){const r=getComputedStyle(E);return{width:E.clientHeight-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom),height:E.clientWidth-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)}}const e=A.getScaleFactorLimits?.();if(e&&(e.minScale||e.maxScale)&&j){const E=e.minScale||0.25,r=e.maxScale||5,G=k(j),s=k(A),B=G.width/s.width,a=G.height/s.height,$=Math.min(r,Math.max(E,Math.min(B,a)));t.style.transform=`scale(${$})`}else t.style.transform="none"}async function GB(A,t){const j=await Vo(A,t);if(j)return new tE(j)}class tE extends HTMLElement{constructor(A){super();this.view=A,this.style="display: block; position: relative; width: 100%; height: 100%; overflow: visible; transform-origin: 0% 0%;"}connectedCallback(){this.appendChild(this.view),this.resizeObserver=new ResizeObserver(()=>EB(this.view,this,this.parentElement)),this.resizeObserver.observe(this.parentElement),EB(this.view,this,this.parentElement)}disconnectedCallback(){this.resizeObserver=void 0,this.innerHTML=""}}if(!window.customElements.get("cmaj-patch-view-holder"))window.customElements.define("cmaj-patch-view-holder",tE);class H7 extends dj{A;t;j;k;static styles=n7`
		:host {
			display: flex;
			flex-direction: column;
			width: 100%;
			height: 100%;
		}
		main {
			flex: 1;
			position: relative;
		}
		main>* {
			position: absolute !important;
			inset: 0;
		}
		footer {
			background-color: #191b1b;
			display: flex;
			width: 100%;
			justify-content: center;
			z-index: 1000;
		}
		cmaj-panel-piano-keyboard {
			height: 32px;
			position: sticky;
			bottom: 0;
			flex-shrink: 0;
			justify-content: center;
			align-items: center;
			max-width: 100% !important;
		}
	`;connection;main;constructor(A,t,j,k){super();this.manifest=A;this.version=t;this.code=j;this.fileId=k;if(!window.customElements.get("cmaj-panel-piano-keyboard"))customElements.define("cmaj-panel-piano-keyboard",q6)}init=async(A)=>{const t=this.connection=new jE(this.manifest);t.addAllParameterListener(async()=>{const r=await y6.addTask(this,()=>new Promise((G)=>this.connection?.requestFullStoredState((s)=>G(s))));localStorage.setItem("state-"+this.fileId,JSON.stringify(r))}),t.getCmajorVersion=()=>this.version,await t.initialise({CmajorClass:await new Function(`return (${this.code});`)(),audioContext:A,workletName:"cmaj-worklet-processor",hostDescription:"WebAudio",rootResourcePath:document.location.pathname});const j=JSON.parse(localStorage.getItem("state-"+this.fileId)??"null");if(j)this.connection.sendFullStoredState(j);const k=this.shadowRoot.appendChild(document.createElement("main"));this.main=k;const e=this.shadowRoot.appendChild(document.createElement("footer"));this.shadowRoot.append(e),k.appendChild(await GB(t));const E=this.getMIDIInputEndpointID(t);if(E){const r=new q6;r.attachToPatchConnection(t,E),r.style.display="flex",e.appendChild(r)}while(!window.parent.audioStarted)await new Promise((r)=>setTimeout(r,100));t.connectDefaultAudioAndMIDI(A)};updated(){if(this.main)this.main.style.transform=`scale(${localStorage.getItem("zoom")??100}%)`}getMIDIInputEndpointID=(A)=>A.inputEndpoints.find((t)=>t.purpose==="midi in")?.endpointID}H7=T7([Lt("cmaj-renderer")],H7);var d$=import.meta.resolve(_t);function Zo(A,t,j,k){function e(E){return E instanceof j?E:new j(function(r){r(E)})}return new(j||(j=Promise))(function(E,r){function G(a){try{B(k.next(a))}catch($){r($)}}function s(a){try{B(k.throw(a))}catch($){r($)}}function B(a){a.done?E(a.value):e(a.value).then(G,s)}B((k=k.apply(A,t||[])).next())})}function Yo(A,t){var j={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},k,e,E,r=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return r.next=G(0),r.throw=G(1),r.return=G(2),typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function G(B){return function(a){return s([B,a])}}function s(B){if(k)throw new TypeError("Generator is already executing.");while(r&&(r=0,B[0]&&(j=0)),j)try{if(k=1,e&&(E=B[0]&2?e.return:B[0]?e.throw||((E=e.return)&&E.call(e),0):e.next)&&!(E=E.call(e,B[1])).done)return E;if(e=0,E)B=[B[0]&2,E.value];switch(B[0]){case 0:case 1:E=B;break;case 4:return j.label++,{value:B[1],done:!1};case 5:j.label++,e=B[1],B=[0];continue;case 7:B=j.ops.pop(),j.trys.pop();continue;default:if((E=j.trys,!(E=E.length>0&&E[E.length-1]))&&(B[0]===6||B[0]===2)){j=0;continue}if(B[0]===3&&(!E||B[1]>E[0]&&B[1]<E[3])){j.label=B[1];break}if(B[0]===6&&j.label<E[1]){j.label=E[1],E=B;break}if(E&&j.label<E[2]){j.label=E[2],j.ops.push(B);break}if(E[2])j.ops.pop();j.trys.pop();continue}B=t.call(A,j)}catch(a){B=[6,a],e=0}finally{k=E=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}}function sB(A){if(A instanceof Uint8Array)return A;if(typeof A==="string")return Eu(A);if(ArrayBuffer.isView(A))return new Uint8Array(A.buffer,A.byteOffset,A.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(A)}function Gu(A){if(typeof A==="string")return A.length===0;return A.byteLength===0}function ru(A){var t=sB(A);if(t.byteLength>QA){var j=new Vt;j.update(t),t=j.digest()}var k=new Uint8Array(QA);return k.set(t),k}var aB=(A,t,j)=>{if(!t.has(A))throw TypeError("Cannot "+j)},lB=(A,t,j)=>{return aB(A,t,"read from private field"),j?j.call(A):t.get(A)},rB=(A,t,j)=>{if(t.has(A))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(A):t.set(A,j)},qB=(A,t,j,k)=>{return aB(A,t,"write to private field"),k?k.call(A,j):t.set(A,j),j};var Jo=(A,t,j=!0)=>{const{registerProcessor:k,AudioWorkletProcessor:e,sampleRate:E}=globalThis,{FaustBaseWebAudioDsp:r,FaustWasmInstantiator:G}=A,{processorName:s,dspName:B,dspMeta:a,effectMeta:$,poly:d}=t,h=(n)=>{const m=["/gate","/freq","/gain","/key","/vel","/velocity"],v="address"in n&&!!m.find((c)=>n.address.endsWith(c));if(d&&v)return null;if(n.type==="vslider"||n.type==="hslider"||n.type==="nentry")return{name:n.address,defaultValue:n.init||0,minValue:n.min||0,maxValue:n.max||0};else if(n.type==="button"||n.type==="checkbox")return{name:n.address,defaultValue:n.init||0,minValue:0,maxValue:1};return null};class x extends e{constructor(n){super(n);this.paramValuesCache={},this.port.onmessage=(p)=>this.handleMessageAux(p);const{parameterDescriptors:m}=this.constructor;m.forEach((p)=>{this.paramValuesCache[p.name]=p.defaultValue||0});const{moduleId:v,instanceId:c}=n.processorOptions;if(!v||!c)return;this.wamInfo={moduleId:v,instanceId:c}}static get parameterDescriptors(){const n=[],m=(v)=>{const c=h(v);if(c)n.push(c)};if(r.parseUI(a.ui,m),$)r.parseUI($.ui,m);return n}setupWamEventHandler(){var n;if(!this.wamInfo)return;const{moduleId:m,instanceId:v}=this.wamInfo,{webAudioModules:c}=globalThis,p=c.getModuleScope(m),f=(n=p==null?void 0:p.paramMgrProcessors)==null?void 0:n[v];if(!f)return;if(f.handleEvent)return;f.handleEvent=(g)=>{if(g.type==="wam-midi")this.midiMessage(g.data.bytes)}}process(n,m,v){for(let c in v){const[p]=v[c];if(p!==this.paramValuesCache[c])this.fDSPCode.setParamValue(c,p),this.paramValuesCache[c]=p}return this.fDSPCode.compute(n[0],m[0])}handleMessageAux(n){const m=n.data;switch(m.type){case"acc":{this.propagateAcc(m.data,m.invert);break}case"gyr":{this.propagateGyr(m.data);break}case"midi":{this.midiMessage(m.data);break}case"ctrlChange":{this.ctrlChange(m.data[0],m.data[1],m.data[2]);break}case"pitchWheel":{this.pitchWheel(m.data[0],m.data[1]);break}case"param":{this.setParamValue(m.data.path,m.data.value);break}case"setPlotHandler":{if(m.data)this.fDSPCode.setPlotHandler((v,c,p)=>this.port.postMessage({type:"plot",value:v,index:c,events:p}));else this.fDSPCode.setPlotHandler(null);break}case"setupWamEventHandler":{this.setupWamEventHandler();break}case"start":{this.fDSPCode.start();break}case"stop":{this.fDSPCode.stop();break}case"destroy":{this.port.close(),this.fDSPCode.destroy();break}default:break}}setParamValue(n,m){this.fDSPCode.setParamValue(n,m),this.paramValuesCache[n]=m}midiMessage(n){this.fDSPCode.midiMessage(n)}ctrlChange(n,m,v){this.fDSPCode.ctrlChange(n,m,v)}pitchWheel(n,m){this.fDSPCode.pitchWheel(n,m)}propagateAcc(n,m=!1){this.fDSPCode.propagateAcc(n,m)}propagateGyr(n){this.fDSPCode.propagateGyr(n)}}class o extends x{constructor(n){super(n);const{FaustMonoWebAudioDsp:m}=A,{factory:v,sampleSize:c}=n.processorOptions,p=G.createSyncMonoDSPInstance(v);this.fDSPCode=new m(p,E,c,128,v.soundfiles),this.fDSPCode.setOutputParamHandler((f,g)=>this.port.postMessage({path:f,value:g,type:"param"})),this.fDSPCode.start()}}class F extends x{constructor(n){super(n);this.handleMessageAux=(O)=>{const I=O.data;switch(I.type){case"keyOn":this.keyOn(I.data[0],I.data[1],I.data[2]);break;case"keyOff":this.keyOff(I.data[0],I.data[1],I.data[2]);break;default:super.handleMessageAux(O);break}};const{FaustPolyWebAudioDsp:m}=A,{voiceFactory:v,mixerModule:c,voices:p,effectFactory:f,sampleSize:g}=n.processorOptions,P=G.createSyncPolyDSPInstance(v,c,p,f),T={...f==null?void 0:f.soundfiles,...v.soundfiles};this.fDSPCode=new m(P,E,g,128,T),this.port.onmessage=(O)=>this.handleMessageAux(O),this.fDSPCode.setOutputParamHandler((O,I)=>this.port.postMessage({path:O,value:I,type:"param"})),this.fDSPCode.start()}midiMessage(n){const m=n[0]>>4,v=n[0]&15,c=n[1],p=n[2];if(m===8||m===9&&p===0)this.keyOff(v,c,p);else if(m===9)this.keyOn(v,c,p);else super.midiMessage(n)}keyOn(n,m,v){this.fDSPCode.keyOn(n,m,v)}keyOff(n,m,v){this.fDSPCode.keyOff(n,m,v)}allNotesOff(n){this.fDSPCode.allNotesOff(n)}}const i=d?F:o;if(j)try{k(s||B||(d?"mydsp_poly":"mydsp"),i)}catch(n){console.warn(n)}return d?F:o},Wt=Jo,Qo=(A,t,j=!0)=>{const{registerProcessor:k,AudioWorkletProcessor:e,sampleRate:E}=globalThis,{FaustBaseWebAudioDsp:r,FaustWasmInstantiator:G,FaustMonoWebAudioDsp:s,FFTUtils:B}=A,{processorName:a,dspName:$,dspMeta:d,fftOptions:h}=t,{windowFunctions:x,getFFT:o,fftToSignal:F,signalToFFT:i,signalToNoFFT:n}=B,m=(O,I)=>Math.abs(I)<1?Math.ceil(O*(1/I))/(1/I):Math.ceil(O/I)*I,v=(O,I)=>(O%I+I)%I,c=(O,I)=>{for(let K=0;K<O.length;K++)O[K]*=I(K,O.length)},p=["/fftSize","/fftHopSize","/fftOverlap","/windowFunction","/noIFFT"],f=(O,I,K=0,w=0)=>{const H=O.length,y=I.length,N=Math.min(H,y);let S=0,C=v(K,H)||0,R=v(w,y)||0;while(S<N){const X=Math.min(N-S,H-C,y-R),L=R+X;if(R===0&&L===y)O.set(I,C);else O.set(I.subarray(R,L),C);C=(C+X)%H,R=L%y,S+=X}return C},g=(O)=>{if("address"in O&&!!p.find((K)=>O.address.endsWith(K)))return null;if(O.type==="vslider"||O.type==="hslider"||O.type==="nentry")return{name:O.address,defaultValue:O.init||0,minValue:O.min||0,maxValue:O.max||0};else if(O.type==="button"||O.type==="checkbox")return{name:O.address,defaultValue:O.init||0,minValue:0,maxValue:1};return null};class P extends e{constructor(O){super(O);this.paramValuesCache={},this.destroyed=!1,this.$inputWrite=0,this.$inputRead=0,this.$outputWrite=0,this.$outputRead=0,this.noIFFT=!1,this.fftInput=[],this.fftOutput=[],this.fftOverlap=0,this.fftHopSize=0,this.fftSize=0,this.fftBufferSize=0,this.fPlotHandler=null,this.fCachedEvents=[],this.fBufferNum=0,this.soundfiles={},this.windowFunction=null,this.port.onmessage=(N)=>this.handleMessageAux(N);const{parameterDescriptors:I}=this.constructor;I.forEach((N)=>{this.paramValuesCache[N.name]=N.defaultValue||0});const{factory:K,sampleSize:w}=O.processorOptions;this.dspInstance=G.createSyncMonoDSPInstance(K),this.sampleSize=w,this.soundfiles=K.soundfiles,this.initFFT();const{moduleId:H,instanceId:y}=O.processorOptions;if(!H||!y)return;this.wamInfo={moduleId:H,instanceId:y}}get fftProcessorBufferSize(){return this.fftSize/2+1}async initFFT(){return this.FFT=await o(),await this.createFFTProcessor(),!0}static get parameterDescriptors(){const O=[],I=(K)=>{const w=g(K);if(w)O.push(w)};return r.parseUI(d.ui,I),[...O,{defaultValue:(h==null?void 0:h.fftSize)||1024,maxValue:4294967296,minValue:2,name:"fftSize"},{defaultValue:(h==null?void 0:h.fftOverlap)||2,maxValue:32,minValue:1,name:"fftOverlap"},{defaultValue:typeof(h==null?void 0:h.defaultWindowFunction)==="number"?h.defaultWindowFunction+1:0,maxValue:(x==null?void 0:x.length)||0,minValue:0,name:"windowFunction"},{defaultValue:+!!(h==null?void 0:h.noIFFT)||0,maxValue:1,minValue:0,name:"noIFFT"}]}setupWamEventHandler(){var O;if(!this.wamInfo)return;const{moduleId:I,instanceId:K}=this.wamInfo,{webAudioModules:w}=globalThis,H=w.getModuleScope(I),y=(O=H==null?void 0:H.paramMgrProcessors)==null?void 0:O[K];if(!y)return;if(y.handleEvent)return;y.handleEvent=(N)=>{if(N.type==="wam-midi")this.midiMessage(N.data.bytes)}}processFFT(){let O=v(this.$inputWrite-this.$inputRead,this.fftBufferSize)||this.fftBufferSize;while(O>=this.fftSize){let I=[];this.fDSPCode.compute((K)=>{for(let w=0;w<Math.min(this.fftInput.length,Math.ceil(K.length/3));w++){const H=this.rfft.forward((y)=>{f(y,this.fftInput[w],0,this.$inputRead);for(let N=0;N<y.length;N++)y[N]*=this.window[N]});F(H,K[w*3],K[w*3+1],K[w*3+2])}for(let w=this.fftInput.length*3;w<K.length;w++)if(w%3===2)K[w].forEach((H,y)=>K[w][y]=y);else K[w].fill(0)},(K)=>{I=K}),this.$inputRead+=this.fftHopSize,this.$inputRead%=this.fftBufferSize,O-=this.fftHopSize;for(let K=0;K<this.fftOutput.length;K++){let w;if(this.noIFFT)w=this.noIFFTBuffer,n(I[K*2]||this.fftProcessorZeros,I[K*2+1]||this.fftProcessorZeros,w);else w=this.rfft.inverse((y)=>{i(I[K*2]||this.fftProcessorZeros,I[K*2+1]||this.fftProcessorZeros,y)});for(let y=0;y<w.length;y++)w[y]*=this.window[y];let H;for(let y=0;y<w.length-this.fftHopSize;y++)if(H=v(this.$outputWrite+y,this.fftBufferSize),this.fftOutput[K][H]+=w[y],K===0)this.windowSumSquare[H]+=this.noIFFT?this.window[y]:this.window[y]**2;for(let y=w.length-this.fftHopSize;y<w.length;y++)if(H=v(this.$outputWrite+y,this.fftBufferSize),this.fftOutput[K][H]=w[y],K===0)this.windowSumSquare[H]=this.noIFFT?this.window[y]:this.window[y]**2}this.$outputWrite+=this.fftHopSize,this.$outputWrite%=this.fftBufferSize}}process(O,I,K){if(this.destroyed)return!1;if(!this.FFT)return!0;const w=O[0],H=I[0],y=(w==null?void 0:w.length)||0,N=(H==null?void 0:H.length)||0,S=(w==null?void 0:w.length)?Math.max(...w.map((C)=>C.length))||128:128;if(this.noIFFT=!!K.noIFFT[0],this.resetFFT(~~K.fftSize[0],~~K.fftOverlap[0],~~K.windowFunction[0],y,N,S),!this.fDSPCode)return!0;for(let C in K){if(p.find((X)=>`/${C}`.endsWith(X)))continue;const[R]=K[C];if(R!==this.paramValuesCache[C])this.fDSPCode.setParamValue(C,R),this.paramValuesCache[C]=R}if(w==null?void 0:w.length){let C=0;for(let R=0;R<w.length;R++){const X=this.fftInput[R],L=w[R].length?w[R]:new Float32Array(S);C=f(X,L,this.$inputWrite)}this.$inputWrite=C}else this.$inputWrite+=S,this.$inputWrite%=this.fftBufferSize;this.processFFT();for(let C=0;C<H.length;C++){f(H[C],this.fftOutput[C],0,this.$outputRead);let R=0;for(let X=0;X<S;X++)R=this.windowSumSquare[v(this.$outputRead+X,this.fftBufferSize)],H[C][X]/=R<0.00000001?1:R}if(this.$outputRead+=S,this.$outputRead%=this.fftBufferSize,this.fPlotHandler)this.port.postMessage({type:"plot",value:H,index:this.fBufferNum++,events:this.fCachedEvents}),this.fCachedEvents=[];return!0}handleMessageAux(O){var I,K,w;const H=O.data;switch(H.type){case"midi":this.midiMessage(H.data);break;case"ctrlChange":this.ctrlChange(H.data[0],H.data[1],H.data[2]);break;case"pitchWheel":this.pitchWheel(H.data[0],H.data[1]);break;case"param":this.setParamValue(H.data.path,H.data.value);break;case"setPlotHandler":{if(H.data)this.fPlotHandler=(y,N,S)=>{if(S)this.fCachedEvents.push(...S)};else this.fPlotHandler=null;(I=this.fDSPCode)==null||I.setPlotHandler(this.fPlotHandler);break}case"setupWamEventHandler":{this.setupWamEventHandler();break}case"start":{(K=this.fDSPCode)==null||K.start();break}case"stop":{(w=this.fDSPCode)==null||w.stop();break}case"destroy":{this.port.close(),this.destroy();break}default:break}}setParamValue(O,I){var K;(K=this.fDSPCode)==null||K.setParamValue(O,I),this.paramValuesCache[O]=I}midiMessage(O){var I;(I=this.fDSPCode)==null||I.midiMessage(O)}ctrlChange(O,I,K){var w;(w=this.fDSPCode)==null||w.ctrlChange(O,I,K)}pitchWheel(O,I){var K;(K=this.fDSPCode)==null||K.pitchWheel(O,I)}resetFFT(O,I,K,w,H,y){var N,S;const C=~~m(Math.max(2,O||1024),2),R=~~Math.min(C,Math.max(1,I)),X=~~Math.max(1,C/R),L=C-Math.min(X,y);let Q=null;if(K!==0)Q=typeof x==="object"?x[~~K-1]||null:null;const Z=C!==this.fftSize,kA=R!==this.fftOverlap;if(Z||kA){if(this.fftSize=C,this.fftOverlap=R,this.fftHopSize=X,this.$inputWrite=0,this.$inputRead=0,this.$outputWrite=0,this.$outputRead=-L,this.fftBufferSize=Math.max(C*2-this.fftHopSize,y*2),!Z&&this.fftHopSizeParam)(N=this.fDSPCode)==null||N.setParamValue(this.fftHopSizeParam,this.fftHopSize)}if(Z)(S=this.rfft)==null||S.dispose(),this.rfft=new this.FFT(C),this.noIFFTBuffer=new Float32Array(this.fftSize),this.createFFTProcessor();if(Z||kA||Q!==this.windowFunction){if(this.windowFunction=Q,this.window=new Float32Array(C),this.window.fill(1),Q)c(this.window,Q);this.windowSumSquare=new Float32Array(this.fftBufferSize)}if(this.fftInput.length>w)this.fftInput.splice(w);if(this.fftOutput.length>H)this.fftOutput.splice(H);if(Z||kA){for(let eA=0;eA<w;eA++)this.fftInput[eA]=new Float32Array(this.fftBufferSize);for(let eA=0;eA<H;eA++)this.fftOutput[eA]=new Float32Array(this.fftBufferSize)}else{if(this.fftInput.length<w)for(let eA=this.fftInput.length;eA<w;eA++)this.fftInput[eA]=new Float32Array(this.fftBufferSize);if(this.fftOutput.length<H)for(let eA=this.fftOutput.length;eA<H;eA++)this.fftOutput[eA]=new Float32Array(this.fftBufferSize)}}async createFFTProcessor(){var O,I;(O=this.fDSPCode)==null||O.stop(),(I=this.fDSPCode)==null||I.destroy(),this.fDSPCode=new s(this.dspInstance,E,this.sampleSize,this.fftProcessorBufferSize,this.soundfiles),this.fDSPCode.setOutputParamHandler((H,y)=>this.port.postMessage({path:H,value:y,type:"param"})),this.fDSPCode.setPlotHandler(this.fPlotHandler);const K=this.fDSPCode.getParams();this.fDSPCode.start();for(let H in this.paramValuesCache){if(p.find((y)=>`/${H}`.endsWith(y)))continue;this.fDSPCode.setParamValue(H,this.paramValuesCache[H])}const w=K.find((H)=>H.endsWith("/fftSize"));if(w)this.fDSPCode.setParamValue(w,this.fftSize);if(this.fftHopSizeParam=K.find((H)=>H.endsWith("/fftHopSize")),this.fftHopSizeParam)this.fDSPCode.setParamValue(this.fftHopSizeParam,this.fftHopSize);this.fftProcessorZeros=new Float32Array(this.fftProcessorBufferSize)}destroy(){var O,I,K;(O=this.fDSPCode)==null||O.stop(),(I=this.fDSPCode)==null||I.destroy(),(K=this.rfft)==null||K.dispose(),this.destroyed=!0}}const T=P;if(j)try{k(a||$||"myfftdsp",T)}catch(O){console.warn(O)}return P},Wo=Qo,QA=64,Au=32,ju=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ku=Math.pow(2,53)-1,Vt=function(){function A(){this.state=Int32Array.from(tu),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return A.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var j=0,k=t.byteLength;if(this.bytesHashed+=k,this.bytesHashed*8>ku)throw new Error("Cannot hash more than 2^53 - 1 bits");while(k>0)if(this.buffer[this.bufferLength++]=t[j++],k--,this.bufferLength===QA)this.hashBuffer(),this.bufferLength=0},A.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,j=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),k=this.bufferLength;if(j.setUint8(this.bufferLength++,128),k%QA>=QA-8){for(var e=this.bufferLength;e<QA;e++)j.setUint8(e,0);this.hashBuffer(),this.bufferLength=0}for(var e=this.bufferLength;e<QA-8;e++)j.setUint8(e,0);j.setUint32(QA-8,Math.floor(t/4294967296),!0),j.setUint32(QA-4,t),this.hashBuffer(),this.finished=!0}var E=new Uint8Array(Au);for(var e=0;e<8;e++)E[e*4]=this.state[e]>>>24&255,E[e*4+1]=this.state[e]>>>16&255,E[e*4+2]=this.state[e]>>>8&255,E[e*4+3]=this.state[e]>>>0&255;return E},A.prototype.hashBuffer=function(){var t=this,j=t.buffer,k=t.state,e=k[0],E=k[1],r=k[2],G=k[3],s=k[4],B=k[5],a=k[6],$=k[7];for(var d=0;d<QA;d++){if(d<16)this.temp[d]=(j[d*4]&255)<<24|(j[d*4+1]&255)<<16|(j[d*4+2]&255)<<8|j[d*4+3]&255;else{var h=this.temp[d-2],x=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10;h=this.temp[d-15];var o=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[d]=(x+this.temp[d-7]|0)+(o+this.temp[d-16]|0)}var F=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&B^~s&a)|0)+($+(ju[d]+this.temp[d]|0)|0)|0,i=((e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10))+(e&E^e&r^E&r)|0;$=a,a=B,B=s,s=G+F|0,G=r,r=E,E=e,e=F+i|0}k[0]+=e,k[1]+=E,k[2]+=r,k[3]+=G,k[4]+=s,k[5]+=B,k[6]+=a,k[7]+=$},A}(),eu=(A)=>new TextEncoder().encode(A),Eu=typeof Buffer!=="undefined"&&Buffer.from?function(A){return Buffer.from(A,"utf8")}:eu,lu=function(){function A(t){this.secret=t,this.hash=new Vt,this.reset()}return A.prototype.update=function(t){if(Gu(t)||this.error)return;try{this.hash.update(sB(t))}catch(j){this.error=j}},A.prototype.digestSync=function(){if(this.error)throw this.error;if(this.outer){if(!this.outer.finished)this.outer.update(this.hash.digest());return this.outer.digest()}return this.hash.digest()},A.prototype.digest=function(){return Zo(this,void 0,void 0,function(){return Yo(this,function(t){return[2,this.digestSync()]})})},A.prototype.reset=function(){if(this.hash=new Vt,this.secret){this.outer=new Vt;var t=ru(this.secret),j=new Uint8Array(QA);j.set(t);for(var k=0;k<QA;k++)t[k]^=54,j[k]^=92;this.hash.update(t),this.outer.update(j);for(var k=0;k<t.byteLength;k++)t[k]=0}},A}(),qu=(A)=>String.fromCharCode.apply(null,A),Bu=(A)=>{const t=new ArrayBuffer(A.length),j=new Uint8Array(t);for(let k=0,e=A.length;k<e;k++)j[k]=A.charCodeAt(k);return j},au=async(A)=>{const t=new lu;return t.update(A),Array.from(await t.digest()).map((e)=>e.toString(16).padStart(2,"0")).join("")},su=class A{static serializeDSPFactories(){const t={};return this.gFactories.forEach((j,k)=>{const{code:e,json:E,poly:r}=j;t[k]={code:btoa(qu(e)),json:JSON.parse(E),poly:r}}),t}static stringifyDSPFactories(){return JSON.stringify(this.serializeDSPFactories())}static deserializeDSPFactories(t){const j=[];for(let k in t){const e=t[k],{code:E,json:r,poly:G}=e,s=Bu(atob(E));j.push(WebAssembly.compile(s).then((B)=>this.gFactories.set(k,{shaKey:k,cfactory:0,code:s,module:B,json:JSON.stringify(r),poly:G,soundfiles:{}})))}return Promise.all(j)}static importDSPFactories(t){const j=JSON.parse(t);return this.deserializeDSPFactories(j)}constructor(t){this.fLibFaust=t,this.fErrorMessage=""}intVec2intArray(t){const j=t.size(),k=new Uint8Array(j);for(let e=0;e<j;e++)k[e]=t.get(e);return k}async createDSPFactory(t,j,k,e){if(A.gFactories.size>10)A.gFactories.clear();let E=await au(t+j+k+(e?"poly":"mono"));if(A.gFactories.has(E))return A.gFactories.get(E)||null;else try{const r=this.fLibFaust.createDSPFactory(t,j,k,!e),G=this.intVec2intArray(r.data);r.data.delete();const s=await WebAssembly.compile(G),B={shaKey:E,cfactory:r.cfactory,code:G,module:s,json:r.json,poly:e,soundfiles:{}};return this.deleteDSPFactory(B),A.gFactories.set(E,B),B}catch(r){throw this.fErrorMessage=this.fLibFaust.getErrorAfterException(),this.fLibFaust.cleanupAfterException(),this.fErrorMessage?new Error(this.fErrorMessage):r}}version(){return this.fLibFaust.version()}getErrorMessage(){return this.fErrorMessage}async createMonoDSPFactory(t,j,k){return this.createDSPFactory(t,j,k,!1)}async createPolyDSPFactory(t,j,k){return this.createDSPFactory(t,j,k,!0)}deleteDSPFactory(t){this.fLibFaust.deleteDSPFactory(t.cfactory),t.cfactory=0}expandDSP(t,j){try{return this.fLibFaust.expandDSP("FaustDSP",t,j)}catch(k){throw this.fErrorMessage=this.fLibFaust.getErrorAfterException(),this.fLibFaust.cleanupAfterException(),this.fErrorMessage?new Error(this.fErrorMessage):k}}generateAuxFiles(t,j,k){try{return this.fLibFaust.generateAuxFiles(t,j,k)}catch(e){throw this.fErrorMessage=this.fLibFaust.getErrorAfterException(),this.fLibFaust.cleanupAfterException(),this.fErrorMessage?new Error(this.fErrorMessage):e}}deleteAllDSPFactories(){this.fLibFaust.deleteAllDSPFactories()}fs(){return this.fLibFaust.fs()}async getAsyncInternalMixerModule(t=!1){const j=t?"mixer64Buffer":"mixer32Buffer",k=t?"mixer64Module":"mixer32Module";if(this[k])return{mixerBuffer:this[j],mixerModule:this[k]};const e=t?"/usr/rsrc/mixer64.wasm":"/usr/rsrc/mixer32.wasm",E=this.fs().readFile(e,{encoding:"binary"});this[j]=E;const r=await WebAssembly.compile(E);return this[k]=r,{mixerBuffer:E,mixerModule:r}}getSyncInternalMixerModule(t=!1){const j=t?"mixer64Buffer":"mixer32Buffer",k=t?"mixer64Module":"mixer32Module";if(this[k])return{mixerBuffer:this[j],mixerModule:this[k]};const e=t?"/usr/rsrc/mixer64.wasm":"/usr/rsrc/mixer32.wasm",E=this.fs().readFile(e,{encoding:"binary"});this[j]=E;const r=new WebAssembly.Module(E);return this[k]=r,{mixerBuffer:E,mixerModule:r}}};su.gFactories=new Map;var RA=class{constructor(A){this.fExports=A}compute(A,t,j,k){this.fExports.compute(A,t,j,k)}getNumInputs(A){return this.fExports.getNumInputs(A)}getNumOutputs(A){return this.fExports.getNumOutputs(A)}getParamValue(A,t){return this.fExports.getParamValue(A,t)}getSampleRate(A){return this.fExports.getSampleRate(A)}init(A,t){this.fExports.init(A,t)}instanceClear(A){this.fExports.instanceClear(A)}instanceConstants(A,t){this.fExports.instanceConstants(A,t)}instanceInit(A,t){this.fExports.instanceInit(A,t)}instanceResetUserInterface(A){this.fExports.instanceResetUserInterface(A)}setParamValue(A,t,j){this.fExports.setParamValue(A,t,j)}},Fu=class{static createWasmImport(A){return{env:{memory:A||new WebAssembly.Memory({initial:100}),memoryBase:0,tableBase:0,_abs:Math.abs,_acosf:Math.acos,_asinf:Math.asin,_atanf:Math.atan,_atan2f:Math.atan2,_ceilf:Math.ceil,_cosf:Math.cos,_expf:Math.exp,_floorf:Math.floor,_fmodf:(t,j)=>t%j,_logf:Math.log,_log10f:Math.log10,_max_f:Math.max,_min_f:Math.min,_remainderf:(t,j)=>t-Math.round(t/j)*j,_powf:Math.pow,_roundf:Math.round,_sinf:Math.sin,_sqrtf:Math.sqrt,_tanf:Math.tan,_acoshf:Math.acosh,_asinhf:Math.asinh,_atanhf:Math.atanh,_coshf:Math.cosh,_sinhf:Math.sinh,_tanhf:Math.tanh,_isnanf:Number.isNaN,_isinff:(t)=>!isFinite(t),_copysignf:(t,j)=>Math.sign(t)===Math.sign(j)?t:-t,_acos:Math.acos,_asin:Math.asin,_atan:Math.atan,_atan2:Math.atan2,_ceil:Math.ceil,_cos:Math.cos,_exp:Math.exp,_floor:Math.floor,_fmod:(t,j)=>t%j,_log:Math.log,_log10:Math.log10,_max_:Math.max,_min_:Math.min,_remainder:(t,j)=>t-Math.round(t/j)*j,_pow:Math.pow,_round:Math.round,_sin:Math.sin,_sqrt:Math.sqrt,_tan:Math.tan,_acosh:Math.acosh,_asinh:Math.asinh,_atanh:Math.atanh,_cosh:Math.cosh,_sinh:Math.sinh,_tanh:Math.tanh,_isnan:Number.isNaN,_isinf:(t)=>!isFinite(t),_copysign:(t,j)=>Math.sign(t)===Math.sign(j)?t:-t,table:new WebAssembly.Table({initial:0,element:"anyfunc"})}}}static createWasmMemoryPoly(A,t,j,k,e){const E=Math.max(4,A),r=t,G=(a)=>{let $=65536;while($<a)$*=2;return $},s=k?k.size:0;let B=G(s+j.size*E+(j.inputs+j.outputs*2)*(r+e*t))/65536;return B=Math.max(2,B),new WebAssembly.Memory({initial:B})}static createWasmMemoryMono(A,t,j){const k=A,e=(t.size+(t.inputs+t.outputs)*(k+j*A))/65536;return new WebAssembly.Memory({initial:e*2})}static createMonoDSPInstanceAux(A,t,j=null){const k=A.exports,e=new RA(k);return{memory:j?j:A.exports.memory,api:e,json:t}}static createMemoryMono(A){const t=JSON.parse(A.json),j=t.compile_options.match("-double")?8:4;return this.createWasmMemoryMono(j,t,8192)}static createMemoryPoly(A,t,j){const k=JSON.parse(t.json),e=j&&j.json?JSON.parse(j.json):null,E=k.compile_options.match("-double")?8:4;return this.createWasmMemoryPoly(A,E,k,e,8192)}static createMixerAux(A,t){const j={imports:{print:console.log},memory:{memory:t}};return new WebAssembly.Instance(A,j).exports}static async loadDSPFactory(A,t){const j=await fetch(A);if(!j.ok)throw new Error(`=> exception raised while running loadDSPFactory, file not found: ${A}`);try{const k=await j.arrayBuffer(),e=await WebAssembly.compile(k),r=await(await fetch(t)).text(),B=JSON.parse(r).compile_options.indexOf("wasm-e")!==-1;return{cfactory:0,code:new Uint8Array(k),module:e,json:r,poly:B}}catch(k){throw k}}static async loadDSPMixer(A,t){try{let j=null;if(t)j=t.readFile(A,{encoding:"binary"});else j=await(await fetch(A)).arrayBuffer();return WebAssembly.compile(j)}catch(j){throw j}}static async createAsyncMonoDSPInstance(A){if(/"type":\s*"soundfile"/.test(A.json)){const k=this.createMemoryMono(A),e=await WebAssembly.instantiate(A.module,this.createWasmImport(k));return this.createMonoDSPInstanceAux(e,A.json,k)}else{const k=await WebAssembly.instantiate(A.module,this.createWasmImport());return this.createMonoDSPInstanceAux(k,A.json)}}static createSyncMonoDSPInstance(A){if(/"type":\s*"soundfile"/.test(A.json)){const k=this.createMemoryMono(A),e=new WebAssembly.Instance(A.module,this.createWasmImport(k));return this.createMonoDSPInstanceAux(e,A.json,k)}else{const k=new WebAssembly.Instance(A.module,this.createWasmImport());return this.createMonoDSPInstanceAux(k,A.json)}}static async createAsyncPolyDSPInstance(A,t,j,k){const e=this.createMemoryPoly(j,A,k),r=(await WebAssembly.instantiate(A.module,this.createWasmImport(e))).exports,G=new RA(r),s=this.createMixerAux(t,e);if(k){const a=(await WebAssembly.instantiate(k.module,this.createWasmImport(e))).exports,$=new RA(a);return{memory:e,voices:j,voiceAPI:G,effectAPI:$,mixerAPI:s,voiceJSON:A.json,effectJSON:k.json}}else return{memory:e,voices:j,voiceAPI:G,mixerAPI:s,voiceJSON:A.json}}static createSyncPolyDSPInstance(A,t,j,k){const e=this.createMemoryPoly(j,A,k),r=new WebAssembly.Instance(A.module,this.createWasmImport(e)).exports,G=new RA(r),s=this.createMixerAux(t,e);if(k){const a=new WebAssembly.Instance(k.module,this.createWasmImport(e)).exports,$=new RA(a);return{memory:e,voices:j,voiceAPI:G,effectAPI:$,mixerAPI:s,voiceJSON:A.json,effectJSON:k.json}}else return{memory:e,voices:j,voiceAPI:G,mixerAPI:s,voiceJSON:A.json}}},wA=Fu,DA=class A{static convertToAxis(t){switch(t){case 0:return 0;case 1:return 1;case 2:return 2;default:return console.error("Error: Axis not found value: "+t),0}}static convertToCurve(t){switch(t){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;default:return console.error("Error: Curve not found value: "+t),0}}static get Range(){if(!this._Range)this._Range=class{constructor(t,j){this.fLo=Math.min(t,j),this.fHi=Math.max(t,j)}clip(t){if(t<this.fLo)return this.fLo;if(t>this.fHi)return this.fHi;return t}};return this._Range}static get Interpolator(){if(!this._Interpolator)this._Interpolator=class{constructor(t,j,k,e){if(this.fRange=new A.Range(t,j),j!==t)this.fCoef=(e-k)/(j-t),this.fOffset=k-t*this.fCoef;else this.fCoef=0,this.fOffset=(k+e)/2}returnMappedValue(t){var j=this.fRange.clip(t);return this.fOffset+j*this.fCoef}getLowHigh(t,j){return{amin:this.fRange.fLo,amax:this.fRange.fHi}}};return this._Interpolator}static get Interpolator3pt(){if(!this._Interpolator3pt)this._Interpolator3pt=class{constructor(t,j,k,e,E,r){this.fSegment1=new A.Interpolator(t,j,e,E),this.fSegment2=new A.Interpolator(j,k,E,r),this.fMid=j}returnMappedValue(t){return t<this.fMid?this.fSegment1.returnMappedValue(t):this.fSegment2.returnMappedValue(t)}getMappingValues(t,j,k){var e=this.fSegment1.getLowHigh(t,j),E=this.fSegment2.getLowHigh(j,k);return{amin:e.amin,amid:E.amin,amax:E.amax}}};return this._Interpolator3pt}static get UpConverter(){if(!this._UpConverter)this._UpConverter=class{constructor(t,j,k,e,E,r){this.fActive=!0,this.fA2F=new A.Interpolator3pt(t,j,k,e,E,r),this.fF2A=new A.Interpolator3pt(e,E,r,t,j,k)}uiToFaust(t){return this.fA2F.returnMappedValue(t)}faustToUi(t){return this.fF2A.returnMappedValue(t)}setMappingValues(t,j,k,e,E,r){this.fA2F=new A.Interpolator3pt(t,j,k,e,E,r),this.fF2A=new A.Interpolator3pt(e,E,r,t,j,k)}getMappingValues(t,j,k){return this.fA2F.getMappingValues(t,j,k)}setActive(t){this.fActive=t}getActive(){return this.fActive}};return this._UpConverter}static get DownConverter(){if(!this._DownConverter)this._DownConverter=class{constructor(t,j,k,e,E,r){this.fActive=!0,this.fA2F=new A.Interpolator3pt(t,j,k,r,E,e),this.fF2A=new A.Interpolator3pt(e,E,r,k,j,t)}uiToFaust(t){return this.fA2F.returnMappedValue(t)}faustToUi(t){return this.fF2A.returnMappedValue(t)}setMappingValues(t,j,k,e,E,r){this.fA2F=new A.Interpolator3pt(t,j,k,r,E,e),this.fF2A=new A.Interpolator3pt(e,E,r,k,j,t)}getMappingValues(t,j,k){return this.fA2F.getMappingValues(t,j,k)}setActive(t){this.fActive=t}getActive(){return this.fActive}};return this._DownConverter}static get UpDownConverter(){if(!this._UpDownConverter)this._UpDownConverter=class{constructor(t,j,k,e,E,r){this.fActive=!0,this.fA2F=new A.Interpolator3pt(t,j,k,e,r,e),this.fF2A=new A.Interpolator(e,r,t,k)}uiToFaust(t){return this.fA2F.returnMappedValue(t)}faustToUi(t){return this.fF2A.returnMappedValue(t)}setMappingValues(t,j,k,e,E,r){this.fA2F=new A.Interpolator3pt(t,j,k,e,r,e),this.fF2A=new A.Interpolator(e,r,t,k)}getMappingValues(t,j,k){return this.fA2F.getMappingValues(t,j,k)}setActive(t){this.fActive=t}getActive(){return this.fActive}};return this._UpDownConverter}static get DownUpConverter(){if(!this._DownUpConverter)this._DownUpConverter=class{constructor(t,j,k,e,E,r){this.fActive=!0,this.fA2F=new A.Interpolator3pt(t,j,k,r,e,r),this.fF2A=new A.Interpolator(e,r,t,k)}uiToFaust(t){return this.fA2F.returnMappedValue(t)}faustToUi(t){return this.fF2A.returnMappedValue(t)}setMappingValues(t,j,k,e,E,r){this.fA2F=new A.Interpolator3pt(t,j,k,r,e,r),this.fF2A=new A.Interpolator(e,r,t,k)}getMappingValues(t,j,k){return this.fA2F.getMappingValues(t,j,k)}setActive(t){this.fActive=t}getActive(){return this.fActive}};return this._DownUpConverter}static buildHandler(t,j,k,e,E,r,G){switch(t){case 0:return new A.UpConverter(j,k,e,E,r,G);case 1:return new A.DownConverter(j,k,e,E,r,G);case 2:return new A.UpDownConverter(j,k,e,E,r,G);case 3:return new A.DownUpConverter(j,k,e,E,r,G);default:return new A.UpConverter(j,k,e,E,r,G)}}},jj=class{constructor(A,t){this.memory=A,this.allocatedBytes=t}alloc(A){const t=this.allocatedBytes,j=t+A,k=this.memory.buffer.byteLength;if(j>k){const e=Math.ceil((j-k)/65536);console.log(`GROW: ${e} pages`),this.memory.grow(e)}return this.allocatedBytes=j,t}getBuffer(){return this.memory.buffer}getInt32Array(){return new Int32Array(this.memory.buffer)}getInt64Array(){return new BigInt64Array(this.memory.buffer)}getFloat32Array(){return new Float32Array(this.memory.buffer)}getFloat64Array(){return new Float64Array(this.memory.buffer)}},PA=class A{static get MAX_SOUNDFILE_PARTS(){return 256}static get MAX_CHAN(){return 64}static get BUFFER_SIZE(){return 1024}static get SAMPLE_RATE(){return 44100}constructor(t,j,k,e,E,r){this.fSampleSize=j,this.fIntSize=this.fSampleSize,this.fPtrSize=4,this.fAllocator=t,console.log(`Soundfile constructor: curChan: ${k}, length: ${e}, maxChan: ${E}, totalParts: ${r}`),this.fPtr=t.alloc(4*this.fPtrSize),this.fLength=t.alloc(A.MAX_SOUNDFILE_PARTS*this.fIntSize),this.fSR=t.alloc(A.MAX_SOUNDFILE_PARTS*this.fIntSize),this.fOffset=t.alloc(A.MAX_SOUNDFILE_PARTS*this.fIntSize),this.fBuffers=this.allocBuffers(k,e,E);const G=this.fAllocator.getInt32Array();G[this.fPtr>>2]=this.fBuffers,G[this.fPtr+this.fPtrSize>>2]=this.fLength,G[this.fPtr+2*this.fPtrSize>>2]=this.fSR,G[this.fPtr+3*this.fPtrSize>>2]=this.fOffset;for(let s=0;s<k;s++){const B=G[(this.fBuffers>>2)+s];console.log(`allocBuffers AFTER: ${s} - ${B}`)}}allocBuffers(t,j,k){const e=this.fAllocator.alloc(k*this.fPtrSize);console.log(`allocBuffers buffers: ${e}`);for(let E=0;E<t;E++){const r=this.fAllocator.alloc(j*this.fSampleSize),G=this.fAllocator.getInt32Array();G[(e>>2)+E]=r}return e}shareBuffers(t,j){const k=this.fAllocator.getInt32Array();for(let e=t;e<j;e++)k[(this.fBuffers>>2)+e]=k[(this.fBuffers>>2)+e%t]}copyToOut(t,j,k,e){if(this.fIntSize===4){const E=this.fAllocator.getInt32Array();E[(this.fLength>>Math.log2(this.fIntSize))+t]=e.audioBuffer[0].length,E[(this.fSR>>Math.log2(this.fIntSize))+t]=e.sampleRate,E[(this.fOffset>>Math.log2(this.fIntSize))+t]=k}else{const E=this.fAllocator.getInt64Array();E[(this.fLength>>Math.log2(this.fIntSize))+t]=BigInt(e.audioBuffer[0].length),E[(this.fSR>>Math.log2(this.fIntSize))+t]=BigInt(e.sampleRate),E[(this.fOffset>>Math.log2(this.fIntSize))+t]=BigInt(k)}if(console.log(`copyToOut: part: ${t}, maxChannels: ${j}, offset: ${k}, buffer: ${e}`),this.fSampleSize===8)this.copyToOutReal64(j,k,e);else this.copyToOutReal32(j,k,e)}copyToOutReal32(t,j,k){const e=this.fAllocator.getInt32Array(),E=this.fAllocator.getFloat32Array();for(let r=0;r<k.audioBuffer.length;r++){const G=k.audioBuffer[r],s=e[(this.fBuffers>>2)+r],B=s+j*this.fSampleSize>>Math.log2(this.fSampleSize),a=s+(j+G.length)*this.fSampleSize>>Math.log2(this.fSampleSize);console.log(`copyToOutReal32 begin: ${B}, end: ${a}, delta: ${a-B}`);const $=E.subarray(s+j*this.fSampleSize>>Math.log2(this.fSampleSize),s+(j+G.length)*this.fSampleSize>>Math.log2(this.fSampleSize));for(let d=0;d<G.length;d++)$[d]=G[d]}}copyToOutReal64(t,j,k){const e=this.fAllocator.getInt32Array(),E=this.fAllocator.getFloat64Array();for(let r=0;r<k.audioBuffer.length;r++){const G=k.audioBuffer[r],s=e[(this.fBuffers>>2)+r],B=s+j*this.fSampleSize>>Math.log2(this.fSampleSize),a=s+(j+G.length)*this.fSampleSize>>Math.log2(this.fSampleSize);console.log(`copyToOutReal64 begin: ${B}, end: ${a}, delta: ${a-B}`);const $=E.subarray(s+j*this.fSampleSize>>Math.log2(this.fSampleSize),s+(j+G.length)*this.fSampleSize>>Math.log2(this.fSampleSize));for(let d=0;d<G.length;d++)$[d]=G[d]}}emptyFile(t,j){if(this.fIntSize===4){const k=this.fAllocator.getInt32Array();k[(this.fLength>>Math.log2(this.fIntSize))+t]=A.BUFFER_SIZE,k[(this.fSR>>Math.log2(this.fIntSize))+t]=A.SAMPLE_RATE,k[(this.fOffset>>Math.log2(this.fIntSize))+t]=j}else{const k=this.fAllocator.getInt64Array();k[(this.fLength>>Math.log2(this.fIntSize))+t]=BigInt(A.BUFFER_SIZE),k[(this.fSR>>Math.log2(this.fIntSize))+t]=BigInt(A.SAMPLE_RATE),k[(this.fOffset>>Math.log2(this.fIntSize))+t]=BigInt(j)}return j+A.BUFFER_SIZE}displayMemory(t="",j=!1){console.log("Soundfile memory: "+t),console.log(`fPtr: ${this.fPtr}`),console.log(`fBuffers: ${this.fBuffers}`),console.log(`fLength: ${this.fLength}`),console.log(`fSR: ${this.fSR}`),console.log(`fOffset: ${this.fOffset}`);const k=this.fAllocator.getInt32Array();if(j)console.log(`HEAP32: ${k}`);console.log(`HEAP32[this.fPtr >> 2]: ${k[this.fPtr>>2]}`),console.log(`HEAP32[(this.fPtr + ptrSize) >> 2]: ${k[this.fPtr+this.fPtrSize>>2]}`),console.log(`HEAP32[(this.fPtr + 2 * ptrSize) >> 2]: ${k[this.fPtr+2*this.fPtrSize>>2]}`),console.log(`HEAP32[(this.fPtr + 3 * ptrSize) >> 2]: ${k[this.fPtr+3*this.fPtrSize>>2]}`)}getPtr(){return this.fPtr}getHEAP32(){return this.fAllocator.getInt32Array()}getHEAPFloat32(){return this.fAllocator.getFloat32Array()}getHEAPFloat64(){return this.fAllocator.getFloat64Array()}},hA=class A{constructor(t,j,k){this.fOutputHandler=null,this.fComputeHandler=null,this.fPlotHandler=null,this.fCachedEvents=[],this.fBufferNum=0,this.fInChannels=[],this.fOutChannels=[],this.fOutputsTimer=5,this.fInputsItems=[],this.fOutputsItems=[],this.fDescriptor=[],this.fSoundfiles=[],this.fSoundfileBuffers={},this.fPitchwheelLabel=[],this.fCtrlLabel=new Array(128).fill(null).map(()=>[]),this.fPathTable={},this.fUICallback=(e)=>{if(e.type==="hbargraph"||e.type==="vbargraph")this.fOutputsItems.push(e.address),this.fPathTable[e.address]=e.index;else if(e.type==="vslider"||e.type==="hslider"||e.type==="button"||e.type==="checkbox"||e.type==="nentry"){if(this.fInputsItems.push(e.address),this.fPathTable[e.address]=e.index,this.fDescriptor.push(e),!e.meta)return;e.meta.forEach((E)=>{const{midi:r,acc:G,gyr:s}=E;if(r){const B=r.trim();if(B==="pitchwheel"){const a=B.match(/^pitchwheel\s(\d+)/);if(a)this.fPitchwheelLabel.push({path:e.address,chan:parseInt(a[1]),min:e.min,max:e.max});else this.fPitchwheelLabel.push({path:e.address,chan:0,min:e.min,max:e.max})}else{const a=B.match(/^ctrl\s(\d+)\s(\d+)/),$=B.match(/^ctrl\s(\d+)/);if(a)this.fCtrlLabel[parseInt(a[1])].push({path:e.address,chan:parseInt(a[2]),min:e.min,max:e.max});else if($)this.fCtrlLabel[parseInt($[1])].push({path:e.address,chan:0,min:e.min,max:e.max})}}if(G){const B=G.trim().split(" ").map(Number);this.setupAccHandler(e.address,DA.convertToAxis(B[0]),DA.convertToCurve(B[1]),B[2],B[3],B[4],e.min,e.init,e.max)}if(s){const B=s.trim().split(" ").map(Number);this.setupGyrHandler(e.address,DA.convertToAxis(B[0]),DA.convertToCurve(B[1]),B[2],B[3],B[4],e.min,e.init,e.max)}})}else if(e.type==="soundfile")this.fSoundfiles.push({name:e.label,url:e.url,index:e.index,basePtr:-1})},this.fProcessing=!1,this.fDestroyed=!1,this.fFirstCall=!0,this.fBufferSize=j,this.fPtrSize=t,this.fSampleSize=t,this.fSoundfileBuffers=k,this.fAcc={x:[],y:[],z:[]},this.fGyr={x:[],y:[],z:[]}}static remap(t,j,k,e,E){return(t-j)/(k-j)*(E-e)+e}static parseUI(t,j){t.forEach((k)=>this.parseGroup(k,j))}static parseGroup(t,j){if(t.items)this.parseItems(t.items,j)}static parseItems(t,j){t.forEach((k)=>this.parseItem(k,j))}static parseItem(t,j){if(t.type==="vgroup"||t.type==="hgroup"||t.type==="tgroup")this.parseItems(t.items,j);else j(t)}static splitSoundfileNames(t){return t.replace(/^\{|\}$/g,"").split(";").map((k)=>k.length<=2?"":k.substring(1,k.length-1))}get hasAccInput(){return this.fAcc.x.length+this.fAcc.y.length+this.fAcc.z.length>0}propagateAcc(t,j=!1){const{x:k,y:e,z:E}=t;if(j){if(k!==null)this.fAcc.x.forEach((r)=>r(-k));if(e!==null)this.fAcc.y.forEach((r)=>r(-e));if(E!==null)this.fAcc.z.forEach((r)=>r(-E))}else{if(k!==null)this.fAcc.x.forEach((r)=>r(k));if(e!==null)this.fAcc.y.forEach((r)=>r(e));if(E!==null)this.fAcc.z.forEach((r)=>r(E))}}get hasGyrInput(){return this.fGyr.x.length+this.fGyr.y.length+this.fGyr.z.length>0}propagateGyr(t){const{alpha:j,beta:k,gamma:e}=t;if(j!==null)this.fGyr.x.forEach((E)=>E(j));if(k!==null)this.fGyr.y.forEach((E)=>E(k));if(e!==null)this.fGyr.z.forEach((E)=>E(e))}setupAccHandler(t,j,k,e,E,r,G,s,B){const a=DA.buildHandler(k,e,E,r,G,s,B);switch(j){case 0:this.fAcc.x.push(($)=>this.setParamValue(t,a.uiToFaust($)));break;case 1:this.fAcc.y.push(($)=>this.setParamValue(t,a.uiToFaust($)));break;case 2:this.fAcc.z.push(($)=>this.setParamValue(t,a.uiToFaust($)));break}}setupGyrHandler(t,j,k,e,E,r,G,s,B){const a=DA.buildHandler(k,e,E,r,G,s,B);switch(j){case 0:this.fGyr.x.push(($)=>this.setParamValue(t,a.uiToFaust($)));break;case 1:this.fGyr.y.push(($)=>this.setParamValue(t,a.uiToFaust($)));break;case 2:this.fGyr.z.push(($)=>this.setParamValue(t,a.uiToFaust($)));break}}static extractUrlsFromMeta(t){const j=t.meta.find((k)=>k.soundfiles!==void 0);if(j)return j.soundfiles.split(";").filter((k)=>k!=="");else return[]}loadSoundfile(t,j,k,e){console.log(`Soundfile ${k} paths: ${e}`);const E=A.splitSoundfileNames(e),r=this.fSoundfiles.find((G)=>G.url===e);if(!r)throw new Error(`Soundfile with ${e} cannot be found !}`);if(r.basePtr!==-1){const G=t.getInt32Array();console.log(`Soundfile CACHE ${e}} : ${k} loaded at ${r.basePtr} in wasm memory with index ${r.index}`),G[j+r.index>>2]=r.basePtr}else{const G=this.createSoundfile(t,E,this.fSoundfileBuffers);if(G){const s=G.getHEAP32();r.basePtr=G.getPtr(),console.log(`Soundfile ${k} loaded at ${r.basePtr} in wasm memory with index ${r.index}`),s[j+r.index>>2]=r.basePtr}else console.log(`Soundfile ${k} for ${e} cannot be created !}`)}}createSoundfile(t,j,k,e=PA.MAX_CHAN){let E=1,r=0;for(let B of j){let a=0,$=0;const d=k[B];if(d)a=d.audioBuffer.length,$=d.audioBuffer[0].length;else $=PA.BUFFER_SIZE,a=1;E=Math.max(E,a),r+=$}r+=(PA.MAX_SOUNDFILE_PARTS-j.length)*PA.BUFFER_SIZE;const G=new PA(t,this.fSampleSize,E,r,e,j.length);let s=0;for(let B=0;B<j.length;B++){const a=j[B],$=k[a];if($)G.copyToOut(B,e,s,$),s+=$.audioBuffer[0].length;else s=G.emptyFile(B,s)}for(let B=j.length;B<PA.MAX_SOUNDFILE_PARTS;B++)s=G.emptyFile(B,s);return G.shareBuffers(E,e),G}initSoundfileMemory(t,j){for(let{name:k,url:e}of this.fSoundfiles)this.loadSoundfile(t,j,k,e)}updateOutputs(){if(this.fOutputsItems.length>0&&this.fOutputHandler&&this.fOutputsTimer--===0)this.fOutputsTimer=5,this.fOutputsItems.forEach((t)=>{var j;return(j=this.fOutputHandler)==null?void 0:j.call(this,t,this.getParamValue(t))})}metadata(t){if(this.fJSONDsp.meta)this.fJSONDsp.meta.forEach((j)=>t(Object.keys(j)[0],j[Object.keys(j)[0]]))}compute(t,j){return!1}setOutputParamHandler(t){this.fOutputHandler=t}getOutputParamHandler(){return this.fOutputHandler}setComputeHandler(t){this.fComputeHandler=t}getComputeHandler(){return this.fComputeHandler}setPlotHandler(t){this.fPlotHandler=t}getPlotHandler(){return this.fPlotHandler}getNumInputs(){return-1}getNumOutputs(){return-1}midiMessage(t){if(this.fPlotHandler)this.fCachedEvents.push({data:t,type:"midi"});const j=t[0]>>4,k=t[0]&15,e=t[1],E=t[2];if(j===11)return this.ctrlChange(k,e,E);if(j===14)return this.pitchWheel(k,E*128+e)}ctrlChange(t,j,k){if(this.fPlotHandler)this.fCachedEvents.push({type:"ctrlChange",data:[t,j,k]});if(this.fCtrlLabel[j].length)this.fCtrlLabel[j].forEach((e)=>{const{path:E,chan:r}=e;if(r===0||t===r-1){if(this.setParamValue(E,A.remap(k,0,127,e.min,e.max)),this.fOutputHandler)this.fOutputHandler(E,this.getParamValue(E))}})}pitchWheel(t,j){if(this.fPlotHandler)this.fCachedEvents.push({type:"pitchWheel",data:[t,j]});this.fPitchwheelLabel.forEach((k)=>{const{path:e,chan:E}=k;if(E===0||t===E-1){if(this.setParamValue(e,A.remap(j,0,16383,k.min,k.max)),this.fOutputHandler)this.fOutputHandler(e,this.getParamValue(e))}})}setParamValue(t,j){}getParamValue(t){return 0}getParams(){return this.fInputsItems}getMeta(){return this.fJSONDsp}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.fJSONDsp.ui}getDescriptors(){return this.fDescriptor}hasSoundfiles(){return this.fSoundfiles.length>0}start(){this.fProcessing=!0}stop(){this.fProcessing=!1}destroy(){this.fDestroyed=!0,this.fOutputHandler=null,this.fComputeHandler=null,this.fPlotHandler=null}},lj=class extends hA{constructor(A,t,j,k,e){super(j,k,e);if(this.fInstance=A,console.log(`sampleSize: ${j} bufferSize: ${k}`),this.fJSONDsp=JSON.parse(this.fInstance.json),hA.parseUI(this.fJSONDsp.ui,this.fUICallback),this.fEndMemory=this.initMemory(),this.fInstance.api.init(this.fDSP,t),this.fSoundfiles.length>0){const E=new jj(this.fInstance.memory,this.fEndMemory);this.initSoundfileMemory(E,this.fDSP)}}initMemory(){this.fDSP=0;const A=this.fJSONDsp.size;this.fAudioInputs=A,this.fAudioOutputs=this.fAudioInputs+this.getNumInputs()*this.fPtrSize;const t=this.fAudioOutputs+this.getNumOutputs()*this.fPtrSize,j=t+this.getNumInputs()*this.fBufferSize*this.fSampleSize,k=j+this.getNumOutputs()*this.fBufferSize*this.fSampleSize,e=this.fInstance.memory.buffer,E=new Int32Array(e),r=this.fSampleSize===4?new Float32Array(e):new Float64Array(e);if(this.getNumInputs()>0){for(let s=0;s<this.getNumInputs();s++)E[(this.fAudioInputs>>2)+s]=t+this.fBufferSize*this.fSampleSize*s;const G=E.subarray(this.fAudioInputs>>2,this.fAudioInputs+this.getNumInputs()*this.fPtrSize>>2);for(let s=0;s<this.getNumInputs();s++)this.fInChannels[s]=r.subarray(G[s]>>Math.log2(this.fSampleSize),G[s]+this.fBufferSize*this.fSampleSize>>Math.log2(this.fSampleSize))}if(this.getNumOutputs()>0){for(let s=0;s<this.getNumOutputs();s++)E[(this.fAudioOutputs>>2)+s]=j+this.fBufferSize*this.fSampleSize*s;const G=E.subarray(this.fAudioOutputs>>2,this.fAudioOutputs+this.getNumOutputs()*this.fPtrSize>>2);for(let s=0;s<this.getNumOutputs();s++)this.fOutChannels[s]=r.subarray(G[s]>>Math.log2(this.fSampleSize),G[s]+this.fBufferSize*this.fSampleSize>>Math.log2(this.fSampleSize))}return k}toString(){return`============== Mono Memory layout ==============
        this.fBufferSize: ${this.fBufferSize}
        this.fJSONDsp.size: ${this.fJSONDsp.size}
        this.fAudioInputs: ${this.fAudioInputs}
        this.fAudioOutputs: ${this.fAudioOutputs}
        this.fDSP: ${this.fDSP}`}compute(A,t){if(this.fDestroyed)return!1;if(!this.fProcessing)return!0;if(this.fFirstCall)this.initMemory(),this.fFirstCall=!1;if(typeof A==="function")A(this.fInChannels);else{if(this.getNumInputs()>0&&(!A||!A[0]||A[0].length===0))return!0;if(this.getNumOutputs()>0&&typeof t!=="function"&&(!t||!t[0]||t[0].length===0))return!0;if(A!==void 0)for(let k=0;k<Math.min(this.getNumInputs(),A.length);k++)this.fInChannels[k].set(A[k])}if(this.fComputeHandler)this.fComputeHandler(this.fBufferSize);this.fInstance.api.compute(this.fDSP,this.fBufferSize,this.fAudioInputs,this.fAudioOutputs),this.updateOutputs();let j=this.fOutChannels;if(typeof t==="function")t(this.fOutChannels);else{for(let k=0;k<Math.min(this.getNumOutputs(),t.length);k++){const e=this.fOutChannels[k];t[k].set(e)}j=t}if(this.fPlotHandler)this.fPlotHandler(j,this.fBufferNum++,this.fCachedEvents.length?this.fCachedEvents:void 0),this.fCachedEvents=[];return!0}metadata(A){super.metadata(A)}getNumInputs(){return this.fInstance.api.getNumInputs(this.fDSP)}getNumOutputs(){return this.fInstance.api.getNumOutputs(this.fDSP)}setParamValue(A,t){if(this.fPlotHandler)this.fCachedEvents.push({type:"param",data:{path:A,value:t}});this.fInstance.api.setParamValue(this.fDSP,this.fPathTable[A],t)}getParamValue(A){return this.fInstance.api.getParamValue(this.fDSP,this.fPathTable[A])}getMeta(){return this.fJSONDsp}getJSON(){return this.fInstance.json}getDescriptors(){return this.fDescriptor}getUI(){return this.fJSONDsp.ui}},xA=class A{constructor(t,j,k,e,E){this.fFreqLabel=[],this.fGateLabel=[],this.fGainLabel=[],this.fKeyLabel=[],this.fVelLabel=[],this.fCurNote=A.kFreeVoice,this.fNextNote=-1,this.fNextVel=-1,this.fDate=0,this.fLevel=0,this.fRelease=0,this.fDSP=t,this.fAPI=j,this.fAPI.init(this.fDSP,E),this.extractPaths(k,e)}static get kActiveVoice(){return 0}static get kFreeVoice(){return-1}static get kReleaseVoice(){return-2}static get kLegatoVoice(){return-3}static get kNoVoice(){return-4}static get VOICE_STOP_LEVEL(){return 0.0005}static midiToFreq(t){return 440*2**((t-69)/12)}static normalizeVelocity(t){return t/127}extractPaths(t,j){t.forEach((k)=>{if(k.endsWith("/gate"))this.fGateLabel.push(j[k]);else if(k.endsWith("/freq"))this.fFreqLabel.push(j[k]);else if(k.endsWith("/key"))this.fKeyLabel.push(j[k]);else if(k.endsWith("/gain"))this.fGainLabel.push(j[k]);else if(k.endsWith("/vel")&&k.endsWith("/velocity"))this.fVelLabel.push(j[k])})}keyOn(t,j,k=!1){if(k)this.fNextNote=t,this.fNextVel=j;else this.fFreqLabel.forEach((e)=>this.fAPI.setParamValue(this.fDSP,e,A.midiToFreq(t))),this.fGateLabel.forEach((e)=>this.fAPI.setParamValue(this.fDSP,e,1)),this.fGainLabel.forEach((e)=>this.fAPI.setParamValue(this.fDSP,e,A.normalizeVelocity(j))),this.fKeyLabel.forEach((e)=>this.fAPI.setParamValue(this.fDSP,e,t)),this.fVelLabel.forEach((e)=>this.fAPI.setParamValue(this.fDSP,e,j)),this.fCurNote=t}keyOff(t=!1){if(this.fGateLabel.forEach((j)=>this.fAPI.setParamValue(this.fDSP,j,0)),t)this.fCurNote=A.kFreeVoice;else this.fRelease=this.fAPI.getSampleRate(this.fDSP)/2,this.fCurNote=A.kReleaseVoice}computeLegato(t,j,k,e){let E=t/2;this.fGateLabel.forEach((r)=>this.fAPI.setParamValue(this.fDSP,r,0)),this.fAPI.compute(this.fDSP,E,j,k),this.keyOn(this.fNextNote,this.fNextVel),this.fAPI.compute(this.fDSP,E,j,e)}compute(t,j,k){this.fAPI.compute(this.fDSP,t,j,k)}setParamValue(t,j){this.fAPI.setParamValue(this.fDSP,t,j)}getParamValue(t){return this.fAPI.getParamValue(this.fDSP,t)}},T6=class A extends hA{constructor(t,j,k,e,E){super(k,e,E);if(this.fInstance=t,console.log(`sampleSize: ${k} bufferSize: ${e}`),this.fJSONDsp=JSON.parse(this.fInstance.voiceJSON),this.fJSONEffect=this.fInstance.effectAPI&&this.fInstance.effectJSON?JSON.parse(this.fInstance.effectJSON):null,hA.parseUI(this.fJSONDsp.ui,this.fUICallback),this.fJSONEffect)hA.parseUI(this.fJSONEffect.ui,this.fUICallback);this.fEndMemory=this.initMemory(),this.fVoiceTable=[];for(let r=0;r<this.fInstance.voices;r++)this.fVoiceTable.push(new xA(this.fJSONDsp.size*r,this.fInstance.voiceAPI,this.fInputsItems,this.fPathTable,j));if(this.fInstance.effectAPI)this.fInstance.effectAPI.init(this.fEffect,j);if(this.fSoundfiles.length>0){const r=new jj(this.fInstance.memory,this.fEndMemory);for(let G=0;G<this.fInstance.voices;G++)this.initSoundfileMemory(r,this.fJSONDsp.size*G)}}initMemory(){this.fEffect=this.fJSONDsp.size*this.fInstance.voices;const t=this.fEffect+(this.fJSONEffect?this.fJSONEffect.size:0);this.fAudioInputs=t,this.fAudioOutputs=this.fAudioInputs+this.getNumInputs()*this.fPtrSize,this.fAudioMixing=this.fAudioOutputs+this.getNumOutputs()*this.fPtrSize,this.fAudioMixingHalf=this.fAudioMixing+this.getNumOutputs()*this.fPtrSize;const j=this.fAudioMixingHalf+this.getNumOutputs()*this.fPtrSize,k=j+this.getNumInputs()*this.fBufferSize*this.fSampleSize,e=k+this.getNumOutputs()*this.fBufferSize*this.fSampleSize,E=e+this.getNumOutputs()*this.fBufferSize*this.fSampleSize,r=this.fInstance.memory.buffer,G=new Int32Array(r),s=this.fSampleSize===4?new Float32Array(r):new Float64Array(r);if(this.getNumInputs()>0){for(let a=0;a<this.getNumInputs();a++)G[(this.fAudioInputs>>2)+a]=j+this.fBufferSize*this.fSampleSize*a;const B=G.subarray(this.fAudioInputs>>2,this.fAudioInputs+this.getNumInputs()*this.fPtrSize>>2);for(let a=0;a<this.getNumInputs();a++)this.fInChannels[a]=s.subarray(B[a]>>Math.log2(this.fSampleSize),B[a]+this.fBufferSize*this.fSampleSize>>Math.log2(this.fSampleSize))}if(this.getNumOutputs()>0){for(let a=0;a<this.getNumOutputs();a++)G[(this.fAudioOutputs>>2)+a]=k+this.fBufferSize*this.fSampleSize*a,G[(this.fAudioMixing>>2)+a]=e+this.fBufferSize*this.fSampleSize*a,G[(this.fAudioMixingHalf>>2)+a]=e+this.fBufferSize*this.fSampleSize*a+this.fBufferSize/2*this.fSampleSize;const B=G.subarray(this.fAudioOutputs>>2,this.fAudioOutputs+this.getNumOutputs()*this.fPtrSize>>2);for(let a=0;a<this.getNumOutputs();a++)this.fOutChannels[a]=s.subarray(B[a]>>Math.log2(this.fSampleSize),B[a]+this.fBufferSize*this.fSampleSize>>Math.log2(this.fSampleSize))}return E}toString(){return`============== Poly Memory layout ==============
        this.fBufferSize: ${this.fBufferSize}
        this.fJSONDsp.size: ${this.fJSONDsp.size}
        this.fAudioInputs: ${this.fAudioInputs}
        this.fAudioOutputs: ${this.fAudioOutputs}
        this.fAudioMixing: ${this.fAudioMixing}
        this.fAudioMixingHalf: ${this.fAudioMixingHalf}`}allocVoice(t,j){return this.fVoiceTable[t].fDate++,this.fVoiceTable[t].fCurNote=j,t}getPlayingVoice(t){let j=xA.kNoVoice,k=Number.MAX_VALUE;for(let e=0;e<this.fInstance.voices;e++)if(this.fVoiceTable[e].fCurNote===t){if(this.fVoiceTable[e].fDate<k)k=this.fVoiceTable[e].fDate,j=e}return j}getFreeVoice(){for(let E=0;E<this.fInstance.voices;E++)if(this.fVoiceTable[E].fCurNote===xA.kFreeVoice)return this.allocVoice(E,xA.kActiveVoice);let{kNoVoice:t,kNoVoice:j}=xA,k=Number.MAX_VALUE,e=Number.MAX_VALUE;for(let E=0;E<this.fInstance.voices;E++)if(this.fVoiceTable[E].fCurNote===xA.kReleaseVoice){if(this.fVoiceTable[E].fDate<k)k=this.fVoiceTable[E].fDate,t=E}else if(this.fVoiceTable[E].fDate<e)e=this.fVoiceTable[E].fDate,j=E;if(k!==Number.MAX_VALUE)return console.log(`Steal release voice : voice_date = ${this.fVoiceTable[t].fDate} voice = ${t}`),this.allocVoice(t,xA.kLegatoVoice);if(e!==Number.MAX_VALUE)return console.log(`Steal playing voice : voice_date = ${this.fVoiceTable[j].fDate} voice = ${j}`),this.allocVoice(j,xA.kLegatoVoice);return xA.kNoVoice}compute(t,j){if(this.fDestroyed)return!1;if(this.fFirstCall)this.initMemory(),this.fFirstCall=!1;if(!this.fProcessing)return!0;if(this.getNumInputs()>0&&(!t||!t[0]||t[0].length===0))return!0;if(this.getNumOutputs()>0&&(!j||!j[0]||j[0].length===0))return!0;if(t!==void 0)for(let k=0;k<Math.min(this.getNumInputs(),t.length);++k)this.fInChannels[k].set(t[k]);if(this.fComputeHandler)this.fComputeHandler(this.fBufferSize);if(this.fInstance.mixerAPI.clearOutput(this.fBufferSize,this.getNumOutputs(),this.fAudioOutputs),this.fVoiceTable.forEach((k)=>{if(k.fCurNote===xA.kLegatoVoice)k.computeLegato(this.fBufferSize,this.fAudioInputs,this.fAudioMixing,this.fAudioMixingHalf),this.fInstance.mixerAPI.fadeOut(this.fBufferSize/2,this.getNumOutputs(),this.fAudioMixing),k.fLevel=this.fInstance.mixerAPI.mixCheckVoice(this.fBufferSize,this.getNumOutputs(),this.fAudioMixing,this.fAudioOutputs);else if(k.fCurNote!==xA.kFreeVoice){if(k.compute(this.fBufferSize,this.fAudioInputs,this.fAudioMixing),k.fLevel=this.fInstance.mixerAPI.mixCheckVoice(this.fBufferSize,this.getNumOutputs(),this.fAudioMixing,this.fAudioOutputs),k.fRelease-=this.fBufferSize,k.fCurNote==xA.kReleaseVoice&&(k.fLevel<xA.VOICE_STOP_LEVEL&&k.fRelease<0))k.fCurNote=xA.kFreeVoice}}),this.fInstance.effectAPI)this.fInstance.effectAPI.compute(this.fEffect,this.fBufferSize,this.fAudioOutputs,this.fAudioOutputs);if(this.updateOutputs(),j!==void 0){for(let k=0;k<Math.min(this.getNumOutputs(),j.length);k++){const e=this.fOutChannels[k];j[k].set(e)}if(this.fPlotHandler)this.fPlotHandler(j,this.fBufferNum++,this.fCachedEvents.length?this.fCachedEvents:void 0),this.fCachedEvents=[]}return!0}getNumInputs(){return this.fInstance.voiceAPI.getNumInputs(0)}getNumOutputs(){return this.fInstance.voiceAPI.getNumOutputs(0)}static findPath(t,j){if(typeof t!=="object")return!1;else if(t.address)return t.address===j;else{for(let k in t)if(A.findPath(t[k],j))return!0;return!1}}setParamValue(t,j){if(this.fPlotHandler)this.fCachedEvents.push({type:"param",data:{path:t,value:j}});if(this.fJSONEffect&&A.findPath(this.fJSONEffect.ui,t)&&this.fInstance.effectAPI)this.fInstance.effectAPI.setParamValue(this.fEffect,this.fPathTable[t],j);else this.fVoiceTable.forEach((k)=>k.setParamValue(this.fPathTable[t],j))}getParamValue(t){if(this.fJSONEffect&&A.findPath(this.fJSONEffect.ui,t)&&this.fInstance.effectAPI)return this.fInstance.effectAPI.getParamValue(this.fEffect,this.fPathTable[t]);else return this.fVoiceTable[0].getParamValue(this.fPathTable[t])}getMeta(){const t=this.fJSONDsp,j=this.fJSONEffect,k={...t};if(j)k.ui=[{type:"tgroup",label:"Sequencer",items:[{type:"vgroup",label:"Instrument",items:t.ui},{type:"vgroup",label:"Effect",items:j.ui}]}];else k.ui=[{type:"tgroup",label:"Polyphonic",items:[{type:"vgroup",label:"Voices",items:t.ui}]}];return k}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.getMeta().ui}getDescriptors(){return this.fDescriptor}midiMessage(t){const j=t[0]>>4,k=t[0]&15,e=t[1],E=t[2];if(j===8||j===9&&E===0)return this.keyOff(k,e,E);else if(j===9)return this.keyOn(k,e,E);else super.midiMessage(t)}ctrlChange(t,j,k){if(j===123||j===120)this.allNotesOff(!0);else super.ctrlChange(t,j,k)}keyOn(t,j,k){if(this.fPlotHandler)this.fCachedEvents.push({type:"keyOn",data:[t,j,k]});const e=this.getFreeVoice();this.fVoiceTable[e].keyOn(j,k,this.fVoiceTable[e].fCurNote==xA.kLegatoVoice)}keyOff(t,j,k){if(this.fPlotHandler)this.fCachedEvents.push({type:"keyOff",data:[t,j,k]});const e=this.getPlayingVoice(j);if(e!==xA.kNoVoice)this.fVoiceTable[e].keyOff();else console.log("Playing pitch = %d not found\n",j)}allNotesOff(t=!0){this.fCachedEvents.push({type:"ctrlChange",data:[0,123,0]}),this.fVoiceTable.forEach((j)=>j.keyOff(t))}},FB=class{constructor(A,t){this.fDSPCode=A,this.fBufferSize=t,this.fInputs=new Array(this.fDSPCode.getNumInputs()).fill(null).map(()=>new Float32Array(t)),this.fOutputs=new Array(this.fDSPCode.getNumOutputs()).fill(null).map(()=>new Float32Array(t))}getParameterDescriptors(){const A=[],t=(j)=>{let k=null;const e=["/gate","/freq","/gain","/key","/vel","/velocity"],E="address"in j&&!!e.find((r)=>j.address.endsWith(r));if(this.fDSPCode instanceof lj||!E){if(j.type==="vslider"||j.type==="hslider"||j.type==="nentry")k={name:j.address,defaultValue:j.init||0,minValue:j.min||0,maxValue:j.max||0};else if(j.type==="button"||j.type==="checkbox")k={name:j.address,defaultValue:j.init||0,minValue:0,maxValue:1}}if(k)A.push(k)};return hA.parseUI(this.fDSPCode.getUI(),t),A}compute(A,t){return this.fDSPCode.compute(A,t)}setOutputParamHandler(A){this.fDSPCode.setOutputParamHandler(A)}getOutputParamHandler(){return this.fDSPCode.getOutputParamHandler()}setComputeHandler(A){this.fDSPCode.setComputeHandler(A)}getComputeHandler(){return this.fDSPCode.getComputeHandler()}setPlotHandler(A){this.fDSPCode.setPlotHandler(A)}getPlotHandler(){return this.fDSPCode.getPlotHandler()}getNumInputs(){return this.fDSPCode.getNumInputs()}getNumOutputs(){return this.fDSPCode.getNumOutputs()}metadata(A){}midiMessage(A){this.fDSPCode.midiMessage(A)}ctrlChange(A,t,j){this.fDSPCode.ctrlChange(A,t,j)}pitchWheel(A,t){this.fDSPCode.pitchWheel(A,t)}setParamValue(A,t){this.fDSPCode.setParamValue(A,t)}getParamValue(A){return this.fDSPCode.getParamValue(A)}getParams(){return this.fDSPCode.getParams()}getMeta(){return this.fDSPCode.getMeta()}getJSON(){return this.fDSPCode.getJSON()}getDescriptors(){return this.fDSPCode.getDescriptors()}getUI(){return this.fDSPCode.getUI()}start(){this.fDSPCode.start()}stop(){this.fDSPCode.stop()}destroy(){this.fDSPCode.destroy()}get hasAccInput(){return this.fDSPCode.hasAccInput}propagateAcc(A,t=!1){this.fDSPCode.propagateAcc(A,t)}get hasGyrInput(){return this.fDSPCode.hasGyrInput}propagateGyr(A){this.fDSPCode.propagateGyr(A)}render(A=[],t=this.fBufferSize,j){let k=0;const e=new Array(this.fDSPCode.getNumOutputs()).fill(null).map(()=>new Float32Array(t));this.fDSPCode.start();while(k<t){const E=Math.min(t-k,this.fBufferSize);for(let r=0;r<this.fDSPCode.getNumInputs();r++){let G;if(A[r])if(A[r].length<=k)G=new Float32Array(E);else if(A[r].length>k+E)G=A[r].subarray(k,k+E);else G=A[r].subarray(k,A[r].length);else G=new Float32Array(E);this.fInputs[r]=G}this.fDSPCode.compute(this.fInputs,this.fOutputs);for(let r=0;r<this.fDSPCode.getNumOutputs();r++){const G=this.fOutputs[r];if(E<this.fBufferSize)e[r].set(G.subarray(0,E),k);else e[r].set(G,k)}k+=this.fBufferSize,j==null||j(k)}return this.fDSPCode.stop(),e}},nu=class extends FB{},iu=class extends FB{keyOn(A,t,j){this.fDSPCode.keyOn(A,t,j)}keyOff(A,t,j){this.fDSPCode.keyOff(A,t,j)}allNotesOff(A){this.fDSPCode.allNotesOff(A)}};var ou=class{static get fallbackPaths(){return[location.href,this.getParentUrl(location.href),location.origin]}static getParentUrl(A){return A.substring(0,A.lastIndexOf("/")+1)}static toAudioData(A){const{sampleRate:t,numberOfChannels:j}=A;return{sampleRate:t,audioBuffer:new Array(j).fill(null).map((k,e)=>A.getChannelData(e))}}static findSoundfilesFromMeta(A){const t={},j=(k)=>{if(k.type==="soundfile")hA.splitSoundfileNames(k.url).forEach((E)=>t[E]=null)};return hA.parseUI(A.ui,j),t}static async checkFileExists(A){try{console.log(`"checkFileExists" url: ${A}`);const t=await fetch(A);return console.log(`"checkFileExists" response.ok: ${t.ok}`),t.ok}catch(t){return console.error("Fetch error:",t),!1}}static async fetchSoundfile(A,t){console.log(`Loading sound file from ${A}`);const j=await fetch(A);if(!j.ok)throw new Error(`Failed to load sound file from ${A}: ${j.statusText}`);const k=await j.arrayBuffer(),e=await t.decodeAudioData(k);return this.toAudioData(e)}static async loadSoundfile(A,t,j,k){if(j[A])return;const e=[A,...[...t,...this.fallbackPaths].map((G)=>new URL(A,G.endsWith("/")?G:`${G}/`).href)],r=(await Promise.all(e.map((G)=>this.checkFileExists(G)))).findIndex((G)=>!!G);if(r===-1)throw new Error(`Failed to load sound file ${A}, all check failed.`);j[A]=await this.fetchSoundfile(e[r],k)}static async loadSoundfiles(A,t,j){const k=hA.extractUrlsFromMeta(A),e=this.findSoundfilesFromMeta(A);for(let E in e){if(t[E]){e[E]=t[E];continue}try{await this.loadSoundfile(E,k,e,j)}catch(r){console.error(r)}}return e}},rj=ou,Jt,Qt,nB=class extends(globalThis.AudioWorkletNode||null){constructor(A,t,j,k={}){const e=JSON.parse(j.json);super(A,t,{numberOfInputs:e.inputs>0?1:0,numberOfOutputs:e.outputs>0?1:0,channelCount:Math.max(1,e.inputs),outputChannelCount:[e.outputs],channelCountMode:"explicit",channelInterpretation:"speakers",processorOptions:k.processorOptions,...k});rB(this,Jt,!1),rB(this,Qt,!1),this.handleDeviceMotion=({accelerationIncludingGravity:E})=>{const r=/Android/i.test(navigator.userAgent);if(!E)return;const{x:G,y:s,z:B}=E;this.propagateAcc({x:G,y:s,z:B},r)},this.handleDeviceOrientation=({alpha:E,beta:r,gamma:G})=>{this.propagateGyr({alpha:E,beta:r,gamma:G})},this.fJSONDsp=e,this.fJSON=j.json,this.fOutputHandler=null,this.fComputeHandler=null,this.fPlotHandler=null,this.fDescriptor=[],this.fInputsItems=[],this.fUICallback=(E)=>{if(E.type==="vslider"||E.type==="hslider"||E.type==="button"||E.type==="checkbox"||E.type==="nentry"){if(this.fInputsItems.push(E.address),this.fDescriptor.push(E),!E.meta)return;E.meta.forEach((r)=>{const{midi:G,acc:s,gyr:B}=r;if(s)qB(this,Jt,!0);if(B)qB(this,Qt,!0)})}},hA.parseUI(this.fJSONDsp.ui,this.fUICallback),this.port.onmessage=(E)=>{if(E.data.type==="param"&&this.fOutputHandler)this.fOutputHandler(E.data.path,E.data.value);else if(E.data.type==="plot"&&this.fPlotHandler)this.fPlotHandler(E.data.value,E.data.index,E.data.events)}}async startSensors(){if(this.hasAccInput)if(window.DeviceMotionEvent)if(typeof window.DeviceMotionEvent.requestPermission==="function")try{const A=await window.DeviceMotionEvent.requestPermission();if(A==="granted")window.addEventListener("devicemotion",this.handleDeviceMotion,!0);else if(A==="denied")throw alert("You have denied access to motion and orientation data. To enable it, go to Settings > Safari > Motion & Orientation Access."),new Error("Unable to access the accelerometer.")}catch(A){console.error(A)}else window.addEventListener("devicemotion",this.handleDeviceMotion,!0);else console.log("Cannot set the accelerometer handler.");if(this.hasGyrInput)if(window.DeviceMotionEvent)if(typeof window.DeviceOrientationEvent.requestPermission==="function")try{const A=await window.DeviceOrientationEvent.requestPermission();if(A==="granted")window.addEventListener("deviceorientation",this.handleDeviceOrientation,!0);else if(A==="denied")throw alert("You have denied access to motion and orientation data. To enable it, go to Settings > Safari > Motion & Orientation Access."),new Error("Unable to access the gyroscope.")}catch(A){console.error(A)}else window.addEventListener("deviceorientation",this.handleDeviceOrientation,!0);else console.log("Cannot set the gyroscope handler.")}stopSensors(){if(this.hasAccInput)window.removeEventListener("devicemotion",this.handleDeviceMotion,!0);if(this.hasGyrInput)window.removeEventListener("deviceorientation",this.handleDeviceOrientation,!0)}setOutputParamHandler(A){this.fOutputHandler=A}getOutputParamHandler(){return this.fOutputHandler}setComputeHandler(A){this.fComputeHandler=A}getComputeHandler(){return this.fComputeHandler}setPlotHandler(A){if(this.fPlotHandler=A,this.fPlotHandler)this.port.postMessage({type:"setPlotHandler",data:!0});else this.port.postMessage({type:"setPlotHandler",data:!1})}getPlotHandler(){return this.fPlotHandler}setupWamEventHandler(){this.port.postMessage({type:"setupWamEventHandler"})}getNumInputs(){return this.fJSONDsp.inputs}getNumOutputs(){return this.fJSONDsp.outputs}compute(A,t){return!1}metadata(A){if(this.fJSONDsp.meta)this.fJSONDsp.meta.forEach((t)=>A(Object.keys(t)[0],t[Object.keys(t)[0]]))}midiMessage(A){const t=A[0]>>4,j=A[0]&15,k=A[1],e=A[2];if(t===11)this.ctrlChange(j,k,e);else if(t===14)this.pitchWheel(j,e*128+k);else this.port.postMessage({type:"midi",data:A})}ctrlChange(A,t,j){const k={type:"ctrlChange",data:[A,t,j]};this.port.postMessage(k)}pitchWheel(A,t){const j={type:"pitchWheel",data:[A,t]};this.port.postMessage(j)}get hasAccInput(){return lB(this,Jt)}propagateAcc(A,t=!1){if(!A)return;const j={type:"acc",data:A,invert:t};this.port.postMessage(j)}get hasGyrInput(){return lB(this,Qt)}propagateGyr(A){if(!A)return;const t={type:"gyr",data:A};this.port.postMessage(t)}setParamValue(A,t){const j={type:"param",data:{path:A,value:t}};this.port.postMessage(j);const k=this.parameters.get(A);if(k)k.setValueAtTime(t,this.context.currentTime)}getParamValue(A){const t=this.parameters.get(A);return t?t.value:0}getParams(){return this.fInputsItems}getMeta(){return this.fJSONDsp}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.fJSONDsp.ui}getDescriptors(){return this.fDescriptor}start(){this.port.postMessage({type:"start"})}stop(){this.port.postMessage({type:"stop"})}destroy(){this.port.postMessage({type:"destroy"}),this.port.close()}};Jt=new WeakMap;Qt=new WeakMap;var BB=class extends nB{constructor(A,t){super(A,t.processorOptions.name,t.processorOptions.factory,t);this.onprocessorerror=(j)=>{throw j}}},uu=class extends nB{constructor(A,t){super(A,t.processorOptions.name,t.processorOptions.voiceFactory,t);if(this.onprocessorerror=(j)=>{throw j},this.fJSONEffect=t.processorOptions.effectFactory?JSON.parse(t.processorOptions.effectFactory.json):null,this.fJSONEffect)hA.parseUI(this.fJSONEffect.ui,this.fUICallback)}keyOn(A,t,j){const k={type:"keyOn",data:[A,t,j]};this.port.postMessage(k)}keyOff(A,t,j){const k={type:"keyOff",data:[A,t,j]};this.port.postMessage(k)}allNotesOff(A){const t={type:"ctrlChange",data:[0,123,0]};this.port.postMessage(t)}getMeta(){const A=this.fJSONDsp,t=this.fJSONEffect,j={...A};if(t)j.ui=[{type:"tgroup",label:"Sequencer",items:[{type:"vgroup",label:"Instrument",items:A.ui},{type:"vgroup",label:"Effect",items:t.ui}]}];else j.ui=[{type:"tgroup",label:"Polyphonic",items:[{type:"vgroup",label:"Voices",items:A.ui}]}];return j}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.getMeta().ui}},iB=class extends(globalThis.ScriptProcessorNode||null){constructor(){super(...arguments);this.handleDeviceMotion=void 0,this.handleDeviceOrientation=void 0}init(A){this.fDSPCode=A,this.fInputs=new Array(this.fDSPCode.getNumInputs()),this.fOutputs=new Array(this.fDSPCode.getNumOutputs()),this.handleDeviceMotion=({accelerationIncludingGravity:t})=>{const j=/Android/i.test(navigator.userAgent);if(!t)return;const{x:k,y:e,z:E}=t;this.propagateAcc({x:k,y:e,z:E},j)},this.handleDeviceOrientation=({alpha:t,beta:j,gamma:k})=>{this.propagateGyr({alpha:t,beta:j,gamma:k})},this.onaudioprocess=(t)=>{for(let j=0;j<this.fDSPCode.getNumInputs();j++)this.fInputs[j]=t.inputBuffer.getChannelData(j);for(let j=0;j<this.fDSPCode.getNumOutputs();j++)this.fOutputs[j]=t.outputBuffer.getChannelData(j);return this.fDSPCode.compute(this.fInputs,this.fOutputs)},this.start()}async startSensors(){if(this.hasAccInput)if(window.DeviceMotionEvent)if(typeof window.DeviceMotionEvent.requestPermission==="function")try{const A=await window.DeviceMotionEvent.requestPermission();if(A==="granted")window.addEventListener("devicemotion",this.handleDeviceMotion,!0);else if(A==="denied")throw alert("You have denied access to motion and orientation data. To enable it, go to Settings > Safari > Motion & Orientation Access."),new Error("Unable to access the accelerometer.")}catch(A){console.error(A)}else window.addEventListener("devicemotion",this.handleDeviceMotion,!0);else console.log("Cannot set the accelerometer handler.");if(this.hasGyrInput)if(window.DeviceMotionEvent)if(typeof window.DeviceOrientationEvent.requestPermission==="function")try{const A=await window.DeviceOrientationEvent.requestPermission();if(A==="granted")window.addEventListener("deviceorientation",this.handleDeviceOrientation,!0);else if(A==="denied")throw alert("You have denied access to motion and orientation data. To enable it, go to Settings > Safari > Motion & Orientation Access."),new Error("Unable to access the gyroscope.")}catch(A){console.error(A)}else window.addEventListener("deviceorientation",this.handleDeviceOrientation,!0);else console.log("Cannot set the gyroscope handler.")}stopSensors(){if(this.hasAccInput)window.removeEventListener("devicemotion",this.handleDeviceMotion,!0);if(this.hasGyrInput)window.removeEventListener("deviceorientation",this.handleDeviceOrientation,!0)}compute(A,t){return this.fDSPCode.compute(A,t)}setOutputParamHandler(A){this.fDSPCode.setOutputParamHandler(A)}getOutputParamHandler(){return this.fDSPCode.getOutputParamHandler()}setComputeHandler(A){this.fDSPCode.setComputeHandler(A)}getComputeHandler(){return this.fDSPCode.getComputeHandler()}setPlotHandler(A){this.fDSPCode.setPlotHandler(A)}getPlotHandler(){return this.fDSPCode.getPlotHandler()}getNumInputs(){return this.fDSPCode.getNumInputs()}getNumOutputs(){return this.fDSPCode.getNumOutputs()}metadata(A){}midiMessage(A){this.fDSPCode.midiMessage(A)}ctrlChange(A,t,j){this.fDSPCode.ctrlChange(A,t,j)}pitchWheel(A,t){this.fDSPCode.pitchWheel(A,t)}setParamValue(A,t){this.fDSPCode.setParamValue(A,t)}getParamValue(A){return this.fDSPCode.getParamValue(A)}getParams(){return this.fDSPCode.getParams()}getMeta(){return this.fDSPCode.getMeta()}getJSON(){return this.fDSPCode.getJSON()}getDescriptors(){return this.fDSPCode.getDescriptors()}getUI(){return this.fDSPCode.getUI()}start(){this.fDSPCode.start()}stop(){this.fDSPCode.stop()}destroy(){this.fDSPCode.destroy()}get hasAccInput(){return this.fDSPCode.hasAccInput}propagateAcc(A,t=!1){this.fDSPCode.propagateAcc(A,t)}get hasGyrInput(){return this.fDSPCode.hasGyrInput}propagateGyr(A){this.fDSPCode.propagateGyr(A)}},vu=class extends iB{},$u=class extends iB{keyOn(A,t,j){this.fDSPCode.keyOn(A,t,j)}keyOff(A,t,j){this.fDSPCode.keyOff(A,t,j)}allNotesOff(A){this.fDSPCode.allNotesOff(A)}},oB=class A{constructor(){this.factory=null}async compile(t,j,k,e){if(this.factory=await t.createMonoDSPFactory(j,k,e),this.factory)return this.name=j,this;else return null}addSoundfiles(t){if(!this.factory)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");for(let j in t)this.factory.soundfiles[j]=t[j]}getSoundfileList(){if(!this.factory)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");const t=JSON.parse(this.factory.json),j=rj.findSoundfilesFromMeta(t);return Object.keys(j)}async createNode(t,j=this.name,k=this.factory,e=!1,E=1024,r=(k==null?void 0:k.shaKey)||j,G={}){var s,B;if(!k)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");const a=JSON.parse(k.json),$=a.compile_options.match("-double")?8:4;if(k.soundfiles=await rj.loadSoundfiles(a,k.soundfiles||{},t),e){const d=await wA.createAsyncMonoDSPInstance(k),h=new lj(d,t.sampleRate,$,E,k.soundfiles),x=t.createScriptProcessor(E,h.getNumInputs(),h.getNumOutputs());return Object.setPrototypeOf(x,vu.prototype),x.init(h),x}else{if(!A.gWorkletProcessors.has(t))A.gWorkletProcessors.set(t,new Set);if(!((s=A.gWorkletProcessors.get(t))==null?void 0:s.has(r)))try{const h=`
// DSP name and JSON string for DSP are generated
const faustData = ${JSON.stringify({processorName:r,dspName:j,dspMeta:a,poly:!1})};
// Implementation needed classes of functions
var ${RA.name} = ${RA.toString()}
var FaustDspInstance = ${RA.name};
var ${hA.name} = ${hA.toString()}
var FaustBaseWebAudioDsp = ${hA.name};
var ${lj.name} = ${lj.toString()}
var FaustMonoWebAudioDsp = ${lj.name};
var ${wA.name} = ${wA.toString()}
var FaustWasmInstantiator = ${wA.name};
var ${PA.name} = ${PA.toString()}
var Soundfile = ${PA.name};
var ${jj.name} = ${jj.toString()}
var WasmAllocator = ${jj.name};
var ${DA.name} = ${DA.toString()}
var FaustSensors = ${DA.name};
// Put them in dependencies
const dependencies = {
    FaustBaseWebAudioDsp,
    FaustMonoWebAudioDsp,
    FaustWasmInstantiator
};
// Generate the actual AudioWorkletProcessor code
(${Wt.toString()})(dependencies, faustData);
`,x=URL.createObjectURL(new Blob([h],{type:"text/javascript"}));await t.audioWorklet.addModule(x),(B=A.gWorkletProcessors.get(t))==null||B.add(r)}catch(h){throw h}return new BB(t,{processorOptions:{name:r,factory:k,sampleSize:$,...G}})}}async createFFTNode(t,j,k=this.name,e=this.factory,E={},r=(e==null?void 0:e.shaKey)?`${e.shaKey}_fft`:k,G={}){var s,B;if(!e)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");const a=JSON.parse(e.json),$=a.compile_options.match("-double")?8:4;if(e.soundfiles=await rj.loadSoundfiles(a,e.soundfiles||{},t),!A.gWorkletProcessors.has(t))A.gWorkletProcessors.set(t,new Set);if(!((s=A.gWorkletProcessors.get(t))==null?void 0:s.has(r)))try{const h=`
// DSP name and JSON string for DSP are generated
const faustData = ${JSON.stringify({processorName:r,dspName:k,dspMeta:a,fftOptions:E})};
// Implementation needed classes of functions
var ${RA.name} = ${RA.toString()}
var FaustDspInstance = ${RA.name};
var ${hA.name} = ${hA.toString()}
var FaustBaseWebAudioDsp = ${hA.name};
var ${lj.name} = ${lj.toString()}
var FaustMonoWebAudioDsp = ${lj.name};
var ${wA.name} = ${wA.toString()}
var FaustWasmInstantiator = ${wA.name};
var ${PA.name} = ${PA.toString()}
var Soundfile = ${PA.name};
var ${jj.name} = ${jj.toString()}
var WasmAllocator = ${jj.name};
var ${DA.name} = ${DA.toString()}
var FaustSensors = ${DA.name};
var FFTUtils = ${j.toString()}
// Put them in dependencies
const dependencies = {
    FaustBaseWebAudioDsp,
    FaustMonoWebAudioDsp,
    FaustWasmInstantiator,
    FFTUtils
};
// Generate the actual AudioWorkletProcessor code
(${Wo.toString()})(dependencies, faustData);
`,x=URL.createObjectURL(new Blob([h],{type:"text/javascript"}));await t.audioWorklet.addModule(x),(B=A.gWorkletProcessors.get(t))==null||B.add(r)}catch(h){throw h}const d=new BB(t,{channelCount:Math.max(1,Math.ceil(a.inputs/3)),outputChannelCount:[Math.ceil(a.outputs/2)],processorOptions:{name:r,factory:e,sampleSize:$,...G}});if(E.fftSize){const h=d.parameters.get("fftSize");if(h)h.value=E.fftSize}if(E.fftOverlap){const h=d.parameters.get("fftOverlap");if(h)h.value=E.fftOverlap}if(typeof E.defaultWindowFunction==="number"){const h=d.parameters.get("windowFunction");if(h)h.value=E.defaultWindowFunction+1}if(typeof E.noIFFT==="boolean"){const h=d.parameters.get("noIFFT");if(h)h.value=+E.noIFFT}return d}async createAudioWorkletProcessor(t=this.name,j=this.factory,k=(j==null?void 0:j.shaKey)||t){if(!j)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");const e=JSON.parse(j.json),E={FaustBaseWebAudioDsp:hA,FaustMonoWebAudioDsp:lj,FaustWasmInstantiator:wA,FaustPolyWebAudioDsp:void 0,FaustWebAudioDspVoice:void 0};try{return Wt(E,{processorName:k,dspName:t,dspMeta:e,poly:!1})}catch(r){throw r}}async createOfflineProcessor(t,j,k=this.factory,e){if(!k)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");const E=JSON.parse(k.json),r=await wA.createAsyncMonoDSPInstance(k),G=E.compile_options.match("-double")?8:4;if(e)k.soundfiles=await rj.loadSoundfiles(E,k.soundfiles||{},e);const s=new lj(r,t,G,j,k.soundfiles);return new nu(s,j)}getMeta(){return JSON.parse(this.factory.json)}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.getMeta().ui}};oB.gWorkletProcessors=new Map;var uB=oB,mu=class A{constructor(){this.voiceFactory=null,this.effectFactory=null}async compile(t,j,k,e,E=`dsp_code = environment{
                ${k}
            };
            process = dsp_code.effect;`){try{if(this.effectFactory=await t.createPolyDSPFactory(j,E,e),this.effectFactory){const r=JSON.parse(this.effectFactory.json),G=`// Voice output is forced to 2, when DSP is stereo or effect has 2 ins or 2 outs,
// so that the effect can process the 2 channels of the voice
adaptOut(1,1,1) = _;
adaptOut(1,1,2) = _ <: _,0;  // The left channel only is kept
adaptOut(1,2,1) = _ <: _,_;
adaptOut(1,2,2) = _ <: _,_;
adaptOut(2,1,1) = _,_;
adaptOut(2,1,2) = _,_;
adaptOut(2,2,1) = _,_;
adaptOut(2,2,2) = _,_;
adaptor(F) = adaptOut(outputs(F),${r.inputs},${r.outputs});
dsp_code = environment{
    ${k}
};
process = dsp_code.process : adaptor(dsp_code.process);
`,s=`// Inputs
adaptIn(1,1,1) = _;
adaptIn(1,1,2) = _,_ :> _;  
adaptIn(1,2,1) = _,_;
adaptIn(1,2,2) = _,_;
adaptIn(2,1,1) = _,_ :> _;
adaptIn(2,1,2) = _,_ :> _;
adaptIn(2,2,1) = _,_;
adaptIn(2,2,2) = _,_;
// Outputs
adaptOut(1,1) = _ <: _,0;   // The left channel only is kept
adaptOut(1,2) = _,_;
adaptOut(2,1) = _ <: _,0;   // The left channel only is kept
adaptOut(2,2) = _,_;
adaptorIns(F) = adaptIn(outputs(F),${r.inputs},${r.outputs});
adaptorOuts = adaptOut(${r.inputs},${r.outputs});
dsp_code = environment{
    ${k}
};
process = adaptorIns(dsp_code.process) : dsp_code.effect : adaptorOuts;
`;this.voiceFactory=await t.createPolyDSPFactory(j,G,e);try{this.effectFactory=await t.createPolyDSPFactory(j,s,e+" -inpl")}catch(B){console.warn(B)}}}catch(r){console.warn(r),this.voiceFactory=await t.createPolyDSPFactory(j,k,e)}if(this.voiceFactory){this.name=j;const G=JSON.parse(this.voiceFactory.json).compile_options.match("-double"),{mixerBuffer:s,mixerModule:B}=await t.getAsyncInternalMixerModule(!!G);return this.mixerBuffer=s,this.mixerModule=B,this}else return null}addSoundfiles(t){if(!this.voiceFactory)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");for(let j in t)this.voiceFactory.soundfiles[j]=t[j]}getSoundfileList(){if(!this.voiceFactory)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");const t=JSON.parse(this.voiceFactory.json),j=rj.findSoundfilesFromMeta(t);if(!this.effectFactory)return Object.keys(j);const k=JSON.parse(this.effectFactory.json),e=rj.findSoundfilesFromMeta(k);return Object.keys({...e,...j})}async createNode(t,j,k=this.name,e=this.voiceFactory,E=this.mixerModule,r=this.effectFactory,G=!1,s=1024,B=((e==null?void 0:e.shaKey)||"")+((r==null?void 0:r.shaKey)||"")||`${k}_poly`,a={}){var $,d;if(!e)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");const h=JSON.parse(e.json),x=r?JSON.parse(r.json):void 0,o=h.compile_options.match("-double")?8:4;if(e.soundfiles=await rj.loadSoundfiles(h,e.soundfiles||{},t),r)r.soundfiles=await rj.loadSoundfiles(x,r.soundfiles||{},t);if(G){const F=await wA.createAsyncPolyDSPInstance(e,E,j,r||void 0),i={...r==null?void 0:r.soundfiles,...e.soundfiles},n=new T6(F,t.sampleRate,o,s,i),m=t.createScriptProcessor(s,n.getNumInputs(),n.getNumOutputs());return Object.setPrototypeOf(m,$u.prototype),m.init(n),m}else{if(!A.gWorkletProcessors.has(t))A.gWorkletProcessors.set(t,new Set);if(!(($=A.gWorkletProcessors.get(t))==null?void 0:$.has(B)))try{const i=`
// DSP name and JSON string for DSP are generated
const faustData = ${JSON.stringify({processorName:B,dspName:k,dspMeta:h,poly:!0,effectMeta:x})};
// Implementation needed classes of functions
var ${RA.name} = ${RA.toString()}
var FaustDspInstance = ${RA.name};
var ${hA.name} = ${hA.toString()}
var FaustBaseWebAudioDsp = ${hA.name};
var ${T6.name} = ${T6.toString()}
var FaustPolyWebAudioDsp = ${T6.name};
var ${xA.name} = ${xA.toString()}
var FaustWebAudioDspVoice = ${xA.name};
var ${wA.name} = ${wA.toString()}
var FaustWasmInstantiator = ${wA.name};
var ${PA.name} = ${PA.toString()}
var Soundfile = ${PA.name};
var ${jj.name} = ${jj.toString()}
var WasmAllocator = ${jj.name};
var ${DA.name} = ${DA.toString()}
var FaustSensors = ${DA.name};
// Put them in dependencies
const dependencies = {
    FaustBaseWebAudioDsp,
    FaustPolyWebAudioDsp,
    FaustWasmInstantiator
};
// Generate the actual AudioWorkletProcessor code
(${Wt.toString()})(dependencies, faustData);
`,n=URL.createObjectURL(new Blob([i],{type:"text/javascript"}));await t.audioWorklet.addModule(n),(d=A.gWorkletProcessors.get(t))==null||d.add(B)}catch(i){throw i}return new uu(t,{processorOptions:{name:B,voiceFactory:e,mixerModule:E,voices:j,sampleSize:o,effectFactory:r||void 0,...a}})}}async createAudioWorkletProcessor(t=this.name,j=this.voiceFactory,k=this.effectFactory,e=((j==null?void 0:j.shaKey)||"")+((k==null?void 0:k.shaKey)||"")||`${t}_poly`){if(!j)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");const E=JSON.parse(j.json),r=k?JSON.parse(k.json):void 0,G=E.compile_options.match("-double")?8:4;try{return Wt({FaustBaseWebAudioDsp:hA,FaustMonoWebAudioDsp:void 0,FaustWasmInstantiator:wA,FaustPolyWebAudioDsp:T6,FaustWebAudioDspVoice:xA},{processorName:e,dspName:t,dspMeta:E,poly:!0,effectMeta:r})}catch(s){throw s}}async createOfflineProcessor(t,j,k,e=this.voiceFactory,E=this.mixerModule,r=this.effectFactory,G){if(!e)throw new Error("Code is not compiled, please define the factory or call `await this.compile()` first.");const s=JSON.parse(e.json),B=r?JSON.parse(r.json):void 0,a=await wA.createAsyncPolyDSPInstance(e,E,k,r||void 0),$=s.compile_options.match("-double")?8:4;if(G){if(e.soundfiles=await rj.loadSoundfiles(s,e.soundfiles||{},G),r)r.soundfiles=await rj.loadSoundfiles(B,r.soundfiles||{},G)}const d={...r==null?void 0:r.soundfiles,...e.soundfiles},h=new T6(a,t,$,j,d);return new iu(h,j)}getMeta(){const t=this.voiceFactory?JSON.parse(this.voiceFactory.json):null,j=this.effectFactory?JSON.parse(this.effectFactory.json):null,k={...t};if(j)k.ui=[{type:"tgroup",label:"Sequencer",items:[{type:"vgroup",label:"Instrument",items:t.ui},{type:"vgroup",label:"Effect",items:j.ui}]}];else k.ui=[{type:"tgroup",label:"Polyphonic",items:[{type:"vgroup",label:"Voices",items:t.ui}]}];return k}getJSON(){return JSON.stringify(this.getMeta())}getUI(){return this.getMeta().ui}};mu.gWorkletProcessors=new Map;function qj(A){var t=vB[A];if(t!==void 0)return t.exports;var j=vB[A]={exports:{}};return cu[A](j,j.exports,qj),j.exports}var cu={"./node_modules/@shren/typed-event-emitter/dist/index.js":(A,t)=>{/*!***************************************************************!*\
  !*** ./node_modules/@shren/typed-event-emitter/dist/index.js ***!
  \***************************************************************/Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEventEmitter=t.$AnyEventType=void 0,t.$AnyEventType=Symbol("__TypedEventListener_AnyEventType");class j{constructor(){this._listeners={[t.$AnyEventType]:[]}}get listeners(){return this._listeners}getListeners(k){if(!(k in this._listeners))this._listeners[k]=[];return this._listeners[k]}on(k,e){if(this.getListeners(k).indexOf(e)===-1)this.getListeners(k).push(e)}once(k,e){const E=(r,G)=>{const s=e(r,G);return this.off(k,E),s};this.on(k,E)}onAny(k){this._listeners[t.$AnyEventType].push(k)}off(k,e){const E=this.getListeners(k).indexOf(e);if(E!==-1)this.getListeners(k).splice(E,1)}offAny(k){const e=this._listeners[t.$AnyEventType].indexOf(k);if(e!==-1)this._listeners[t.$AnyEventType].splice(e,1)}async emit(k,e,E){var r;let G=this.getListeners(k),s=(E===null||E===void 0?void 0:E.excludeAny)?[]:this._listeners[t.$AnyEventType];if(!G.length&&!s.length)return[];if((r=E===null||E===void 0?void 0:E.exclude)===null||r===void 0?void 0:r.length){const{exclude:B}=E;G=G.filter((a)=>B.indexOf(a)===-1),s=s.filter((a)=>B.indexOf(a)===-1)}return Promise.all([...G.map((B)=>B(e,this)),...s.map((B)=>B(k,e,this))])}async emitSerial(k,e,E){var r;let G=this.getListeners(k),s=(E===null||E===void 0?void 0:E.excludeAny)?[]:this._listeners[t.$AnyEventType];if(!G.length&&!s.length)return[];if((r=E===null||E===void 0?void 0:E.exclude)===null||r===void 0?void 0:r.length){const{exclude:a}=E;G=G.filter(($)=>a.indexOf($)===-1),s=s.filter(($)=>a.indexOf($)===-1)}const B=[];for(let a=0;a<G.length;a++){const $=G[a];B[a]=await $(e,this)}for(let a=0;a<s.length;a++){const $=s[a];B[G.length+a]=await $(k,e,this)}return B}emitSync(k,e,E){var r;let G=this.getListeners(k),s=(E===null||E===void 0?void 0:E.excludeAny)?[]:this._listeners[t.$AnyEventType];if(!G.length&&!s.length)return[];if((r=E===null||E===void 0?void 0:E.exclude)===null||r===void 0?void 0:r.length){const{exclude:B}=E;G=G.filter((a)=>B.indexOf(a)===-1),s=s.filter((a)=>B.indexOf(a)===-1)}return[...G.map((B)=>B(e,this)),...s.map((B)=>B(k,e,this))]}offAll(k){if(k)this._listeners[k]=[];else this._listeners={[t.$AnyEventType]:[]}}listenerCount(k){const e=this._listeners[t.$AnyEventType].length;if(!(k in this._listeners))return e;return this._listeners[k].length+e}}t.TypedEventEmitter=j,t.default=j},"./src/FaustUI.ts":(A,t,j)=>{/*!************************!*\
  !*** ./src/FaustUI.ts ***!
  \************************/j.r(t),j.d(t,{default:()=>o});var k=j("./src/layout/Layout.ts");/*! ./layout/Layout */var e=j("./src/components/Group.ts");/*! ./components/Group */var E=j("./src/index.scss");/*! ./index.scss */var{defineProperty:r,defineProperties:G,getOwnPropertyDescriptors:s,getOwnPropertySymbols:B}=Object,a=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,d=(F,i,n)=>(i in F)?r(F,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):F[i]=n,h=(F,i)=>{for(var n in i||(i={}))if(a.call(i,n))d(F,n,i[n]);if(B){for(var n of B(i))if($.call(i,n))d(F,n,i[n])}return F},x=(F,i)=>G(F,s(i));class o{constructor(F){this.componentMap={},this.paramChangeByUI=(c,p)=>{if(!this.hostWindow)return;this.hostWindow.postMessage({path:c,value:p,type:"param"},"*")};const{root:i,ui:n,listenWindowResize:m,listenWindowMessage:v}=F;if(this.DOMroot=i,this.ui=n||[],typeof m==="undefined"||m===!0)window.addEventListener("resize",()=>{this.resize()});if(typeof v==="undefined"||v===!0)window.addEventListener("message",(c)=>{const{data:p,source:f}=c;this.hostWindow=f;const{type:g}=p;if(!g)return;if(g==="ui")this.ui=p.ui;else if(g==="param"){const{path:P,value:T}=p;this.paramChangeByDSP(P,T)}})}mount(){this.componentMap={},this.DOMroot.innerHTML="";const F={label:"",type:"vgroup",items:this.ui,style:{grid:this.grid,width:this.layout.width,height:this.layout.height,left:this.layout.offsetLeft,top:this.layout.offsetTop},isRoot:!0,emitter:this};this.faustUIRoot=new e.default(F),this.faustUIRoot.componentWillMount(),this.faustUIRoot.mount(),this.DOMroot.appendChild(this.faustUIRoot.container),this.faustUIRoot.componentDidMount()}register(F,i){if(this.componentMap[F])this.componentMap[F].push(i);else this.componentMap[F]=[i]}paramChangeByDSP(F,i){if(this.componentMap[F])this.componentMap[F].forEach((n)=>n.setState({value:i}))}calc(){const{items:F,layout:i}=k.default.calc(this.ui);this._ui=F,this._layout=i,this.calcGrid()}calcGrid(){const{width:F,height:i}=this.DOMroot.getBoundingClientRect(),n=Math.max(40,Math.min(F/this._layout.width,i/this._layout.height));return this.grid=n,n}resize(){if(!this.faustUIRoot)return;this.calcGrid(),this.faustUIRoot.setState({style:{grid:this.grid}})}filter(F){const i=(n,m)=>{var v;if(m.type==="soundfile")return n;if(m.type==="hgroup"||m.type==="vgroup"||m.type==="tgroup")return n.push(x(h({},m),{items:m.items.reduce(i,[])})),n;if((v=m.meta)==null?void 0:v.find((c)=>c.hidden&&c.hidden==="1"))return n;return n.push(m),n};return F.reduce(i,[])}get ui(){return this._ui}set ui(F){this._ui=this.filter(F),this.calc(),this.mount()}get layout(){return this._layout}get minWidth(){return this._layout.width*40+1}get minHeight(){return this._layout.height*40+1}}},"./src/components/AbstractComponent.ts":(A,t,j)=>{/*!*********************************************!*\
  !*** ./src/components/AbstractComponent.ts ***!
  \*********************************************/j.r(t),j.d(t,{default:()=>a});var k=j("./node_modules/@shren/typed-event-emitter/dist/index.js");/*! @shren/typed-event-emitter */var{defineProperty:e,getOwnPropertySymbols:E}=Object,r=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,s=($,d,h)=>(d in $)?e($,d,{enumerable:!0,configurable:!0,writable:!0,value:h}):$[d]=h,B=($,d)=>{for(var h in d||(d={}))if(r.call(d,h))s($,h,d[h]);if(E){for(var h of E(d))if(G.call(d,h))s($,h,d[h])}return $};class a extends k.default{constructor($){super();this.$frame=0,this.frameReduce=1,this.raf=()=>{if(this.$frame++,this.$frame%this.frameReduce!==0){this.$raf=window.requestAnimationFrame(this.raf);return}this.$raf=void 0,this.tasks.forEach((d)=>d()),this.tasks=[]},this.tasks=[],this.state=B(B({},this.defaultProps),$)}get defaultProps(){return this.constructor.defaultProps}setState($){let d=!1;for(let h in $){const x=$[h];if(h in this.state&&this.state[h]!==x)this.state[h]=x,d=!0;else return;if(d)this.emit(h,this.state[h])}}schedule($){if(this.tasks.indexOf($)===-1)this.tasks.push($);if(this.$raf)return;this.$raf=window.requestAnimationFrame(this.raf)}}a.defaultProps={}},"./src/components/AbstractItem.ts":(A,t,j)=>{/*!****************************************!*\
  !*** ./src/components/AbstractItem.ts ***!
  \****************************************/j.r(t),j.d(t,{default:()=>h});var k=j("./src/components/AbstractComponent.ts");/*! ./AbstractComponent */var e=j("./src/components/utils.ts");/*! ./utils */var E=j("./src/components/Base.scss");/*! ./Base.scss */var{defineProperty:r,getOwnPropertySymbols:G}=Object,s=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,a=(x,o,F)=>(o in x)?r(x,o,{enumerable:!0,configurable:!0,writable:!0,value:F}):x[o]=F,$=(x,o)=>{for(var F in o||(o={}))if(s.call(o,F))a(x,F,o[F]);if(G){for(var F of G(o))if(B.call(o,F))a(x,F,o[F])}return x};const d=class extends k.default{constructor(x){super(x);if(this.frameReduce=3,this.handleKeyDown=(o)=>{},this.handleKeyUp=(o)=>{},this.handleTouchStart=(o)=>{o.preventDefault();const F=o.currentTarget.getBoundingClientRect();let i=o.touches[0].clientX,n=o.touches[0].clientY;const m=i-F.left,v=n-F.top,c=this.state.value;this.handleMouseOrTouchDown({pointerId:-1,x:m,y:v,originalEvent:o});const p=(g)=>{g.preventDefault();const P=g.changedTouches[0].clientX,T=g.changedTouches[0].clientY,O=P-i,I=T-n;i=P,n=T;const K=P-F.left,w=T-F.top;this.handleMouseOrTouchMove({pointerId:-1,prevValue:c,x:K,y:w,fromX:m,fromY:v,movementX:O,movementY:I,originalEvent:g})},f=(g)=>{g.preventDefault();const P=g.changedTouches[0].clientX-F.left,T=g.changedTouches[0].clientY-F.top;this.handleMouseOrTouchUp({pointerId:-1,x:P,y:T,originalEvent:g}),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",f)};document.addEventListener("touchmove",p,{passive:!1}),document.addEventListener("touchend",f,{passive:!1})},this.handleWheel=(o)=>{},this.handleClick=(o)=>{},this.handleMouseDown=(o)=>{o.preventDefault(),o.currentTarget.focus();const F=o.currentTarget.getBoundingClientRect(),i=o.clientX-F.left,n=o.clientY-F.top,m=this.state.value;this.handleMouseOrTouchDown({pointerId:-1,x:i,y:n,originalEvent:o});const v=(p)=>{p.preventDefault();const f=p.clientX-F.left,g=p.clientY-F.top;this.handleMouseOrTouchMove({pointerId:-1,prevValue:m,x:f,y:g,fromX:i,fromY:n,movementX:p.movementX,movementY:p.movementY,originalEvent:p})},c=(p)=>{p.preventDefault();const f=p.clientX-F.left,g=p.clientY-F.top;this.handleMouseOrTouchUp({pointerId:-1,x:f,y:g,originalEvent:p}),document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",c)},this.handleMouseOver=(o)=>{},this.handleMouseOut=(o)=>{},this.handleContextMenu=(o)=>{},this.handlePointerDown=(o)=>{o.preventDefault(),o.currentTarget.focus();const{pointerId:F}=o,i=o.currentTarget.getBoundingClientRect(),n=o.clientX-i.left,m=o.clientY-i.top,v=this.state.value;this.handleMouseOrTouchDown({pointerId:F,x:n,y:m,originalEvent:o});const c=(f)=>{if(f.pointerId!==F)return;f.preventDefault();const g=f.clientX-i.left,P=f.clientY-i.top;this.handleMouseOrTouchMove({pointerId:F,prevValue:v,x:g,y:P,fromX:n,fromY:m,movementX:f.movementX,movementY:f.movementY,originalEvent:f})},p=(f)=>{if(f.pointerId!==F)return;f.preventDefault();const g=f.clientX-i.left,P=f.clientY-i.top;this.handleMouseOrTouchUp({pointerId:F,x:g,y:P,originalEvent:f}),document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",p)};document.addEventListener("pointermove",c),document.addEventListener("pointerup",p)},this.handleMouseOrTouchDown=(o)=>{},this.handleMouseOrTouchMove=(o)=>{},this.handleMouseOrTouchUp=(o)=>{},this.handleFocusIn=(o)=>this.setState({focus:!0}),this.handleFocusOut=(o)=>this.setState({focus:!1}),this.state.style=$($({},this.defaultProps.style),x.style),this.state.emitter)this.state.emitter.register(this.state.address,this)}toValidNumber(x){const{min:o,max:F,step:i}=this.state;if(typeof o!=="number"||typeof F!=="number")return x;const n=Math.min(F,Math.max(o,x));if(!i)return n;return o+Math.floor((n-o)/i)*i}setValue(x){const o=this.toValidNumber(x),F=this.setState({value:o});if(F)this.change(o);return F}change(x){if(this.state.emitter)this.state.emitter.paramChangeByUI(this.state.address,typeof x==="number"?x:this.state.value)}setState(x){let o=!1;for(let F in x){const i=F,n=x[i];if(i==="style"){for(let m in x.style)if(m in this.state.style)this.state.style[m]=x.style[m],o=!0}else if(i in this.state&&this.state[i]!==n)this.state[i]=n,o=!0;else return!1;if(o)this.emit(i,this.state[i])}return o}componentWillMount(){if(this.container=document.createElement("div"),this.container.className=["faust-ui-component","faust-ui-component-"+this.className].join(" "),this.container.tabIndex=1,this.container.id=this.state.address,this.state.tooltip)this.container.title=this.state.tooltip;return this.label=document.createElement("div"),this.label.className="faust-ui-component-label",this.labelCanvas=document.createElement("canvas"),this.labelCtx=this.labelCanvas.getContext("2d"),this}mount(){return this.label.appendChild(this.labelCanvas),this}paintLabel(x){const o=this.state.label,F=this.state.style.labelcolor,i=this.labelCtx,n=this.labelCanvas,m=window.devicePixelRatio||1;let{width:v,height:c}=this.label.getBoundingClientRect();if(!v||!c)return this;v=Math.floor(v),c=Math.floor(c);const p=Math.floor(v*m),f=Math.floor(c*m);return n.width=p,n.height=f,i.scale(m,m),i.clearRect(0,0,v,c),i.fillStyle=F,i.textBaseline="middle",i.textAlign=x||"center",i.font=`bold ${c*0.9}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"`,i.fillText(o,x==="left"?0:x==="right"?v:v/2,c/2,v),this}componentDidMount(){const x=()=>{const{grid:o,left:F,top:i,width:n,height:m}=this.state.style;this.container.style.width=`${n*o}px`,this.container.style.height=`${m*o}px`,this.container.style.left=`${F*o}px`,this.container.style.top=`${i*o}px`,this.label.style.height=`${o*0.25}px`,this.paintLabel()};return this.on("style",()=>this.schedule(x)),x(),this}get stepsCount(){const{type:x,max:o,min:F,step:i,enums:n}=this.state,m=x==="enum"?n.length:x==="int"?o-F:(o-F)/i;if(i){if(x==="enum")return n.length;if(x==="int")return Math.min(Math.floor((o-F)/(Math.round(i)||1)),m);return Math.floor((o-F)/i)}return m}get distance(){const{type:x,max:o,min:F,value:i,enums:n,scale:m}=this.state;return d.getDistance({type:x,max:o,min:F,value:i,enums:n,scale:m})}static getDistance(x){const{type:o,max:F,min:i,value:n,enums:m,scale:v}=x;if(o==="enum")return n/(m.length-1);const c=v==="exp"?e.normLog(n,i,F):v==="log"?e.normExp(n,i,F):n;return e.normalize(c,i,F)}get stepRange(){return 100/this.stepsCount}};let h=d;h.defaultProps={value:0,active:!0,focus:!1,label:"",address:"",min:0,max:1,enums:{},type:"float",unit:"",scale:"linear",step:0.01,style:{width:45,height:15,left:0,top:0,labelcolor:"rgba(226, 222, 255, 0.5)"}}},"./src/components/Button.ts":(A,t,j)=>{/*!**********************************!*\
  !*** ./src/components/Button.ts ***!
  \**********************************/j.r(t),j.d(t,{default:()=>x});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/Button.scss");/*! ./Button.scss */var{defineProperty:E,defineProperties:r,getOwnPropertyDescriptors:G,getOwnPropertySymbols:s}=Object,B=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,$=(o,F,i)=>(F in o)?E(o,F,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[F]=i,d=(o,F)=>{for(var i in F||(F={}))if(B.call(F,i))$(o,i,F[i]);if(s){for(var i of s(F))if(a.call(F,i))$(o,i,F[i])}return o},h=(o,F)=>r(o,G(F));class x extends k.default{constructor(){super(...arguments);this.className="button",this.setStyle=()=>{const{value:o,style:F}=this.state,{height:i,grid:n,fontsize:m,fontname:v,fontface:c,textcolor:p,textoncolor:f,bgoncolor:g,bgcolor:P,bordercolor:T,borderoncolor:O}=F;this.btn.style.backgroundColor=o?g:P,this.btn.style.borderColor=o?O:T,this.btn.style.color=o?f:p,this.btn.style.fontSize=`${m||i*n/4}px`,this.btn.style.fontFamily=`${v}, sans-serif`,this.btn.style.fontStyle=c},this.handleContextMenu=(o)=>{o.preventDefault()},this.handleMouseOrTouchDown=()=>{this.setValue(1)},this.handleMouseOrTouchUp=()=>{this.setValue(0)}}static get defaultProps(){const o=super.defaultProps;return h(d({},o),{style:h(d({},o.style),{fontname:"Arial",fontsize:void 0,fontface:"normal",bgcolor:"rgba(40, 40, 40, 1)",bgoncolor:"rgba(18, 18, 18, 1)",bordercolor:"rgba(80, 80, 80, 1)",borderoncolor:"rgba(255, 165, 0, 1)",textcolor:"rgba(226, 222, 255, 0.5)",textoncolor:"rgba(255, 165, 0, 1)"})})}componentWillMount(){return super.componentWillMount(),this.btn=document.createElement("div"),this.span=document.createElement("span"),this.span.innerText=this.state.label,this.setStyle(),this}mount(){return this.btn.appendChild(this.span),this.container.appendChild(this.btn),super.mount()}componentDidMount(){super.componentDidMount(),this.btn.addEventListener("pointerdown",this.handlePointerDown),this.btn.addEventListener("contextmenu",this.handleContextMenu),this.on("style",()=>this.schedule(this.setStyle));const o=()=>this.span.innerText=this.state.label;return this.on("label",()=>this.schedule(o)),this.on("value",()=>this.schedule(this.setStyle)),this}}},"./src/components/Checkbox.ts":(A,t,j)=>{/*!************************************!*\
  !*** ./src/components/Checkbox.ts ***!
  \************************************/j.r(t),j.d(t,{default:()=>E});var k=j("./src/components/Button.ts");/*! ./Button */var e=j("./src/components/Checkbox.scss");/*! ./Checkbox.scss */class E extends k.default{constructor(){super(...arguments);this.className="checkbox",this.handleMouseOrTouchDown=()=>{this.setValue(1-this.state.value)},this.handleMouseOrTouchUp=()=>{}}}},"./src/components/Group.ts":(A,t,j)=>{/*!*********************************!*\
  !*** ./src/components/Group.ts ***!
  \*********************************/j.r(t),j.d(t,{default:()=>m});var k=j("./src/components/AbstractComponent.ts");/*! ./AbstractComponent */var e=j("./src/components/HSlider.ts");/*! ./HSlider */var E=j("./src/components/VSlider.ts");/*! ./VSlider */var r=j("./src/components/Nentry.ts");/*! ./Nentry */var G=j("./src/components/Soundfile.ts");/*! ./Soundfile */var s=j("./src/components/Button.ts");/*! ./Button */var B=j("./src/components/Checkbox.ts");/*! ./Checkbox */var a=j("./src/components/Knob.ts");/*! ./Knob */var $=j("./src/components/Menu.ts");/*! ./Menu */var d=j("./src/components/Radio.ts");/*! ./Radio */var h=j("./src/components/Led.ts");/*! ./Led */var x=j("./src/components/Numerical.ts");/*! ./Numerical */var o=j("./src/components/HBargraph.ts");/*! ./HBargraph */var F=j("./src/components/VBargraph.ts");/*! ./VBargraph */var i=j("./src/layout/Layout.ts");/*! ../layout/Layout */var n=j("./src/components/Group.scss");/*! ./Group.scss */class m extends k.default{constructor(){super(...arguments);this.updateUI=()=>{this.children=[];const{style:v,type:c,items:p,emitter:f,isRoot:g}=this.state,{grid:P,left:T,top:O,width:I,height:K}=v;if(!this.state.isRoot)this.label.style.height=`${P*0.3}px`;if(this.container.style.left=`${T*P}px`,this.container.style.top=`${O*P}px`,this.container.style.width=`${I*P}px`,this.container.style.height=`${K*P}px`,this.container.className=["faust-ui-group",`faust-ui-${c}`,`${g?"faust-ui-root":""}`].join(" "),p.forEach((w)=>{if(w.type.endsWith("group")){const H=m.getComponent(w,f,P);if(H)this.children.push(H)}else{const H=w,y=m.getComponent(H,this.state.emitter,P);if(y)this.children.push(y)}}),c==="tgroup")this.tabs.innerHTML="",this.tabs.style.height=`${P}px`,this.tabs.style.top=`${0.25*P}px`,this.state.items.forEach((w,H)=>{const y=w.label,N=document.createElement("span");N.innerText=y,N.className="faust-ui-tgroup-tab",N.style.fontSize=`${0.25*P}px`,N.style.width=`${2*P-20}px`,N.style.height=`${P-20}px`,N.style.lineHeight=`${P-20}px`,N.addEventListener("click",()=>{const S=[];for(let C=0;C<this.container.children.length;C++){const R=this.container.children[C];if(C>1)S.push(R)}for(let C=0;C<S.length;C++){const R=S[C];R.style.visibility=H===C?"visible":"hidden"}for(let C=0;C<this.tabs.children.length;C++){const R=this.tabs.children[C];if(H!==C){if(R.classList.contains("active"))R.classList.remove("active")}else R.classList.add("active")}}),this.tabs.appendChild(N)})}}static parseMeta(v){const c={};if(!v)return{metaObject:c};if(v.forEach((p)=>Object.assign(c,p)),c.style){const p=/\{(?:(?:'|_|-)(.+?)(?:'|_|-):([-+]?[0-9]*\.?[0-9]+?);)+(?:(?:'|_|-)(.+?)(?:'|_|-):([-+]?[0-9]*\.?[0-9]+?))\}/,f=c.style.match(p);if(f){const g=/(?:(?:'|_|-)(.+?)(?:'|_|-):([-+]?[0-9]*\.?[0-9]+?))/g,P={};let T;while(T=g.exec(f[0]))P[T[1]]=+T[2];return{metaObject:c,enums:P}}}return{metaObject:c}}static getComponent(v,c,p){const f=i.default.predictType(v);if(f.endsWith("group")){const{label:R,items:X,type:L,layout:Q}=v,Z={label:R,type:L,items:X,style:{grid:p,width:Q.width,height:Q.height,left:Q.offsetLeft,top:Q.offsetTop,labelcolor:"rgba(255, 255, 255, 0.7)"},emitter:c};return new m(Z)}const g=v,{metaObject:P,enums:T}=this.parseMeta(g.meta),{tooltip:O,unit:I,scale:K}=P,{label:w,min:H,max:y,address:N,layout:S}=g,C={label:w,address:N,tooltip:O,unit:I,scale:K||"linear",emitter:c,enums:T,style:{grid:p,width:S.width,height:S.height,left:S.offsetLeft,top:S.offsetTop},type:"float",min:isFinite(H)?H:0,max:isFinite(y)?y:1,step:"step"in v?+v.step:1,value:"init"in v?+v.init||0:0};if(f==="button")return new s.default(C);if(f==="checkbox")return new B.default(C);if(f==="nentry")return new r.default(C);if(f==="soundfile")return new G.default(C);if(f==="knob")return new a.default(C);if(f==="menu")return new $.default(C);if(f==="radio")return new d.default(C);if(f==="hslider")return new e.default(C);if(f==="vslider")return new E.default(C);if(f==="hbargraph")return new o.default(C);if(f==="vbargraph")return new F.default(C);if(f==="numerical")return new x.default(C);if(f==="led")return new h.default(C);return null}setState(v){let c=!1;for(let p in v){const f=p,g=v[f];if(f==="style")for(let P in v.style){const T=P;if(T in this.state.style)this.state.style[T]=v.style[T],c=!0}else if(f in this.state&&this.state[f]!==g)this.state[f]=g,c=!0;else return;if(c)this.emit(f,this.state[f])}}componentWillMount(){if(this.container=document.createElement("div"),this.tabs=document.createElement("div"),this.tabs.className="faust-ui-tgroup-tabs",!this.state.isRoot)this.label=document.createElement("div"),this.label.className="faust-ui-group-label",this.labelCanvas=document.createElement("canvas"),this.labelCtx=this.labelCanvas.getContext("2d");return this.updateUI(),this.children.forEach((v)=>v.componentWillMount()),this}paintLabel(){if(this.state.isRoot)return this;const v=this.state.label,c=this.state.style.labelcolor,p=this.labelCtx,f=this.labelCanvas,g=window.devicePixelRatio||1;let{width:P,height:T}=this.label.getBoundingClientRect();if(!P||!T)return this;P=Math.floor(P),T=Math.floor(T);const O=Math.floor(P*g),I=Math.floor(T*g);return f.width=O,f.height=I,p.scale(g,g),p.clearRect(0,0,P,T),p.fillStyle=c,p.textBaseline="middle",p.textAlign="left",p.font=`bold ${T*0.9}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"`,p.fillText(v,0,T/2,P),this}mount(){if(!this.state.isRoot)this.label.appendChild(this.labelCanvas),this.container.appendChild(this.label);if(this.tabs.children.length)this.container.appendChild(this.tabs);return this.children.forEach((v)=>{v.mount(),this.container.appendChild(v.container)}),this}componentDidMount(){var v;const c=()=>{const{grid:g,left:P,top:T,width:O,height:I}=this.state.style;if(!this.state.isRoot)this.label.style.height=`${g*0.3}px`;if(this.container.style.width=`${O*g}px`,this.container.style.height=`${I*g}px`,this.container.style.left=`${P*g}px`,this.container.style.top=`${T*g}px`,this.state.type==="tgroup"){this.tabs.style.height=`${g}px`,this.tabs.style.top=`${0.25*g}px`;for(let K=0;K<this.tabs.children.length;K++){const w=this.tabs.children[K];w.style.fontSize=`${0.25*g}px`,w.style.width=`${2*g-20}px`,w.style.height=`${g-20}px`,w.style.lineHeight=`${g-20}px`}}this.paintLabel(),this.children.forEach((K)=>K.setState({style:{grid:g}}))};this.on("style",()=>this.schedule(c));const p=()=>{this.updateUI(),this.children.forEach((g)=>g.componentWillMount())};this.on("items",()=>this.schedule(p));const f=()=>{this.paintLabel(),this.label.title=this.state.label};if(this.on("label",()=>this.schedule(f)),this.paintLabel(),(v=this.tabs)==null?void 0:v.children.length)this.tabs.children[0].click();return this.children.forEach((g)=>g.componentDidMount()),this}}},"./src/components/HBargraph.ts":(A,t,j)=>{/*!*************************************!*\
  !*** ./src/components/HBargraph.ts ***!
  \*************************************/j.r(t),j.d(t,{default:()=>r});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/VBargraph.ts");/*! ./VBargraph */var E=j("./src/components/HBargraph.scss");/*! ./HBargraph.scss */class r extends e.default{constructor(){super(...arguments);this.className="hbargraph",this.setStyle=()=>{const{height:G,grid:s,fontsize:B,textcolor:a,bgcolor:$,bordercolor:d}=this.state.style;this.input.style.fontSize=`${B||G*s*0.2}px`,this.input.style.color=a,this.container.style.backgroundColor=$,this.container.style.borderColor=d},this.paint=()=>{const{barwidth:G,barbgcolor:s,coldcolor:B,warmcolor:a,hotcolor:$,overloadcolor:d}=this.state.style,{type:h,max:x,min:o,enums:F,scale:i,value:n}=this.state,m=this.ctx,v=this.canvas,c=window.devicePixelRatio||1;let{width:p,height:f}=this.canvasDiv.getBoundingClientRect();p=Math.floor(p),f=Math.floor(f);const g=Math.floor(p*c),P=Math.floor(f*c);v.width=g,v.height=P,m.scale(c,c);const T=p*0.9,O=G||Math.min(f/3,T*0.05),I=p*0.05,K=(f-O)*0.5;this.paintValue=n;const w=this.paintValue;if(w>this.maxValue){if(this.maxValue=w,this.maxTimer)window.clearTimeout(this.maxTimer);this.maxTimer=window.setTimeout(()=>{this.maxValue=this.paintValue,this.maxTimer=void 0,this.schedule(this.paint)},1000)}if(w<this.maxValue&&typeof this.maxTimer==="undefined")this.maxTimer=window.setTimeout(()=>{this.maxValue=this.paintValue,this.maxTimer=void 0,this.schedule(this.paint)},1000);const H=this.maxValue,y=(-18-o)/(x-o),N=(-6-o)/(x-o),S=(-3-o)/(x-o),C=Math.max(0,-o/(x-o)),R=m.createLinearGradient(I,0,T,0);if(y<=1&&y>=0)R.addColorStop(y,B);else if(y>1)R.addColorStop(1,B);if(N<=1&&N>=0)R.addColorStop(N,a);if(S<=1&&S>=0)R.addColorStop(S,$);if(C<=1&&C>=0)R.addColorStop(C,d);else if(C<0)R.addColorStop(0,B);if(m.fillStyle=s,w<0)m.fillRect(I,K,T*C,O);if(w<x)m.fillRect(I+T*C+1,K,T*(1-C)-1,O);if(m.fillStyle=R,w>o){const X=Math.max(0,k.default.getDistance({type:h,max:x,min:o,enums:F,scale:i,value:Math.min(0,w)}));m.fillRect(I,K,X*T,O)}if(w>0){const X=Math.max(0,k.default.getDistance({type:h,max:x,min:o,enums:F,scale:i,value:Math.min(x,w)})-C);m.fillRect(I+C*T+1,K,X*T-1,O)}if(H>w){if(H<=0){const X=Math.max(0,k.default.getDistance({type:h,max:x,min:o,enums:F,scale:i,value:Math.min(0,H)}));m.fillRect(I+X*T-1,K,1,O)}if(H>0){const X=Math.max(0,k.default.getDistance({type:h,max:x,min:o,enums:F,scale:i,value:Math.min(x,H)})-C);m.fillRect(I+Math.min(T-1,(C+X)*T),K,1,O)}}}}paintLabel(){return super.paintLabel("left")}}},"./src/components/HSlider.ts":(A,t,j)=>{/*!***********************************!*\
  !*** ./src/components/HSlider.ts ***!
  \***********************************/j.r(t),j.d(t,{default:()=>r});var k=j("./src/components/utils.ts");/*! ./utils */var e=j("./src/components/VSlider.ts");/*! ./VSlider */var E=j("./src/components/HSlider.scss");/*! ./HSlider.scss */class r extends e.default{constructor(){super(...arguments);this.className="hslider",this.setStyle=()=>{const{height:G,grid:s,fontsize:B,textcolor:a,bgcolor:$,bordercolor:d}=this.state.style;this.input.style.fontSize=`${B||G*s*0.2}px`,this.input.style.color=a,this.container.style.backgroundColor=$,this.container.style.borderColor=d},this.paint=()=>{const{sliderwidth:G,sliderbgcolor:s,sliderbgoncolor:B,slidercolor:a}=this.state.style,$=this.ctx,d=this.canvas,h=this.distance,x=window.devicePixelRatio||1;let{width:o,height:F}=this.canvasDiv.getBoundingClientRect();o=Math.floor(o),F=Math.floor(F);const i=Math.floor(o*x),n=Math.floor(F*x);d.width=i,d.height=n,$.scale(x,x);const m=o*0.9,v=G||Math.min(F/3,m*0.05),c=o*0.05,p=(F-v)*0.5,f=v*0.25;this.interactionRect=[c,0,m,F];const g=$.createLinearGradient(c,0,c+m,0);g.addColorStop(Math.max(0,Math.min(1,h)),B),g.addColorStop(Math.max(0,Math.min(1,h)),s),$.fillStyle=g,k.fillRoundedRect($,c,p,m,v,f),$.fillStyle=a,k.fillRoundedRect($,c+m*h-v,p-v,v*2,v*3,f)}}paintLabel(){return super.paintLabel("left")}}},"./src/components/Knob.ts":(A,t,j)=>{/*!********************************!*\
  !*** ./src/components/Knob.ts ***!
  \********************************/j.r(t),j.d(t,{default:()=>o});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/utils.ts");/*! ./utils */var E=j("./src/components/Knob.scss");/*! ./Knob.scss */var{defineProperty:r,defineProperties:G,getOwnPropertyDescriptors:s,getOwnPropertySymbols:B}=Object,a=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,d=(F,i,n)=>(i in F)?r(F,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):F[i]=n,h=(F,i)=>{for(var n in i||(i={}))if(a.call(i,n))d(F,n,i[n]);if(B){for(var n of B(i))if($.call(i,n))d(F,n,i[n])}return F},x=(F,i)=>G(F,s(i));class o extends k.default{constructor(){super(...arguments);this.className="knob",this.handleChange=(F)=>{const i=parseFloat(F.currentTarget.value);if(isFinite(i)){if(this.setValue(+i))return}this.input.value=this.inputNumber.value+(this.state.unit||"")},this.setStyle=()=>{const{fontsize:F,height:i,grid:n,textcolor:m,bgcolor:v,bordercolor:c}=this.state.style;this.input.style.fontSize=`${F||i*n*0.1}px`,this.input.style.color=m,this.container.style.backgroundColor=v,this.container.style.borderColor=c},this.paint=()=>{const{knobwidth:F,knobcolor:i,knoboncolor:n,needlecolor:m}=this.state.style,v=this.ctx,c=this.canvas,p=this.distance,f=window.devicePixelRatio||1;let{width:g,height:P}=this.canvas.getBoundingClientRect();g=Math.floor(g),P=Math.floor(P);const T=Math.floor(g*f),O=Math.floor(P*f);c.width=T,c.height=O,v.scale(f,f);const I=0.625*Math.PI,K=2.375*Math.PI,w=I+e.toRad(p*315),H=Math.min(g,P)*0.75,y=H*0.5,N=g*0.5,S=P*0.5,C=N+H*0.5*Math.cos(w),R=S+H*0.5*Math.sin(w),X=F||y*0.2;if(v.strokeStyle=i,v.lineWidth=X,v.lineCap="round",v.beginPath(),v.arc(N,S,y,w,K),v.stroke(),p)v.strokeStyle=n,v.beginPath(),v.arc(N,S,y,I,w),v.stroke();v.strokeStyle=m,v.beginPath(),v.moveTo(N,S),v.lineTo(C,R),v.stroke()},this.handleMouseOrTouchMove=(F)=>{const i=this.getValueFromDelta(F);if(i!==this.state.value)this.setValue(i)}}static get defaultProps(){const F=super.defaultProps;return x(h({},F),{style:x(h({},F.style),{fontname:"Arial",fontsize:void 0,fontface:"regular",bgcolor:"rgba(18, 18, 18, 0)",bordercolor:"rgba(80, 80, 80, 0)",labelcolor:"rgba(226, 222, 255, 0.5)",textcolor:"rgba(18, 18, 18, 1)",knobwidth:void 0,knobcolor:"rgba(18, 18, 18, 1)",knoboncolor:"rgba(255, 165, 0, 1)",needlecolor:"rgba(200, 200, 200, 0.75)"})})}componentWillMount(){return super.componentWillMount(),this.canvas=document.createElement("canvas"),this.canvas.width=10,this.canvas.height=10,this.ctx=this.canvas.getContext("2d"),this.inputNumber=document.createElement("input"),this.inputNumber.type="number",this.inputNumber.value=(+this.state.value.toFixed(3)).toString(),this.inputNumber.max=this.state.max.toString(),this.inputNumber.min=this.state.min.toString(),this.inputNumber.step=this.state.step.toString(),this.input=document.createElement("input"),this.input.value=this.inputNumber.value+(this.state.unit||""),this.input.spellcheck=!1,this.setStyle(),this}componentDidMount(){super.componentDidMount(),this.input.addEventListener("change",this.handleChange),this.canvas.addEventListener("pointerdown",this.handlePointerDown),this.on("style",()=>{this.schedule(this.setStyle),this.schedule(this.paint)}),this.on("label",()=>this.schedule(this.paintLabel));const F=()=>{this.inputNumber.value=(+this.state.value.toFixed(3)).toString(),this.input.value=this.inputNumber.value+(this.state.unit||"")};this.on("value",()=>{this.schedule(F),this.schedule(this.paint)});const i=()=>this.inputNumber.max=this.state.max.toString();this.on("max",()=>{this.schedule(i),this.schedule(this.paint)});const n=()=>this.inputNumber.min=this.state.min.toString();this.on("min",()=>{this.schedule(n),this.schedule(this.paint)});const m=()=>this.inputNumber.step=this.state.step.toString();return this.on("step",()=>{this.schedule(m),this.schedule(this.paint)}),this.schedule(this.paint),this}mount(){return this.container.appendChild(this.label),this.container.appendChild(this.canvas),this.container.appendChild(this.input),super.mount()}getValueFromDelta(F){const{type:i,min:n,max:m,enums:v,scale:c}=this.state,p=i==="enum"?1:this.state.step||1,f=this.stepRange,g=this.stepsCount,O=k.default.getDistance({value:F.prevValue,type:i,min:n,max:m,enums:v,scale:c})*100+F.fromY-F.y,I=e.denormalize(O/100,n,m),K=c==="exp"?e.normExp(I,n,m):c==="log"?e.normLog(I,n,m):I;let w=Math.round(e.normalize(K,n,m)*100/f);if(w=Math.min(g,Math.max(0,w)),i==="enum")return w;if(i==="int")return Math.round(w*p+n);return w*p+n}}},"./src/components/Led.ts":(A,t,j)=>{/*!*******************************!*\
  !*** ./src/components/Led.ts ***!
  \*******************************/j.r(t),j.d(t,{default:()=>x});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/Led.scss");/*! ./Led.scss */var{defineProperty:E,defineProperties:r,getOwnPropertyDescriptors:G,getOwnPropertySymbols:s}=Object,B=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,$=(o,F,i)=>(F in o)?E(o,F,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[F]=i,d=(o,F)=>{for(var i in F||(F={}))if(B.call(F,i))$(o,i,F[i]);if(s){for(var i of s(F))if(a.call(F,i))$(o,i,F[i])}return o},h=(o,F)=>r(o,G(F));class x extends k.default{constructor(){super(...arguments);this.className="led",this.setStyle=()=>{const{bgcolor:o,bordercolor:F}=this.state.style;this.container.style.backgroundColor=o,this.container.style.borderColor=F},this.paint=()=>{const{shape:o,ledbgcolor:F,coldcolor:i,warmcolor:n,hotcolor:m,overloadcolor:v}=this.state.style,{min:c,max:p}=this.state,{canvas:f,ctx:g,tempCanvas:P,tempCtx:T,distance:O}=this,I=window.devicePixelRatio||1;let{width:K,height:w}=f.getBoundingClientRect();K=Math.floor(K),w=Math.floor(w);const H=Math.floor(K*I),y=Math.floor(w*I);f.width=H,f.height=y,g.scale(I,I);const N=Math.min(w,K)*0.75,S=N,C=(K-S)*0.5,R=(w-N)*0.5,X=(-18-c)/(p-c),L=(-6-c)/(p-c),Q=(-3-c)/(p-c),Z=-c/(p-c),kA=T.createLinearGradient(0,0,P.width,0);if(X<=1&&X>=0)kA.addColorStop(X,i);else if(X>1)kA.addColorStop(1,i);if(L<=1&&L>=0)kA.addColorStop(L,n);if(Q<=1&&Q>=0)kA.addColorStop(Q,m);if(Z<=1&&Z>=0)kA.addColorStop(Z,v);else if(Z<0)kA.addColorStop(0,i);T.fillStyle=kA,T.fillRect(0,0,P.width,10);const eA=T.getImageData(Math.min(P.width-1,O*P.width),0,1,1).data;if(O)g.fillStyle=`rgb(${eA[0]}, ${eA[1]}, ${eA[2]})`;else g.fillStyle=F;if(o==="circle")g.arc(K/2,w/2,K/2-C,0,2*Math.PI);else g.rect(C,R,S,N);g.fill()}}static get defaultProps(){const o=super.defaultProps;return h(d({},o),{style:h(d({},o.style),{fontname:"Arial",fontsize:void 0,fontface:"regular",bgcolor:"rgba(18, 18, 18, 0)",bordercolor:"rgba(80, 80, 80, 0)",labelcolor:"rgba(226, 222, 255, 0.5)",textcolor:"rgba(18, 18, 18, 1)",shape:"circle",ledbgcolor:"rgba(18, 18, 18, 1)",coldcolor:"rgba(12, 248, 100, 1)",warmcolor:"rgba(195, 248, 100, 1)",hotcolor:"rgba(255, 193, 10, 1)",overloadcolor:"rgba(255, 10, 10, 1)"})})}componentWillMount(){return super.componentWillMount(),this.canvasDiv=document.createElement("div"),this.canvasDiv.className=`faust-ui-component-${this.className}-canvasdiv`,this.canvas=document.createElement("canvas"),this.canvas.width=10,this.canvas.height=10,this.ctx=this.canvas.getContext("2d"),this.tempCanvas=document.createElement("canvas"),this.tempCtx=this.tempCanvas.getContext("2d"),this.tempCanvas.width=128,this.tempCanvas.height=1,this.setStyle(),this}componentDidMount(){return super.componentDidMount(),this.canvas.addEventListener("pointerdown",this.handlePointerDown),this.on("style",()=>this.schedule(this.setStyle)),this.on("label",()=>this.schedule(this.paintLabel)),this.on("value",()=>this.schedule(this.paint)),this.on("max",()=>this.schedule(this.paint)),this.on("min",()=>this.schedule(this.paint)),this.on("step",()=>this.schedule(this.paint)),this.schedule(this.paint),this}mount(){return this.canvasDiv.appendChild(this.canvas),this.container.appendChild(this.label),this.container.appendChild(this.canvasDiv),super.mount()}}},"./src/components/Menu.ts":(A,t,j)=>{/*!********************************!*\
  !*** ./src/components/Menu.ts ***!
  \********************************/j.r(t),j.d(t,{default:()=>x});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/Menu.scss");/*! ./Menu.scss */var{defineProperty:E,defineProperties:r,getOwnPropertyDescriptors:G,getOwnPropertySymbols:s}=Object,B=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,$=(o,F,i)=>(F in o)?E(o,F,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[F]=i,d=(o,F)=>{for(var i in F||(F={}))if(B.call(F,i))$(o,i,F[i]);if(s){for(var i of s(F))if(a.call(F,i))$(o,i,F[i])}return o},h=(o,F)=>r(o,G(F));class x extends k.default{constructor(){super(...arguments);this.className="menu",this.handleChange=(o)=>{this.setValue(+o.currentTarget.value)},this.setStyle=()=>{const{height:o,grid:F,fontsize:i,textcolor:n,bgcolor:m,bordercolor:v}=this.state.style;this.select.style.backgroundColor=m,this.select.style.borderColor=v,this.select.style.color=n,this.select.style.fontSize=`${i||o*F/4}px`}}static get defaultProps(){const o=super.defaultProps;return h(d({},o),{style:h(d({},o.style),{fontname:"Arial",fontsize:void 0,fontface:"regular",bgcolor:"rgba(255, 255, 255, 0.25)",bordercolor:"rgba(80, 80, 80, 0)",labelcolor:"rgba(226, 222, 255, 0.5)",textcolor:"rgba(18, 18, 18, 1)"})})}componentWillMount(){return super.componentWillMount(),this.select=document.createElement("select"),this.getOptions(),this.setStyle(),this}getOptions(){const{enums:o}=this.state;if(this.select.innerHTML="",o){let F=0;for(let i in o){const n=document.createElement("option");if(n.value=o[i].toString(),n.text=i,F===0)n.selected=!0;this.select.appendChild(n),F++}}}componentDidMount(){super.componentDidMount(),this.select.addEventListener("change",this.handleChange),this.on("style",()=>this.schedule(this.setStyle)),this.on("label",()=>this.schedule(this.paintLabel)),this.on("enums",()=>this.schedule(this.getOptions));const o=()=>{for(let F=this.select.children.length-1;F>=0;F--)if(+this.select.children[F].value===this.state.value)this.select.selectedIndex=F};return this.on("value",()=>this.schedule(o)),o(),this}mount(){return this.container.appendChild(this.label),this.container.appendChild(this.select),super.mount()}}},"./src/components/Nentry.ts":(A,t,j)=>{/*!**********************************!*\
  !*** ./src/components/Nentry.ts ***!
  \**********************************/j.r(t),j.d(t,{default:()=>x});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/Nentry.scss");/*! ./Nentry.scss */var{defineProperty:E,defineProperties:r,getOwnPropertyDescriptors:G,getOwnPropertySymbols:s}=Object,B=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,$=(o,F,i)=>(F in o)?E(o,F,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[F]=i,d=(o,F)=>{for(var i in F||(F={}))if(B.call(F,i))$(o,i,F[i]);if(s){for(var i of s(F))if(a.call(F,i))$(o,i,F[i])}return o},h=(o,F)=>r(o,G(F));class x extends k.default{constructor(){super(...arguments);this.className="nentry",this.handleChange=(o)=>{this.setValue(+o.currentTarget.value)},this.setStyle=()=>{const{height:o,grid:F,fontsize:i,textcolor:n,bgcolor:m,bordercolor:v}=this.state.style;this.input.style.backgroundColor=m,this.input.style.borderColor=v,this.input.style.color=n,this.input.style.fontSize=`${i||o*F/4}px`}}static get defaultProps(){const o=super.defaultProps;return h(d({},o),{style:h(d({},o.style),{fontname:"Arial",fontsize:void 0,fontface:"regular",bgcolor:"rgba(255, 255, 255, 0.25)",bordercolor:"rgba(80, 80, 80, 0)",labelcolor:"rgba(226, 222, 255, 0.5)",textcolor:"rgba(18, 18, 18, 1)"})})}componentWillMount(){return super.componentWillMount(),this.input=document.createElement("input"),this.input.type="number",this.input.value=(+this.state.value.toFixed(3)).toString(),this.input.max=this.state.max.toString(),this.input.min=this.state.min.toString(),this.input.step=this.state.step.toString(),this.setStyle(),this}componentDidMount(){super.componentDidMount(),this.input.addEventListener("change",this.handleChange),this.on("style",()=>this.schedule(this.setStyle)),this.on("label",()=>this.schedule(this.paintLabel));const o=()=>this.input.value=(+this.state.value.toFixed(3)).toString();this.on("value",()=>this.schedule(o));const F=()=>this.input.max=this.state.max.toString();this.on("max",()=>this.schedule(F));const i=()=>this.input.min=this.state.min.toString();this.on("min",()=>this.schedule(i));const n=()=>this.input.step=this.state.step.toString();return this.on("step",()=>this.schedule(n)),this}mount(){return this.container.appendChild(this.label),this.container.appendChild(this.input),super.mount()}}},"./src/components/Numerical.ts":(A,t,j)=>{/*!*************************************!*\
  !*** ./src/components/Numerical.ts ***!
  \*************************************/j.r(t),j.d(t,{default:()=>x});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/Numerical.scss");/*! ./Numerical.scss */var{defineProperty:E,defineProperties:r,getOwnPropertyDescriptors:G,getOwnPropertySymbols:s}=Object,B=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,$=(o,F,i)=>(F in o)?E(o,F,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[F]=i,d=(o,F)=>{for(var i in F||(F={}))if(B.call(F,i))$(o,i,F[i]);if(s){for(var i of s(F))if(a.call(F,i))$(o,i,F[i])}return o},h=(o,F)=>r(o,G(F));class x extends k.default{constructor(){super(...arguments);this.className="numerical",this.setStyle=()=>{const{height:o,grid:F,fontsize:i,textcolor:n,bgcolor:m,bordercolor:v}=this.state.style;this.input.style.backgroundColor=m,this.input.style.borderColor=v,this.input.style.color=n,this.input.style.fontSize=`${i||o*F/4}px`}}static get defaultProps(){const o=super.defaultProps;return h(d({},o),{style:h(d({},o.style),{fontname:"Arial",fontsize:void 0,fontface:"regular",bgcolor:"rgba(255, 255, 255, 0.25)",bordercolor:"rgba(80, 80, 80, 0)",labelcolor:"rgba(226, 222, 255, 0.5)",textcolor:"rgba(18, 18, 18, 1)"})})}componentWillMount(){return super.componentWillMount(),this.input=document.createElement("input"),this.input.disabled=!0,this.input.value=(+this.state.value.toFixed(3)).toString()+(this.state.unit||""),this.setStyle(),this}componentDidMount(){super.componentDidMount(),this.on("style",()=>this.schedule(this.setStyle)),this.on("label",()=>this.schedule(this.paintLabel));const o=()=>this.input.value=(+this.state.value.toFixed(3)).toString()+(this.state.unit||"");return this.on("value",()=>this.schedule(o)),this}mount(){return this.container.appendChild(this.label),this.container.appendChild(this.input),super.mount()}}},"./src/components/Radio.ts":(A,t,j)=>{/*!*********************************!*\
  !*** ./src/components/Radio.ts ***!
  \*********************************/j.r(t),j.d(t,{default:()=>x});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/Radio.scss");/*! ./Radio.scss */var{defineProperty:E,defineProperties:r,getOwnPropertyDescriptors:G,getOwnPropertySymbols:s}=Object,B=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,$=(o,F,i)=>(F in o)?E(o,F,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[F]=i,d=(o,F)=>{for(var i in F||(F={}))if(B.call(F,i))$(o,i,F[i]);if(s){for(var i of s(F))if(a.call(F,i))$(o,i,F[i])}return o},h=(o,F)=>r(o,G(F));class x extends k.default{constructor(){super(...arguments);this.className="radio",this.getOptions=()=>{const{enums:o,address:F}=this.state;if(this.group.innerHTML="",o){let i=0;for(let n in o){const m=document.createElement("input"),v=document.createElement("div");if(m.value=o[n].toString(),m.name=F,m.type="radio",i===0)m.checked=!0;m.addEventListener("change",()=>{if(m.checked)this.setValue(o[n])}),v.appendChild(m),v.append(n),this.group.appendChild(v),i++}}},this.setStyle=()=>{const{height:o,width:F,grid:i,fontsize:n,textcolor:m,bgcolor:v,bordercolor:c}=this.state.style,p=Math.min(o*i*0.1,F*i*0.1);this.group.style.backgroundColor=v,this.group.style.borderColor=c,this.group.style.color=m,this.group.style.fontSize=`${n||p}px`}}static get defaultProps(){const o=super.defaultProps;return h(d({},o),{style:h(d({},o.style),{fontname:"Arial",fontsize:void 0,fontface:"regular",bgcolor:"rgba(255, 255, 255, 0.25)",bordercolor:"rgba(80, 80, 80, 0)",labelcolor:"rgba(226, 222, 255, 0.5)",textcolor:"rgba(18, 18, 18, 1)"})})}componentWillMount(){return super.componentWillMount(),this.group=document.createElement("div"),this.group.className="faust-ui-component-radio-group",this.getOptions(),this.setStyle(),this}componentDidMount(){super.componentDidMount(),this.on("style",()=>this.schedule(this.setStyle)),this.on("label",()=>this.schedule(this.paintLabel)),this.on("enums",()=>this.schedule(this.getOptions));const o=()=>{for(let F=this.group.children.length-1;F>=0;F--){const i=this.group.children[F].querySelector("input");if(+i.value===this.state.value)i.checked=!0}};return this.on("value",()=>this.schedule(o)),o(),this}mount(){return this.container.appendChild(this.label),this.container.appendChild(this.group),super.mount()}}},"./src/components/Soundfile.ts":(A,t,j)=>{/*!*************************************!*\
  !*** ./src/components/Soundfile.ts ***!
  \*************************************/j.r(t),j.d(t,{default:()=>x});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/Soundfile.scss");/*! ./Soundfile.scss */var{defineProperty:E,defineProperties:r,getOwnPropertyDescriptors:G,getOwnPropertySymbols:s}=Object,B=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,$=(o,F,i)=>(F in o)?E(o,F,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[F]=i,d=(o,F)=>{for(var i in F||(F={}))if(B.call(F,i))$(o,i,F[i]);if(s){for(var i of s(F))if(a.call(F,i))$(o,i,F[i])}return o},h=(o,F)=>r(o,G(F));class x extends k.default{constructor(){super(...arguments);this.className="soundfile",this.setStyle=()=>{const{value:o,style:F}=this.state,{height:i,grid:n,fontsize:m,fontname:v,fontface:c,textcolor:p,textoncolor:f,bgoncolor:g,bgcolor:P,bordercolor:T,borderoncolor:O}=F;this.btn.style.backgroundColor=o?g:P,this.btn.style.borderColor=o?O:T,this.btn.style.color=o?f:p,this.btn.style.fontSize=`${m||i*n/4}px`,this.btn.style.fontFamily=`${v}, sans-serif`,this.btn.style.fontStyle=c},this.handleMouseOrTouchDown=()=>{},this.handleMouseOrTouchUp=()=>{}}static get defaultProps(){const o=super.defaultProps;return h(d({},o),{style:h(d({},o.style),{fontname:"Arial",fontsize:void 0,fontface:"normal",bgcolor:"rgba(40, 40, 40, 1)",bgoncolor:"rgba(18, 18, 18, 1)",bordercolor:"rgba(80, 80, 80, 1)",borderoncolor:"rgba(255, 165, 0, 1)",textcolor:"rgba(226, 222, 255, 0.5)",textoncolor:"rgba(255, 165, 0, 1)"})})}componentWillMount(){return super.componentWillMount(),this.btn=document.createElement("div"),this.span=document.createElement("span"),this.span.innerText=this.state.label,this.setStyle(),this}mount(){return this.btn.appendChild(this.span),this.container.appendChild(this.btn),super.mount()}componentDidMount(){super.componentDidMount(),this.btn.addEventListener("pointerdown",this.handlePointerDown),this.on("style",()=>this.schedule(this.setStyle));const o=()=>this.span.innerText=this.state.label;return this.on("label",()=>this.schedule(o)),this.on("value",()=>this.schedule(this.setStyle)),this}}},"./src/components/VBargraph.ts":(A,t,j)=>{/*!*************************************!*\
  !*** ./src/components/VBargraph.ts ***!
  \*************************************/j.r(t),j.d(t,{default:()=>x});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/VBargraph.scss");/*! ./VBargraph.scss */var{defineProperty:E,defineProperties:r,getOwnPropertyDescriptors:G,getOwnPropertySymbols:s}=Object,B=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,$=(o,F,i)=>(F in o)?E(o,F,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[F]=i,d=(o,F)=>{for(var i in F||(F={}))if(B.call(F,i))$(o,i,F[i]);if(s){for(var i of s(F))if(a.call(F,i))$(o,i,F[i])}return o},h=(o,F)=>r(o,G(F));class x extends k.default{constructor(){super(...arguments);this.className="vbargraph",this.setStyle=()=>{const{height:o,width:F,grid:i,fontsize:n,textcolor:m,bgcolor:v,bordercolor:c}=this.state.style,p=Math.min(o*i*0.05,F*i*0.2);this.input.style.fontSize=`${n||p}px`,this.input.style.color=m,this.container.style.backgroundColor=v,this.container.style.borderColor=c},this.paintValue=0,this.maxValue=-1/0,this.paint=()=>{const{barwidth:o,barbgcolor:F,coldcolor:i,warmcolor:n,hotcolor:m,overloadcolor:v}=this.state.style,{type:c,max:p,min:f,enums:g,scale:P,value:T}=this.state,O=this.ctx,I=this.canvas,K=window.devicePixelRatio||1;let{width:w,height:H}=this.canvasDiv.getBoundingClientRect();w=Math.floor(w),H=Math.floor(H);const y=Math.floor(w*K),N=Math.floor(H*K);I.width=y,I.height=N,O.scale(K,K);const S=H*0.9,C=o||Math.min(w/3,S*0.05),R=(w-C)*0.5,X=H*0.05;this.paintValue=T;const L=this.paintValue;if(L>this.maxValue){if(this.maxValue=L,this.maxTimer)window.clearTimeout(this.maxTimer);this.maxTimer=window.setTimeout(()=>{this.maxValue=this.paintValue,this.maxTimer=void 0,this.schedule(this.paint)},1000)}if(L<this.maxValue&&typeof this.maxTimer==="undefined")this.maxTimer=window.setTimeout(()=>{this.maxValue=this.paintValue,this.maxTimer=void 0,this.schedule(this.paint)},1000);const Q=this.maxValue,Z=(-18-f)/(p-f),kA=(-6-f)/(p-f),eA=(-3-f)/(p-f),jA=Math.max(0,-f/(p-f)),GA=O.createLinearGradient(0,S,0,X);if(Z<=1&&Z>=0)GA.addColorStop(Z,i);else if(Z>1)GA.addColorStop(1,i);if(kA<=1&&kA>=0)GA.addColorStop(kA,n);if(eA<=1&&eA>=0)GA.addColorStop(eA,m);if(jA<=1&&jA>=0)GA.addColorStop(jA,v);else if(jA<0)GA.addColorStop(0,i);if(O.fillStyle=F,L<0)O.fillRect(R,X+(1-jA)*S,C,S*jA);if(L<p)O.fillRect(R,X,C,(1-jA)*S-1);if(O.fillStyle=GA,L>f){const EA=Math.max(0,k.default.getDistance({type:c,max:p,min:f,enums:g,scale:P,value:Math.min(0,L)}));O.fillRect(R,X+(1-EA)*S,C,S*EA)}if(L>0){const EA=Math.max(0,k.default.getDistance({type:c,max:p,min:f,enums:g,scale:P,value:Math.min(p,L)})-jA);O.fillRect(R,X+(1-jA-EA)*S,C,S*EA-1)}if(Q>L){if(Q<=0){const EA=Math.max(0,k.default.getDistance({type:c,max:p,min:f,enums:g,scale:P,value:Math.min(0,Q)}));O.fillRect(R,X+(1-EA)*S,C,1)}if(Q>0){const EA=Math.max(0,k.default.getDistance({type:c,max:p,min:f,enums:g,scale:P,value:Math.min(p,Q)})-jA);O.fillRect(R,Math.max(X,X+(1-jA-EA)*S-1),C,1)}}}}static get defaultProps(){const o=super.defaultProps;return h(d({},o),{style:h(d({},o.style),{fontname:"Arial",fontsize:void 0,fontface:"regular",bgcolor:"rgba(18, 18, 18, 0)",bordercolor:"rgba(80, 80, 80, 0)",labelcolor:"rgba(226, 222, 255, 0.5)",textcolor:"rgba(18, 18, 18, 1)",barwidth:void 0,barbgcolor:"rgba(18, 18, 18, 1)",coldcolor:"rgba(12, 248, 100, 1)",warmcolor:"rgba(195, 248, 100, 1)",hotcolor:"rgba(255, 193, 10, 1)",overloadcolor:"rgba(255, 10, 10, 1)"})})}componentWillMount(){return super.componentWillMount(),this.flexDiv=document.createElement("div"),this.flexDiv.className=`faust-ui-component-${this.className}-flexdiv`,this.canvasDiv=document.createElement("div"),this.canvasDiv.className=`faust-ui-component-${this.className}-canvasdiv`,this.canvas=document.createElement("canvas"),this.canvas.width=10,this.canvas.height=10,this.ctx=this.canvas.getContext("2d"),this.input=document.createElement("input"),this.input.disabled=!0,this.input.value=(+this.state.value.toFixed(3)).toString()+(this.state.unit||""),this.setStyle(),this}componentDidMount(){super.componentDidMount(),this.canvas.addEventListener("pointerdown",this.handlePointerDown),this.on("style",()=>{this.schedule(this.setStyle),this.schedule(this.paint)}),this.on("label",()=>this.schedule(this.paintLabel));const o=()=>this.input.value=(+this.state.value.toFixed(3)).toString()+(this.state.unit||"");return this.on("value",()=>{this.schedule(o),this.schedule(this.paint)}),this.on("max",()=>this.schedule(this.paint)),this.on("min",()=>this.schedule(this.paint)),this.on("step",()=>this.schedule(this.paint)),this.schedule(this.paint),this}mount(){return this.canvasDiv.appendChild(this.canvas),this.flexDiv.appendChild(this.canvasDiv),this.flexDiv.appendChild(this.input),this.container.appendChild(this.label),this.container.appendChild(this.flexDiv),super.mount()}}},"./src/components/VSlider.ts":(A,t,j)=>{/*!***********************************!*\
  !*** ./src/components/VSlider.ts ***!
  \***********************************/j.r(t),j.d(t,{default:()=>o});var k=j("./src/components/AbstractItem.ts");/*! ./AbstractItem */var e=j("./src/components/utils.ts");/*! ./utils */var E=j("./src/components/VSlider.scss");/*! ./VSlider.scss */var{defineProperty:r,defineProperties:G,getOwnPropertyDescriptors:s,getOwnPropertySymbols:B}=Object,a=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,d=(F,i,n)=>(i in F)?r(F,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):F[i]=n,h=(F,i)=>{for(var n in i||(i={}))if(a.call(i,n))d(F,n,i[n]);if(B){for(var n of B(i))if($.call(i,n))d(F,n,i[n])}return F},x=(F,i)=>G(F,s(i));class o extends k.default{constructor(){super(...arguments);this.className="vslider",this.interactionRect=[0,0,0,0],this.handleChange=(F)=>{const i=parseFloat(F.currentTarget.value);if(isFinite(i)){if(this.setValue(+i))return}this.input.value=this.inputNumber.value+(this.state.unit||"")},this.setStyle=()=>{const{height:F,width:i,grid:n,fontsize:m,textcolor:v,bgcolor:c,bordercolor:p}=this.state.style,f=Math.min(F*n*0.05,i*n*0.2);this.input.style.fontSize=`${m||f}px`,this.input.style.color=v,this.container.style.backgroundColor=c,this.container.style.borderColor=p},this.paint=()=>{const{sliderwidth:F,sliderbgcolor:i,sliderbgoncolor:n,slidercolor:m}=this.state.style,v=this.ctx,c=this.canvas,p=this.distance,f=window.devicePixelRatio||1;let{width:g,height:P}=this.canvasDiv.getBoundingClientRect();g=Math.floor(g),P=Math.floor(P);const T=Math.floor(g*f),O=Math.floor(P*f);c.width=T,c.height=O,v.scale(f,f);const I=P*0.9,K=F||Math.min(g/3,I*0.05),w=(g-K)*0.5,H=P*0.05,y=K*0.25;this.interactionRect=[0,H,g,I];const N=v.createLinearGradient(0,H,0,H+I);N.addColorStop(Math.max(0,Math.min(1,1-p)),i),N.addColorStop(Math.max(0,Math.min(1,1-p)),n),v.fillStyle=N,e.fillRoundedRect(v,w,H,K,I,y),v.fillStyle=m,e.fillRoundedRect(v,w-K,H+I*(1-p)-K,K*3,K*2,y)},this.handleMouseOrTouchDown=(F)=>{const{value:i}=this.state;if(F.x<this.interactionRect[0]||F.x>this.interactionRect[0]+this.interactionRect[2]||F.y<this.interactionRect[1]||F.y>this.interactionRect[1]+this.interactionRect[3])return;if(this.getValueFromPos(F)!==i)this.setValue(this.getValueFromPos(F))},this.handleMouseOrTouchMove=(F)=>{const i=this.getValueFromPos(F);if(i!==this.state.value)this.setValue(i)}}static get defaultProps(){const F=super.defaultProps;return x(h({},F),{style:x(h({},F.style),{fontname:"Arial",fontsize:void 0,fontface:"regular",bgcolor:"rgba(18, 18, 18, 0)",bordercolor:"rgba(80, 80, 80, 0)",labelcolor:"rgba(226, 222, 255, 0.5)",textcolor:"rgba(18, 18, 18, 1)",sliderwidth:void 0,sliderbgcolor:"rgba(18, 18, 18, 1)",sliderbgoncolor:"rgba(255, 165, 0, 1)",slidercolor:"rgba(200, 200, 200, 0.75)"})})}componentWillMount(){return super.componentWillMount(),this.flexDiv=document.createElement("div"),this.flexDiv.className=`faust-ui-component-${this.className}-flexdiv`,this.canvasDiv=document.createElement("div"),this.canvasDiv.className=`faust-ui-component-${this.className}-canvasdiv`,this.canvas=document.createElement("canvas"),this.canvas.width=10,this.canvas.height=10,this.ctx=this.canvas.getContext("2d"),this.inputNumber=document.createElement("input"),this.inputNumber.type="number",this.inputNumber.value=(+this.state.value.toFixed(3)).toString(),this.inputNumber.max=this.state.max.toString(),this.inputNumber.min=this.state.min.toString(),this.inputNumber.step=this.state.step.toString(),this.input=document.createElement("input"),this.input.value=this.inputNumber.value+(this.state.unit||""),this.input.spellcheck=!1,this.setStyle(),this}componentDidMount(){super.componentDidMount(),this.input.addEventListener("change",this.handleChange),this.canvas.addEventListener("pointerdown",this.handlePointerDown),this.on("style",()=>{this.schedule(this.setStyle),this.schedule(this.paint)}),this.on("label",()=>this.schedule(this.paintLabel));const F=()=>{this.inputNumber.value=(+this.state.value.toFixed(3)).toString(),this.input.value=this.inputNumber.value+(this.state.unit||"")};this.on("value",()=>{this.schedule(F),this.schedule(this.paint)});const i=()=>this.inputNumber.max=this.state.max.toString();this.on("max",()=>{this.schedule(i),this.schedule(this.paint)});const n=()=>this.inputNumber.min=this.state.min.toString();this.on("min",()=>{this.schedule(n),this.schedule(this.paint)});const m=()=>this.inputNumber.step=this.state.step.toString();return this.on("step",()=>{this.schedule(m),this.schedule(this.paint)}),this.schedule(this.paint),this}mount(){return this.canvasDiv.appendChild(this.canvas),this.flexDiv.appendChild(this.canvasDiv),this.flexDiv.appendChild(this.input),this.container.appendChild(this.label),this.container.appendChild(this.flexDiv),super.mount()}get stepsCount(){const{type:F,max:i,min:n,step:m,enums:v}=this.state,c=F==="enum"?v.length:F==="int"?i-n:(i-n)/m;if(m){if(F==="enum")return v.length;if(F==="int")return Math.min(Math.floor((i-n)/(Math.round(m)||0)),c);return Math.floor((i-n)/m)}return c}get stepRange(){const F=this.interactionRect[this.className==="vslider"?3:2],i=this.stepsCount;return F/i}getValueFromPos(F){const{type:i,min:n,max:m,scale:v}=this.state,c=i==="enum"?1:this.state.step||1,p=this.stepRange,f=this.stepsCount,g=this.className==="vslider"?this.interactionRect[3]-(F.y-this.interactionRect[1]):F.x-this.interactionRect[0],P=this.className==="vslider"?this.interactionRect[3]:this.interactionRect[2],T=e.denormalize(g/P,n,m),O=v==="exp"?e.normExp(T,n,m):v==="log"?e.normLog(T,n,m):T;let I=Math.round(e.normalize(O,n,m)*P/p);if(I=Math.min(f,Math.max(0,I)),i==="enum")return I;if(i==="int")return Math.round(I*c+n);return I*c+n}}},"./src/components/utils.ts":(A,t,j)=>{/*!*********************************!*\
  !*** ./src/components/utils.ts ***!
  \*********************************/j.r(t),j.d(t,{atodb:()=>E,dbtoa:()=>r,denormalize:()=>G,fillRoundedRect:()=>x,iNormExp:()=>d,iNormLog:()=>a,normExp:()=>$,normLog:()=>B,normalize:()=>s,roundedRect:()=>h,toMIDI:()=>k,toRad:()=>e});const k=(o)=>["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][(o%12+12)%12]+Math.round(o/12-2),e=(o)=>o*Math.PI/180,E=(o)=>20*Math.log10(o),r=(o)=>10**(o/20),G=(o,F,i)=>F+(i-F)*o,s=(o,F,i)=>(o-F)/(i-F)||0,B=(o,F,i)=>{const n=s(o,F,i),m=Math.log(Math.max(Number.EPSILON,F)),v=Math.log(Math.max(Number.EPSILON,i)),c=G(n,m,v),p=Math.exp(c);return Math.max(F,Math.min(i,p))},a=(o,F,i)=>{const n=Math.max(F,Math.min(i,o)),m=Math.log(Math.max(Number.EPSILON,n)),v=Math.log(Math.max(Number.EPSILON,F)),c=Math.log(Math.max(Number.EPSILON,i)),p=s(m,v,c);return G(p,F,i)},$=a,d=B,h=(o,F,i,n,m,v)=>{const c=[0,0,0,0];if(typeof v==="number")c.fill(v);else v.forEach((p,f)=>c[f]=p);o.beginPath(),o.moveTo(F+c[0],i),o.lineTo(F+n-c[1],i),o.quadraticCurveTo(F+n,i,F+n,i+c[1]),o.lineTo(F+n,i+m-c[2]),o.quadraticCurveTo(F+n,i+m,F+n-c[2],i+m),o.lineTo(F+c[3],i+m),o.quadraticCurveTo(F,i+m,F,i+m-c[3]),o.lineTo(F,i+c[0]),o.quadraticCurveTo(F,i,F+c[0],i),o.closePath(),o.stroke()},x=(o,F,i,n,m,v)=>{const c=[0,0,0,0];if(typeof v==="number")c.fill(v);else v.forEach((p,f)=>c[f]=p);o.beginPath(),o.moveTo(F+c[0],i),o.lineTo(F+n-c[1],i),o.quadraticCurveTo(F+n,i,F+n,i+c[1]),o.lineTo(F+n,i+m-c[2]),o.quadraticCurveTo(F+n,i+m,F+n-c[2],i+m),o.lineTo(F+c[3],i+m),o.quadraticCurveTo(F,i+m,F,i+m-c[3]),o.lineTo(F,i+c[0]),o.quadraticCurveTo(F,i,F+c[0],i),o.closePath(),o.fill()}},"./src/instantiate.ts":(A,t,j)=>{/*!****************************!*\
  !*** ./src/instantiate.ts ***!
  \****************************/j.r(t),j.d(t,{default:()=>E});var k=j("./src/FaustUI.ts");/*! ./FaustUI */const E=()=>{const r=new k.default({root:document.getElementById("root"),listenWindowResize:!0,listenWindowMessage:!0});let G;window.addEventListener("message",(s)=>{const{source:B}=s;G=B}),window.addEventListener("keydown",(s)=>{if(G)G.postMessage({type:"keydown",key:s.key},"*")}),window.addEventListener("keyup",(s)=>{if(G)G.postMessage({type:"keyup",key:s.key},"*")}),window.faustUI=r}},"./src/layout/AbstractGroup.ts":(A,t,j)=>{/*!*************************************!*\
  !*** ./src/layout/AbstractGroup.ts ***!
  \*************************************/j.r(t),j.d(t,{default:()=>e});const k=class{constructor(E,r){this.isRoot=!!r,Object.assign(this,E);const{hasHSizingDesc:G,hasVSizingDesc:s}=this,B=G&&s?"both":G?"horizontal":s?"vertical":"none";this.layout={type:E.type,width:k.padding*2,height:k.padding*2+(this.isRoot?0:k.labelHeight),sizing:B}}get hasHSizingDesc(){return!!this.items.find((E)=>{if(E instanceof k)return E.hasHSizingDesc;return E.layout.sizing==="horizontal"||E.layout.sizing==="both"})}get hasVSizingDesc(){return!!this.items.find((E)=>{if(E instanceof k)return E.hasVSizingDesc;return E.layout.sizing==="vertical"||E.layout.sizing==="both"})}adjust(){return this}expand(E,r){return this}offset(){return this}};let e=k;e.padding=0.2,e.labelHeight=0.25,e.spaceBetween=0.1},"./src/layout/AbstractInputItem.ts":(A,t,j)=>{/*!*****************************************!*\
  !*** ./src/layout/AbstractInputItem.ts ***!
  \*****************************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractItem.ts");/*! ./AbstractItem */class e extends k.default{constructor(E){super(E);this.init=+E.init||0,this.step=+E.step||1}}},"./src/layout/AbstractItem.ts":(A,t,j)=>{/*!************************************!*\
  !*** ./src/layout/AbstractItem.ts ***!
  \************************************/j.r(t),j.d(t,{default:()=>k});class k{constructor(e){Object.assign(this,e),this.min=isFinite(+this.min)?+this.min:0,this.max=isFinite(+this.max)?+this.max:1}adjust(){return this}expand(e,E){return this}offset(){return this}}},"./src/layout/AbstractOutputItem.ts":(A,t,j)=>{/*!******************************************!*\
  !*** ./src/layout/AbstractOutputItem.ts ***!
  \******************************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractItem.ts");/*! ./AbstractItem */class e extends k.default{}},"./src/layout/Button.ts":(A,t,j)=>{/*!******************************!*\
  !*** ./src/layout/Button.ts ***!
  \******************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractInputItem.ts");/*! ./AbstractInputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"button",width:2,height:1,sizing:"horizontal"}}}},"./src/layout/Checkbox.ts":(A,t,j)=>{/*!********************************!*\
  !*** ./src/layout/Checkbox.ts ***!
  \********************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractInputItem.ts");/*! ./AbstractInputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"checkbox",width:2,height:1,sizing:"horizontal"}}}},"./src/layout/HBargraph.ts":(A,t,j)=>{/*!*********************************!*\
  !*** ./src/layout/HBargraph.ts ***!
  \*********************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractOutputItem.ts");/*! ./AbstractOutputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"hbargraph",width:5,height:1,sizing:"horizontal"}}}},"./src/layout/HGroup.ts":(A,t,j)=>{/*!******************************!*\
  !*** ./src/layout/HGroup.ts ***!
  \******************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractGroup.ts");/*! ./AbstractGroup */class e extends k.default{adjust(){if(this.items.forEach((E)=>{E.adjust(),this.layout.width+=E.layout.width,this.layout.height=Math.max(this.layout.height,E.layout.height+2*k.default.padding+(this.isRoot?0:k.default.labelHeight))}),this.layout.width+=k.default.spaceBetween*(this.items.length-1),this.layout.width<1)this.layout.width+=1;return this}expand(E){let r=0;return this.items.forEach((G)=>{if(G.layout.sizing==="both"||G.layout.sizing==="horizontal")r++}),this.items.forEach((G)=>{let s=0,B=0;if(G.layout.sizing==="both"||G.layout.sizing==="horizontal")s=r?E/r:0,G.layout.width+=s;if(G.layout.sizing==="both"||G.layout.sizing==="vertical")B=this.layout.height-2*k.default.padding-(this.isRoot?0:k.default.labelHeight)-G.layout.height,G.layout.height+=B;G.expand(s,B)}),this}offset(){const{labelHeight:E,padding:r,spaceBetween:G}=k.default;let s=r;const B=r+(this.isRoot?0:E),{height:a}=this.layout;return this.items.forEach(($)=>{$.layout.offsetLeft=s,$.layout.offsetTop=B,$.layout.offsetTop+=(a-(this.isRoot?0:E)-$.layout.height)/2-r,$.layout.left=(this.layout.left||0)+$.layout.offsetLeft,$.layout.top=(this.layout.top||0)+$.layout.offsetTop,$.offset(),s+=$.layout.width+G}),this}}},"./src/layout/HSlider.ts":(A,t,j)=>{/*!*******************************!*\
  !*** ./src/layout/HSlider.ts ***!
  \*******************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractInputItem.ts");/*! ./AbstractInputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"hslider",width:5,height:1,sizing:"horizontal"}}}},"./src/layout/Knob.ts":(A,t,j)=>{/*!****************************!*\
  !*** ./src/layout/Knob.ts ***!
  \****************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractInputItem.ts");/*! ./AbstractInputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"knob",width:1,height:1.75,sizing:"none"}}}},"./src/layout/Layout.ts":(A,t,j)=>{/*!******************************!*\
  !*** ./src/layout/Layout.ts ***!
  \******************************/j.r(t),j.d(t,{default:()=>m});var k=j("./src/layout/HSlider.ts");/*! ./HSlider */var e=j("./src/layout/VSlider.ts");/*! ./VSlider */var E=j("./src/layout/Nentry.ts");/*! ./Nentry */var r=j("./src/layout/Soundfile.ts");/*! ./Soundfile */var G=j("./src/layout/Button.ts");/*! ./Button */var s=j("./src/layout/Checkbox.ts");/*! ./Checkbox */var B=j("./src/layout/Knob.ts");/*! ./Knob */var a=j("./src/layout/Menu.ts");/*! ./Menu */var $=j("./src/layout/Radio.ts");/*! ./Radio */var d=j("./src/layout/Led.ts");/*! ./Led */var h=j("./src/layout/Numerical.ts");/*! ./Numerical */var x=j("./src/layout/HBargraph.ts");/*! ./HBargraph */var o=j("./src/layout/VBargraph.ts");/*! ./VBargraph */var F=j("./src/layout/HGroup.ts");/*! ./HGroup */var i=j("./src/layout/VGroup.ts");/*! ./VGroup */var n=j("./src/layout/TGroup.ts");/*! ./TGroup */class m{static predictType(v){var c,p,f,g,P;if(v.type==="hbargraph"||v.type==="vbargraph"){if((c=v.meta)==null?void 0:c.find((T)=>{var O;return(O=T.style)==null?void 0:O.startsWith("led")}))return"led";if((p=v.meta)==null?void 0:p.find((T)=>{var O;return(O=T.style)==null?void 0:O.startsWith("numerical")}))return"numerical";return v.type}if(v.type==="hslider"||v.type==="nentry"||v.type==="vslider"){if((f=v.meta)==null?void 0:f.find((T)=>{var O;return(O=T.style)==null?void 0:O.startsWith("knob")}))return"knob";if((g=v.meta)==null?void 0:g.find((T)=>{var O;return(O=T.style)==null?void 0:O.startsWith("menu")}))return"menu";if((P=v.meta)==null?void 0:P.find((T)=>{var O;return(O=T.style)==null?void 0:O.startsWith("radio")}))return"radio"}return v.type}static getItem(v){const c={hslider:k.default,vslider:e.default,nentry:E.default,soundfile:r.default,button:G.default,checkbox:s.default,knob:B.default,menu:a.default,radio:$.default,led:d.default,numerical:h.default,hbargraph:x.default,vbargraph:o.default,hgroup:F.default,vgroup:i.default,tgroup:n.default},p=this.predictType(v);return new c[p](v)}static getItems(v){return v.map((c)=>{if("items"in c)c.items=this.getItems(c.items);return this.getItem(c)})}static calc(v){const c=new i.default({items:this.getItems(v),type:"vgroup",label:""},!0);return c.adjust(),c.expand(0,0),c.offset(),c}}},"./src/layout/Led.ts":(A,t,j)=>{/*!***************************!*\
  !*** ./src/layout/Led.ts ***!
  \***************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractOutputItem.ts");/*! ./AbstractOutputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"led",width:1,height:1,sizing:"none"}}}},"./src/layout/Menu.ts":(A,t,j)=>{/*!****************************!*\
  !*** ./src/layout/Menu.ts ***!
  \****************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractInputItem.ts");/*! ./AbstractInputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"menu",width:2,height:1,sizing:"horizontal"}}}},"./src/layout/Nentry.ts":(A,t,j)=>{/*!******************************!*\
  !*** ./src/layout/Nentry.ts ***!
  \******************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractInputItem.ts");/*! ./AbstractInputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"nentry",width:1,height:1,sizing:"none"}}}},"./src/layout/Numerical.ts":(A,t,j)=>{/*!*********************************!*\
  !*** ./src/layout/Numerical.ts ***!
  \*********************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractOutputItem.ts");/*! ./AbstractOutputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"numerical",width:1,height:1,sizing:"none"}}}},"./src/layout/Radio.ts":(A,t,j)=>{/*!*****************************!*\
  !*** ./src/layout/Radio.ts ***!
  \*****************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractInputItem.ts");/*! ./AbstractInputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"radio",width:2,height:2,sizing:"both"}}}},"./src/layout/Soundfile.ts":(A,t,j)=>{/*!*********************************!*\
  !*** ./src/layout/Soundfile.ts ***!
  \*********************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractInputItem.ts");/*! ./AbstractInputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"soundfile",width:2,height:1,sizing:"horizontal"}}}},"./src/layout/TGroup.ts":(A,t,j)=>{/*!******************************!*\
  !*** ./src/layout/TGroup.ts ***!
  \******************************/j.r(t),j.d(t,{default:()=>E});var k=j("./src/layout/AbstractGroup.ts");/*! ./AbstractGroup */const e=class extends k.default{adjust(){this.items.forEach((G)=>{G.adjust(),this.layout.width=Math.max(this.layout.width,G.layout.width+2*k.default.padding),this.layout.height=Math.max(this.layout.height,G.layout.height+2*k.default.padding+e.labelHeight)});const r=this.items.length;if(this.layout.width=Math.max(this.layout.width,r*e.tabLayout.width),this.layout.height+=e.tabLayout.height,this.layout.width<1)this.layout.width+=1;return this}expand(){const r=this.items.length;return this.items.forEach((G)=>{let s=0,B=0;if(G.layout.sizing==="both"||G.layout.sizing==="horizontal")B=this.layout.width-2*k.default.padding-G.layout.width;if(G.layout.sizing==="both"||G.layout.sizing==="vertical")s=this.layout.height-2*k.default.padding-(this.isRoot?0:k.default.labelHeight)-(r?e.tabLayout.height:0)-G.layout.height;G.expand(B,s)}),this}offset(){const{labelHeight:r,padding:G}=k.default,s=G,B=G+(this.isRoot?0:r)+e.tabLayout.height;return this.items.forEach((a)=>{a.layout.offsetLeft=s,a.layout.offsetTop=B,a.layout.left=(this.layout.left||0)+a.layout.offsetLeft,a.layout.top=(this.layout.top||0)+a.layout.offsetTop,a.offset()}),this}};let E=e;E.tabLayout={width:2,height:1}},"./src/layout/VBargraph.ts":(A,t,j)=>{/*!*********************************!*\
  !*** ./src/layout/VBargraph.ts ***!
  \*********************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractOutputItem.ts");/*! ./AbstractOutputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"vbargraph",width:1,height:5,sizing:"vertical"}}}},"./src/layout/VGroup.ts":(A,t,j)=>{/*!******************************!*\
  !*** ./src/layout/VGroup.ts ***!
  \******************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractGroup.ts");/*! ./AbstractGroup */class e extends k.default{adjust(){if(this.items.forEach((E)=>{E.adjust(),this.layout.width=Math.max(this.layout.width,E.layout.width+2*k.default.padding),this.layout.height+=E.layout.height}),this.layout.height+=k.default.spaceBetween*(this.items.length-1),this.layout.width<1)this.layout.width+=1;return this}expand(E,r){let G=0;return this.items.forEach((s)=>{if(s.layout.sizing==="both"||s.layout.sizing==="vertical")G++}),this.items.forEach((s)=>{let B=0,a=0;if(s.layout.sizing==="both"||s.layout.sizing==="horizontal")B=this.layout.width-2*k.default.padding-s.layout.width,s.layout.width+=B;if(s.layout.sizing==="both"||s.layout.sizing==="vertical")a=G?r/G:0,s.layout.height+=a;s.expand(B,a)}),this}offset(){const{labelHeight:E,padding:r,spaceBetween:G}=k.default,s=r;let B=r+(this.isRoot?0:E);const{width:a}=this.layout;return this.items.forEach(($)=>{$.layout.offsetLeft=s,$.layout.offsetTop=B,$.layout.offsetLeft+=(a-$.layout.width)/2-r,$.layout.left=(this.layout.left||0)+$.layout.offsetLeft,$.layout.top=(this.layout.top||0)+$.layout.offsetTop,$.offset(),B+=$.layout.height+G}),this}}},"./src/layout/VSlider.ts":(A,t,j)=>{/*!*******************************!*\
  !*** ./src/layout/VSlider.ts ***!
  \*******************************/j.r(t),j.d(t,{default:()=>e});var k=j("./src/layout/AbstractInputItem.ts");/*! ./AbstractInputItem */class e extends k.default{constructor(){super(...arguments);this.layout={type:"vslider",width:1,height:5,sizing:"vertical"}}}},"./src/components/Base.scss":(A,t,j)=>{/*!**********************************!*\
  !*** ./src/components/Base.scss ***!
  \**********************************/j.r(t)},"./src/components/Button.scss":(A,t,j)=>{/*!************************************!*\
  !*** ./src/components/Button.scss ***!
  \************************************/j.r(t)},"./src/components/Checkbox.scss":(A,t,j)=>{/*!**************************************!*\
  !*** ./src/components/Checkbox.scss ***!
  \**************************************/j.r(t)},"./src/components/Group.scss":(A,t,j)=>{/*!***********************************!*\
  !*** ./src/components/Group.scss ***!
  \***********************************/j.r(t)},"./src/components/HBargraph.scss":(A,t,j)=>{/*!***************************************!*\
  !*** ./src/components/HBargraph.scss ***!
  \***************************************/j.r(t)},"./src/components/HSlider.scss":(A,t,j)=>{/*!*************************************!*\
  !*** ./src/components/HSlider.scss ***!
  \*************************************/j.r(t)},"./src/components/Knob.scss":(A,t,j)=>{/*!**********************************!*\
  !*** ./src/components/Knob.scss ***!
  \**********************************/j.r(t)},"./src/components/Led.scss":(A,t,j)=>{/*!*********************************!*\
  !*** ./src/components/Led.scss ***!
  \*********************************/j.r(t)},"./src/components/Menu.scss":(A,t,j)=>{/*!**********************************!*\
  !*** ./src/components/Menu.scss ***!
  \**********************************/j.r(t)},"./src/components/Nentry.scss":(A,t,j)=>{/*!************************************!*\
  !*** ./src/components/Nentry.scss ***!
  \************************************/j.r(t)},"./src/components/Numerical.scss":(A,t,j)=>{/*!***************************************!*\
  !*** ./src/components/Numerical.scss ***!
  \***************************************/j.r(t)},"./src/components/Radio.scss":(A,t,j)=>{/*!***********************************!*\
  !*** ./src/components/Radio.scss ***!
  \***********************************/j.r(t)},"./src/components/Soundfile.scss":(A,t,j)=>{/*!***************************************!*\
  !*** ./src/components/Soundfile.scss ***!
  \***************************************/j.r(t)},"./src/components/VBargraph.scss":(A,t,j)=>{/*!***************************************!*\
  !*** ./src/components/VBargraph.scss ***!
  \***************************************/j.r(t)},"./src/components/VSlider.scss":(A,t,j)=>{/*!*************************************!*\
  !*** ./src/components/VSlider.scss ***!
  \*************************************/j.r(t)},"./src/index.scss":(A,t,j)=>{/*!************************!*\
  !*** ./src/index.scss ***!
  \************************/j.r(t)}},vB={};(()=>{qj.d=(A,t)=>{for(var j in t)if(qj.o(t,j)&&!qj.o(A,j))Object.defineProperty(A,j,{enumerable:!0,get:t[j]})}})();(()=>{qj.o=(A,t)=>Object.prototype.hasOwnProperty.call(A,t)})();(()=>{qj.r=(A)=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag)Object.defineProperty(A,Symbol.toStringTag,{value:"Module"});Object.defineProperty(A,"__esModule",{value:!0})}})();var Zt={};(()=>{/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/qj.r(Zt),qj.d(Zt,{FaustUI:()=>A.default,instantiate:()=>t.default});var A=qj("./src/FaustUI.ts");/*! ./FaustUI */var t=qj("./src/instantiate.ts");/*! ./instantiate */})();var{FaustUI:$B,instantiate:z$}=Zt;var mB="/*!*******************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Base.scss ***!\n  \\*******************************************************************************************************************/\n.faust-ui-component {\n  display: flex;\n  position: absolute;\n  flex-direction: column;\n  overflow: hidden;\n}\n.faust-ui-component:focus {\n  outline: none;\n}\n.faust-ui-component > .faust-ui-component-label {\n  position: relative;\n  margin-top: 4px;\n  width: 100%;\n  user-select: none;\n}\n.faust-ui-component > .faust-ui-component-label > canvas {\n  position: relative;\n  display: block;\n  max-width: 100%;\n  max-height: 100%;\n}\n.faust-ui-component input {\n  box-shadow: none;\n}\n/*!**********************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/VSlider.scss ***!\n  \\**********************************************************************************************************************/\n.faust-ui-component.faust-ui-component-vslider {\n  align-items: center;\n}\n.faust-ui-component.faust-ui-component-vslider > .faust-ui-component-label {\n  flex: 0 0 auto;\n}\n.faust-ui-component.faust-ui-component-vslider > .faust-ui-component-vslider-flexdiv {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  width: 100%;\n  height: auto;\n}\n.faust-ui-component.faust-ui-component-vslider > .faust-ui-component-vslider-flexdiv > .faust-ui-component-vslider-canvasdiv {\n  position: relative;\n  display: block;\n  flex: 1 1 auto;\n  width: 100%;\n}\n.faust-ui-component.faust-ui-component-vslider > .faust-ui-component-vslider-flexdiv > .faust-ui-component-vslider-canvasdiv > canvas {\n  position: absolute;\n  display: block;\n  height: 100%;\n  width: 100%;\n  touch-action: none;\n}\n.faust-ui-component.faust-ui-component-vslider > .faust-ui-component-vslider-flexdiv input {\n  position: relative;\n  display: block;\n  flex: 0 1 auto;\n  text-align: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  margin: 5px auto auto auto;\n  border-width: 0px;\n  border-radius: 4px;\n  height: 5%;\n  max-width: calc(100% - 8px);\n  padding: 2px 4px;\n}\n.faust-ui-component.faust-ui-component-vslider > .faust-ui-component-vslider-flexdiv input::-webkit-inner-spin-button, .faust-ui-component.faust-ui-component-vslider > .faust-ui-component-vslider-flexdiv input::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n/*!**********************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/HSlider.scss ***!\n  \\**********************************************************************************************************************/\n.faust-ui-component.faust-ui-component-hslider > .faust-ui-component-label {\n  flex: 0 0 auto;\n}\n.faust-ui-component.faust-ui-component-hslider > .faust-ui-component-hslider-flexdiv {\n  position: relative;\n  display: flex;\n  flex-direction: row-reverse;\n  flex: 1 1 auto;\n  width: 100%;\n  height: auto;\n}\n.faust-ui-component.faust-ui-component-hslider > .faust-ui-component-hslider-flexdiv > .faust-ui-component-hslider-canvasdiv {\n  position: relative;\n  display: block;\n  flex: 1 1 auto;\n  height: 100%;\n  margin: auto;\n}\n.faust-ui-component.faust-ui-component-hslider > .faust-ui-component-hslider-flexdiv > .faust-ui-component-hslider-canvasdiv > canvas {\n  position: absolute;\n  display: block;\n  height: 100%;\n  width: 100%;\n  touch-action: none;\n}\n.faust-ui-component.faust-ui-component-hslider > .faust-ui-component-hslider-flexdiv > input {\n  position: relative;\n  display: block;\n  flex: 0 1 auto;\n  text-align: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  margin: auto 5px auto auto;\n  border-width: 0px;\n  border-radius: 4px;\n  width: calc(20% - 13px);\n  padding: 2px 4px;\n}\n.faust-ui-component.faust-ui-component-hslider > .faust-ui-component-hslider-flexdiv > input::-webkit-inner-spin-button, .faust-ui-component.faust-ui-component-hslider > .faust-ui-component-hslider-flexdiv > input::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n/*!*********************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Nentry.scss ***!\n  \\*********************************************************************************************************************/\n.faust-ui-component.faust-ui-component-nentry {\n  align-items: center;\n}\n.faust-ui-component.faust-ui-component-nentry input {\n  margin: 0px;\n  text-align: center;\n  border-width: 1px;\n  border-radius: 4px;\n  padding: 2px 4px;\n  width: calc(100% - 8px);\n}\n.faust-ui-component.faust-ui-component-nentry input::-webkit-inner-spin-button, .faust-ui-component.faust-ui-component-nentry input::-webkit-outer-spin-button {\n  opacity: 1;\n}\n/*!************************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Soundfile.scss ***!\n  \\************************************************************************************************************************/\n.faust-ui-component.faust-ui-component-soundfile > div {\n  display: flex;\n  position: relative;\n  cursor: pointer;\n  border-width: 1px;\n  text-align: center;\n  border-radius: 4px;\n  flex: 1 0 auto;\n  border-style: solid;\n}\n.faust-ui-component.faust-ui-component-soundfile > div > span {\n  user-select: none;\n  margin: auto;\n}\n/*!*********************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Button.scss ***!\n  \\*********************************************************************************************************************/\n.faust-ui-component.faust-ui-component-button > div {\n  display: flex;\n  position: relative;\n  cursor: pointer;\n  border-width: 1px;\n  text-align: center;\n  border-radius: 4px;\n  flex: 1 0 auto;\n  border-style: solid;\n  touch-action: none;\n}\n.faust-ui-component.faust-ui-component-button > div > span {\n  user-select: none;\n  margin: auto;\n}\n/*!***********************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Checkbox.scss ***!\n  \\***********************************************************************************************************************/\n.faust-ui-component.faust-ui-component-checkbox > div {\n  display: flex;\n  position: relative;\n  cursor: pointer;\n  border-width: 1px;\n  text-align: center;\n  border-radius: 1px;\n  flex: 1 0 auto;\n  border-style: solid;\n  touch-action: none;\n}\n.faust-ui-component.faust-ui-component-checkbox > div > span {\n  margin: auto;\n  user-select: none;\n}\n/*!*******************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Knob.scss ***!\n  \\*******************************************************************************************************************/\n.faust-ui-component.faust-ui-component-knob {\n  align-items: center;\n}\n.faust-ui-component.faust-ui-component-knob > canvas {\n  position: relative;\n  display: block;\n  flex: 1 1 auto;\n  min-height: 50%;\n  width: 100%;\n  touch-action: none;\n}\n.faust-ui-component.faust-ui-component-knob > input {\n  position: relative;\n  display: block;\n  flex: 0 1 auto;\n  text-align: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  margin: 0px;\n  border-width: 0px;\n  border-radius: 4px;\n  max-width: calc(100% - 8px);\n  padding: 2px 4px;\n}\n.faust-ui-component.faust-ui-component-knob > input::-webkit-inner-spin-button, .faust-ui-component.faust-ui-component-knob > input::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n/*!*******************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Menu.scss ***!\n  \\*******************************************************************************************************************/\n.faust-ui-component.faust-ui-component-menu {\n  align-items: center;\n}\n.faust-ui-component.faust-ui-component-menu > select {\n  margin: 0px;\n  text-align: center;\n  border-width: 1px;\n  border-radius: 4px;\n  padding: 2px 4px;\n  width: calc(100% - 8px);\n}\n/*!********************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Radio.scss ***!\n  \\********************************************************************************************************************/\n.faust-ui-component.faust-ui-component-radio {\n  align-items: center;\n}\n.faust-ui-component.faust-ui-component-radio > .faust-ui-component-label {\n  flex: 0 0 auto;\n  margin-top: auto;\n}\n.faust-ui-component.faust-ui-component-radio > .faust-ui-component-radio-group {\n  flex: 0 1 auto;\n  margin-bottom: auto;\n  border-width: 1px;\n  border-radius: 4px;\n  padding: 2px 4px;\n  width: calc(100% - 8px);\n  overflow: auto;\n}\n.faust-ui-component.faust-ui-component-radio > .faust-ui-component-radio-group > div {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n/*!******************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Led.scss ***!\n  \\******************************************************************************************************************/\n.faust-ui-component.faust-ui-component-led {\n  align-items: center;\n}\n.faust-ui-component.faust-ui-component-led > .faust-ui-component-label {\n  flex: 0 0 auto;\n}\n.faust-ui-component.faust-ui-component-led > .faust-ui-component-led-canvasdiv {\n  position: relative;\n  display: block;\n  flex: 1 1 auto;\n  width: 100%;\n}\n.faust-ui-component.faust-ui-component-led > .faust-ui-component-led-canvasdiv > canvas {\n  position: absolute;\n  display: block;\n  height: 100%;\n  width: 100%;\n  touch-action: none;\n}\n/*!************************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Numerical.scss ***!\n  \\************************************************************************************************************************/\n.faust-ui-component.faust-ui-component-numerical {\n  align-items: center;\n}\n.faust-ui-component.faust-ui-component-numerical > input {\n  position: relative;\n  display: block;\n  flex: 0 1 auto;\n  text-align: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  margin: auto;\n  border-width: 0px;\n  border-radius: 4px;\n  width: calc(100% - 8px);\n  padding: 2px 4px;\n}\n/*!************************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/VBargraph.scss ***!\n  \\************************************************************************************************************************/\n.faust-ui-component.faust-ui-component-vbargraph {\n  align-items: center;\n}\n.faust-ui-component.faust-ui-component-vbargraph > .faust-ui-component-label {\n  flex: 0 0 auto;\n}\n.faust-ui-component.faust-ui-component-vbargraph > .faust-ui-component-vbargraph-flexdiv {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  width: 100%;\n  height: inherit;\n}\n.faust-ui-component.faust-ui-component-vbargraph > .faust-ui-component-vbargraph-flexdiv > .faust-ui-component-vbargraph-canvasdiv {\n  position: relative;\n  display: block;\n  flex: 1 1 auto;\n  width: 100%;\n}\n.faust-ui-component.faust-ui-component-vbargraph > .faust-ui-component-vbargraph-flexdiv > .faust-ui-component-vbargraph-canvasdiv > canvas {\n  position: absolute;\n  display: block;\n  height: 100%;\n  width: 100%;\n  touch-action: none;\n}\n.faust-ui-component.faust-ui-component-vbargraph > .faust-ui-component-vbargraph-flexdiv > input {\n  position: relative;\n  display: block;\n  flex: 0 1 auto;\n  text-align: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  margin: 5px auto auto auto;\n  border-width: 0px;\n  border-radius: 4px;\n  height: 5%;\n  width: calc(100% - 8px);\n  padding: 2px 4px;\n}\n/*!************************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/HBargraph.scss ***!\n  \\************************************************************************************************************************/\n.faust-ui-component.faust-ui-component-hbargraph > .faust-ui-component-label {\n  flex: 0 0 auto;\n}\n.faust-ui-component.faust-ui-component-hbargraph > .faust-ui-component-hbargraph-flexdiv {\n  position: relative;\n  display: flex;\n  flex-direction: row-reverse;\n  flex: 1 1 auto;\n  width: 100%;\n  height: auto;\n}\n.faust-ui-component.faust-ui-component-hbargraph > .faust-ui-component-hbargraph-flexdiv > .faust-ui-component-hbargraph-canvasdiv {\n  position: relative;\n  display: block;\n  flex: 1 1 auto;\n  height: 100%;\n  margin: auto;\n}\n.faust-ui-component.faust-ui-component-hbargraph > .faust-ui-component-hbargraph-flexdiv > .faust-ui-component-hbargraph-canvasdiv > canvas {\n  position: absolute;\n  display: block;\n  height: 100%;\n  width: 100%;\n  touch-action: none;\n}\n.faust-ui-component.faust-ui-component-hbargraph > .faust-ui-component-hbargraph-flexdiv > input {\n  position: relative;\n  display: block;\n  flex: 0 1 auto;\n  text-align: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  margin: auto 5px auto auto;\n  border-width: 0px;\n  border-radius: 4px;\n  width: calc(20% - 13px);\n  padding: 2px 4px;\n}\n/*!********************************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/components/Group.scss ***!\n  \\********************************************************************************************************************/\n.faust-ui-group {\n  position: absolute;\n  display: block;\n  background-color: rgba(80, 80, 80, 0.75);\n  border-radius: 4px;\n  border: 1px rgba(255, 255, 255, 0.25) solid;\n}\n.faust-ui-group > .faust-ui-group-label {\n  position: relative;\n  margin: 4px;\n  width: calc(100% - 8px);\n  user-select: none;\n}\n.faust-ui-group > .faust-ui-group-label > canvas {\n  position: relative;\n  display: block;\n  max-width: 100%;\n  max-height: 100%;\n}\n.faust-ui-group .faust-ui-tgroup-tabs {\n  position: absolute;\n  display: inline-block;\n  white-space: nowrap;\n  left: 0px;\n}\n.faust-ui-group .faust-ui-tgroup-tabs .faust-ui-tgroup-tab {\n  position: relative;\n  display: inline-block;\n  border-radius: 5px;\n  cursor: pointer;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  user-select: none;\n  margin: 10px;\n  text-align: center;\n  background-color: rgba(255, 255, 255, 0.5);\n}\n.faust-ui-group .faust-ui-tgroup-tabs .faust-ui-tgroup-tab:hover {\n  background-color: rgb(255, 255, 255);\n}\n.faust-ui-group .faust-ui-tgroup-tabs .faust-ui-tgroup-tab.active {\n  background-color: rgb(40, 40, 40);\n  color: white;\n}\n/*!*********************************************************************************************************!*\\\n  !*** css ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/index.scss ***!\n  \\*********************************************************************************************************/\n.faust-ui-root {\n  margin: 0px auto;\n  flex: 1 0 auto;\n  position: relative !important;\n  background-color: transparent !important;\n  border: none !important;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\";\n}\n\n/*# sourceMappingURL=index.css.map*/";class g7 extends dj{A;t;static styles=n7`
		:host {
			display: block;
			width: 100%;
			height: 100%;
			overflow: hidden;
			position: relative;
		}
		:host>div {
			margin: 0;
			position: absolute;
			overflow: auto;
			display: flex;
			flex-direction: column;
			width: 100%;
			height: 100%;
		}
		${bt(mB)}
	`;root;constructor(A,t){super();this.meta=A;this.wasm=t}init=async(A)=>{A.destination.channelInterpretation="discrete",A.suspend(),this.wasm=rq(this.wasm);const t=new WebAssembly.Module(this.wasm),j=JSON.stringify(this.meta),k=new uB,e={module:t,code:this.wasm,json:j,soundfiles:{}},E=await k.createNode(A,this.meta.name,e,!0,512),r=document.createElement("div");this.root=r,this.shadowRoot.appendChild(r);const G=new $B({ui:E.getUI(),root:r,listenWindowMessage:!1,listenWindowResize:!0});this.root.style.transform=`scale(${localStorage.getItem("zoom")??100}%)`,this.root.style.transition="all .25s ease",G.paramChangeByUI=E.setParamValue.bind(E),E.setOutputParamHandler(G.paramChangeByDSP.bind(G)),r.style.minWidth=`${G.minWidth}px`,r.style.minHeight=`${G.minHeight}px`,E.connect(A.destination)};updated(){if(this.root)this.root.style.transform=`scale(${localStorage.getItem("zoom")??100}%)`}}g7=T7([Lt("faust-renderer")],g7);var Yt=globalThis,Ak=Yt.ShadowRoot&&(Yt.ShadyCSS===void 0||Yt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,dB=Symbol(),cB=new WeakMap;class kE{constructor(A,t,j){if(this._$cssResult$=!0,j!==dB)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=A,this.t=t}get styleSheet(){let A=this.o;const t=this.t;if(Ak&&A===void 0){const j=t!==void 0&&t.length===1;j&&(A=cB.get(t)),A===void 0&&((this.o=A=new CSSStyleSheet).replaceSync(this.cssText),j&&cB.set(t,A))}return A}toString(){return this.cssText}}var pB=(A)=>new kE(typeof A=="string"?A:A+"",void 0,dB);var eE=(A,t)=>{if(Ak)A.adoptedStyleSheets=t.map((j)=>j instanceof CSSStyleSheet?j:j.styleSheet);else for(let j of t){const k=document.createElement("style"),e=Yt.litNonce;e!==void 0&&k.setAttribute("nonce",e),k.textContent=j.cssText,A.appendChild(k)}},jk=Ak?(A)=>A:(A)=>A instanceof CSSStyleSheet?((t)=>{let j="";for(let k of t.cssRules)j+=k.cssText;return pB(j)})(A):A;var{is:pu,defineProperty:hu,getOwnPropertyDescriptor:Iu,getOwnPropertyNames:xu,getOwnPropertySymbols:fu,getPrototypeOf:Hu}=Object,tk=globalThis,hB=tk.trustedTypes,gu=hB?hB.emptyScript:"",_u=tk.reactiveElementPolyfillSupport,_7=(A,t)=>A,EE={toAttribute(A,t){switch(t){case Boolean:A=A?gu:null;break;case Object:case Array:A=A==null?A:JSON.stringify(A)}return A},fromAttribute(A,t){let j=A;switch(t){case Boolean:j=A!==null;break;case Number:j=A===null?null:Number(A);break;case Object:case Array:try{j=JSON.parse(A)}catch(k){j=null}}return j}},xB=(A,t)=>!pu(A,t),IB={attribute:!0,type:String,converter:EE,reflect:!1,hasChanged:xB};Symbol.metadata??=Symbol("metadata"),tk.litPropertyMetadata??=new WeakMap;class Tj extends HTMLElement{static addInitializer(A){this._$Ei(),(this.l??=[]).push(A)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(A,t=IB){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(A,t),!t.noAccessor){const j=Symbol(),k=this.getPropertyDescriptor(A,j,t);k!==void 0&&hu(this.prototype,A,k)}}static getPropertyDescriptor(A,t,j){const{get:k,set:e}=Iu(this.prototype,A)??{get(){return this[t]},set(E){this[t]=E}};return{get(){return k?.call(this)},set(E){const r=k?.call(this);e.call(this,E),this.requestUpdate(A,r,j)},configurable:!0,enumerable:!0}}static getPropertyOptions(A){return this.elementProperties.get(A)??IB}static _$Ei(){if(this.hasOwnProperty(_7("elementProperties")))return;const A=Hu(this);A.finalize(),A.l!==void 0&&(this.l=[...A.l]),this.elementProperties=new Map(A.elementProperties)}static finalize(){if(this.hasOwnProperty(_7("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(_7("properties"))){const t=this.properties,j=[...xu(t),...fu(t)];for(let k of j)this.createProperty(k,t[k])}const A=this[Symbol.metadata];if(A!==null){const t=litPropertyMetadata.get(A);if(t!==void 0)for(let[j,k]of t)this.elementProperties.set(j,k)}this._$Eh=new Map;for(let[t,j]of this.elementProperties){const k=this._$Eu(t,j);k!==void 0&&this._$Eh.set(k,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(A){const t=[];if(Array.isArray(A)){const j=new Set(A.flat(1/0).reverse());for(let k of j)t.unshift(jk(k))}else A!==void 0&&t.push(jk(A));return t}static _$Eu(A,t){const j=t.attribute;return j===!1?void 0:typeof j=="string"?j:typeof A=="string"?A.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((A)=>this.enableUpdating=A),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((A)=>A(this))}addController(A){(this._$EO??=new Set).add(A),this.renderRoot!==void 0&&this.isConnected&&A.hostConnected?.()}removeController(A){this._$EO?.delete(A)}_$E_(){const A=new Map,t=this.constructor.elementProperties;for(let j of t.keys())this.hasOwnProperty(j)&&(A.set(j,this[j]),delete this[j]);A.size>0&&(this._$Ep=A)}createRenderRoot(){const A=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return eE(A,this.constructor.elementStyles),A}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((A)=>A.hostConnected?.())}enableUpdating(A){}disconnectedCallback(){this._$EO?.forEach((A)=>A.hostDisconnected?.())}attributeChangedCallback(A,t,j){this._$AK(A,j)}_$EC(A,t){const j=this.constructor.elementProperties.get(A),k=this.constructor._$Eu(A,j);if(k!==void 0&&j.reflect===!0){const e=(j.converter?.toAttribute!==void 0?j.converter:EE).toAttribute(t,j.type);this._$Em=A,e==null?this.removeAttribute(k):this.setAttribute(k,e),this._$Em=null}}_$AK(A,t){const j=this.constructor,k=j._$Eh.get(A);if(k!==void 0&&this._$Em!==k){const e=j.getPropertyOptions(k),E=typeof e.converter=="function"?{fromAttribute:e.converter}:e.converter?.fromAttribute!==void 0?e.converter:EE;this._$Em=k,this[k]=E.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(A,t,j){if(A!==void 0){if(j??=this.constructor.getPropertyOptions(A),!(j.hasChanged??xB)(this[A],t))return;this.P(A,t,j)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(A,t,j){this._$AL.has(A)||this._$AL.set(A,t),j.reflect===!0&&this._$Em!==A&&(this._$Ej??=new Set).add(A)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const A=this.scheduleUpdate();return A!=null&&await A,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[k,e]of this._$Ep)this[k]=e;this._$Ep=void 0}const j=this.constructor.elementProperties;if(j.size>0)for(let[k,e]of j)e.wrapped!==!0||this._$AL.has(k)||this[k]===void 0||this.P(k,this[k],e)}let A=!1;const t=this._$AL;try{A=this.shouldUpdate(t),A?(this.willUpdate(t),this._$EO?.forEach((j)=>j.hostUpdate?.()),this.update(t)):this._$EU()}catch(j){throw A=!1,this._$EU(),j}A&&this._$AE(t)}willUpdate(A){}_$AE(A){this._$EO?.forEach((t)=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(A)),this.updated(A)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(A){return!0}update(A){this._$Ej&&=this._$Ej.forEach((t)=>this._$EC(t,this[t])),this._$EU()}updated(A){}firstUpdated(A){}}Tj.elementStyles=[],Tj.shadowRootOptions={mode:"open"},Tj[_7("elementProperties")]=new Map,Tj[_7("finalized")]=new Map,_u?.({ReactiveElement:Tj}),(tk.reactiveElementVersions??=[]).push("2.0.4");function yB(A,t){if(!lE(A)||!A.hasOwnProperty("raw"))throw Error("invalid template strings array");return fB!==void 0?fB.createHTML(t):t}function N6(A,t,j=A,k){if(t===F6)return t;let e=k!==void 0?j._$Co?.[k]:j._$Cl;const E=M7(t)?void 0:t._$litDirective$;return e?.constructor!==E&&(e?._$AO?.(!1),E===void 0?e=void 0:(e=new E(A),e._$AT(A,j,k)),k!==void 0?(j._$Co??=[])[k]=e:j._$Cl=e),e!==void 0&&(t=N6(A,e._$AS(A,t.values),e,k)),t}var GE=globalThis,kk=GE.trustedTypes,fB=kk?kk.createPolicy("lit-html",{createHTML:(A)=>A}):void 0;var Nj=`lit\$${Math.random().toFixed(9).slice(2)}\$`,MB="?"+Nj,Ou=`<${MB}>`,s6=document,K7=()=>s6.createComment(""),M7=(A)=>A===null||typeof A!="object"&&typeof A!="function",lE=Array.isArray,Ku=(A)=>lE(A)||typeof A?.[Symbol.iterator]=="function";var O7=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,HB=/-->/g,gB=/>/g,B6=RegExp(`>|[ \t\n\f\r](?:([^\\s"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|\$)`,"g"),_B=/'/g,OB=/"/g,bB=/^(?:script|style|textarea|title)$/i,rE=(A)=>(t,...j)=>({_$litType$:A,strings:t,values:j}),pm=rE(1),hm=rE(2),Im=rE(3),F6=Symbol.for("lit-noChange"),KA=Symbol.for("lit-nothing"),KB=new WeakMap,a6=s6.createTreeWalker(s6,129),Mu=(A,t)=>{const j=A.length-1,k=[];let e,E=t===2?"<svg>":t===3?"<math>":"",r=O7;for(let G=0;G<j;G++){const s=A[G];let B,a,$=-1,d=0;for(;d<s.length&&(r.lastIndex=d,a=r.exec(s),a!==null);)d=r.lastIndex,r===O7?a[1]==="!--"?r=HB:a[1]!==void 0?r=gB:a[2]!==void 0?(bB.test(a[2])&&(e=RegExp("</"+a[2],"g")),r=B6):a[3]!==void 0&&(r=B6):r===B6?a[0]===">"?(r=e??O7,$=-1):a[1]===void 0?$=-2:($=r.lastIndex-a[2].length,B=a[1],r=a[3]===void 0?B6:a[3]==='"'?OB:_B):r===OB||r===_B?r=B6:r===HB||r===gB?r=O7:(r=B6,e=void 0);const h=r===B6&&A[G+1].startsWith("/>")?" ":"";E+=r===O7?s+Ou:$>=0?(k.push(B),s.slice(0,$)+"$lit$"+s.slice($)+Nj+h):s+Nj+($===-2?G:h)}return[yB(A,E+(A[j]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),k]};class b7{constructor({strings:A,_$litType$:t},j){let k;this.parts=[];let e=0,E=0;const r=A.length-1,G=this.parts,[s,B]=Mu(A,t);if(this.el=b7.createElement(s,j),a6.currentNode=this.el.content,t===2||t===3){const a=this.el.content.firstChild;a.replaceWith(...a.childNodes)}for(;(k=a6.nextNode())!==null&&G.length<r;){if(k.nodeType===1){if(k.hasAttributes())for(let a of k.getAttributeNames())if(a.endsWith("$lit$")){const $=B[E++],d=k.getAttribute(a).split(Nj),h=/([.?@])?(.*)/.exec($);G.push({type:1,index:e,name:h[2],strings:d,ctor:h[1]==="."?DB:h[1]==="?"?PB:h[1]==="@"?LB:w7}),k.removeAttribute(a)}else a.startsWith(Nj)&&(G.push({type:6,index:e}),k.removeAttribute(a));if(bB.test(k.tagName)){const a=k.textContent.split(Nj),$=a.length-1;if($>0){k.textContent=kk?kk.emptyScript:"";for(let d=0;d<$;d++)k.append(a[d],K7()),a6.nextNode(),G.push({type:2,index:++e});k.append(a[$],K7())}}}else if(k.nodeType===8)if(k.data===MB)G.push({type:2,index:e});else{let a=-1;for(;(a=k.data.indexOf(Nj,a+1))!==-1;)G.push({type:7,index:e}),a+=Nj.length-1}e++}}static createElement(A,t){const j=s6.createElement("template");return j.innerHTML=A,j}}class wB{constructor(A,t){this._$AV=[],this._$AN=void 0,this._$AD=A,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(A){const{el:{content:t},parts:j}=this._$AD,k=(A?.creationScope??s6).importNode(t,!0);a6.currentNode=k;let e=a6.nextNode(),E=0,r=0,G=j[0];for(;G!==void 0;){if(E===G.index){let s;G.type===2?s=new y7(e,e.nextSibling,this,A):G.type===1?s=new G.ctor(e,G.name,G.strings,this,A):G.type===6&&(s=new TB(e,this,A)),this._$AV.push(s),G=j[++r]}E!==G?.index&&(e=a6.nextNode(),E++)}return a6.currentNode=s6,k}p(A){let t=0;for(let j of this._$AV)j!==void 0&&(j.strings!==void 0?(j._$AI(A,j,t),t+=j.strings.length-2):j._$AI(A[t])),t++}}class y7{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(A,t,j,k){this.type=2,this._$AH=KA,this._$AN=void 0,this._$AA=A,this._$AB=t,this._$AM=j,this.options=k,this._$Cv=k?.isConnected??!0}get parentNode(){let A=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&A?.nodeType===11&&(A=t.parentNode),A}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(A,t=this){A=N6(this,A,t),M7(A)?A===KA||A==null||A===""?(this._$AH!==KA&&this._$AR(),this._$AH=KA):A!==this._$AH&&A!==F6&&this._(A):A._$litType$!==void 0?this.$(A):A.nodeType!==void 0?this.T(A):Ku(A)?this.k(A):this._(A)}O(A){return this._$AA.parentNode.insertBefore(A,this._$AB)}T(A){this._$AH!==A&&(this._$AR(),this._$AH=this.O(A))}_(A){this._$AH!==KA&&M7(this._$AH)?this._$AA.nextSibling.data=A:this.T(s6.createTextNode(A)),this._$AH=A}$(A){const{values:t,_$litType$:j}=A,k=typeof j=="number"?this._$AC(A):(j.el===void 0&&(j.el=b7.createElement(yB(j.h,j.h[0]),this.options)),j);if(this._$AH?._$AD===k)this._$AH.p(t);else{const e=new wB(k,this),E=e.u(this.options);e.p(t),this.T(E),this._$AH=e}}_$AC(A){let t=KB.get(A.strings);return t===void 0&&KB.set(A.strings,t=new b7(A)),t}k(A){lE(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let j,k=0;for(let e of A)k===t.length?t.push(j=new y7(this.O(K7()),this.O(K7()),this,this.options)):j=t[k],j._$AI(e),k++;k<t.length&&(this._$AR(j&&j._$AB.nextSibling,k),t.length=k)}_$AR(A=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);A&&A!==this._$AB;){const j=A.nextSibling;A.remove(),A=j}}setConnected(A){this._$AM===void 0&&(this._$Cv=A,this._$AP?.(A))}}class w7{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(A,t,j,k,e){this.type=1,this._$AH=KA,this._$AN=void 0,this.element=A,this.name=t,this._$AM=k,this.options=e,j.length>2||j[0]!==""||j[1]!==""?(this._$AH=Array(j.length-1).fill(new String),this.strings=j):this._$AH=KA}_$AI(A,t=this,j,k){const e=this.strings;let E=!1;if(e===void 0)A=N6(this,A,t,0),E=!M7(A)||A!==this._$AH&&A!==F6,E&&(this._$AH=A);else{const r=A;let G,s;for(A=e[0],G=0;G<e.length-1;G++)s=N6(this,r[j+G],t,G),s===F6&&(s=this._$AH[G]),E||=!M7(s)||s!==this._$AH[G],s===KA?A=KA:A!==KA&&(A+=(s??"")+e[G+1]),this._$AH[G]=s}E&&!k&&this.j(A)}j(A){A===KA?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,A??"")}}class DB extends w7{constructor(){super(...arguments),this.type=3}j(A){this.element[this.name]=A===KA?void 0:A}}class PB extends w7{constructor(){super(...arguments),this.type=4}j(A){this.element.toggleAttribute(this.name,!!A&&A!==KA)}}class LB extends w7{constructor(A,t,j,k,e){super(A,t,j,k,e),this.type=5}_$AI(A,t=this){if((A=N6(this,A,t,0)??KA)===F6)return;const j=this._$AH,k=A===KA&&j!==KA||A.capture!==j.capture||A.once!==j.once||A.passive!==j.passive,e=A!==KA&&(j===KA||k);k&&this.element.removeEventListener(this.name,this,j),e&&this.element.addEventListener(this.name,this,A),this._$AH=A}handleEvent(A){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,A):this._$AH.handleEvent(A)}}class TB{constructor(A,t,j){this.element=A,this.type=6,this._$AN=void 0,this._$AM=t,this.options=j}get _$AU(){return this._$AM._$AU}_$AI(A){N6(this,A)}}var bu=GE.litHtmlPolyfillSupport;bu?.(b7,y7),(GE.litHtmlVersions??=[]).push("3.2.1");var ek=(A,t,j)=>{const k=j?.renderBefore??t;let e=k._$litPart$;if(e===void 0){const E=j?.renderBefore??null;k._$litPart$=e=new y7(t.insertBefore(K7(),E),E,void 0,j??{})}return e._$AI(A),e};class D7 extends Tj{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const A=super.createRenderRoot();return this.renderOptions.renderBefore??=A.firstChild,A}update(A){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(A),this._$Do=ek(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return F6}}D7._$litElement$=!0,D7.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:D7});var yu=globalThis.litElementPolyfillSupport;yu?.({LitElement:D7});(globalThis.litElementVersions??=[]).push("4.1.1");window.init=async(A,t)=>{const j=async()=>{switch(A.type){case"cmajor":return new H7(JSON.parse(await G.readText(s.path)),B.version,B.code,E);case"faust":return new g7(B.json,B.wasm)}},k=document.location.pathname.substring(2),[e,E]=k.substring(0,k.indexOf("/")).split("$"),G=await new sk("CmajPlayground").getVolume(e),s=await G.getById(E),B=A.build,a=document.getElementById("preview-container"),$=await j();ek($,a),await $.init(t)};

//# debugId=CD92786B859DF1D264756E2164756E21
//# sourceMappingURL=previews.js.map
